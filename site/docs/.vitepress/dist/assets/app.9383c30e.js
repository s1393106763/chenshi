/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function il(i){const s=Object.create(null);for(const n of i.split(","))s[n]=1;return n=>n in s}const Je={},sr=[],un=()=>{},ef=()=>!1,ts=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),rl=i=>i.startsWith("onUpdate:"),ft=Object.assign,sl=(i,s)=>{const n=i.indexOf(s);n>-1&&i.splice(n,1)},hv=Object.prototype.hasOwnProperty,Ke=(i,s)=>hv.call(i,s),we=Array.isArray,ar=i=>va(i)==="[object Map]",tf=i=>va(i)==="[object Set]",Ie=i=>typeof i=="function",ut=i=>typeof i=="string",Yn=i=>typeof i=="symbol",rt=i=>i!==null&&typeof i=="object",nf=i=>(rt(i)||Ie(i))&&Ie(i.then)&&Ie(i.catch),rf=Object.prototype.toString,va=i=>rf.call(i),dv=i=>va(i).slice(8,-1),sf=i=>va(i)==="[object Object]",al=i=>ut(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,xi=il(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pa=i=>{const s=Object.create(null);return n=>s[n]||(s[n]=i(n))},vv=/-\w/g,fn=pa(i=>i.replace(vv,s=>s.slice(1).toUpperCase())),pv=/\B([A-Z])/g,Fi=pa(i=>i.replace(pv,"-$1").toLowerCase()),ga=pa(i=>i.charAt(0).toUpperCase()+i.slice(1)),Ba=pa(i=>i?`on${ga(i)}`:""),ci=(i,s)=>!Object.is(i,s),Fa=(i,...s)=>{for(let n=0;n<i.length;n++)i[n](...s)},af=(i,s,n,t=!1)=>{Object.defineProperty(i,s,{configurable:!0,enumerable:!1,writable:t,value:n})},gv=i=>{const s=parseFloat(i);return isNaN(s)?i:s},mv=i=>{const s=ut(i)?Number(i):NaN;return isNaN(s)?i:s};let Zl;const ma=()=>Zl||(Zl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xn(i){if(we(i)){const s={};for(let n=0;n<i.length;n++){const t=i[n],e=ut(t)?Sv(t):xn(t);if(e)for(const r in e)s[r]=e[r]}return s}else if(ut(i)||rt(i))return i}const yv=/;(?![^(]*\))/g,_v=/:([^]+)/,bv=/\/\*[^]*?\*\//g;function Sv(i){const s={};return i.replace(bv,"").split(yv).forEach(n=>{if(n){const t=n.split(_v);t.length>1&&(s[t[0].trim()]=t[1].trim())}}),s}function be(i){let s="";if(ut(i))s=i;else if(we(i))for(let n=0;n<i.length;n++){const t=be(i[n]);t&&(s+=t+" ")}else if(rt(i))for(const n in i)i[n]&&(s+=n+" ");return s.trim()}const Ev="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",kv=il(Ev);function of(i){return!!i||i===""}const lf=i=>!!(i&&i.__v_isRef===!0),Ne=i=>ut(i)?i:i==null?"":we(i)||rt(i)&&(i.toString===rf||!Ie(i.toString))?lf(i)?Ne(i.value):JSON.stringify(i,uf,2):String(i),uf=(i,s)=>lf(s)?uf(i,s.value):ar(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((n,[t,e],r)=>(n[Ua(t,r)+" =>"]=e,n),{})}:tf(s)?{[`Set(${s.size})`]:[...s.values()].map(n=>Ua(n))}:Yn(s)?Ua(s):rt(s)&&!we(s)&&!sf(s)?String(s):s,Ua=(i,s="")=>{var n;return Yn(i)?`Symbol(${(n=i.description)!=null?n:s})`:i};function wv(i){return i==null?"initial":typeof i=="string"?i===""?" ":i:String(i)}/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Tt;class cf{constructor(s=!1){this.detached=s,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Tt,!s&&Tt&&(this.index=(Tt.scopes||(Tt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let s,n;if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].pause();for(s=0,n=this.effects.length;s<n;s++)this.effects[s].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let s,n;if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].resume();for(s=0,n=this.effects.length;s<n;s++)this.effects[s].resume()}}run(s){if(this._active){const n=Tt;try{return Tt=this,s()}finally{Tt=n}}}on(){++this._on===1&&(this.prevScope=Tt,Tt=this)}off(){this._on>0&&--this._on===0&&(Tt=this.prevScope,this.prevScope=void 0)}stop(s){if(this._active){this._active=!1;let n,t;for(n=0,t=this.effects.length;n<t;n++)this.effects[n].stop();for(this.effects.length=0,n=0,t=this.cleanups.length;n<t;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!s){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function Tv(i){return new cf(i)}function ff(){return Tt}function Cv(i,s=!1){Tt&&Tt.cleanups.push(i)}let nt;const Va=new WeakSet;class hf{constructor(s){this.fn=s,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Tt&&Tt.active&&Tt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Va.has(this)&&(Va.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,eu(this),pf(this);const s=nt,n=vn;nt=this,vn=!0;try{return this.fn()}finally{gf(this),nt=s,vn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let s=this.deps;s;s=s.nextDep)ul(s);this.deps=this.depsTail=void 0,eu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Va.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wo(this)&&this.run()}get dirty(){return wo(this)}}let df=0,Ar,xr;function vf(i,s=!1){if(i.flags|=8,s){i.next=xr,xr=i;return}i.next=Ar,Ar=i}function ol(){df++}function ll(){if(--df>0)return;if(xr){let s=xr;for(xr=void 0;s;){const n=s.next;s.next=void 0,s.flags&=-9,s=n}}let i;for(;Ar;){let s=Ar;for(Ar=void 0;s;){const n=s.next;if(s.next=void 0,s.flags&=-9,s.flags&1)try{s.trigger()}catch(t){i||(i=t)}s=n}}if(i)throw i}function pf(i){for(let s=i.deps;s;s=s.nextDep)s.version=-1,s.prevActiveLink=s.dep.activeLink,s.dep.activeLink=s}function gf(i){let s,n=i.depsTail,t=n;for(;t;){const e=t.prevDep;t.version===-1?(t===n&&(n=e),ul(t),Pv(t)):s=t,t.dep.activeLink=t.prevActiveLink,t.prevActiveLink=void 0,t=e}i.deps=s,i.depsTail=n}function wo(i){for(let s=i.deps;s;s=s.nextDep)if(s.dep.version!==s.version||s.dep.computed&&(mf(s.dep.computed)||s.dep.version!==s.version))return!0;return!!i._dirty}function mf(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===Fr)||(i.globalVersion=Fr,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!wo(i))))return;i.flags|=2;const s=i.dep,n=nt,t=vn;nt=i,vn=!0;try{pf(i);const e=i.fn(i._value);(s.version===0||ci(e,i._value))&&(i.flags|=128,i._value=e,s.version++)}catch(e){throw s.version++,e}finally{nt=n,vn=t,gf(i),i.flags&=-3}}function ul(i,s=!1){const{dep:n,prevSub:t,nextSub:e}=i;if(t&&(t.nextSub=e,i.prevSub=void 0),e&&(e.prevSub=t,i.nextSub=void 0),n.subs===i&&(n.subs=t,!t&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)ul(r,!0)}!s&&!--n.sc&&n.map&&n.map.delete(n.key)}function Pv(i){const{prevDep:s,nextDep:n}=i;s&&(s.nextDep=n,i.prevDep=void 0),n&&(n.prevDep=s,i.nextDep=void 0)}let vn=!0;const yf=[];function Gn(){yf.push(vn),vn=!1}function jn(){const i=yf.pop();vn=i===void 0?!0:i}function eu(i){const{cleanup:s}=i;if(i.cleanup=void 0,s){const n=nt;nt=void 0;try{s()}finally{nt=n}}}let Fr=0;class Av{constructor(s,n){this.sub=s,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class cl{constructor(s){this.computed=s,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(s){if(!nt||!vn||nt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==nt)n=this.activeLink=new Av(nt,this),nt.deps?(n.prevDep=nt.depsTail,nt.depsTail.nextDep=n,nt.depsTail=n):nt.deps=nt.depsTail=n,_f(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const t=n.nextDep;t.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=t),n.prevDep=nt.depsTail,n.nextDep=void 0,nt.depsTail.nextDep=n,nt.depsTail=n,nt.deps===n&&(nt.deps=t)}return n}trigger(s){this.version++,Fr++,this.notify(s)}notify(s){ol();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ll()}}}function _f(i){if(i.dep.sc++,i.sub.flags&4){const s=i.dep.computed;if(s&&!i.dep.subs){s.flags|=20;for(let t=s.deps;t;t=t.nextDep)_f(t)}const n=i.dep.subs;n!==i&&(i.prevSub=n,n&&(n.nextSub=i)),i.dep.subs=i}}const To=new WeakMap,Li=Symbol(""),Co=Symbol(""),Ur=Symbol("");function Ct(i,s,n){if(vn&&nt){let t=To.get(i);t||To.set(i,t=new Map);let e=t.get(n);e||(t.set(n,e=new cl),e.map=t,e.key=n),e.track()}}function Bn(i,s,n,t,e,r){const a=To.get(i);if(!a){Fr++;return}const o=l=>{l&&l.trigger()};if(ol(),s==="clear")a.forEach(o);else{const l=we(i),u=l&&al(n);if(l&&n==="length"){const c=Number(t);a.forEach((f,h)=>{(h==="length"||h===Ur||!Yn(h)&&h>=c)&&o(f)})}else switch((n!==void 0||a.has(void 0))&&o(a.get(n)),u&&o(a.get(Ur)),s){case"add":l?u&&o(a.get("length")):(o(a.get(Li)),ar(i)&&o(a.get(Co)));break;case"delete":l||(o(a.get(Li)),ar(i)&&o(a.get(Co)));break;case"set":ar(i)&&o(a.get(Li));break}}ll()}function ji(i){const s=ze(i);return s===i?s:(Ct(s,"iterate",Ur),cn(i)?s:s.map(mn))}function ya(i){return Ct(i=ze(i),"iterate",Ur),i}function si(i,s){return zn(i)?pr(fi(i)?mn(s):s):mn(s)}const xv={__proto__:null,[Symbol.iterator](){return Ha(this,Symbol.iterator,i=>si(this,i))},concat(...i){return ji(this).concat(...i.map(s=>we(s)?ji(s):s))},entries(){return Ha(this,"entries",i=>(i[1]=si(this,i[1]),i))},every(i,s){return Dn(this,"every",i,s,void 0,arguments)},filter(i,s){return Dn(this,"filter",i,s,n=>n.map(t=>si(this,t)),arguments)},find(i,s){return Dn(this,"find",i,s,n=>si(this,n),arguments)},findIndex(i,s){return Dn(this,"findIndex",i,s,void 0,arguments)},findLast(i,s){return Dn(this,"findLast",i,s,n=>si(this,n),arguments)},findLastIndex(i,s){return Dn(this,"findLastIndex",i,s,void 0,arguments)},forEach(i,s){return Dn(this,"forEach",i,s,void 0,arguments)},includes(...i){return $a(this,"includes",i)},indexOf(...i){return $a(this,"indexOf",i)},join(i){return ji(this).join(i)},lastIndexOf(...i){return $a(this,"lastIndexOf",i)},map(i,s){return Dn(this,"map",i,s,void 0,arguments)},pop(){return Sr(this,"pop")},push(...i){return Sr(this,"push",i)},reduce(i,...s){return tu(this,"reduce",i,s)},reduceRight(i,...s){return tu(this,"reduceRight",i,s)},shift(){return Sr(this,"shift")},some(i,s){return Dn(this,"some",i,s,void 0,arguments)},splice(...i){return Sr(this,"splice",i)},toReversed(){return ji(this).toReversed()},toSorted(i){return ji(this).toSorted(i)},toSpliced(...i){return ji(this).toSpliced(...i)},unshift(...i){return Sr(this,"unshift",i)},values(){return Ha(this,"values",i=>si(this,i))}};function Ha(i,s,n){const t=ya(i),e=t[s]();return t!==i&&!cn(i)&&(e._next=e.next,e.next=()=>{const r=e._next();return r.done||(r.value=n(r.value)),r}),e}const Lv=Array.prototype;function Dn(i,s,n,t,e,r){const a=ya(i),o=a!==i&&!cn(i),l=a[s];if(l!==Lv[s]){const f=l.apply(i,r);return o?mn(f):f}let u=n;a!==i&&(o?u=function(f,h){return n.call(this,si(i,f),h,i)}:n.length>2&&(u=function(f,h){return n.call(this,f,h,i)}));const c=l.call(a,u,t);return o&&e?e(c):c}function tu(i,s,n,t){const e=ya(i);let r=n;return e!==i&&(cn(i)?n.length>3&&(r=function(a,o,l){return n.call(this,a,o,l,i)}):r=function(a,o,l){return n.call(this,a,si(i,o),l,i)}),e[s](r,...t)}function $a(i,s,n){const t=ze(i);Ct(t,"iterate",Ur);const e=t[s](...n);return(e===-1||e===!1)&&dl(n[0])?(n[0]=ze(n[0]),t[s](...n)):e}function Sr(i,s,n=[]){Gn(),ol();const t=ze(i)[s].apply(i,n);return ll(),jn(),t}const Iv=il("__proto__,__v_isRef,__isVue"),bf=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Yn));function Dv(i){Yn(i)||(i=String(i));const s=ze(this);return Ct(s,"has",i),s.hasOwnProperty(i)}class Sf{constructor(s=!1,n=!1){this._isReadonly=s,this._isShallow=n}get(s,n,t){if(n==="__v_skip")return s.__v_skip;const e=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return r;if(n==="__v_raw")return t===(e?r?$v:Tf:r?wf:kf).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(t)?s:void 0;const a=we(s);if(!e){let l;if(a&&(l=xv[n]))return l;if(n==="hasOwnProperty")return Dv}const o=Reflect.get(s,n,xt(s)?s:t);if((Yn(n)?bf.has(n):Iv(n))||(e||Ct(s,"get",n),r))return o;if(xt(o)){const l=a&&al(n)?o:o.value;return e&&rt(l)?Vs(l):l}return rt(o)?e?Vs(o):_a(o):o}}class Ef extends Sf{constructor(s=!1){super(!1,s)}set(s,n,t,e){let r=s[n];const a=we(s)&&al(n);if(!this._isShallow){const u=zn(r);if(!cn(t)&&!zn(t)&&(r=ze(r),t=ze(t)),!a&&xt(r)&&!xt(t))return u||(r.value=t),!0}const o=a?Number(n)<s.length:Ke(s,n),l=Reflect.set(s,n,t,xt(s)?s:e);return s===ze(e)&&(o?ci(t,r)&&Bn(s,"set",n,t):Bn(s,"add",n,t)),l}deleteProperty(s,n){const t=Ke(s,n);s[n];const e=Reflect.deleteProperty(s,n);return e&&t&&Bn(s,"delete",n,void 0),e}has(s,n){const t=Reflect.has(s,n);return(!Yn(n)||!bf.has(n))&&Ct(s,"has",n),t}ownKeys(s){return Ct(s,"iterate",we(s)?"length":Li),Reflect.ownKeys(s)}}class Ov extends Sf{constructor(s=!1){super(!0,s)}set(s,n){return!0}deleteProperty(s,n){return!0}}const Rv=new Ef,Mv=new Ov,Nv=new Ef(!0);const Po=i=>i,fs=i=>Reflect.getPrototypeOf(i);function Bv(i,s,n){return function(...t){const e=this.__v_raw,r=ze(e),a=ar(r),o=i==="entries"||i===Symbol.iterator&&a,l=i==="keys"&&a,u=e[i](...t),c=n?Po:s?pr:mn;return!s&&Ct(r,"iterate",l?Co:Li),ft(Object.create(u),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:o?[c(f[0]),c(f[1])]:c(f),done:h}}})}}function hs(i){return function(...s){return i==="delete"?!1:i==="clear"?void 0:this}}function Fv(i,s){const n={get(e){const r=this.__v_raw,a=ze(r),o=ze(e);i||(ci(e,o)&&Ct(a,"get",e),Ct(a,"get",o));const{has:l}=fs(a),u=s?Po:i?pr:mn;if(l.call(a,e))return u(r.get(e));if(l.call(a,o))return u(r.get(o));r!==a&&r.get(e)},get size(){const e=this.__v_raw;return!i&&Ct(ze(e),"iterate",Li),e.size},has(e){const r=this.__v_raw,a=ze(r),o=ze(e);return i||(ci(e,o)&&Ct(a,"has",e),Ct(a,"has",o)),e===o?r.has(e):r.has(e)||r.has(o)},forEach(e,r){const a=this,o=a.__v_raw,l=ze(o),u=s?Po:i?pr:mn;return!i&&Ct(l,"iterate",Li),o.forEach((c,f)=>e.call(r,u(c),u(f),a))}};return ft(n,i?{add:hs("add"),set:hs("set"),delete:hs("delete"),clear:hs("clear")}:{add(e){!s&&!cn(e)&&!zn(e)&&(e=ze(e));const r=ze(this);return fs(r).has.call(r,e)||(r.add(e),Bn(r,"add",e,e)),this},set(e,r){!s&&!cn(r)&&!zn(r)&&(r=ze(r));const a=ze(this),{has:o,get:l}=fs(a);let u=o.call(a,e);u||(e=ze(e),u=o.call(a,e));const c=l.call(a,e);return a.set(e,r),u?ci(r,c)&&Bn(a,"set",e,r):Bn(a,"add",e,r),this},delete(e){const r=ze(this),{has:a,get:o}=fs(r);let l=a.call(r,e);l||(e=ze(e),l=a.call(r,e)),o&&o.call(r,e);const u=r.delete(e);return l&&Bn(r,"delete",e,void 0),u},clear(){const e=ze(this),r=e.size!==0,a=e.clear();return r&&Bn(e,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(e=>{n[e]=Bv(e,i,s)}),n}function fl(i,s){const n=Fv(i,s);return(t,e,r)=>e==="__v_isReactive"?!i:e==="__v_isReadonly"?i:e==="__v_raw"?t:Reflect.get(Ke(n,e)&&e in t?n:t,e,r)}const Uv={get:fl(!1,!1)},Vv={get:fl(!1,!0)},Hv={get:fl(!0,!1)};const kf=new WeakMap,wf=new WeakMap,Tf=new WeakMap,$v=new WeakMap;function Gv(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jv(i){return i.__v_skip||!Object.isExtensible(i)?0:Gv(dv(i))}function _a(i){return zn(i)?i:hl(i,!1,Rv,Uv,kf)}function zv(i){return hl(i,!1,Nv,Vv,wf)}function Vs(i){return hl(i,!0,Mv,Hv,Tf)}function hl(i,s,n,t,e){if(!rt(i)||i.__v_raw&&!(s&&i.__v_isReactive))return i;const r=jv(i);if(r===0)return i;const a=e.get(i);if(a)return a;const o=new Proxy(i,r===2?t:n);return e.set(i,o),o}function fi(i){return zn(i)?fi(i.__v_raw):!!(i&&i.__v_isReactive)}function zn(i){return!!(i&&i.__v_isReadonly)}function cn(i){return!!(i&&i.__v_isShallow)}function dl(i){return i?!!i.__v_raw:!1}function ze(i){const s=i&&i.__v_raw;return s?ze(s):i}function Ds(i){return!Ke(i,"__v_skip")&&Object.isExtensible(i)&&af(i,"__v_skip",!0),i}const mn=i=>rt(i)?_a(i):i,pr=i=>rt(i)?Vs(i):i;function xt(i){return i?i.__v_isRef===!0:!1}function Be(i){return Cf(i,!1)}function Wv(i){return Cf(i,!0)}function Cf(i,s){return xt(i)?i:new Kv(i,s)}class Kv{constructor(s,n){this.dep=new cl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?s:ze(s),this._value=n?s:mn(s),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(s){const n=this._rawValue,t=this.__v_isShallow||cn(s)||zn(s);s=t?s:ze(s),ci(s,n)&&(this._rawValue=s,this._value=t?s:mn(s),this.dep.trigger())}}function j(i){return xt(i)?i.value:i}const Yv={get:(i,s,n)=>s==="__v_raw"?i:j(Reflect.get(i,s,n)),set:(i,s,n,t)=>{const e=i[s];return xt(e)&&!xt(n)?(e.value=n,!0):Reflect.set(i,s,n,t)}};function Pf(i){return fi(i)?i:new Proxy(i,Yv)}class Xv{constructor(s,n,t){this.fn=s,this.setter=n,this._value=void 0,this.dep=new cl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=t}notify(){if(this.flags|=16,!(this.flags&8)&&nt!==this)return vf(this,!0),!0}get value(){const s=this.dep.track();return mf(this),s&&(s.version=this.dep.version),this._value}set value(s){this.setter&&this.setter(s)}}function qv(i,s,n=!1){let t,e;return Ie(i)?t=i:(t=i.get,e=i.set),new Xv(t,e,n)}const ds={},Hs=new WeakMap;let Ti;function Jv(i,s=!1,n=Ti){if(n){let t=Hs.get(n);t||Hs.set(n,t=[]),t.push(i)}}function Qv(i,s,n=Je){const{immediate:t,deep:e,once:r,scheduler:a,augmentJob:o,call:l}=n,u=E=>e?E:cn(E)||e===!1||e===0?Fn(E,1):Fn(E);let c,f,h,d,v=!1,m=!1;if(xt(i)?(f=()=>i.value,v=cn(i)):fi(i)?(f=()=>u(i),v=!0):we(i)?(m=!0,v=i.some(E=>fi(E)||cn(E)),f=()=>i.map(E=>{if(xt(E))return E.value;if(fi(E))return u(E);if(Ie(E))return l?l(E,2):E()})):Ie(i)?s?f=l?()=>l(i,2):i:f=()=>{if(h){Gn();try{h()}finally{jn()}}const E=Ti;Ti=c;try{return l?l(i,3,[d]):i(d)}finally{Ti=E}}:f=un,s&&e){const E=f,k=e===!0?1/0:e;f=()=>Fn(E(),k)}const p=ff(),S=()=>{c.stop(),p&&p.active&&sl(p.effects,c)};if(r&&s){const E=s;s=(...k)=>{E(...k),S()}}let C=m?new Array(i.length).fill(ds):ds;const _=E=>{if(!(!(c.flags&1)||!c.dirty&&!E))if(s){const k=c.run();if(e||v||(m?k.some((N,I)=>ci(N,C[I])):ci(k,C))){h&&h();const N=Ti;Ti=c;try{const I=[k,C===ds?void 0:m&&C[0]===ds?[]:C,d];C=k,l?l(s,3,I):s(...I)}finally{Ti=N}}}else c.run()};return o&&o(_),c=new hf(f),c.scheduler=a?()=>a(_,!1):_,d=E=>Jv(E,!1,c),h=c.onStop=()=>{const E=Hs.get(c);if(E){if(l)l(E,4);else for(const k of E)k();Hs.delete(c)}},s?t?_(!0):C=c.run():a?a(_.bind(null,!0),!0):c.run(),S.pause=c.pause.bind(c),S.resume=c.resume.bind(c),S.stop=S,S}function Fn(i,s=1/0,n){if(s<=0||!rt(i)||i.__v_skip||(n=n||new Map,(n.get(i)||0)>=s))return i;if(n.set(i,s),s--,xt(i))Fn(i.value,s,n);else if(we(i))for(let t=0;t<i.length;t++)Fn(i[t],s,n);else if(tf(i)||ar(i))i.forEach(t=>{Fn(t,s,n)});else if(sf(i)){for(const t in i)Fn(i[t],s,n);for(const t of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,t)&&Fn(i[t],s,n)}return i}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ns(i,s,n,t){try{return t?i(...t):i()}catch(e){ba(e,s,n)}}function yn(i,s,n,t){if(Ie(i)){const e=ns(i,s,n,t);return e&&nf(e)&&e.catch(r=>{ba(r,s,n)}),e}if(we(i)){const e=[];for(let r=0;r<i.length;r++)e.push(yn(i[r],s,n,t));return e}}function ba(i,s,n,t=!0){const e=s?s.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=s&&s.appContext.config||Je;if(s){let o=s.parent;const l=s.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;o;){const c=o.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](i,l,u)===!1)return}o=o.parent}if(r){Gn(),ns(r,null,10,[i,l,u]),jn();return}}Zv(i,n,e,t,a)}function Zv(i,s,n,t=!0,e=!1){if(e)throw i;console.error(i)}const Mt=[];let kn=-1;const or=[];let ai=null,er=0;const Af=Promise.resolve();let $s=null;function Sa(i){const s=$s||Af;return i?s.then(this?i.bind(this):i):s}function ep(i){let s=kn+1,n=Mt.length;for(;s<n;){const t=s+n>>>1,e=Mt[t],r=Vr(e);r<i||r===i&&e.flags&2?s=t+1:n=t}return s}function vl(i){if(!(i.flags&1)){const s=Vr(i),n=Mt[Mt.length-1];!n||!(i.flags&2)&&s>=Vr(n)?Mt.push(i):Mt.splice(ep(s),0,i),i.flags|=1,xf()}}function xf(){$s||($s=Af.then(If))}function Lf(i){we(i)?or.push(...i):ai&&i.id===-1?ai.splice(er+1,0,i):i.flags&1||(or.push(i),i.flags|=1),xf()}function nu(i,s,n=kn+1){for(;n<Mt.length;n++){const t=Mt[n];if(t&&t.flags&2){if(i&&t.id!==i.uid)continue;Mt.splice(n,1),n--,t.flags&4&&(t.flags&=-2),t(),t.flags&4||(t.flags&=-2)}}}function Gs(i){if(or.length){const s=[...new Set(or)].sort((n,t)=>Vr(n)-Vr(t));if(or.length=0,ai){ai.push(...s);return}for(ai=s,er=0;er<ai.length;er++){const n=ai[er];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ai=null,er=0}}const Vr=i=>i.id==null?i.flags&2?-1:1/0:i.id;function If(i){const s=un;try{for(kn=0;kn<Mt.length;kn++){const n=Mt[kn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),ns(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;kn<Mt.length;kn++){const n=Mt[kn];n&&(n.flags&=-2)}kn=-1,Mt.length=0,Gs(),$s=null,(Mt.length||or.length)&&If()}}let yt=null,Df=null;function js(i){const s=yt;return yt=i,Df=i&&i.type.__scopeId||null,s}function ae(i,s=yt,n){if(!s||i._n)return i;const t=(...e)=>{t._d&&Ks(-1);const r=js(s);let a;try{a=i(...e)}finally{js(r),t._d&&Ks(1)}return a};return t._n=!0,t._c=!0,t._d=!0,t}function Of(i,s){if(yt===null)return i;const n=Ca(yt),t=i.dirs||(i.dirs=[]);for(let e=0;e<s.length;e++){let[r,a,o,l=Je]=s[e];r&&(Ie(r)&&(r={mounted:r,updated:r}),r.deep&&Fn(a),t.push({dir:r,instance:n,value:a,oldValue:void 0,arg:o,modifiers:l}))}return i}function Tn(i,s,n,t){const e=i.dirs,r=s&&s.dirs;for(let a=0;a<e.length;a++){const o=e[a];r&&(o.oldValue=r[a].value);let l=o.dir[t];l&&(Gn(),yn(l,n,8,[i.el,o,i,s]),jn())}}function lr(i,s){if(At){let n=At.provides;const t=At.parent&&At.parent.provides;t===n&&(n=At.provides=Object.create(t)),n[i]=s}}function pn(i,s,n=!1){const t=rs();if(t||cr){let e=cr?cr._context.provides:t?t.parent==null||t.ce?t.vnode.appContext&&t.vnode.appContext.provides:t.parent.provides:void 0;if(e&&i in e)return e[i];if(arguments.length>1)return n&&Ie(s)?s.call(t&&t.proxy):s}}const tp=Symbol.for("v-scx"),np=()=>pn(tp);function Mi(i,s){return Ea(i,null,s)}function ip(i,s){return Ea(i,null,{flush:"post"})}function Qt(i,s,n){return Ea(i,s,n)}function Ea(i,s,n=Je){const{immediate:t,deep:e,flush:r,once:a}=n,o=ft({},n),l=s&&t||!s&&r!=="post";let u;if(zr){if(r==="sync"){const d=np();u=d.__watcherHandles||(d.__watcherHandles=[])}else if(!l){const d=()=>{};return d.stop=un,d.resume=un,d.pause=un,d}}const c=At;o.call=(d,v,m)=>yn(d,c,v,m);let f=!1;r==="post"?o.scheduler=d=>{Ot(d,c&&c.suspense)}:r!=="sync"&&(f=!0,o.scheduler=(d,v)=>{v?d():vl(d)}),o.augmentJob=d=>{s&&(d.flags|=4),f&&(d.flags|=2,c&&(d.id=c.uid,d.i=c))};const h=Qv(i,s,o);return zr&&(u?u.push(h):l&&h()),h}function rp(i,s,n){const t=this.proxy,e=ut(i)?i.includes(".")?Rf(t,i):()=>t[i]:i.bind(t,t);let r;Ie(s)?r=s:(r=s.handler,n=s);const a=ss(this),o=Ea(e,r.bind(t),n);return a(),o}function Rf(i,s){const n=s.split(".");return()=>{let t=i;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}const Mf=Symbol("_vte"),Nf=i=>i.__isTeleport,Lr=i=>i&&(i.disabled||i.disabled===""),iu=i=>i&&(i.defer||i.defer===""),ru=i=>typeof SVGElement<"u"&&i instanceof SVGElement,su=i=>typeof MathMLElement=="function"&&i instanceof MathMLElement,Ao=(i,s)=>{const n=i&&i.to;return ut(n)?s?s(n):null:n},Bf={name:"Teleport",__isTeleport:!0,process(i,s,n,t,e,r,a,o,l,u){const{mc:c,pc:f,pbc:h,o:{insert:d,querySelector:v,createText:m,createComment:p}}=u,S=Lr(s.props);let{shapeFlag:C,children:_,dynamicChildren:E}=s;if(i==null){const k=s.el=m(""),N=s.anchor=m("");d(k,n,t),d(N,n,t);const I=(D,O)=>{C&16&&c(_,D,O,e,r,a,o,l)},U=()=>{const D=s.target=Ao(s.props,v),O=Ff(D,s,m,d);D&&(a!=="svg"&&ru(D)?a="svg":a!=="mathml"&&su(D)&&(a="mathml"),e&&e.isCE&&(e.ce._teleportTargets||(e.ce._teleportTargets=new Set)).add(D),S||(I(D,O),Os(s,!1)))};S&&(I(n,N),Os(s,!0)),iu(s.props)?(s.el.__isMounted=!1,Ot(()=>{U(),delete s.el.__isMounted},r)):U()}else{if(iu(s.props)&&i.el.__isMounted===!1){Ot(()=>{Bf.process(i,s,n,t,e,r,a,o,l,u)},r);return}s.el=i.el,s.targetStart=i.targetStart;const k=s.anchor=i.anchor,N=s.target=i.target,I=s.targetAnchor=i.targetAnchor,U=Lr(i.props),D=U?n:N,O=U?k:I;if(a==="svg"||ru(N)?a="svg":(a==="mathml"||su(N))&&(a="mathml"),E?(h(i.dynamicChildren,E,D,e,r,a,o),bl(i,s,!0)):l||f(i,s,D,O,e,r,a,o,!1),S)U?s.props&&i.props&&s.props.to!==i.props.to&&(s.props.to=i.props.to):vs(s,n,k,u,1);else if((s.props&&s.props.to)!==(i.props&&i.props.to)){const K=s.target=Ao(s.props,v);K&&vs(s,K,null,u,0)}else U&&vs(s,N,I,u,1);Os(s,S)}},remove(i,s,n,{um:t,o:{remove:e}},r){const{shapeFlag:a,children:o,anchor:l,targetStart:u,targetAnchor:c,target:f,props:h}=i;if(f&&(e(u),e(c)),r&&e(l),a&16){const d=r||!Lr(h);for(let v=0;v<o.length;v++){const m=o[v];t(m,s,n,d,!!m.dynamicChildren)}}},move:vs,hydrate:sp};function vs(i,s,n,{o:{insert:t},m:e},r=2){r===0&&t(i.targetAnchor,s,n);const{el:a,anchor:o,shapeFlag:l,children:u,props:c}=i,f=r===2;if(f&&t(a,s,n),(!f||Lr(c))&&l&16)for(let h=0;h<u.length;h++)e(u[h],s,n,2);f&&t(o,s,n)}function sp(i,s,n,t,e,r,{o:{nextSibling:a,parentNode:o,querySelector:l,insert:u,createText:c}},f){function h(m,p,S,C){p.anchor=f(a(m),p,o(m),n,t,e,r),p.targetStart=S,p.targetAnchor=C}const d=s.target=Ao(s.props,l),v=Lr(s.props);if(d){const m=d._lpa||d.firstChild;if(s.shapeFlag&16)if(v)h(i,s,m,m&&a(m));else{s.anchor=a(i);let p=m;for(;p;){if(p&&p.nodeType===8){if(p.data==="teleport start anchor")s.targetStart=p;else if(p.data==="teleport anchor"){s.targetAnchor=p,d._lpa=s.targetAnchor&&a(s.targetAnchor);break}}p=a(p)}s.targetAnchor||Ff(d,s,c,u),f(m&&a(m),s,d,n,t,e,r)}Os(s,v)}else v&&s.shapeFlag&16&&h(i,s,i,a(i));return s.anchor&&a(s.anchor)}const is=Bf;function Os(i,s){const n=i.ctx;if(n&&n.ut){let t,e;for(s?(t=i.el,e=i.anchor):(t=i.targetStart,e=i.targetAnchor);t&&t!==e;)t.nodeType===1&&t.setAttribute("data-v-owner",n.uid),t=t.nextSibling;n.ut()}}function Ff(i,s,n,t){const e=s.targetStart=n(""),r=s.targetAnchor=n("");return e[Mf]=r,i&&(t(e,i),t(r,i)),r}const Mn=Symbol("_leaveCb"),ps=Symbol("_enterCb");function ap(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bt(()=>{i.isMounted=!0}),Kf(()=>{i.isUnmounting=!0}),i}const rn=[Function,Array],Uf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:rn,onEnter:rn,onAfterEnter:rn,onEnterCancelled:rn,onBeforeLeave:rn,onLeave:rn,onAfterLeave:rn,onLeaveCancelled:rn,onBeforeAppear:rn,onAppear:rn,onAfterAppear:rn,onAppearCancelled:rn},Vf=i=>{const s=i.subTree;return s.component?Vf(s.component):s},op={name:"BaseTransition",props:Uf,setup(i,{slots:s}){const n=rs(),t=ap();return()=>{const e=s.default&&Gf(s.default(),!0);if(!e||!e.length)return;const r=Hf(e),a=ze(i),{mode:o}=a;if(t.isLeaving)return Ga(r);const l=au(r);if(!l)return Ga(r);let u=xo(l,a,t,n,f=>u=f);l.type!==mt&&Hr(l,u);let c=n.subTree&&au(n.subTree);if(c&&c.type!==mt&&!Ci(c,l)&&Vf(n).type!==mt){let f=xo(c,a,t,n);if(Hr(c,f),o==="out-in"&&l.type!==mt)return t.isLeaving=!0,f.afterLeave=()=>{t.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,c=void 0},Ga(r);o==="in-out"&&l.type!==mt?f.delayLeave=(h,d,v)=>{const m=$f(t,c);m[String(c.key)]=c,h[Mn]=()=>{d(),h[Mn]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{v(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return r}}};function Hf(i){let s=i[0];if(i.length>1){for(const n of i)if(n.type!==mt){s=n;break}}return s}const lp=op;function $f(i,s){const{leavingVNodes:n}=i;let t=n.get(s.type);return t||(t=Object.create(null),n.set(s.type,t)),t}function xo(i,s,n,t,e){const{appear:r,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:h,onLeave:d,onAfterLeave:v,onLeaveCancelled:m,onBeforeAppear:p,onAppear:S,onAfterAppear:C,onAppearCancelled:_}=s,E=String(i.key),k=$f(n,i),N=(D,O)=>{D&&yn(D,t,9,O)},I=(D,O)=>{const K=O[1];N(D,O),we(D)?D.every(y=>y.length<=1)&&K():D.length<=1&&K()},U={mode:a,persisted:o,beforeEnter(D){let O=l;if(!n.isMounted)if(r)O=p||l;else return;D[Mn]&&D[Mn](!0);const K=k[E];K&&Ci(i,K)&&K.el[Mn]&&K.el[Mn](),N(O,[D])},enter(D){let O=u,K=c,y=f;if(!n.isMounted)if(r)O=S||u,K=C||c,y=_||f;else return;let b=!1;const w=D[ps]=R=>{b||(b=!0,R?N(y,[D]):N(K,[D]),U.delayedLeave&&U.delayedLeave(),D[ps]=void 0)};O?I(O,[D,w]):w()},leave(D,O){const K=String(i.key);if(D[ps]&&D[ps](!0),n.isUnmounting)return O();N(h,[D]);let y=!1;const b=D[Mn]=w=>{y||(y=!0,O(),w?N(m,[D]):N(v,[D]),D[Mn]=void 0,k[K]===i&&delete k[K])};k[K]=i,d?I(d,[D,b]):b()},clone(D){const O=xo(D,s,n,t,e);return e&&e(O),O}};return U}function Ga(i){if(ka(i))return i=vi(i),i.children=null,i}function au(i){if(!ka(i))return Nf(i.type)&&i.children?Hf(i.children):i;if(i.component)return i.component.subTree;const{shapeFlag:s,children:n}=i;if(n){if(s&16)return n[0];if(s&32&&Ie(n.default))return n.default()}}function Hr(i,s){i.shapeFlag&6&&i.component?(i.transition=s,Hr(i.component.subTree,s)):i.shapeFlag&128?(i.ssContent.transition=s.clone(i.ssContent),i.ssFallback.transition=s.clone(i.ssFallback)):i.transition=s}function Gf(i,s=!1,n){let t=[],e=0;for(let r=0;r<i.length;r++){let a=i[r];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:r);a.type===ke?(a.patchFlag&128&&e++,t=t.concat(Gf(a.children,s,o))):(s||a.type!==mt)&&t.push(o!=null?vi(a,{key:o}):a)}if(e>1)for(let r=0;r<t.length;r++)t[r].patchFlag=-2;return t}function fe(i,s){return Ie(i)?(()=>ft({name:i.name},s,{setup:i}))():i}function jf(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}const zs=new WeakMap;function ur(i,s,n,t,e=!1){if(we(i)){i.forEach((v,m)=>ur(v,s&&(we(s)?s[m]:s),n,t,e));return}if(Ii(t)&&!e){t.shapeFlag&512&&t.type.__asyncResolved&&t.component.subTree.component&&ur(i,s,n,t.component.subTree);return}const r=t.shapeFlag&4?Ca(t.component):t.el,a=e?null:r,{i:o,r:l}=i,u=s&&s.r,c=o.refs===Je?o.refs={}:o.refs,f=o.setupState,h=ze(f),d=f===Je?ef:v=>Ke(h,v);if(u!=null&&u!==l){if(ou(s),ut(u))c[u]=null,d(u)&&(f[u]=null);else if(xt(u)){u.value=null;const v=s;v.k&&(c[v.k]=null)}}if(Ie(l))ns(l,o,12,[a,c]);else{const v=ut(l),m=xt(l);if(v||m){const p=()=>{if(i.f){const S=v?d(l)?f[l]:c[l]:l.value;if(e)we(S)&&sl(S,r);else if(we(S))S.includes(r)||S.push(r);else if(v)c[l]=[r],d(l)&&(f[l]=c[l]);else{const C=[r];l.value=C,i.k&&(c[i.k]=C)}}else v?(c[l]=a,d(l)&&(f[l]=a)):m&&(l.value=a,i.k&&(c[i.k]=a))};if(a){const S=()=>{p(),zs.delete(i)};S.id=-1,zs.set(i,S),Ot(S,n)}else ou(i),p()}}}function ou(i){const s=zs.get(i);s&&(s.flags|=8,zs.delete(i))}let lu=!1;const zi=()=>{lu||(console.error("Hydration completed but contains mismatches."),lu=!0)},up=i=>i.namespaceURI.includes("svg")&&i.tagName!=="foreignObject",cp=i=>i.namespaceURI.includes("MathML"),gs=i=>{if(i.nodeType===1){if(up(i))return"svg";if(cp(i))return"mathml"}},ms=i=>i.nodeType===8;function fp(i){const{mt:s,p:n,o:{patchProp:t,createText:e,nextSibling:r,parentNode:a,remove:o,insert:l,createComment:u}}=i,c=(_,E)=>{if(!E.hasChildNodes()){n(null,_,E),Gs(),E._vnode=_;return}f(E.firstChild,_,null,null,null),Gs(),E._vnode=_},f=(_,E,k,N,I,U=!1)=>{U=U||!!E.dynamicChildren;const D=ms(_)&&_.data==="[",O=()=>m(_,E,k,N,I,D),{type:K,ref:y,shapeFlag:b,patchFlag:w}=E;let R=_.nodeType;E.el=_,w===-2&&(U=!1,E.dynamicChildren=null);let P=null;switch(K){case Di:R!==3?E.children===""?(l(E.el=e(""),a(_),_),P=_):P=O():(_.data!==E.children&&(zi(),_.data=E.children),P=r(_));break;case mt:C(_)?(P=r(_),S(E.el=_.content.firstChild,_,k)):R!==8||D?P=O():P=r(_);break;case fr:if(D&&(_=r(_),R=_.nodeType),R===1||R===3){P=_;const H=!E.children.length;for(let $=0;$<E.staticCount;$++)H&&(E.children+=P.nodeType===1?P.outerHTML:P.data),$===E.staticCount-1&&(E.anchor=P),P=r(P);return D?r(P):P}else O();break;case ke:D?P=v(_,E,k,N,I,U):P=O();break;default:if(b&1)(R!==1||E.type.toLowerCase()!==_.tagName.toLowerCase())&&!C(_)?P=O():P=h(_,E,k,N,I,U);else if(b&6){E.slotScopeIds=I;const H=a(_);if(D?P=p(_):ms(_)&&_.data==="teleport start"?P=p(_,_.data,"teleport end"):P=r(_),s(E,H,null,k,N,gs(H),U),Ii(E)&&!E.type.__asyncResolved){let $;D?($=ee(ke),$.anchor=P?P.previousSibling:H.lastChild):$=_.nodeType===3?ht(""):ee("div"),$.el=_,E.component.subTree=$}}else b&64?R!==8?P=O():P=E.type.hydrate(_,E,k,N,I,U,i,d):b&128&&(P=E.type.hydrate(_,E,k,N,gs(a(_)),I,U,i,f))}return y!=null&&ur(y,null,N,E),P},h=(_,E,k,N,I,U)=>{U=U||!!E.dynamicChildren;const{type:D,props:O,patchFlag:K,shapeFlag:y,dirs:b,transition:w}=E,R=D==="input"||D==="option";if(R||K!==-1){b&&Tn(E,null,k,"created");let P=!1;if(C(_)){P=ch(null,w)&&k&&k.vnode.props&&k.vnode.props.appear;const $=_.content.firstChild;if(P){const ie=$.getAttribute("class");ie&&($.$cls=ie),w.beforeEnter($)}S($,_,k),E.el=_=$}if(y&16&&!(O&&(O.innerHTML||O.textContent))){let $=d(_.firstChild,E,_,k,N,I,U);for(;$;){ys(_,1)||zi();const ie=$;$=$.nextSibling,o(ie)}}else if(y&8){let $=E.children;$[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&($=$.slice(1));const{textContent:ie}=_;ie!==$&&ie!==$.replace(/\r\n|\r/g,`
`)&&(ys(_,0)||zi(),_.textContent=E.children)}if(O){if(R||!U||K&48){const $=_.tagName.includes("-");for(const ie in O)(R&&(ie.endsWith("value")||ie==="indeterminate")||ts(ie)&&!xi(ie)||ie[0]==="."||$&&!xi(ie))&&t(_,ie,null,O[ie],void 0,k)}else if(O.onClick)t(_,"onClick",null,O.onClick,void 0,k);else if(K&4&&fi(O.style))for(const $ in O.style)O.style[$]}let H;(H=O&&O.onVnodeBeforeMount)&&an(H,k,E),b&&Tn(E,null,k,"beforeMount"),((H=O&&O.onVnodeMounted)||b||P)&&vh(()=>{H&&an(H,k,E),P&&w.enter(_),b&&Tn(E,null,k,"mounted")},N)}return _.nextSibling},d=(_,E,k,N,I,U,D)=>{D=D||!!E.dynamicChildren;const O=E.children,K=O.length;for(let y=0;y<K;y++){const b=D?O[y]:O[y]=on(O[y]),w=b.type===Di;_?(w&&!D&&y+1<K&&on(O[y+1]).type===Di&&(l(e(_.data.slice(b.children.length)),k,r(_)),_.data=b.children),_=f(_,b,N,I,U,D)):w&&!b.children?l(b.el=e(""),k):(ys(k,1)||zi(),n(null,b,k,null,N,I,gs(k),U))}return _},v=(_,E,k,N,I,U)=>{const{slotScopeIds:D}=E;D&&(I=I?I.concat(D):D);const O=a(_),K=d(r(_),E,O,k,N,I,U);return K&&ms(K)&&K.data==="]"?r(E.anchor=K):(zi(),l(E.anchor=u("]"),O,K),K)},m=(_,E,k,N,I,U)=>{if(ys(_.parentElement,1)||zi(),E.el=null,U){const K=p(_);for(;;){const y=r(_);if(y&&y!==K)o(y);else break}}const D=r(_),O=a(_);return o(_),n(null,E,O,D,k,N,gs(O),I),k&&(k.vnode.el=E.el,eh(k,E.el)),D},p=(_,E="[",k="]")=>{let N=0;for(;_;)if(_=r(_),_&&ms(_)&&(_.data===E&&N++,_.data===k)){if(N===0)return r(_);N--}return _},S=(_,E,k)=>{const N=E.parentNode;N&&N.replaceChild(_,E);let I=k;for(;I;)I.vnode.el===E&&(I.vnode.el=I.subTree.el=_),I=I.parent},C=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[c,f]}const uu="data-allow-mismatch",hp={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function ys(i,s){if(s===0||s===1)for(;i&&!i.hasAttribute(uu);)i=i.parentElement;const n=i&&i.getAttribute(uu);if(n==null)return!1;if(n==="")return!0;{const t=n.split(",");return s===0&&t.includes("children")?!0:t.includes(hp[s])}}ma().requestIdleCallback;ma().cancelIdleCallback;const Ii=i=>!!i.type.__asyncLoader,ka=i=>i.type.__isKeepAlive;function dp(i,s){zf(i,"a",s)}function vp(i,s){zf(i,"da",s)}function zf(i,s,n=At){const t=i.__wdc||(i.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}return i()});if(wa(s,t,n),n){let e=n.parent;for(;e&&e.parent;)ka(e.parent.vnode)&&pp(t,s,n,e),e=e.parent}}function pp(i,s,n,t){const e=wa(s,i,t,!0);_n(()=>{sl(t[s],e)},n)}function wa(i,s,n=At,t=!1){if(n){const e=n[i]||(n[i]=[]),r=s.__weh||(s.__weh=(...a)=>{Gn();const o=ss(n),l=yn(s,n,i,a);return o(),jn(),l});return t?e.unshift(r):e.push(r),r}}const Xn=i=>(s,n=At)=>{(!zr||i==="sp")&&wa(i,(...t)=>s(...t),n)},gp=Xn("bm"),Bt=Xn("m"),Wf=Xn("bu"),pl=Xn("u"),Kf=Xn("bum"),_n=Xn("um"),mp=Xn("sp"),yp=Xn("rtg"),_p=Xn("rtc");function bp(i,s=At){wa("ec",i,s)}const gl="components";function gi(i,s){return Xf(gl,i,!0,s)||i}const Yf=Symbol.for("v-ndc");function $r(i){return ut(i)?Xf(gl,i,!1)||i:i||Yf}function Xf(i,s,n=!0,t=!1){const e=yt||At;if(e){const r=e.type;if(i===gl){const o=ng(r,!1);if(o&&(o===s||o===fn(s)||o===ga(fn(s))))return r}const a=cu(e[i]||r[i],s)||cu(e.appContext[i],s);return!a&&t?r:a}}function cu(i,s){return i&&(i[s]||i[fn(s)]||i[ga(fn(s))])}function Lt(i,s,n,t){let e;const r=n&&n[t],a=we(i);if(a||ut(i)){const o=a&&fi(i);let l=!1,u=!1;o&&(l=!cn(i),u=zn(i),i=ya(i)),e=new Array(i.length);for(let c=0,f=i.length;c<f;c++)e[c]=s(l?u?pr(mn(i[c])):mn(i[c]):i[c],c,void 0,r&&r[c])}else if(typeof i=="number"){e=new Array(i);for(let o=0;o<i;o++)e[o]=s(o+1,o,void 0,r&&r[o])}else if(rt(i))if(i[Symbol.iterator])e=Array.from(i,(o,l)=>s(o,l,void 0,r&&r[l]));else{const o=Object.keys(i);e=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];e[l]=s(i[c],c,l,r&&r[l])}}else e=[];return n&&(n[t]=e),e}function X(i,s,n={},t,e){if(yt.ce||yt.parent&&Ii(yt.parent)&&yt.parent.ce){const u=Object.keys(n).length>0;return s!=="default"&&(n.name=s),A(),ye(ke,null,[ee("slot",n,t&&t())],u?-2:64)}let r=i[s];r&&r._c&&(r._d=!1),A();const a=r&&qf(r(n)),o=n.key||a&&a.key,l=ye(ke,{key:(o&&!Yn(o)?o:`_${s}`)+(!a&&t?"_fb":"")},a||(t?t():[]),a&&i._===1?64:-2);return!e&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function qf(i){return i.some(s=>jr(s)?!(s.type===mt||s.type===ke&&!qf(s.children)):!0)?i:null}const Lo=i=>i?mh(i)?Ca(i):Lo(i.parent):null,Ir=ft(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Lo(i.parent),$root:i=>Lo(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>ml(i),$forceUpdate:i=>i.f||(i.f=()=>{vl(i.update)}),$nextTick:i=>i.n||(i.n=Sa.bind(i.proxy)),$watch:i=>rp.bind(i)}),ja=(i,s)=>i!==Je&&!i.__isScriptSetup&&Ke(i,s),Sp={get({_:i},s){if(s==="__v_skip")return!0;const{ctx:n,setupState:t,data:e,props:r,accessCache:a,type:o,appContext:l}=i;if(s[0]!=="$"){const h=a[s];if(h!==void 0)switch(h){case 1:return t[s];case 2:return e[s];case 4:return n[s];case 3:return r[s]}else{if(ja(t,s))return a[s]=1,t[s];if(e!==Je&&Ke(e,s))return a[s]=2,e[s];if(Ke(r,s))return a[s]=3,r[s];if(n!==Je&&Ke(n,s))return a[s]=4,n[s];Io&&(a[s]=0)}}const u=Ir[s];let c,f;if(u)return s==="$attrs"&&Ct(i.attrs,"get",""),u(i);if((c=o.__cssModules)&&(c=c[s]))return c;if(n!==Je&&Ke(n,s))return a[s]=4,n[s];if(f=l.config.globalProperties,Ke(f,s))return f[s]},set({_:i},s,n){const{data:t,setupState:e,ctx:r}=i;return ja(e,s)?(e[s]=n,!0):t!==Je&&Ke(t,s)?(t[s]=n,!0):Ke(i.props,s)||s[0]==="$"&&s.slice(1)in i?!1:(r[s]=n,!0)},has({_:{data:i,setupState:s,accessCache:n,ctx:t,appContext:e,props:r,type:a}},o){let l;return!!(n[o]||i!==Je&&o[0]!=="$"&&Ke(i,o)||ja(s,o)||Ke(r,o)||Ke(t,o)||Ke(Ir,o)||Ke(e.config.globalProperties,o)||(l=a.__cssModules)&&l[o])},defineProperty(i,s,n){return n.get!=null?i._.accessCache[s]=0:Ke(n,"value")&&this.set(i,s,n.value,null),Reflect.defineProperty(i,s,n)}};function Ep(){return kp().slots}function kp(i){const s=rs();return s.setupContext||(s.setupContext=_h(s))}function fu(i){return we(i)?i.reduce((s,n)=>(s[n]=null,s),{}):i}let Io=!0;function wp(i){const s=ml(i),n=i.proxy,t=i.ctx;Io=!1,s.beforeCreate&&hu(s.beforeCreate,i,"bc");const{data:e,computed:r,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:v,activated:m,deactivated:p,beforeDestroy:S,beforeUnmount:C,destroyed:_,unmounted:E,render:k,renderTracked:N,renderTriggered:I,errorCaptured:U,serverPrefetch:D,expose:O,inheritAttrs:K,components:y,directives:b,filters:w}=s;if(u&&Tp(u,t,null),a)for(const H in a){const $=a[H];Ie($)&&(t[H]=$.bind(n))}if(e){const H=e.call(n,n);rt(H)&&(i.data=_a(H))}if(Io=!0,r)for(const H in r){const $=r[H],ie=Ie($)?$.bind(n,n):Ie($.get)?$.get.bind(n,n):un,Ee=!Ie($)&&Ie($.set)?$.set.bind(n):un,re=he({get:ie,set:Ee});Object.defineProperty(t,H,{enumerable:!0,configurable:!0,get:()=>re.value,set:We=>re.value=We})}if(o)for(const H in o)Jf(o[H],t,n,H);if(l){const H=Ie(l)?l.call(n):l;Reflect.ownKeys(H).forEach($=>{lr($,H[$])})}c&&hu(c,i,"c");function P(H,$){we($)?$.forEach(ie=>H(ie.bind(n))):$&&H($.bind(n))}if(P(gp,f),P(Bt,h),P(Wf,d),P(pl,v),P(dp,m),P(vp,p),P(bp,U),P(_p,N),P(yp,I),P(Kf,C),P(_n,E),P(mp,D),we(O))if(O.length){const H=i.exposed||(i.exposed={});O.forEach($=>{Object.defineProperty(H,$,{get:()=>n[$],set:ie=>n[$]=ie,enumerable:!0})})}else i.exposed||(i.exposed={});k&&i.render===un&&(i.render=k),K!=null&&(i.inheritAttrs=K),y&&(i.components=y),b&&(i.directives=b),D&&jf(i)}function Tp(i,s,n=un){we(i)&&(i=Do(i));for(const t in i){const e=i[t];let r;rt(e)?"default"in e?r=pn(e.from||t,e.default,!0):r=pn(e.from||t):r=pn(e),xt(r)?Object.defineProperty(s,t,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):s[t]=r}}function hu(i,s,n){yn(we(i)?i.map(t=>t.bind(s.proxy)):i.bind(s.proxy),s,n)}function Jf(i,s,n,t){let e=t.includes(".")?Rf(n,t):()=>n[t];if(ut(i)){const r=s[i];Ie(r)&&Qt(e,r)}else if(Ie(i))Qt(e,i.bind(n));else if(rt(i))if(we(i))i.forEach(r=>Jf(r,s,n,t));else{const r=Ie(i.handler)?i.handler.bind(n):s[i.handler];Ie(r)&&Qt(e,r,i)}}function ml(i){const s=i.type,{mixins:n,extends:t}=s,{mixins:e,optionsCache:r,config:{optionMergeStrategies:a}}=i.appContext,o=r.get(s);let l;return o?l=o:!e.length&&!n&&!t?l=s:(l={},e.length&&e.forEach(u=>Ws(l,u,a,!0)),Ws(l,s,a)),rt(s)&&r.set(s,l),l}function Ws(i,s,n,t=!1){const{mixins:e,extends:r}=s;r&&Ws(i,r,n,!0),e&&e.forEach(a=>Ws(i,a,n,!0));for(const a in s)if(!(t&&a==="expose")){const o=Cp[a]||n&&n[a];i[a]=o?o(i[a],s[a]):s[a]}return i}const Cp={data:du,props:vu,emits:vu,methods:Cr,computed:Cr,beforeCreate:Dt,created:Dt,beforeMount:Dt,mounted:Dt,beforeUpdate:Dt,updated:Dt,beforeDestroy:Dt,beforeUnmount:Dt,destroyed:Dt,unmounted:Dt,activated:Dt,deactivated:Dt,errorCaptured:Dt,serverPrefetch:Dt,components:Cr,directives:Cr,watch:Ap,provide:du,inject:Pp};function du(i,s){return s?i?function(){return ft(Ie(i)?i.call(this,this):i,Ie(s)?s.call(this,this):s)}:s:i}function Pp(i,s){return Cr(Do(i),Do(s))}function Do(i){if(we(i)){const s={};for(let n=0;n<i.length;n++)s[i[n]]=i[n];return s}return i}function Dt(i,s){return i?[...new Set([].concat(i,s))]:s}function Cr(i,s){return i?ft(Object.create(null),i,s):s}function vu(i,s){return i?we(i)&&we(s)?[...new Set([...i,...s])]:ft(Object.create(null),fu(i),fu(s??{})):s}function Ap(i,s){if(!i)return s;if(!s)return i;const n=ft(Object.create(null),i);for(const t in s)n[t]=Dt(i[t],s[t]);return n}function Qf(){return{app:null,config:{isNativeTag:ef,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xp=0;function Lp(i,s){return function(t,e=null){Ie(t)||(t=ft({},t)),e!=null&&!rt(e)&&(e=null);const r=Qf(),a=new WeakSet,o=[];let l=!1;const u=r.app={_uid:xp++,_component:t,_props:e,_container:null,_context:r,_instance:null,version:rg,get config(){return r.config},set config(c){},use(c,...f){return a.has(c)||(c&&Ie(c.install)?(a.add(c),c.install(u,...f)):Ie(c)&&(a.add(c),c(u,...f))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,f){return f?(r.components[c]=f,u):r.components[c]},directive(c,f){return f?(r.directives[c]=f,u):r.directives[c]},mount(c,f,h){if(!l){const d=u._ceVNode||ee(t,e);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),f&&s?s(d,c):i(d,c,h),l=!0,u._container=c,c.__vue_app__=u,Ca(d.component)}},onUnmount(c){o.push(c)},unmount(){l&&(yn(o,u._instance,16),i(null,u._container),delete u._container.__vue_app__)},provide(c,f){return r.provides[c]=f,u},runWithContext(c){const f=cr;cr=u;try{return c()}finally{cr=f}}};return u}}let cr=null;const Ip=(i,s)=>s==="modelValue"||s==="model-value"?i.modelModifiers:i[`${s}Modifiers`]||i[`${fn(s)}Modifiers`]||i[`${Fi(s)}Modifiers`];function Dp(i,s,...n){if(i.isUnmounted)return;const t=i.vnode.props||Je;let e=n;const r=s.startsWith("update:"),a=r&&Ip(t,s.slice(7));a&&(a.trim&&(e=n.map(c=>ut(c)?c.trim():c)),a.number&&(e=n.map(gv)));let o,l=t[o=Ba(s)]||t[o=Ba(fn(s))];!l&&r&&(l=t[o=Ba(Fi(s))]),l&&yn(l,i,6,e);const u=t[o+"Once"];if(u){if(!i.emitted)i.emitted={};else if(i.emitted[o])return;i.emitted[o]=!0,yn(u,i,6,e)}}const Op=new WeakMap;function Zf(i,s,n=!1){const t=n?Op:s.emitsCache,e=t.get(i);if(e!==void 0)return e;const r=i.emits;let a={},o=!1;if(!Ie(i)){const l=u=>{const c=Zf(u,s,!0);c&&(o=!0,ft(a,c))};!n&&s.mixins.length&&s.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!r&&!o?(rt(i)&&t.set(i,null),null):(we(r)?r.forEach(l=>a[l]=null):ft(a,r),rt(i)&&t.set(i,a),a)}function Ta(i,s){return!i||!ts(s)?!1:(s=s.slice(2).replace(/Once$/,""),Ke(i,s[0].toLowerCase()+s.slice(1))||Ke(i,Fi(s))||Ke(i,s))}function za(i){const{type:s,vnode:n,proxy:t,withProxy:e,propsOptions:[r],slots:a,attrs:o,emit:l,render:u,renderCache:c,props:f,data:h,setupState:d,ctx:v,inheritAttrs:m}=i,p=js(i);let S,C;try{if(n.shapeFlag&4){const E=e||t,k=E;S=on(u.call(k,E,c,f,d,h,v)),C=o}else{const E=s;S=on(E.length>1?E(f,{attrs:o,slots:a,emit:l}):E(f,null)),C=s.props?o:Rp(o)}}catch(E){Dr.length=0,ba(E,i,1),S=ee(mt)}let _=S;if(C&&m!==!1){const E=Object.keys(C),{shapeFlag:k}=_;E.length&&k&7&&(r&&E.some(rl)&&(C=Mp(C,r)),_=vi(_,C,!1,!0))}return n.dirs&&(_=vi(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&Hr(_,n.transition),S=_,js(p),S}const Rp=i=>{let s;for(const n in i)(n==="class"||n==="style"||ts(n))&&((s||(s={}))[n]=i[n]);return s},Mp=(i,s)=>{const n={};for(const t in i)(!rl(t)||!(t.slice(9)in s))&&(n[t]=i[t]);return n};function Np(i,s,n){const{props:t,children:e,component:r}=i,{props:a,children:o,patchFlag:l}=s,u=r.emitsOptions;if(s.dirs||s.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return t?pu(t,a,u):!!a;if(l&8){const c=s.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==t[h]&&!Ta(u,h))return!0}}}else return(e||o)&&(!o||!o.$stable)?!0:t===a?!1:t?a?pu(t,a,u):!0:!!a;return!1}function pu(i,s,n){const t=Object.keys(s);if(t.length!==Object.keys(i).length)return!0;for(let e=0;e<t.length;e++){const r=t[e];if(s[r]!==i[r]&&!Ta(n,r))return!0}return!1}function eh({vnode:i,parent:s},n){for(;s;){const t=s.subTree;if(t.suspense&&t.suspense.activeBranch===i&&(t.el=i.el),t===i)(i=s.vnode).el=n,s=s.parent;else break}}const th={},nh=()=>Object.create(th),ih=i=>Object.getPrototypeOf(i)===th;function Bp(i,s,n,t=!1){const e={},r=nh();i.propsDefaults=Object.create(null),rh(i,s,e,r);for(const a in i.propsOptions[0])a in e||(e[a]=void 0);n?i.props=t?e:zv(e):i.type.props?i.props=e:i.props=r,i.attrs=r}function Fp(i,s,n,t){const{props:e,attrs:r,vnode:{patchFlag:a}}=i,o=ze(e),[l]=i.propsOptions;let u=!1;if((t||a>0)&&!(a&16)){if(a&8){const c=i.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(Ta(i.emitsOptions,h))continue;const d=s[h];if(l)if(Ke(r,h))d!==r[h]&&(r[h]=d,u=!0);else{const v=fn(h);e[v]=Oo(l,o,v,d,i,!1)}else d!==r[h]&&(r[h]=d,u=!0)}}}else{rh(i,s,e,r)&&(u=!0);let c;for(const f in o)(!s||!Ke(s,f)&&((c=Fi(f))===f||!Ke(s,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(e[f]=Oo(l,o,f,void 0,i,!0)):delete e[f]);if(r!==o)for(const f in r)(!s||!Ke(s,f))&&(delete r[f],u=!0)}u&&Bn(i.attrs,"set","")}function rh(i,s,n,t){const[e,r]=i.propsOptions;let a=!1,o;if(s)for(let l in s){if(xi(l))continue;const u=s[l];let c;e&&Ke(e,c=fn(l))?!r||!r.includes(c)?n[c]=u:(o||(o={}))[c]=u:Ta(i.emitsOptions,l)||(!(l in t)||u!==t[l])&&(t[l]=u,a=!0)}if(r){const l=ze(n),u=o||Je;for(let c=0;c<r.length;c++){const f=r[c];n[f]=Oo(e,l,f,u[f],i,!Ke(u,f))}}return a}function Oo(i,s,n,t,e,r){const a=i[n];if(a!=null){const o=Ke(a,"default");if(o&&t===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ie(l)){const{propsDefaults:u}=e;if(n in u)t=u[n];else{const c=ss(e);t=u[n]=l.call(null,s),c()}}else t=l;e.ce&&e.ce._setProp(n,t)}a[0]&&(r&&!o?t=!1:a[1]&&(t===""||t===Fi(n))&&(t=!0))}return t}const Up=new WeakMap;function sh(i,s,n=!1){const t=n?Up:s.propsCache,e=t.get(i);if(e)return e;const r=i.props,a={},o=[];let l=!1;if(!Ie(i)){const c=f=>{l=!0;const[h,d]=sh(f,s,!0);ft(a,h),d&&o.push(...d)};!n&&s.mixins.length&&s.mixins.forEach(c),i.extends&&c(i.extends),i.mixins&&i.mixins.forEach(c)}if(!r&&!l)return rt(i)&&t.set(i,sr),sr;if(we(r))for(let c=0;c<r.length;c++){const f=fn(r[c]);gu(f)&&(a[f]=Je)}else if(r)for(const c in r){const f=fn(c);if(gu(f)){const h=r[c],d=a[f]=we(h)||Ie(h)?{type:h}:ft({},h),v=d.type;let m=!1,p=!0;if(we(v))for(let S=0;S<v.length;++S){const C=v[S],_=Ie(C)&&C.name;if(_==="Boolean"){m=!0;break}else _==="String"&&(p=!1)}else m=Ie(v)&&v.name==="Boolean";d[0]=m,d[1]=p,(m||Ke(d,"default"))&&o.push(f)}}const u=[a,o];return rt(i)&&t.set(i,u),u}function gu(i){return i[0]!=="$"&&!xi(i)}const yl=i=>i==="_"||i==="_ctx"||i==="$stable",_l=i=>we(i)?i.map(on):[on(i)],Vp=(i,s,n)=>{if(s._n)return s;const t=ae((...e)=>_l(s(...e)),n);return t._c=!1,t},ah=(i,s,n)=>{const t=i._ctx;for(const e in i){if(yl(e))continue;const r=i[e];if(Ie(r))s[e]=Vp(e,r,t);else if(r!=null){const a=_l(r);s[e]=()=>a}}},oh=(i,s)=>{const n=_l(s);i.slots.default=()=>n},lh=(i,s,n)=>{for(const t in s)(n||!yl(t))&&(i[t]=s[t])},Hp=(i,s,n)=>{const t=i.slots=nh();if(i.vnode.shapeFlag&32){const e=s._;e?(lh(t,s,n),n&&af(t,"_",e,!0)):ah(s,t)}else s&&oh(i,s)},$p=(i,s,n)=>{const{vnode:t,slots:e}=i;let r=!0,a=Je;if(t.shapeFlag&32){const o=s._;o?n&&o===1?r=!1:lh(e,s,n):(r=!s.$stable,ah(s,e)),a=s}else s&&(oh(i,s),a={default:1});if(r)for(const o in e)!yl(o)&&a[o]==null&&delete e[o]},Ot=vh;function Gp(i){return uh(i)}function jp(i){return uh(i,fp)}function uh(i,s){const n=ma();n.__VUE__=!0;const{insert:t,remove:e,patchProp:r,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=un,insertStaticContent:v}=i,m=(T,x,V,J=null,Y=null,W=null,te=void 0,se=null,ne=!!x.dynamicChildren)=>{if(T===x)return;T&&!Ci(T,x)&&(J=nn(T),We(T,Y,W,!0),T=null),x.patchFlag===-2&&(ne=!1,x.dynamicChildren=null);const{type:Q,ref:Se,shapeFlag:ue}=x;switch(Q){case Di:p(T,x,V,J);break;case mt:S(T,x,V,J);break;case fr:T==null&&C(x,V,J,te);break;case ke:y(T,x,V,J,Y,W,te,se,ne);break;default:ue&1?k(T,x,V,J,Y,W,te,se,ne):ue&6?b(T,x,V,J,Y,W,te,se,ne):(ue&64||ue&128)&&Q.process(T,x,V,J,Y,W,te,se,ne,zt)}Se!=null&&Y?ur(Se,T&&T.ref,W,x||T,!x):Se==null&&T&&T.ref!=null&&ur(T.ref,null,W,T,!0)},p=(T,x,V,J)=>{if(T==null)t(x.el=o(x.children),V,J);else{const Y=x.el=T.el;x.children!==T.children&&u(Y,x.children)}},S=(T,x,V,J)=>{T==null?t(x.el=l(x.children||""),V,J):x.el=T.el},C=(T,x,V,J)=>{[T.el,T.anchor]=v(T.children,x,V,J,T.el,T.anchor)},_=({el:T,anchor:x},V,J)=>{let Y;for(;T&&T!==x;)Y=h(T),t(T,V,J),T=Y;t(x,V,J)},E=({el:T,anchor:x})=>{let V;for(;T&&T!==x;)V=h(T),e(T),T=V;e(x)},k=(T,x,V,J,Y,W,te,se,ne)=>{if(x.type==="svg"?te="svg":x.type==="math"&&(te="mathml"),T==null)N(x,V,J,Y,W,te,se,ne);else{const Q=T.el&&T.el._isVueCE?T.el:null;try{Q&&Q._beginPatch(),D(T,x,Y,W,te,se,ne)}finally{Q&&Q._endPatch()}}},N=(T,x,V,J,Y,W,te,se)=>{let ne,Q;const{props:Se,shapeFlag:ue,transition:ve,dirs:Ae}=T;if(ne=T.el=a(T.type,W,Se&&Se.is,Se),ue&8?c(ne,T.children):ue&16&&U(T.children,ne,null,J,Y,Wa(T,W),te,se),Ae&&Tn(T,null,J,"created"),I(ne,T,T.scopeId,te,J),Se){for(const Ze in Se)Ze!=="value"&&!xi(Ze)&&r(ne,Ze,null,Se[Ze],W,J);"value"in Se&&r(ne,"value",null,Se.value,W),(Q=Se.onVnodeBeforeMount)&&an(Q,J,T)}Ae&&Tn(T,null,J,"beforeMount");const Ve=ch(Y,ve);Ve&&ve.beforeEnter(ne),t(ne,x,V),((Q=Se&&Se.onVnodeMounted)||Ve||Ae)&&Ot(()=>{Q&&an(Q,J,T),Ve&&ve.enter(ne),Ae&&Tn(T,null,J,"mounted")},Y)},I=(T,x,V,J,Y)=>{if(V&&d(T,V),J)for(let W=0;W<J.length;W++)d(T,J[W]);if(Y){let W=Y.subTree;if(x===W||dh(W.type)&&(W.ssContent===x||W.ssFallback===x)){const te=Y.vnode;I(T,te,te.scopeId,te.slotScopeIds,Y.parent)}}},U=(T,x,V,J,Y,W,te,se,ne=0)=>{for(let Q=ne;Q<T.length;Q++){const Se=T[Q]=se?oi(T[Q]):on(T[Q]);m(null,Se,x,V,J,Y,W,te,se)}},D=(T,x,V,J,Y,W,te)=>{const se=x.el=T.el;let{patchFlag:ne,dynamicChildren:Q,dirs:Se}=x;ne|=T.patchFlag&16;const ue=T.props||Je,ve=x.props||Je;let Ae;if(V&&bi(V,!1),(Ae=ve.onVnodeBeforeUpdate)&&an(Ae,V,x,T),Se&&Tn(x,T,V,"beforeUpdate"),V&&bi(V,!0),(ue.innerHTML&&ve.innerHTML==null||ue.textContent&&ve.textContent==null)&&c(se,""),Q?O(T.dynamicChildren,Q,se,V,J,Wa(x,Y),W):te||$(T,x,se,null,V,J,Wa(x,Y),W,!1),ne>0){if(ne&16)K(se,ue,ve,V,Y);else if(ne&2&&ue.class!==ve.class&&r(se,"class",null,ve.class,Y),ne&4&&r(se,"style",ue.style,ve.style,Y),ne&8){const Ve=x.dynamicProps;for(let Ze=0;Ze<Ve.length;Ze++){const qe=Ve[Ze],Ft=ue[qe],St=ve[qe];(St!==Ft||qe==="value")&&r(se,qe,Ft,St,Y,V)}}ne&1&&T.children!==x.children&&c(se,x.children)}else!te&&Q==null&&K(se,ue,ve,V,Y);((Ae=ve.onVnodeUpdated)||Se)&&Ot(()=>{Ae&&an(Ae,V,x,T),Se&&Tn(x,T,V,"updated")},J)},O=(T,x,V,J,Y,W,te)=>{for(let se=0;se<x.length;se++){const ne=T[se],Q=x[se],Se=ne.el&&(ne.type===ke||!Ci(ne,Q)||ne.shapeFlag&198)?f(ne.el):V;m(ne,Q,Se,null,J,Y,W,te,!0)}},K=(T,x,V,J,Y)=>{if(x!==V){if(x!==Je)for(const W in x)!xi(W)&&!(W in V)&&r(T,W,x[W],null,Y,J);for(const W in V){if(xi(W))continue;const te=V[W],se=x[W];te!==se&&W!=="value"&&r(T,W,se,te,Y,J)}"value"in V&&r(T,"value",x.value,V.value,Y)}},y=(T,x,V,J,Y,W,te,se,ne)=>{const Q=x.el=T?T.el:o(""),Se=x.anchor=T?T.anchor:o("");let{patchFlag:ue,dynamicChildren:ve,slotScopeIds:Ae}=x;Ae&&(se=se?se.concat(Ae):Ae),T==null?(t(Q,V,J),t(Se,V,J),U(x.children||[],V,Se,Y,W,te,se,ne)):ue>0&&ue&64&&ve&&T.dynamicChildren&&T.dynamicChildren.length===ve.length?(O(T.dynamicChildren,ve,V,Y,W,te,se),(x.key!=null||Y&&x===Y.subTree)&&bl(T,x,!0)):$(T,x,V,Se,Y,W,te,se,ne)},b=(T,x,V,J,Y,W,te,se,ne)=>{x.slotScopeIds=se,T==null?x.shapeFlag&512?Y.ctx.activate(x,V,J,te,ne):w(x,V,J,Y,W,te,ne):R(T,x,ne)},w=(T,x,V,J,Y,W,te)=>{const se=T.component=Qp(T,J,Y);if(ka(T)&&(se.ctx.renderer=zt),Zp(se,!1,te),se.asyncDep){if(Y&&Y.registerDep(se,P,te),!T.el){const ne=se.subTree=ee(mt);S(null,ne,x,V),T.placeholder=ne.el}}else P(se,T,x,V,Y,W,te)},R=(T,x,V)=>{const J=x.component=T.component;if(Np(T,x,V))if(J.asyncDep&&!J.asyncResolved){H(J,x,V);return}else J.next=x,J.update();else x.el=T.el,J.vnode=x},P=(T,x,V,J,Y,W,te)=>{const se=()=>{if(T.isMounted){let{next:ue,bu:ve,u:Ae,parent:Ve,vnode:Ze}=T;{const Wt=fh(T);if(Wt){ue&&(ue.el=Ze.el,H(T,ue,te)),Wt.asyncDep.then(()=>{T.isUnmounted||se()});return}}let qe=ue,Ft;bi(T,!1),ue?(ue.el=Ze.el,H(T,ue,te)):ue=Ze,ve&&Fa(ve),(Ft=ue.props&&ue.props.onVnodeBeforeUpdate)&&an(Ft,Ve,ue,Ze),bi(T,!0);const St=za(T),hn=T.subTree;T.subTree=St,m(hn,St,f(hn.el),nn(hn),T,Y,W),ue.el=St.el,qe===null&&eh(T,St.el),Ae&&Ot(Ae,Y),(Ft=ue.props&&ue.props.onVnodeUpdated)&&Ot(()=>an(Ft,Ve,ue,Ze),Y)}else{let ue;const{el:ve,props:Ae}=x,{bm:Ve,m:Ze,parent:qe,root:Ft,type:St}=T,hn=Ii(x);if(bi(T,!1),Ve&&Fa(Ve),!hn&&(ue=Ae&&Ae.onVnodeBeforeMount)&&an(ue,qe,x),bi(T,!0),ve&&Qe){const Wt=()=>{T.subTree=za(T),Qe(ve,T.subTree,T,Y,null)};hn&&St.__asyncHydrate?St.__asyncHydrate(ve,T,Wt):Wt()}else{Ft.ce&&Ft.ce._def.shadowRoot!==!1&&Ft.ce._injectChildStyle(St);const Wt=T.subTree=za(T);m(null,Wt,V,J,T,Y,W),x.el=Wt.el}if(Ze&&Ot(Ze,Y),!hn&&(ue=Ae&&Ae.onVnodeMounted)){const Wt=x;Ot(()=>an(ue,qe,Wt),Y)}(x.shapeFlag&256||qe&&Ii(qe.vnode)&&qe.vnode.shapeFlag&256)&&T.a&&Ot(T.a,Y),T.isMounted=!0,x=V=J=null}};T.scope.on();const ne=T.effect=new hf(se);T.scope.off();const Q=T.update=ne.run.bind(ne),Se=T.job=ne.runIfDirty.bind(ne);Se.i=T,Se.id=T.uid,ne.scheduler=()=>vl(Se),bi(T,!0),Q()},H=(T,x,V)=>{x.component=T;const J=T.vnode.props;T.vnode=x,T.next=null,Fp(T,x.props,J,V),$p(T,x.children,V),Gn(),nu(T),jn()},$=(T,x,V,J,Y,W,te,se,ne=!1)=>{const Q=T&&T.children,Se=T?T.shapeFlag:0,ue=x.children,{patchFlag:ve,shapeFlag:Ae}=x;if(ve>0){if(ve&128){Ee(Q,ue,V,J,Y,W,te,se,ne);return}else if(ve&256){ie(Q,ue,V,J,Y,W,te,se,ne);return}}Ae&8?(Se&16&&lt(Q,Y,W),ue!==Q&&c(V,ue)):Se&16?Ae&16?Ee(Q,ue,V,J,Y,W,te,se,ne):lt(Q,Y,W,!0):(Se&8&&c(V,""),Ae&16&&U(ue,V,J,Y,W,te,se,ne))},ie=(T,x,V,J,Y,W,te,se,ne)=>{T=T||sr,x=x||sr;const Q=T.length,Se=x.length,ue=Math.min(Q,Se);let ve;for(ve=0;ve<ue;ve++){const Ae=x[ve]=ne?oi(x[ve]):on(x[ve]);m(T[ve],Ae,V,null,Y,W,te,se,ne)}Q>Se?lt(T,Y,W,!0,!1,ue):U(x,V,J,Y,W,te,se,ne,ue)},Ee=(T,x,V,J,Y,W,te,se,ne)=>{let Q=0;const Se=x.length;let ue=T.length-1,ve=Se-1;for(;Q<=ue&&Q<=ve;){const Ae=T[Q],Ve=x[Q]=ne?oi(x[Q]):on(x[Q]);if(Ci(Ae,Ve))m(Ae,Ve,V,null,Y,W,te,se,ne);else break;Q++}for(;Q<=ue&&Q<=ve;){const Ae=T[ue],Ve=x[ve]=ne?oi(x[ve]):on(x[ve]);if(Ci(Ae,Ve))m(Ae,Ve,V,null,Y,W,te,se,ne);else break;ue--,ve--}if(Q>ue){if(Q<=ve){const Ae=ve+1,Ve=Ae<Se?x[Ae].el:J;for(;Q<=ve;)m(null,x[Q]=ne?oi(x[Q]):on(x[Q]),V,Ve,Y,W,te,se,ne),Q++}}else if(Q>ve)for(;Q<=ue;)We(T[Q],Y,W,!0),Q++;else{const Ae=Q,Ve=Q,Ze=new Map;for(Q=Ve;Q<=ve;Q++){const Kt=x[Q]=ne?oi(x[Q]):on(x[Q]);Kt.key!=null&&Ze.set(Kt.key,Q)}let qe,Ft=0;const St=ve-Ve+1;let hn=!1,Wt=0;const br=new Array(St);for(Q=0;Q<St;Q++)br[Q]=0;for(Q=Ae;Q<=ue;Q++){const Kt=T[Q];if(Ft>=St){We(Kt,Y,W,!0);continue}let Sn;if(Kt.key!=null)Sn=Ze.get(Kt.key);else for(qe=Ve;qe<=ve;qe++)if(br[qe-Ve]===0&&Ci(Kt,x[qe])){Sn=qe;break}Sn===void 0?We(Kt,Y,W,!0):(br[Sn-Ve]=Q+1,Sn>=Wt?Wt=Sn:hn=!0,m(Kt,x[Sn],V,null,Y,W,te,se,ne),Ft++)}const ql=hn?zp(br):sr;for(qe=ql.length-1,Q=St-1;Q>=0;Q--){const Kt=Ve+Q,Sn=x[Kt],Jl=x[Kt+1],Ql=Kt+1<Se?Jl.el||hh(Jl):J;br[Q]===0?m(null,Sn,V,Ql,Y,W,te,se,ne):hn&&(qe<0||Q!==ql[qe]?re(Sn,V,Ql,2):qe--)}}},re=(T,x,V,J,Y=null)=>{const{el:W,type:te,transition:se,children:ne,shapeFlag:Q}=T;if(Q&6){re(T.component.subTree,x,V,J);return}if(Q&128){T.suspense.move(x,V,J);return}if(Q&64){te.move(T,x,V,zt);return}if(te===ke){t(W,x,V);for(let ue=0;ue<ne.length;ue++)re(ne[ue],x,V,J);t(T.anchor,x,V);return}if(te===fr){_(T,x,V);return}if(J!==2&&Q&1&&se)if(J===0)se.beforeEnter(W),t(W,x,V),Ot(()=>se.enter(W),Y);else{const{leave:ue,delayLeave:ve,afterLeave:Ae}=se,Ve=()=>{T.ctx.isUnmounted?e(W):t(W,x,V)},Ze=()=>{W._isLeaving&&W[Mn](!0),ue(W,()=>{Ve(),Ae&&Ae()})};ve?ve(W,Ve,Ze):Ze()}else t(W,x,V)},We=(T,x,V,J=!1,Y=!1)=>{const{type:W,props:te,ref:se,children:ne,dynamicChildren:Q,shapeFlag:Se,patchFlag:ue,dirs:ve,cacheIndex:Ae}=T;if(ue===-2&&(Y=!1),se!=null&&(Gn(),ur(se,null,V,T,!0),jn()),Ae!=null&&(x.renderCache[Ae]=void 0),Se&256){x.ctx.deactivate(T);return}const Ve=Se&1&&ve,Ze=!Ii(T);let qe;if(Ze&&(qe=te&&te.onVnodeBeforeUnmount)&&an(qe,x,T),Se&6)tn(T.component,V,J);else{if(Se&128){T.suspense.unmount(V,J);return}Ve&&Tn(T,null,x,"beforeUnmount"),Se&64?T.type.remove(T,x,V,zt,J):Q&&!Q.hasOnce&&(W!==ke||ue>0&&ue&64)?lt(Q,x,V,!1,!0):(W===ke&&ue&384||!Y&&Se&16)&&lt(ne,x,V),J&&Pe(T)}(Ze&&(qe=te&&te.onVnodeUnmounted)||Ve)&&Ot(()=>{qe&&an(qe,x,T),Ve&&Tn(T,null,x,"unmounted")},V)},Pe=T=>{const{type:x,el:V,anchor:J,transition:Y}=T;if(x===ke){pt(V,J);return}if(x===fr){E(T);return}const W=()=>{e(V),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(T.shapeFlag&1&&Y&&!Y.persisted){const{leave:te,delayLeave:se}=Y,ne=()=>te(V,W);se?se(T.el,W,ne):ne()}else W()},pt=(T,x)=>{let V;for(;T!==x;)V=h(T),e(T),T=V;e(x)},tn=(T,x,V)=>{const{bum:J,scope:Y,job:W,subTree:te,um:se,m:ne,a:Q}=T;mu(ne),mu(Q),J&&Fa(J),Y.stop(),W&&(W.flags|=8,We(te,T,x,V)),se&&Ot(se,x),Ot(()=>{T.isUnmounted=!0},x)},lt=(T,x,V,J=!1,Y=!1,W=0)=>{for(let te=W;te<T.length;te++)We(T[te],x,V,J,Y)},nn=T=>{if(T.shapeFlag&6)return nn(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const x=h(T.anchor||T.el),V=x&&x[Mf];return V?h(V):x};let bt=!1;const bn=(T,x,V)=>{let J;T==null?x._vnode&&(We(x._vnode,null,null,!0),J=x._vnode.component):m(x._vnode||null,T,x,null,null,null,V),x._vnode=T,bt||(bt=!0,nu(J),Gs(),bt=!1)},zt={p:m,um:We,m:re,r:Pe,mt:w,mc:U,pc:$,pbc:O,n:nn,o:i};let Zn,Qe;return s&&([Zn,Qe]=s(zt)),{render:bn,hydrate:Zn,createApp:Lp(bn,Zn)}}function Wa({type:i,props:s},n){return n==="svg"&&i==="foreignObject"||n==="mathml"&&i==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:n}function bi({effect:i,job:s},n){n?(i.flags|=32,s.flags|=4):(i.flags&=-33,s.flags&=-5)}function ch(i,s){return(!i||i&&!i.pendingBranch)&&s&&!s.persisted}function bl(i,s,n=!1){const t=i.children,e=s.children;if(we(t)&&we(e))for(let r=0;r<t.length;r++){const a=t[r];let o=e[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=e[r]=oi(e[r]),o.el=a.el),!n&&o.patchFlag!==-2&&bl(a,o)),o.type===Di&&(o.patchFlag!==-1?o.el=a.el:o.__elIndex=r+(i.type===ke?1:0)),o.type===mt&&!o.el&&(o.el=a.el)}}function zp(i){const s=i.slice(),n=[0];let t,e,r,a,o;const l=i.length;for(t=0;t<l;t++){const u=i[t];if(u!==0){if(e=n[n.length-1],i[e]<u){s[t]=e,n.push(t);continue}for(r=0,a=n.length-1;r<a;)o=r+a>>1,i[n[o]]<u?r=o+1:a=o;u<i[n[r]]&&(r>0&&(s[t]=n[r-1]),n[r]=t)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=s[a];return n}function fh(i){const s=i.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:fh(s)}function mu(i){if(i)for(let s=0;s<i.length;s++)i[s].flags|=8}function hh(i){if(i.placeholder)return i.placeholder;const s=i.component;return s?hh(s.subTree):null}const dh=i=>i.__isSuspense;function vh(i,s){s&&s.pendingBranch?we(i)?s.effects.push(...i):s.effects.push(i):Lf(i)}const ke=Symbol.for("v-fgt"),Di=Symbol.for("v-txt"),mt=Symbol.for("v-cmt"),fr=Symbol.for("v-stc"),Dr=[];let Jt=null;function A(i=!1){Dr.push(Jt=i?null:[])}function Wp(){Dr.pop(),Jt=Dr[Dr.length-1]||null}let Gr=1;function Ks(i,s=!1){Gr+=i,i<0&&Jt&&s&&(Jt.hasOnce=!0)}function ph(i){return i.dynamicChildren=Gr>0?Jt||sr:null,Wp(),Gr>0&&Jt&&Jt.push(i),i}function F(i,s,n,t,e,r){return ph(M(i,s,n,t,e,r,!0))}function ye(i,s,n,t,e){return ph(ee(i,s,n,t,e,!0))}function jr(i){return i?i.__v_isVNode===!0:!1}function Ci(i,s){return i.type===s.type&&i.key===s.key}const gh=({key:i})=>i??null,Rs=({ref:i,ref_key:s,ref_for:n})=>(typeof i=="number"&&(i=""+i),i!=null?ut(i)||xt(i)||Ie(i)?{i:yt,r:i,k:s,f:!!n}:i:null);function M(i,s=null,n=null,t=0,e=null,r=i===ke?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:s,key:s&&gh(s),ref:s&&Rs(s),scopeId:Df,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:t,dynamicProps:e,dynamicChildren:null,appContext:null,ctx:yt};return o?(Sl(l,n),r&128&&i.normalize(l)):n&&(l.shapeFlag|=ut(n)?8:16),Gr>0&&!a&&Jt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Jt.push(l),l}const ee=Kp;function Kp(i,s=null,n=null,t=0,e=null,r=!1){if((!i||i===Yf)&&(i=mt),jr(i)){const o=vi(i,s,!0);return n&&Sl(o,n),Gr>0&&!r&&Jt&&(o.shapeFlag&6?Jt[Jt.indexOf(i)]=o:Jt.push(o)),o.patchFlag=-2,o}if(ig(i)&&(i=i.__vccOpts),s){s=Yp(s);let{class:o,style:l}=s;o&&!ut(o)&&(s.class=be(o)),rt(l)&&(dl(l)&&!we(l)&&(l=ft({},l)),s.style=xn(l))}const a=ut(i)?1:dh(i)?128:Nf(i)?64:rt(i)?4:Ie(i)?2:0;return M(i,s,n,t,e,a,r,!0)}function Yp(i){return i?dl(i)||ih(i)?ft({},i):i:null}function vi(i,s,n=!1,t=!1){const{props:e,ref:r,patchFlag:a,children:o,transition:l}=i,u=s?Ms(e||{},s):e,c={__v_isVNode:!0,__v_skip:!0,type:i.type,props:u,key:u&&gh(u),ref:s&&s.ref?n&&r?we(r)?r.concat(Rs(s)):[r,Rs(s)]:Rs(s):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:o,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:s&&i.type!==ke?a===-1?16:a|16:a,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:l,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&vi(i.ssContent),ssFallback:i.ssFallback&&vi(i.ssFallback),placeholder:i.placeholder,el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return l&&t&&Hr(c,l.clone(c)),c}function ht(i=" ",s=0){return ee(Di,null,i,s)}function Xp(i,s){const n=ee(fr,null,i);return n.staticCount=s,n}function le(i="",s=!1){return s?(A(),ye(mt,null,i)):ee(mt,null,i)}function on(i){return i==null||typeof i=="boolean"?ee(mt):we(i)?ee(ke,null,i.slice()):jr(i)?oi(i):ee(Di,null,String(i))}function oi(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:vi(i)}function Sl(i,s){let n=0;const{shapeFlag:t}=i;if(s==null)s=null;else if(we(s))n=16;else if(typeof s=="object")if(t&65){const e=s.default;e&&(e._c&&(e._d=!1),Sl(i,e()),e._c&&(e._d=!0));return}else{n=32;const e=s._;!e&&!ih(s)?s._ctx=yt:e===3&&yt&&(yt.slots._===1?s._=1:(s._=2,i.patchFlag|=1024))}else Ie(s)?(s={default:s,_ctx:yt},n=32):(s=String(s),t&64?(n=16,s=[ht(s)]):n=8);i.children=s,i.shapeFlag|=n}function Ms(...i){const s={};for(let n=0;n<i.length;n++){const t=i[n];for(const e in t)if(e==="class")s.class!==t.class&&(s.class=be([s.class,t.class]));else if(e==="style")s.style=xn([s.style,t.style]);else if(ts(e)){const r=s[e],a=t[e];a&&r!==a&&!(we(r)&&r.includes(a))&&(s[e]=r?[].concat(r,a):a)}else e!==""&&(s[e]=t[e])}return s}function an(i,s,n,t=null){yn(i,s,7,[n,t])}const qp=Qf();let Jp=0;function Qp(i,s,n){const t=i.type,e=(s?s.appContext:i.appContext)||qp,r={uid:Jp++,vnode:i,type:t,parent:s,appContext:e,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(e.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sh(t,e),emitsOptions:Zf(t,e),emit:null,emitted:null,propsDefaults:Je,inheritAttrs:t.inheritAttrs,ctx:Je,data:Je,props:Je,attrs:Je,slots:Je,refs:Je,setupState:Je,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=s?s.root:r,r.emit=Dp.bind(null,r),i.ce&&i.ce(r),r}let At=null;const rs=()=>At||yt;let Ys,Ro;{const i=ma(),s=(n,t)=>{let e;return(e=i[n])||(e=i[n]=[]),e.push(t),r=>{e.length>1?e.forEach(a=>a(r)):e[0](r)}};Ys=s("__VUE_INSTANCE_SETTERS__",n=>At=n),Ro=s("__VUE_SSR_SETTERS__",n=>zr=n)}const ss=i=>{const s=At;return Ys(i),i.scope.on(),()=>{i.scope.off(),Ys(s)}},yu=()=>{At&&At.scope.off(),Ys(null)};function mh(i){return i.vnode.shapeFlag&4}let zr=!1;function Zp(i,s=!1,n=!1){s&&Ro(s);const{props:t,children:e}=i.vnode,r=mh(i);Bp(i,t,r,s),Hp(i,e,n||s);const a=r?eg(i,s):void 0;return s&&Ro(!1),a}function eg(i,s){const n=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,Sp);const{setup:t}=n;if(t){Gn();const e=i.setupContext=t.length>1?_h(i):null,r=ss(i),a=ns(t,i,0,[i.props,e]),o=nf(a);if(jn(),r(),(o||i.sp)&&!Ii(i)&&jf(i),o){if(a.then(yu,yu),s)return a.then(l=>{_u(i,l,s)}).catch(l=>{ba(l,i,0)});i.asyncDep=a}else _u(i,a,s)}else yh(i,s)}function _u(i,s,n){Ie(s)?i.type.__ssrInlineRender?i.ssrRender=s:i.render=s:rt(s)&&(i.setupState=Pf(s)),yh(i,n)}let bu;function yh(i,s,n){const t=i.type;if(!i.render){if(!s&&bu&&!t.render){const e=t.template||ml(i).template;if(e){const{isCustomElement:r,compilerOptions:a}=i.appContext.config,{delimiters:o,compilerOptions:l}=t,u=ft(ft({isCustomElement:r,delimiters:o},a),l);t.render=bu(e,u)}}i.render=t.render||un}{const e=ss(i);Gn();try{wp(i)}finally{jn(),e()}}}const tg={get(i,s){return Ct(i,"get",""),i[s]}};function _h(i){const s=n=>{i.exposed=n||{}};return{attrs:new Proxy(i.attrs,tg),slots:i.slots,emit:i.emit,expose:s}}function Ca(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(Pf(Ds(i.exposed)),{get(s,n){if(n in s)return s[n];if(n in Ir)return Ir[n](i)},has(s,n){return n in s||n in Ir}})):i.proxy}function ng(i,s=!0){return Ie(i)?i.displayName||i.name:i.name||s&&i.__name}function ig(i){return Ie(i)&&"__vccOpts"in i}const he=(i,s)=>qv(i,s,zr);function Xs(i,s,n){try{Ks(-1);const t=arguments.length;return t===2?rt(s)&&!we(s)?jr(s)?ee(i,null,[s]):ee(i,s):ee(i,null,s):(t>3?n=Array.prototype.slice.call(arguments,2):t===3&&jr(n)&&(n=[n]),ee(i,s,n))}finally{Ks(1)}}const rg="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mo;const Su=typeof window<"u"&&window.trustedTypes;if(Su)try{Mo=Su.createPolicy("vue",{createHTML:i=>i})}catch{}const bh=Mo?i=>Mo.createHTML(i):i=>i,sg="http://www.w3.org/2000/svg",ag="http://www.w3.org/1998/Math/MathML",Rn=typeof document<"u"?document:null,Eu=Rn&&Rn.createElement("template"),og={insert:(i,s,n)=>{s.insertBefore(i,n||null)},remove:i=>{const s=i.parentNode;s&&s.removeChild(i)},createElement:(i,s,n,t)=>{const e=s==="svg"?Rn.createElementNS(sg,i):s==="mathml"?Rn.createElementNS(ag,i):n?Rn.createElement(i,{is:n}):Rn.createElement(i);return i==="select"&&t&&t.multiple!=null&&e.setAttribute("multiple",t.multiple),e},createText:i=>Rn.createTextNode(i),createComment:i=>Rn.createComment(i),setText:(i,s)=>{i.nodeValue=s},setElementText:(i,s)=>{i.textContent=s},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>Rn.querySelector(i),setScopeId(i,s){i.setAttribute(s,"")},insertStaticContent(i,s,n,t,e,r){const a=n?n.previousSibling:s.lastChild;if(e&&(e===r||e.nextSibling))for(;s.insertBefore(e.cloneNode(!0),n),!(e===r||!(e=e.nextSibling)););else{Eu.innerHTML=bh(t==="svg"?`<svg>${i}</svg>`:t==="mathml"?`<math>${i}</math>`:i);const o=Eu.content;if(t==="svg"||t==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}s.insertBefore(o,n)}return[a?a.nextSibling:s.firstChild,n?n.previousSibling:s.lastChild]}},ei="transition",Er="animation",Wr=Symbol("_vtc"),Sh={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lg=ft({},Uf,Sh),ug=i=>(i.displayName="Transition",i.props=lg,i),mr=ug((i,{slots:s})=>Xs(lp,cg(i),s)),Si=(i,s=[])=>{we(i)?i.forEach(n=>n(...s)):i&&i(...s)},ku=i=>i?we(i)?i.some(s=>s.length>1):i.length>1:!1;function cg(i){const s={};for(const y in i)y in Sh||(s[y]=i[y]);if(i.css===!1)return s;const{name:n="v",type:t,duration:e,enterFromClass:r=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:u=a,appearToClass:c=o,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=i,v=fg(e),m=v&&v[0],p=v&&v[1],{onBeforeEnter:S,onEnter:C,onEnterCancelled:_,onLeave:E,onLeaveCancelled:k,onBeforeAppear:N=S,onAppear:I=C,onAppearCancelled:U=_}=s,D=(y,b,w,R)=>{y._enterCancelled=R,Ei(y,b?c:o),Ei(y,b?u:a),w&&w()},O=(y,b)=>{y._isLeaving=!1,Ei(y,f),Ei(y,d),Ei(y,h),b&&b()},K=y=>(b,w)=>{const R=y?I:C,P=()=>D(b,y,w);Si(R,[b,P]),wu(()=>{Ei(b,y?l:r),On(b,y?c:o),ku(R)||Tu(b,t,m,P)})};return ft(s,{onBeforeEnter(y){Si(S,[y]),On(y,r),On(y,a)},onBeforeAppear(y){Si(N,[y]),On(y,l),On(y,u)},onEnter:K(!1),onAppear:K(!0),onLeave(y,b){y._isLeaving=!0;const w=()=>O(y,b);On(y,f),y._enterCancelled?(On(y,h),Au(y)):(Au(y),On(y,h)),wu(()=>{y._isLeaving&&(Ei(y,f),On(y,d),ku(E)||Tu(y,t,p,w))}),Si(E,[y,w])},onEnterCancelled(y){D(y,!1,void 0,!0),Si(_,[y])},onAppearCancelled(y){D(y,!0,void 0,!0),Si(U,[y])},onLeaveCancelled(y){O(y),Si(k,[y])}})}function fg(i){if(i==null)return null;if(rt(i))return[Ka(i.enter),Ka(i.leave)];{const s=Ka(i);return[s,s]}}function Ka(i){return mv(i)}function On(i,s){s.split(/\s+/).forEach(n=>n&&i.classList.add(n)),(i[Wr]||(i[Wr]=new Set)).add(s)}function Ei(i,s){s.split(/\s+/).forEach(t=>t&&i.classList.remove(t));const n=i[Wr];n&&(n.delete(s),n.size||(i[Wr]=void 0))}function wu(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}let hg=0;function Tu(i,s,n,t){const e=i._endId=++hg,r=()=>{e===i._endId&&t()};if(n!=null)return setTimeout(r,n);const{type:a,timeout:o,propCount:l}=dg(i,s);if(!a)return t();const u=a+"end";let c=0;const f=()=>{i.removeEventListener(u,h),r()},h=d=>{d.target===i&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},o+1),i.addEventListener(u,h)}function dg(i,s){const n=window.getComputedStyle(i),t=v=>(n[v]||"").split(", "),e=t(`${ei}Delay`),r=t(`${ei}Duration`),a=Cu(e,r),o=t(`${Er}Delay`),l=t(`${Er}Duration`),u=Cu(o,l);let c=null,f=0,h=0;s===ei?a>0&&(c=ei,f=a,h=r.length):s===Er?u>0&&(c=Er,f=u,h=l.length):(f=Math.max(a,u),c=f>0?a>u?ei:Er:null,h=c?c===ei?r.length:l.length:0);const d=c===ei&&/\b(?:transform|all)(?:,|$)/.test(t(`${ei}Property`).toString());return{type:c,timeout:f,propCount:h,hasTransform:d}}function Cu(i,s){for(;i.length<s.length;)i=i.concat(i);return Math.max(...s.map((n,t)=>Pu(n)+Pu(i[t])))}function Pu(i){return i==="auto"?0:Number(i.slice(0,-1).replace(",","."))*1e3}function Au(i){return(i?i.ownerDocument:document).body.offsetHeight}function vg(i,s,n){const t=i[Wr];t&&(s=(s?[s,...t]:[...t]).join(" ")),s==null?i.removeAttribute("class"):n?i.setAttribute("class",s):i.className=s}const qs=Symbol("_vod"),Eh=Symbol("_vsh"),kh={name:"show",beforeMount(i,{value:s},{transition:n}){i[qs]=i.style.display==="none"?"":i.style.display,n&&s?n.beforeEnter(i):kr(i,s)},mounted(i,{value:s},{transition:n}){n&&s&&n.enter(i)},updated(i,{value:s,oldValue:n},{transition:t}){!s!=!n&&(t?s?(t.beforeEnter(i),kr(i,!0),t.enter(i)):t.leave(i,()=>{kr(i,!1)}):kr(i,s))},beforeUnmount(i,{value:s}){kr(i,s)}};function kr(i,s){i.style.display=s?i[qs]:"none",i[Eh]=!s}const wh=Symbol("");function pg(i){const s=rs();if(!s)return;const n=s.ut=(e=i(s.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${s.uid}"]`)).forEach(r=>Js(r,e))},t=()=>{const e=i(s.proxy);s.ce?Js(s.ce,e):No(s.subTree,e),n(e)};Wf(()=>{Lf(t)}),Bt(()=>{Qt(t,un,{flush:"post"});const e=new MutationObserver(t);e.observe(s.subTree.el.parentNode,{childList:!0}),_n(()=>e.disconnect())})}function No(i,s){if(i.shapeFlag&128){const n=i.suspense;i=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{No(n.activeBranch,s)})}for(;i.component;)i=i.component.subTree;if(i.shapeFlag&1&&i.el)Js(i.el,s);else if(i.type===ke)i.children.forEach(n=>No(n,s));else if(i.type===fr){let{el:n,anchor:t}=i;for(;n&&(Js(n,s),n!==t);)n=n.nextSibling}}function Js(i,s){if(i.nodeType===1){const n=i.style;let t="";for(const e in s){const r=wv(s[e]);n.setProperty(`--${e}`,r),t+=`--${e}: ${r};`}n[wh]=t}}const gg=/(?:^|;)\s*display\s*:/;function mg(i,s,n){const t=i.style,e=ut(n);let r=!1;if(n&&!e){if(s)if(ut(s))for(const a of s.split(";")){const o=a.slice(0,a.indexOf(":")).trim();n[o]==null&&Ns(t,o,"")}else for(const a in s)n[a]==null&&Ns(t,a,"");for(const a in n)a==="display"&&(r=!0),Ns(t,a,n[a])}else if(e){if(s!==n){const a=t[wh];a&&(n+=";"+a),t.cssText=n,r=gg.test(n)}}else s&&i.removeAttribute("style");qs in i&&(i[qs]=r?t.display:"",i[Eh]&&(t.display="none"))}const xu=/\s*!important$/;function Ns(i,s,n){if(we(n))n.forEach(t=>Ns(i,s,t));else if(n==null&&(n=""),s.startsWith("--"))i.setProperty(s,n);else{const t=yg(i,s);xu.test(n)?i.setProperty(Fi(t),n.replace(xu,""),"important"):i[t]=n}}const Lu=["Webkit","Moz","ms"],Ya={};function yg(i,s){const n=Ya[s];if(n)return n;let t=fn(s);if(t!=="filter"&&t in i)return Ya[s]=t;t=ga(t);for(let e=0;e<Lu.length;e++){const r=Lu[e]+t;if(r in i)return Ya[s]=r}return s}const Iu="http://www.w3.org/1999/xlink";function Du(i,s,n,t,e,r=kv(s)){t&&s.startsWith("xlink:")?n==null?i.removeAttributeNS(Iu,s.slice(6,s.length)):i.setAttributeNS(Iu,s,n):n==null||r&&!of(n)?i.removeAttribute(s):i.setAttribute(s,r?"":Yn(n)?String(n):n)}function Ou(i,s,n,t,e){if(s==="innerHTML"||s==="textContent"){n!=null&&(i[s]=s==="innerHTML"?bh(n):n);return}const r=i.tagName;if(s==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?i.getAttribute("value")||"":i.value,l=n==null?i.type==="checkbox"?"on":"":String(n);(o!==l||!("_value"in i))&&(i.value=l),n==null&&i.removeAttribute(s),i._value=n;return}let a=!1;if(n===""||n==null){const o=typeof i[s];o==="boolean"?n=of(n):n==null&&o==="string"?(n="",a=!0):o==="number"&&(n=0,a=!0)}try{i[s]=n}catch{}a&&i.removeAttribute(e||s)}function _g(i,s,n,t){i.addEventListener(s,n,t)}function bg(i,s,n,t){i.removeEventListener(s,n,t)}const Ru=Symbol("_vei");function Sg(i,s,n,t,e=null){const r=i[Ru]||(i[Ru]={}),a=r[s];if(t&&a)a.value=t;else{const[o,l]=Eg(s);if(t){const u=r[s]=Tg(t,e);_g(i,o,u,l)}else a&&(bg(i,o,a,l),r[s]=void 0)}}const Mu=/(?:Once|Passive|Capture)$/;function Eg(i){let s;if(Mu.test(i)){s={};let t;for(;t=i.match(Mu);)i=i.slice(0,i.length-t[0].length),s[t[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Fi(i.slice(2)),s]}let Xa=0;const kg=Promise.resolve(),wg=()=>Xa||(kg.then(()=>Xa=0),Xa=Date.now());function Tg(i,s){const n=t=>{if(!t._vts)t._vts=Date.now();else if(t._vts<=n.attached)return;yn(Cg(t,n.value),s,5,[t])};return n.value=i,n.attached=wg(),n}function Cg(i,s){if(we(s)){const n=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{n.call(i),i._stopped=!0},s.map(t=>e=>!e._stopped&&t&&t(e))}else return s}const Nu=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,Pg=(i,s,n,t,e,r)=>{const a=e==="svg";s==="class"?vg(i,t,a):s==="style"?mg(i,n,t):ts(s)?rl(s)||Sg(i,s,n,t,r):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):Ag(i,s,t,a))?(Ou(i,s,t),!i.tagName.includes("-")&&(s==="value"||s==="checked"||s==="selected")&&Du(i,s,t,a,r,s!=="value")):i._isVueCE&&(/[A-Z]/.test(s)||!ut(t))?Ou(i,fn(s),t,r,s):(s==="true-value"?i._trueValue=t:s==="false-value"&&(i._falseValue=t),Du(i,s,t,a))};function Ag(i,s,n,t){if(t)return!!(s==="innerHTML"||s==="textContent"||s in i&&Nu(s)&&Ie(n));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="autocorrect"||s==="sandbox"&&i.tagName==="IFRAME"||s==="form"||s==="list"&&i.tagName==="INPUT"||s==="type"&&i.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const e=i.tagName;if(e==="IMG"||e==="VIDEO"||e==="CANVAS"||e==="SOURCE")return!1}return Nu(s)&&ut(n)?!1:s in i}const xg=["ctrl","shift","alt","meta"],Lg={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,s)=>xg.some(n=>i[`${n}Key`]&&!s.includes(n))},El=(i,s)=>{const n=i._withMods||(i._withMods={}),t=s.join(".");return n[t]||(n[t]=(e,...r)=>{for(let a=0;a<s.length;a++){const o=Lg[s[a]];if(o&&o(e,s))return}return i(e,...r)})},Th=ft({patchProp:Pg},og);let Or,Bu=!1;function Ig(){return Or||(Or=Gp(Th))}function Dg(){return Or=Bu?Or:jp(Th),Bu=!0,Or}const Oi=(...i)=>{Ig().render(...i)},Og=(...i)=>{const s=Dg().createApp(...i),{mount:n}=s;return s.mount=t=>{const e=Mg(t);if(e)return n(e,!0,Rg(e))},s};function Rg(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Mg(i){return ut(i)?document.querySelector(i):i}const de=(i,s)=>{const n=i.__vccOpts||i;for(const[t,e]of s)n[t]=e;return n};const Ng=["disabled","type"],Bg={key:0,class:"chenshi-button__loading"},Fg={key:1,class:"chenshi-button__icon"},Ug=fe({name:"chenshi-button",__name:"button",props:{type:{default:"default"},size:{default:"normal"},plain:{type:Boolean},round:{type:Boolean},circle:{type:Boolean},disabled:{type:Boolean},loading:{type:Boolean},icon:{},nativeType:{default:"button"}},emits:["click"],setup(i,{emit:s}){const n=i,t=s,e=he(()=>({[`chenshi-button--${n.type}`]:n.type,[`chenshi-button--${n.size}`]:n.size,"is-plain":n.plain,"is-round":n.round,"is-circle":n.circle,"is-disabled":n.disabled||n.loading,"is-loading":n.loading})),r=a=>{n.disabled||n.loading||t("click",a)};return(a,o)=>(A(),F("button",{class:be(["chenshi-button",e.value]),disabled:i.disabled||i.loading,type:i.nativeType,onClick:r},[i.loading?(A(),F("span",Bg,[...o[0]||(o[0]=[M("i",{class:"chenshi-icon-loading"},null,-1)])])):le("",!0),i.icon&&!i.loading?(A(),F("span",Fg,[M("i",{class:be(i.icon)},null,2)])):le("",!0),M("span",{class:be({"chenshi-button__text":a.$slots.default})},[X(a.$slots,"default")],2)],10,Ng))}}),qn=i=>(i.install=s=>{const n=i.name||i.__name;s.component(n,i)},i),Ch=qn(Ug),Vg={class:"cs-header__left"},Hg=["src"],$g={key:1,class:"cs-header__back-svg",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Gg={class:"cs-header__center"},jg={class:"cs-header__right"},zg=fe({name:"CsHeader",__name:"header",props:{showBack:{type:Boolean,default:!0},title:{default:""},backgroundColor:{default:"#ffffff"},statusBarHeight:{default:0},isOnlyPhone:{type:Boolean,default:!1},backIcon:{default:""}},emits:["back"],setup(i,{emit:s}){const n=s,t=()=>{n("back")};return(e,r)=>(A(),F(ke,null,[i.statusBarHeight>0?(A(),F("div",{key:0,class:be(["cs-header-status-bar",{"is-phone":i.isOnlyPhone}]),style:xn({height:i.statusBarHeight+"px",background:i.isOnlyPhone?i.backgroundColor:"unset"})},null,6)):le("",!0),M("div",{class:be(["cs-header",{"is-pc":!i.isOnlyPhone}]),style:xn({backgroundColor:i.backgroundColor})},[M("div",Vg,[X(e.$slots,"left",{},()=>[i.showBack?(A(),F("div",{key:0,class:"cs-header__back",onClick:t},[X(e.$slots,"back-icon",{},()=>[i.backIcon?(A(),F("img",{key:0,class:"cs-header__back-img",src:i.backIcon,alt:""},null,8,Hg)):(A(),F("svg",$g,[...r[0]||(r[0]=[M("path",{fill:"currentColor",d:"M603.3 773.7L342.2 512.6l261.1-261.1 42.4 42.4-218.7 218.7 218.7 218.7z"},null,-1)])]))])])):le("",!0)])]),M("div",Gg,[X(e.$slots,"default",{},()=>[ht(Ne(i.title),1)])]),M("div",jg,[X(e.$slots,"right")])],6)],64))}}),Ph=qn(zg),Fu=i=>i,Wg=i=>i,Uu=i=>typeof i=="number",Kg={urlList:{type:Fu(Array),default:()=>Wg([])},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Fu(String)},rotate:{type:Boolean,default:!0}},Yg={close:()=>!0,switch:i=>Uu(i),rotate:i=>Uu(i)},Xg=["src","crossorigin"],qg=fe({name:"CsImageViewer",__name:"image-viewer",props:Kg,emits:Yg,setup(i,{expose:s,emit:n}){const t={space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape"},e=i,r=n,a={e:b=>`cs-image-viewer__${b}`,is:(b,w)=>w?`is-${b}`:""},o=Be(),l=Be([]);Tv();const u=Be(!0),c=Be(e.initialIndex),f=Be({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),h=he(()=>e.urlList.length<=1),d=he(()=>c.value===0),v=he(()=>c.value===e.urlList.length-1),m=he(()=>e.urlList[c.value]),p=he(()=>["cs-image-viewer__btn","cs-image-viewer__prev",a.is("disabled",!e.infinite&&d.value)]),S=he(()=>["cs-image-viewer__btn","cs-image-viewer__next",a.is("disabled",!e.infinite&&v.value)]),C=he(()=>{const{scale:b,deg:w,offsetX:R,offsetY:P,enableTransition:H}=f.value;return{transform:`scale(${b}) rotate(${w}deg) translate(${R/b}px, ${P/b}px)`,transition:H?"transform .3s":""}});function _(){r("close")}function E(){const b=R=>{switch(R.code){case t.esc:e.closeOnPressEscape&&_();break;case t.space:U();break;case t.left:O();break;case t.up:y("zoomIn");break;case t.right:K();break;case t.down:y("zoomOut");break}},w=R=>{const P=R.deltaY||R.deltaX;y(P<0?"zoomIn":"zoomOut",{zoomRate:e.zoomRate,enableTransition:!1})};document.addEventListener("keydown",b),document.addEventListener("wheel",w),_n(()=>{document.removeEventListener("keydown",b),document.removeEventListener("wheel",w)})}function k(){u.value=!1}function N(b){u.value=!1,b.target.alt="error"}function I(b){if(u.value||b.button!==0||!o.value)return;f.value.enableTransition=!1;const{offsetX:w,offsetY:R}=f.value,P=b.pageX,H=b.pageY,$=Ee=>{f.value={...f.value,offsetX:w+Ee.pageX-P,offsetY:R+Ee.pageY-H}},ie=()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",ie)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",ie),b.preventDefault()}function U(){f.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function D(b){const w=e.urlList.length;c.value=(b+w)%w}function O(){d.value&&!e.infinite||D(c.value-1)}function K(){v.value&&!e.infinite||D(c.value+1)}function y(b,w={}){if(u.value)return;const{minScale:R,maxScale:P}=e,{zoomRate:H,rotateDeg:$,enableTransition:ie}={zoomRate:e.zoomRate,rotateDeg:90,enableTransition:!0,...w};switch(b){case"zoomOut":f.value.scale>R&&(f.value.scale=Number.parseFloat((f.value.scale/H).toFixed(3)));break;case"zoomIn":f.value.scale<P&&(f.value.scale=Number.parseFloat((f.value.scale*H).toFixed(3)));break;case"clockwise":f.value.deg+=$,r("rotate",f.value.deg);break;case"anticlockwise":f.value.deg-=$,r("rotate",f.value.deg);break}f.value.enableTransition=ie}return Qt(m,()=>{Sa(()=>{const b=l.value[c.value];b!=null&&b.complete||(u.value=!0)})}),Qt(c,b=>{U(),r("switch",b)}),Bt(()=>{var b,w;E(),(w=(b=o.value)==null?void 0:b.focus)==null||w.call(b)}),s({setActiveItem:D}),(b,w)=>(A(),ye(is,{to:"body",disabled:!b.teleported},[ee(mr,{name:"cs-viewer-fade",appear:""},{default:ae(()=>[M("div",{ref_key:"wrapper",ref:o,tabindex:-1,class:be(a.e("wrapper")),style:xn({zIndex:b.zIndex})},[M("div",{class:be(a.e("mask")),onClick:w[0]||(w[0]=El(R=>b.hideOnClickModal&&_(),["self"]))},null,2),M("span",{class:be([a.e("label")])},Ne(c.value+1)+"/"+Ne(b.urlList.length),3),M("span",{class:be([a.e("btn"),a.e("close")]),onClick:_},[X(b.$slots,"close-icon",{},()=>[w[5]||(w[5]=M("i",{class:"cs-icon-close"},"",-1))])],2),h.value?le("",!0):(A(),F(ke,{key:0},[M("span",{class:be(p.value),onClick:O},[X(b.$slots,"prev-icon",{},()=>[w[6]||(w[6]=M("i",{class:"cs-icon-prev"},"",-1))])],2),M("span",{class:be(S.value),onClick:K},[X(b.$slots,"next-icon",{},()=>[w[7]||(w[7]=M("i",{class:"cs-icon-next"},"",-1))])],2)],64)),M("div",{class:be([a.e("btn"),a.e("actions")])},[M("div",{class:be(a.e("actions__inner"))},[M("span",{class:be(a.e("icon")),onClick:w[1]||(w[1]=R=>y("zoomOut"))},"",2),M("i",{class:be(a.e("actions__divider"))},null,2),M("span",{class:be(a.e("icon")),onClick:U},"1:1",2),M("i",{class:be(a.e("actions__divider"))},null,2),M("span",{class:be(a.e("icon")),onClick:w[2]||(w[2]=R=>y("zoomIn"))},"",2),b.rotate?(A(),F(ke,{key:0},[M("i",{class:be(a.e("actions__divider"))},null,2),M("span",{class:be(a.e("icon")),onClick:w[3]||(w[3]=R=>y("anticlockwise"))},"",2),M("i",{class:be(a.e("actions__divider"))},null,2),M("span",{class:be(a.e("icon")),onClick:w[4]||(w[4]=R=>y("clockwise"))},"",2)],64)):le("",!0)],2)],2),M("div",{class:be(a.e("canvas"))},[(A(!0),F(ke,null,Lt(b.urlList,(R,P)=>Of((A(),F("img",{ref_for:!0,ref:H=>l.value[P]=H,key:R,src:R,style:xn(C.value),class:be(a.e("img")),crossorigin:b.crossorigin,onLoad:k,onError:N,onMousedown:I},null,46,Xg)),[[kh,P===c.value]])),128))],2),X(b.$slots,"default")],6)]),_:3})],8,["disabled"]))}}),Ah=qn(qg),Jg={class:"cs-loading-icon"},Qg={key:0,class:"cs-loading__msg"},xh=fe({name:"CsLoading",__name:"loading",props:{msg:{default:"..."},visible:{type:Boolean,default:!1},options:{}},setup(i){return(s,n)=>(A(),ye(is,{to:"body"},[ee(mr,{name:"cs-fade"},{default:ae(()=>{var t;return[i.visible?(A(),F("div",{key:0,class:"cs-loading",style:xn((t=i.options)==null?void 0:t.style),onTouchmove:n[0]||(n[0]=El(()=>{},["prevent"]))},[M("div",Jg,[X(s.$slots,"icon",{},()=>[n[1]||(n[1]=M("div",{class:"cs-loading-icon__spinner"},null,-1))])]),i.msg?(A(),F("p",Qg,Ne(i.msg),1)):le("",!0)],36)):le("",!0)]}),_:3})]))}});let Rr=null;const nr=document.createElement("div");function kl(i="...",s={}){Rr||(Rr=ee(xh,{msg:i,visible:!0,options:s}),Oi(Rr,nr),document.body.appendChild(nr))}function wl(){Rr&&(Oi(null,nr),nr.parentNode&&nr.parentNode.removeChild(nr),Rr=null)}const Lh=qn(xh),Ih={show:kl,hide:wl},Zg={key:0,class:"cs-dialog-wrapper"},em={class:"cs-dialog"},tm={key:0,class:"cs-dialog__header"},nm={class:"cs-dialog__content"},im={class:"cs-dialog__footer"},Dh=fe({name:"CsDialog",__name:"dialog",props:{visible:{type:Boolean,default:!1},title:{default:""},content:{default:""},showCancel:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},cancelText:{default:""},confirmText:{default:""},closeOnClickModal:{type:Boolean,default:!0}},emits:["update:visible","cancel","confirm"],setup(i,{emit:s}){const n=i,t=s,e=()=>{t("cancel"),t("update:visible",!1)},r=()=>{t("confirm"),t("update:visible",!1)},a=()=>{n.closeOnClickModal&&e()};return(o,l)=>(A(),ye(is,{to:"body"},[ee(mr,{name:"cs-fade"},{default:ae(()=>[i.visible?(A(),F("div",Zg,[M("div",{class:"cs-dialog-mask",onClick:a}),M("div",em,[i.title?(A(),F("div",tm,[X(o.$slots,"title",{},()=>[ht(Ne(i.title),1)])])):le("",!0),M("div",nm,[X(o.$slots,"default",{},()=>[ht(Ne(i.content),1)])]),M("div",im,[i.showCancel?(A(),F("button",{key:0,class:"cs-dialog__btn cs-dialog__btn--cancel",onClick:e},Ne(i.cancelText),1)):le("",!0),i.showConfirm?(A(),F("button",{key:1,class:"cs-dialog__btn cs-dialog__btn--confirm",onClick:r},Ne(i.confirmText),1)):le("",!0)])])])):le("",!0)]),_:3})]))}});function Tl(i){const s=document.createElement("div"),n=typeof i=="string"?{content:i}:i;let t=ee(Dh,{...n,visible:!0,"onUpdate:visible":e=>{e||(Oi(null,s),s.remove(),t=null)},onConfirm:()=>{var e;(e=n.onConfirm)==null||e.call(n)},onCancel:()=>{var e;(e=n.onCancel)==null||e.call(n)}});Oi(t,s),document.body.appendChild(s)}const Oh=qn(Dh),rm={class:"cs-toast__content"},Rh=fe({name:"CsToast",__name:"toast",props:{msg:{default:""},visible:{type:Boolean,default:!1},duration:{default:2e3},zIndex:{default:3e3}},setup(i){return(s,n)=>(A(),ye(is,{to:"body"},[ee(mr,{name:"cs-fade"},{default:ae(()=>[i.visible?(A(),F("div",{key:0,class:"cs-toast",style:xn({zIndex:i.zIndex})},[M("div",rm,[X(s.$slots,"default",{},()=>[ht(Ne(i.msg),1)])])],4)):le("",!0)]),_:3})]))}});let _s=null,dn=null;function Mh(i,s=2e3){_s&&(clearTimeout(_s),dn&&(Oi(null,dn),dn.remove(),dn=null)),dn=document.createElement("div");const n=ee(Rh,{msg:i,visible:!0,duration:s});Oi(n,dn),document.body.appendChild(dn),_s=setTimeout(()=>{dn&&(Oi(null,dn),dn.remove(),dn=null),_s=null},s)}const Nh=qn(Rh),sm={class:"cs-split__second"},Bh=fe({name:"CsSplit",__name:"split",props:{direction:{default:"horizontal"},min:{default:10},max:{default:90},modelValue:{default:50}},emits:["update:modelValue","resize"],setup(i,{emit:s}){const n=i,t=s,e=Be(null),r=Be(n.modelValue),a=he(()=>{const c=`${r.value}%`;return n.direction==="horizontal"?{width:c}:{height:c}}),o=c=>{c.preventDefault(),document.addEventListener("mousemove",l),document.addEventListener("mouseup",u),document.body.style.cursor=n.direction==="horizontal"?"col-resize":"row-resize"},l=c=>{if(!e.value)return;const f=e.value.getBoundingClientRect();let h=0,d=0;n.direction==="horizontal"?(h=c.clientX-f.left,d=f.width):(h=c.clientY-f.top,d=f.height);let v=h/d*100;v<n.min&&(v=n.min),v>n.max&&(v=n.max),r.value=v,t("update:modelValue",v),t("resize",v)},u=()=>{document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",u),document.body.style.cursor=""};return _n(()=>{u()}),(c,f)=>(A(),F("div",{ref_key:"containerRef",ref:e,class:be(["cs-split",`is-${i.direction}`])},[M("div",{style:xn(a.value),class:"cs-split__first"},[X(c.$slots,"first")],4),M("div",{class:"cs-split__trigger",onMousedown:o},[X(c.$slots,"trigger",{},()=>[f[0]||(f[0]=M("div",{class:"cs-split__trigger-line"},null,-1))])],32),M("div",sm,[X(c.$slots,"second")])],2))}}),am={class:"cs-layout__main"},om={key:1,class:"cs-layout__content"},lm={key:1,class:"cs-layout__footer"},um=fe({name:"CsLayout",__name:"layout",props:{title:{default:""},showHeader:{type:Boolean,default:!0},showBack:{type:Boolean,default:!0},isOnlyPhone:{type:Boolean,default:!0},interceptBack:{type:Boolean,default:!1},backDialogTitle:{default:""},backDialogContent:{default:""},split:{type:Boolean,default:!1},splitDirection:{default:"horizontal"},defaultSplit:{default:50},minSplit:{default:10},maxSplit:{default:90}},emits:["back","confirm-back","split-resize"],setup(i,{emit:s}){const n=i,t=s,e=Be(n.defaultSplit),r=()=>{n.interceptBack?Tl({title:n.backDialogTitle,content:n.backDialogContent,onConfirm:()=>{t("confirm-back")}}):t("back")},a=o=>{t("split-resize",o)};return(o,l)=>{const u=gi("cs-header");return A(),F("div",{class:be(["cs-layout",[{"is-pc":!i.isOnlyPhone}]])},[i.showHeader?(A(),ye(u,{key:0,showBack:i.showBack,title:i.title,onBack:r},{right:ae(()=>[X(o.$slots,"header-right")]),_:3},8,["showBack","title"])):le("",!0),M("div",am,[i.split?(A(),ye(Bh,{key:0,modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c),direction:i.splitDirection,min:i.minSplit,max:i.maxSplit,onResize:a},{first:ae(()=>[X(o.$slots,"left")]),second:ae(()=>[X(o.$slots,"right")]),_:3},8,["modelValue","direction","min","max"])):(A(),F("div",om,[X(o.$slots,"default")]))]),o.$slots.footer?(A(),F("div",lm,[X(o.$slots,"footer")])):le("",!0)],2)}}}),Fh=qn(um),Uh=qn(Bh);function Vu(i,s){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})),n.push.apply(n,t)}return n}function ct(i){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Vu(Object(n),!0).forEach(function(t){G(i,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):Vu(Object(n)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(n,t))})}return i}function Nt(i){"@babel/helpers - typeof";return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Nt(i)}function pe(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}function Hu(i,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,Vh(t.key),t)}}function ge(i,s,n){return s&&Hu(i.prototype,s),n&&Hu(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}function G(i,s,n){return s=Vh(s),s in i?Object.defineProperty(i,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[s]=n,i}function Te(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),s&&Bo(i,s)}function Le(i){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Le(i)}function Bo(i,s){return Bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bo(i,s)}function cm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cl(i,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(i)}function Ce(i){var s=cm();return function(){var t=Le(i),e;if(s){var r=Le(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Cl(this,e)}}function fm(i,s){for(;!Object.prototype.hasOwnProperty.call(i,s)&&(i=Le(i),i!==null););return i}function Oe(){return typeof Reflect<"u"&&Reflect.get?Oe=Reflect.get.bind():Oe=function(s,n,t){var e=fm(s,n);if(e){var r=Object.getOwnPropertyDescriptor(e,n);return r.get?r.get.call(arguments.length<3?s:t):r.value}},Oe.apply(this,arguments)}function gn(i){return hm(i)||dm(i)||vm(i)||pm()}function hm(i){if(Array.isArray(i))return Fo(i)}function dm(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function vm(i,s){if(i){if(typeof i=="string")return Fo(i,s);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fo(i,s)}}function Fo(i,s){(s==null||s>i.length)&&(s=i.length);for(var n=0,t=new Array(s);n<s;n++)t[n]=i[n];return t}function pm(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gm(i,s){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var t=n.call(i,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)}function Vh(i){var s=gm(i,"string");return typeof s=="symbol"?s:String(s)}var mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pl(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Hh={exports:{}};(function(i){var s=Object.prototype.hasOwnProperty,n="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(n=!1));function e(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function r(l,u,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new e(c,f||l,h),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],d]:l._events[v].push(d):(l._events[v]=d,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new t:delete l._events[u]}function o(){this._events=new t,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)s.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,v=new Array(d);h<d;h++)v[h]=f[h].fn;return v},o.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,c,f,h,d,v){var m=n?n+u:u;if(!this._events[m])return!1;var p=this._events[m],S=arguments.length,C,_;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),S){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,f),!0;case 4:return p.fn.call(p.context,c,f,h),!0;case 5:return p.fn.call(p.context,c,f,h,d),!0;case 6:return p.fn.call(p.context,c,f,h,d,v),!0}for(_=1,C=new Array(S-1);_<S;_++)C[_-1]=arguments[_];p.fn.apply(p.context,C)}else{var E=p.length,k;for(_=0;_<E;_++)switch(p[_].once&&this.removeListener(u,p[_].fn,void 0,!0),S){case 1:p[_].fn.call(p[_].context);break;case 2:p[_].fn.call(p[_].context,c);break;case 3:p[_].fn.call(p[_].context,c,f);break;case 4:p[_].fn.call(p[_].context,c,f,h);break;default:if(!C)for(k=1,C=new Array(S-1);k<S;k++)C[k-1]=arguments[k];p[_].fn.apply(p[_].context,C)}}return!0},o.prototype.on=function(u,c,f){return r(this,u,c,f,!1)},o.prototype.once=function(u,c,f){return r(this,u,c,f,!0)},o.prototype.removeListener=function(u,c,f,h){var d=n?n+u:u;if(!this._events[d])return this;if(!c)return a(this,d),this;var v=this._events[d];if(v.fn)v.fn===c&&(!h||v.once)&&(!f||v.context===f)&&a(this,d);else{for(var m=0,p=[],S=v.length;m<S;m++)(v[m].fn!==c||h&&!v[m].once||f&&v[m].context!==f)&&p.push(v[m]);p.length?this._events[d]=p.length===1?p[0]:p:a(this,d)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&a(this,c)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,i.exports=o})(Hh);var $h=Hh.exports;const yr=Pl($h);var ym=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,qa={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},Ja="%c[xgplayer]",$e={config:{debug:ym?3:0},logInfo:function(s){for(var n,t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];this.config.debug>=3&&(n=console).log.apply(n,[Ja,qa.info,s].concat(e))},logWarn:function(s){for(var n,t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];this.config.debug>=1&&(n=console).warn.apply(n,[Ja,qa.warn,s].concat(e))},logError:function(s){var n;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];(n=console)[t].apply(n,[Ja,qa.error,s].concat(r))}}};function _m(i){i.logInfo=$e.logInfo.bind(i),i.logWarn=$e.logWarn.bind(i),i.logError=$e.logError.bind(i)}var bm=function(){function i(s){pe(this,i),this.bufferedList=s}return ge(i,[{key:"start",value:function(n){return this.bufferedList[n].start}},{key:"end",value:function(n){return this.bufferedList[n].end}},{key:"length",get:function(){return this.bufferedList.length}}]),i}(),g={};g.createDom=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(i);return e.className=t,e.innerHTML=s,Object.keys(n).forEach(function(r){var a=r,o=n[r];i==="video"||i==="audio"||i==="live-video"?o&&e.setAttribute(a,o):e.setAttribute(a,o)}),e};g.createDomFromHtml=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=i;var e=t.children;return t=null,e.length>0?(e=e[0],n&&g.addClass(e,n),s&&Object.keys(s).forEach(function(r){e.setAttribute(r,s[r])}),e):null}catch(r){return $e.logError("util.createDomFromHtml",r),null}};g.hasClass=function(i,s){if(!i||!s)return!1;try{return Array.prototype.some.call(i.classList,function(t){return t===s})}catch{var n=i.className&&Nt(i.className)==="object"?i.getAttribute("class"):i.className;return n&&!!n.match(new RegExp("(\\s|^)"+s+"(\\s|$)"))}};g.addClass=function(i,s){if(!(!i||!s))try{s.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(n){n&&i.classList.add(n)})}catch{g.hasClass(i,s)||(i.className&&Nt(i.className)==="object"?i.setAttribute("class",i.getAttribute("class")+" "+s):i.className+=" "+s)}};g.removeClass=function(i,s){if(!(!i||!s))try{s.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(n){n&&i.classList.remove(n)})}catch{g.hasClass(i,s)&&s.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");i.className&&Nt(i.className)==="object"?i.setAttribute("class",i.getAttribute("class").replace(e," ")):i.className=i.className.replace(e," ")})}};g.toggleClass=function(i,s){i&&s.split(/\s+/g).forEach(function(n){g.hasClass(i,n)?g.removeClass(i,n):g.addClass(i,n)})};g.classNames=function(){for(var i=arguments,s=[],n=function(r){g.typeOf(i[r])==="String"?s.push(i[r]):g.typeOf(i[r])==="Object"&&Object.keys(i[r]).map(function(a){i[r][a]&&s.push(a)})},t=0;t<arguments.length;t++)n(t);return s.join(" ")};g.findDom=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,s=arguments.length>1?arguments[1]:void 0,n;try{n=i.querySelector(s)}catch(t){$e.logError("util.findDom",t),s.indexOf("#")===0&&(n=i.getElementById(s.slice(1)))}return n};g.getCss=function(i,s){return i.currentStyle?i.currentStyle[s]:document.defaultView.getComputedStyle(i,!1)[s]};g.padStart=function(i,s,n){for(var t=String(n),e=s>>0,r=Math.ceil(e/t.length),a=[],o=String(i);r--;)a.push(t);return a.join("").substring(0,e-o.length)+o};g.format=function(i){if(window.isNaN(i))return"";i=Math.round(i);var s=g.padStart(Math.floor(i/3600),2,0),n=g.padStart(Math.floor((i-s*3600)/60),2,0),t=g.padStart(Math.floor(i-s*3600-n*60),2,0);return(s==="00"?[n,t]:[s,n,t]).join(":")};g.event=function(i){if(i.touches){var s=i.touches[0]||i.changedTouches[0];i.clientX=s.clientX||0,i.clientY=s.clientY||0,i.offsetX=s.pageX-s.target.offsetLeft,i.offsetY=s.pageY-s.target.offsetTop}i._target=i.target||i.srcElement};g.typeOf=function(i){return Object.prototype.toString.call(i).match(/([^\s.*]+)(?=]$)/g)[0]};g.deepCopy=function(i,s){if(g.typeOf(s)==="Object"&&g.typeOf(i)==="Object")return Object.keys(s).forEach(function(n){g.typeOf(s[n])==="Object"&&!(s[n]instanceof Node)?i[n]===void 0||i[n]===void 0?i[n]=s[n]:g.deepCopy(i[n],s[n]):g.typeOf(s[n])==="Array"?i[n]=g.typeOf(i[n])==="Array"?i[n].concat(s[n]):s[n]:i[n]=s[n]}),i};g.deepMerge=function(i,s){return Object.keys(s).map(function(n){if(g.typeOf(s[n])==="Array"&&g.typeOf(i[n])==="Array"){if(g.typeOf(i[n])==="Array"){var t;(t=i[n]).push.apply(t,gn(s[n]))}}else g.typeOf(i[n])===g.typeOf(s[n])&&i[n]!==null&&g.typeOf(i[n])==="Object"&&!(s[n]instanceof window.Node)?g.deepMerge(i[n],s[n]):s[n]!==null&&(i[n]=s[n])}),i};g.getBgImage=function(i){var s=(i.currentStyle||window.getComputedStyle(i,null)).backgroundImage;if(!s||s==="none")return"";var n=document.createElement("a");return n.href=s.replace(/url\("|"\)/g,""),n.href};g.copyDom=function(i){if(i&&i.nodeType===1){var s=document.createElement(i.tagName);return Array.prototype.forEach.call(i.attributes,function(n){s.setAttribute(n.name,n.value)}),i.innerHTML&&(s.innerHTML=i.innerHTML),s}else return""};g.setInterval=function(i,s,n,t){i._interval[s]||(i._interval[s]=window.setInterval(n.bind(i),t))};g.clearInterval=function(i,s){clearInterval(i._interval[s]),i._interval[s]=null};g.setTimeout=function(i,s,n){i._timers||(i._timers=[]);var t=setTimeout(function(){s(),g.clearTimeout(i,t)},n);return i._timers.push(t),t};g.clearTimeout=function(i,s){var n=i._timers;if(g.typeOf(n)==="Array"){for(var t=0;t<n.length;t++)if(n[t]===s){n.splice(t,1),clearTimeout(s);break}}else clearTimeout(s)};g.clearAllTimers=function(i){var s=i._timers;g.typeOf(s)==="Array"&&(s.map(function(n){clearTimeout(n)}),i._timerIds=[])};g.createImgBtn=function(i,s,n,t){var e=g.createDom("xg-".concat(i),"",{},"xgplayer-".concat(i,"-img"));if(e.style.backgroundImage='url("'.concat(s,'")'),n&&t){var r,a,o;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(l){return n.indexOf(l)>-1&&t.indexOf(l)>-1?(r=parseFloat(n.slice(0,n.indexOf(l)).trim()),a=parseFloat(t.slice(0,t.indexOf(l)).trim()),o=l,!1):!0}),e.style.width="".concat(r).concat(o),e.style.height="".concat(a).concat(o),e.style.backgroundSize="".concat(r).concat(o," ").concat(a).concat(o),i==="start"?e.style.margin="-".concat(a/2).concat(o," auto auto -").concat(r/2).concat(o):e.style.margin="auto 5px auto 5px"}return e};g.Hex2RGBA=function(i,s){var n=[];if(/^\#[0-9A-F]{3}$/i.test(i)){var t="#";i.replace(/[0-9A-F]/ig,function(e){t+=e+e}),i=t}return/^#[0-9A-F]{6}$/i.test(i)?(i.replace(/[0-9A-F]{2}/ig,function(e){n.push(parseInt(e,16))}),"rgba(".concat(n.join(","),", ").concat(s,")")):"rgba(255, 255, 255, 0.1)"};g.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};g.checkIsFunction=function(i){return i&&typeof i=="function"};g.checkIsObject=function(i){return i!==null&&Nt(i)==="object"};g.hide=function(i){i.style.display="none"};g.show=function(i,s){i.style.display=s||"block"};g.isUndefined=function(i){if(typeof i>"u"||i===null)return!0};g.isNotNull=function(i){return i!=null};g.setStyleFromCsstext=function(i,s){if(s)if(g.typeOf(s)==="String"){var n=s.replace(/\s+/g,"").split(";");n.map(function(t){if(t){var e=t.split(":");e.length>1&&(i.style[e[0]]=e[1])}})}else Object.keys(s).map(function(t){i.style[t]=s[t]})};function Sm(i,s){for(var n=0,t=s.length;n<t;n++)if(i.indexOf(s[n])>-1)return!0;return!1}g.filterStyleFromText=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=i.style.cssText;if(!n)return{};var t=n.replace(/\s+/g,"").split(";"),e={},r={};return t.map(function(a){if(a){var o=a.split(":");o.length>1&&(Sm(o[0],s)?e[o[0]]=o[1]:r[o[0]]=o[1])}}),i.setAttribute("style",""),Object.keys(r).map(function(a){i.style[a]=r[a]}),e};g.getStyleFromCsstext=function(i){var s=i.style.cssText;if(!s)return{};var n=s.replace(/\s+/g,"").split(";"),t={};return n.map(function(e){if(e){var r=e.split(":");r.length>1&&(t[r[0]]=r[1])}}),t};g.preloadImg=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(i){var t=new window.Image;t.onload=function(e){t=null,s&&s(e)},t.onerror=function(e){t=null,n&&n(e)},t.src=i}};g.stopPropagation=function(i){i&&i.stopPropagation()};g.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};g.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};g.checkTouchSupport=function(){return"ontouchstart"in window};g.getBuffered2=function(i){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,n=[],t=0;t<i.length;t++)n.push({start:i.start(t)<.5?0:i.start(t),end:i.end(t)});n.sort(function(l,u){var c=l.start-u.start;return c||u.end-l.end});var e=[];if(s)for(var r=0;r<n.length;r++){var a=e.length;if(a){var o=e[a-1].end;n[r].start-o<s?n[r].end>o&&(e[a-1].end=n[r].end):e.push(n[r])}else e.push(n[r])}else e=n;return new bm(e)};g.getEventPos=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return i.touches&&i.touches.length>0&&(i=i.touches[0]),{x:i.x/s,y:i.y/s,clientX:i.clientX/s,clientY:i.clientY/s,offsetX:i.offsetX/s,offsetY:i.offsetY/s,pageX:i.pageX/s,pageY:i.pageY/s}};g.requestAnimationFrame=function(i){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(s)return s(i)};g.getHostFromUrl=function(i){if(g.typeOf(i)!=="String")return"";var s=i.split("/"),n="";return s.length>3&&s[2]&&(n=s[2]),n};g.cancelAnimationFrame=function(i){var s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;s&&s(i)};g.isMSE=function(i){return i.media&&(i=i.media),!i||!(i instanceof HTMLMediaElement)?!1:/^blob/.test(i.currentSrc)||/^blob/.test(i.src)};g.isBlob=function(i){return typeof i=="string"&&/^blob/.test(i)};g.generateSessionId=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=new Date().getTime();try{i=parseInt(i)}catch{i=0}s+=i,window.performance&&typeof window.performance.now=="function"&&(s+=parseInt(window.performance.now()));var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(s+Math.random()*16)%16|0;return s=Math.floor(s/16),(t==="x"?e:e&3|8).toString(16)});return n};g.createEvent=function(i){var s;return typeof window.Event=="function"?s=new Event(i):(s=document.createEvent("Event"),s.initEvent(i,!0,!0)),s};g.adjustTimeByDuration=function(i,s,n){return!s||!i?i:i>s||n&&i<s?s:i};g.createPositionBar=function(i,s){var n=g.createDom("xg-bar","",{"data-index":-1},i);return s.appendChild(n),n};g.getTransformStyle=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n={scale:"".concat(i.scale||1),translate:"".concat(i.x||0,"%, ").concat(i.y||0,"%"),rotate:"".concat(i.rotate||0,"deg")},t=Object.keys(n);return t.forEach(function(e){var r=new RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),a="".concat(e,"(").concat(n[e],")");r.test(s)?(r.lastIndex=-1,s=s.replace(r,a)):s+="".concat(a," ")}),s};g.convertDeg=function(i){return Math.abs(i)<=1?i*360:i%360};g.getIndexByTime=function(i,s){var n=s.length,t=-1;if(n<1)return t;if(i<=s[0].end||n<2)t=0;else if(i>s[n-1].end)t=n-1;else for(var e=1;e<n;e++)if(i>s[e-1].end&&i<=s[e].end){t=e;break}return t};g.getOffsetCurrentTime=function(i,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,t=-1;if(n>=0&&n<s.length?t=n:t=g.getIndexByTime(i,s),t<0)return-1;var e=s.length,r=s[t],a=r.start,o=r.end,l=r.cTime,u=r.offset;return i<a?l:i>=a&&i<=o?i-u:i>o&&t>=e-1?o:-1};g.getCurrentTimeByOffset=function(i,s){var n=-1;if(!s||s.length<0)return i;for(var t=0;t<s.length;t++)if(i<=s[t].duration){n=t;break}if(n!==-1){var e=s[n].start;return n-1<0?e+i:e+(i-s[n-1].duration)}return i};function Gh(i){var s=Nt(i);return i!==null&&(s==="object"||s==="function")}function Em(i,s,n){var t,e,r,a,o,l,u=0,c=!1,f=!1,h=!0,d=!s&&s!==0&&typeof window.requestAnimationFrame=="function";if(typeof i!="function")throw new TypeError("Expected a function");s=+s||0,Gh(n)&&(c=!!n.leading,f="maxWait"in n,r=f?Math.max(+n.maxWait||0,s):r,h="trailing"in n?!!n.trailing:h);function v(O){var K=t,y=e;return t=e=void 0,u=O,a=i.apply(y,K),a}function m(O,K){return d?(window.cancelAnimationFrame(o),window.requestAnimationFrame(O)):setTimeout(O,K)}function p(O){if(d)return window.cancelAnimationFrame(O);clearTimeout(O)}function S(O){return u=O,o=m(E,s),c?v(O):a}function C(O){var K=O-l,y=O-u,b=s-K;return f?Math.min(b,r-y):b}function _(O){var K=O-l,y=O-u;return l===void 0||K>=s||K<0||f&&y>=r}function E(){var O=Date.now();if(_(O))return k(O);o=m(E,C(O))}function k(O){return o=void 0,h&&t?v(O):(t=e=void 0,a)}function N(){o!==void 0&&p(o),u=0,t=l=e=o=void 0}function I(){return o===void 0?a:k(Date.now())}function U(){return o!==void 0}function D(){for(var O=Date.now(),K=_(O),y=arguments.length,b=new Array(y),w=0;w<y;w++)b[w]=arguments[w];if(t=b,e=this,l=O,K){if(o===void 0)return S(l);if(f)return o=m(E,s),v(l)}return o===void 0&&(o=m(E,s)),a}return D.cancel=N,D.flush=I,D.pending=U,D}function km(i,s,n){var t=!0,e=!0;if(typeof i!="function")throw new TypeError("Expected a function");return Gh(n)&&(t="leading"in n?!!n.leading:t,e="trailing"in n?!!n.trailing:e),Em(i,s,{leading:t,trailing:e,maxWait:s})}function wm(){var i=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return i==="zh-cn"&&(i="zh"),i}function Tm(i,s,n){if(i){var t=i.getAttribute(n);return!!(t&&t===s&&(i.tagName==="VIDEO"||i.tagName==="AUDIO"))}}var $u={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},Cm=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],Fe={get device(){var i=Fe.os;return i.isPc?"pc":"mobile"},get browser(){if(typeof navigator>"u")return"";var i=navigator.userAgent.toLowerCase(),s={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(s).filter(function(n){return s[n].test(i)}))[0]},get os(){if(typeof navigator>"u")return{};var i=navigator.userAgent,s=/(?:Windows Phone)/.test(i),n=/(?:SymbianOS)/.test(i)||s,t=/(?:Tizen)/ig.test(i),e=/(?:Web0S)/ig.test(i),r=/(?:Android)/.test(i),a=/(?:Firefox)/.test(i),o=/(?:iPad|PlayBook)/.test(i)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,l=o||r&&!/(?:Mobile)/.test(i)||a&&/(?:Tablet)/.test(i),u=/(?:iPhone)/.test(i)&&!l,c=!u&&!r&&!n&&!l;return{isTablet:l,isPhone:u,isIpad:o,isIos:u||o,isAndroid:r,isPc:c,isSymbian:n,isWindowsPhone:s,isFireFox:a,isTizen:t,isWebOS:e}},get osVersion(){if(typeof navigator>"u")return 0;var i=navigator.userAgent,s="";/(?:iPhone)|(?:iPad|PlayBook)/.test(i)?s=$u.ios:s=$u.android;var n=s?s.exec(i):[];if(n&&n.length>=3){var t=n[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator>"u")return!1;var i=/(micromessenger)\/([\d.]+)/,s=i.exec(navigator.userAgent.toLocaleLowerCase());return!!s},isSupportMP4:function(){var s={isSupport:!1,mime:""};if(typeof document>"u")return s;if(this.supportResult)return this.supportResult;var n=document.createElement("video");return typeof n.canPlayType=="function"&&Cm.map(function(t){n.canPlayType('video/mp4; codecs="'.concat(t,'"'))==="probably"&&(s.isSupport=!0,s.mime+="||".concat(t))}),this.supportResult=s,n=null,s},isMSESupport:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource>"u"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(s)}catch(n){return this._logger.error(s,n),!1}},isHevcSupported:function(){return typeof MediaSource>"u"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(s){var n={supported:!1,smooth:!1,powerEfficient:!1};if(!s||typeof navigator>"u")return Promise.resolve(n);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(s);var t=s.video||{},e=s.audio||{};try{var r=MediaSource.isTypeSupported(t.contentType),a=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:r&&a,smooth:!1,powerEfficient:!1})}catch{return Promise.resolve(n)}}},Uo="3.0.23",Gu={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},ju={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},Kr=ge(function i(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};pe(this,i);var t=s&&s.i18n?s.i18n.ERROR_TYPES:null;if(s.media){var e=n.mediaError?n.mediaError:s.media.error||{},r=s.duration,a=s.currentTime,o=s.ended,l=s.src,u=s.currentSrc,c=s.media,f=c.readyState,h=c.networkState,d=n.errorCode||e.code;ju[d]&&(d=ju[d]);var v={playerVersion:Uo,currentTime:a,duration:r,ended:o,readyState:f,networkState:h,src:l||u,errorType:n.errorType,errorCode:d,message:n.errorMessage||e.message,mediaError:e,originError:n.originError?n.originError.stack:"",host:g.getHostFromUrl(l||u)};return n.ext&&Object.keys(n.ext).map(function(C){v[C]=n.ext[C]}),v}else if(arguments.length>1){for(var m={playerVersion:Uo,domain:document.domain},p=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],S=0;S<arguments.length;S++)m[p[S]]=arguments[S];return m.ex=t?(t[arguments[0]]||{}).msg:"",m}}),en="play",Al="playing",Ui="ended",_r="pause",Vi="error",Pa="seeking",Hn="seeked",Zt="timeupdate",as="waiting",Un="canplay",Pm="canplaythrough",Jn="durationchange",jh="volumechange",Wn="loadeddata",Am="loadedmetadata",zh="ratechange",Wh="progress",xl="loadstart",Hi="emptied",xm="stalled",Lm="suspend",Im="abort",Dm="bufferedChange",Ll="focus",Kh="blur",Il="ready",Yh="urlNull",Ri="autoplay_started",Dl="autoplay_was_prevented",Aa="complete",Qs="replay",xa="destroy",os="urlchange",Vo="download_speed_change",Xh="leaveplayer",qh="enterplayer",Jh="loading",Nn="fullscreen_change",Zs="cssFullscreen_change",ea="mini_state_change",Ol="definition_change",Om="before_definition_change",Ho="after_definition_change",Rm="SEI_PARSED",Mm="retry",pi="video_resize",$o="pip_change",Qh="rotate",Zh="screenShot",ta="playnext",ed="shortcut",td="xglog",na="user_action",La="reset",nd="source_error",id="source_success",rd="switch_subtitle",sd=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],ad={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},od="fps_stuck";const Nm=Object.freeze(Object.defineProperty({__proto__:null,ABORT:Im,AFTER_DEFINITION_CHANGE:Ho,AUTOPLAY_PREVENTED:Dl,AUTOPLAY_STARTED:Ri,BEFORE_DEFINITION_CHANGE:Om,BUFFER_CHANGE:Dm,CANPLAY:Un,CANPLAY_THROUGH:Pm,COMPLETE:Aa,CSS_FULLSCREEN_CHANGE:Zs,DEFINITION_CHANGE:Ol,DESTROY:xa,DOWNLOAD_SPEED_CHANGE:Vo,DURATION_CHANGE:Jn,EMPTIED:Hi,ENDED:Ui,ENTER_PLAYER:qh,ERROR:Vi,FPS_STUCK:od,FULLSCREEN_CHANGE:Nn,LEAVE_PLAYER:Xh,LOADED_DATA:Wn,LOADED_METADATA:Am,LOADING:Jh,LOAD_START:xl,MINI_STATE_CHANGE:ea,PAUSE:_r,PIP_CHANGE:$o,PLAY:en,PLAYER_BLUR:Kh,PLAYER_FOCUS:Ll,PLAYING:Al,PLAYNEXT:ta,PROGRESS:Wh,RATE_CHANGE:zh,READY:Il,REPLAY:Qs,RESET:La,RETRY:Mm,ROTATE:Qh,SCREEN_SHOT:Zh,SEEKED:Hn,SEEKING:Pa,SEI_PARSED:Rm,SHORTCUT:ed,SOURCE_ERROR:nd,SOURCE_SUCCESS:id,STALLED:xm,STATS_EVENTS:ad,SUSPEND:Lm,SWITCH_SUBTITLE:rd,TIME_UPDATE:Zt,URL_CHANGE:os,URL_NULL:Yh,USER_ACTION:na,VIDEO_EVENTS:sd,VIDEO_RESIZE:pi,VOLUME_CHANGE:jh,WAITING:as,XGLOG:td},Symbol.toStringTag,{value:"Module"}));function Qa(i,s){!this||!this.emit||(i==="error"?this.errorHandler(i,s.error):this.emit(i,s))}function Bm(i,s){return function(n,t){var e={player:s,eventName:i,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:s.currentTime,duration:s.duration,paused:s.paused,ended:s.ended,isInternalOp:!!s._internalOp[n.type],muted:s.muted,volume:s.volume,host:g.getHostFromUrl(s.currentSrc),vtype:s.vtype};if(s.removeInnerOP(n.type),i==="timeupdate"&&(s._currentTime=s.media&&s.media.currentTime),i==="ratechange"){var r=s.media?s.media.playbackRate:0;if(r&&s._rate===r)return;s._rate=s.media&&s.media.playbackRate}if(i==="durationchange"&&(s._duration=s.media.duration),i==="volumechange"&&(e.isMutedChange=s._lastMuted!==s.muted,s._lastMuted=s.muted),i==="error"&&(e.error=t||s.video.error),s.mediaEventMiddleware[i]){var a=Qa.bind(s,i,e);try{s.mediaEventMiddleware[i].call(s,e,a)}catch(o){throw Qa.call(s,i,e),o}}else Qa.call(s,i,e)}}var Fm=function(i){Te(n,i);var s=Ce(n);function n(t){var e;pe(this,n),e=s.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:t.tabindex|0,mediaType:t.mediaType||"video","data-index":-1},t.videoConfig,t.videoAttributes);var r=t["x5-video-player-type"]||t.x5VideoPlayerType;return Fe.isWeixin&&Fe.os.isAndroid&&r&&(e.mediaConfig["x5-video-player-type"]=r,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),t.loop&&(e.mediaConfig.loop="loop"),t.autoplayMuted&&!Object.prototype.hasOwnProperty.call(e.mediaConfig,"muted")&&(e.mediaConfig.muted=!0),e.media=t.mediaEl instanceof HTMLMediaElement?t.mediaEl:typeof t.mediaEl=="function"?t.mediaEl(e.mediaConfig):g.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),t.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=t.defaultPlaybackRate),g.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),t.autoplay&&(e.media.autoplay=!0),t.playsinline&&(e.media.playsinline=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return ge(n,[{key:"setEventsMiddleware",value:function(e){var r=this;Object.keys(e).map(function(a){r.mediaEventMiddleware[a]=e[a]})}},{key:"removeEventsMiddleware",value:function(e){var r=this;Object.keys(e).map(function(a){delete r.mediaEventMiddleware[a]})}},{key:"attachVideoEvents",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=sd.map(function(a){var o="on".concat(a.charAt(0).toUpperCase()).concat(a.slice(1));return typeof e[o]=="function"&&e.on(a,e[o]),G({},a,Bm(a,e))})),this._evHandlers.forEach(function(a){var o=Object.keys(a)[0];r.addEventListener(o,a[o],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(a){var o=Object.keys(a)[0];r.removeEventListener(o,a[o],!1)}),this._evHandlers.forEach(function(a){var o=Object.keys(a)[0],l="on".concat(o.charAt(0).toUpperCase()).concat(o.slice(1));typeof e[l]=="function"&&e.off(o,e[l])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,r){var a=this;e.removeAttribute("src"),e.load(),r.forEach(function(f,h){a.media.appendChild(g.createDom("source","",{src:"".concat(f.src),type:"".concat(f.type||""),"data-index":h+1}))});var o=e.children;if(o){this._videoSourceCount=o.length,this._videoSourceIndex=o.length,this._vLoadeddata=function(f){a.emit(id,{src:f.target.currentSrc,host:g.getHostFromUrl(f.target.currentSrc)})};for(var l=null,u=0;u<this._evHandlers.length;u++)if(Object.keys(this._evHandlers[u])[0]==="error"){l=this._evHandlers[u];break}!this._sourceError&&(this._sourceError=function(f){var h=parseInt(f.target.getAttribute("data-index"),10);if(a._videoSourceIndex--,a._videoSourceIndex===0||h>=a._videoSourceCount){var d={code:4,message:"sources_load_error"};l?l.error(f,d):a.errorHandler("error",d)}var v=Gu[4];a.emit(nd,new Kr(a,{errorType:v,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:f.target.src}))});for(var c=0;c<o.length;c++)o[c].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var r=e.children;if(!(!r||r.length===0||!this._sourceError)){for(var a=0;a<r.length;a++)r[a].removeEventListener("error",this._sourceError);for(;r.length>0;)e.removeChild(r[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||r)){var a=this.media.error||r,o=a.code?Gu[a.code]:"other",l=a.message;this.media.currentSrc||this.media.srcObject||(l="empty_src",a={code:6,message:l}),this.emit(e,new Kr(this,{errorType:o,errorCode:a.code,errorMessage:a.message||"",mediaError:a}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var r=[0,0];if(!this.media)return r;e||(e=this.media.buffered);var a=this.media.currentTime;if(e)for(var o=0,l=e.length;o<l&&(r[0]=e.start(o),r[1]=e.end(o),!(r[0]<=a&&a<=r[1]));o++);return r[0]-a<=0&&a-r[1]<=0?r:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?g.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var r=this.media.buffered;if(!r||r.length===0)return e;for(var a=0;a<r.length;a++)if((r.start(a)<=this.currentTime||r.start(a)<.1)&&r.end(a)>=this.currentTime)return{start:r.start(a),end:r.end(a)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var r=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return r[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(os,e),this.emit(as),this._currentTime=0,this._duration=0,g.isMSE(this.media)){this.onWaiting();return}this._detachSourceEvents(this.media),g.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"aspectRatio",get:function(){return this.media?this.media.videoWidth/this.media.videoHeight:0}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,r){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=Oe(Le(n.prototype),"emit",this)).call.apply(a,[this,e,r].concat(l))}},{key:"on",value:function(e,r){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=Oe(Le(n.prototype),"on",this)).call.apply(a,[this,e,r].concat(l))}},{key:"once",value:function(e,r){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=Oe(Le(n.prototype),"once",this)).call.apply(a,[this,e,r].concat(l))}},{key:"off",value:function(e,r){for(var a,o=arguments.length,l=new Array(o>2?o-2:0),u=2;u<o;u++)l[u-2]=arguments[u];(a=Oe(Le(n.prototype),"off",this)).call.apply(a,[this,e,r].concat(l))}},{key:"offAll",value:function(){Oe(Le(n.prototype),"removeAllListeners",this).call(this)}}]),n}(yr),Um=function(){function i(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};pe(this,i),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=s}return ge(i,[{key:"openDB",value:function(n){var t=this,e=this,r=this.myDB.version||1,a=e.indexedDB.open(e.myDB.name,r);a.onerror=function(o){},a.onsuccess=function(o){t.myDB.db=o.target.result,n.call(e)},a.onupgradeneeded=function(o){var l=o.target.result;o.target.transaction,l.objectStoreNames.contains(e.myDB.ojstore.name)||l.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var n=this;n.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(n,t){for(var e=this.myDB.db.transaction(n,"readwrite").objectStore(n),r,a=0;a<t.length;a++)r=e.add(t[a]),r.onerror=function(){},r.onsuccess=function(){}}},{key:"putData",value:function(n,t){for(var e=this.myDB.db.transaction(n,"readwrite").objectStore(n),r,a=0;a<t.length;a++)r=e.put(t[a]),r.onerror=function(){},r.onsuccess=function(){}}},{key:"getDataByKey",value:function(n,t,e){var r=this,a=this.myDB.db.transaction(n,"readwrite").objectStore(n),o=a.get(t);o.onerror=function(){e.call(r,null)},o.onsuccess=function(l){var u=l.target.result;e.call(r,u)}}},{key:"deleteData",value:function(n,t){var e=this.myDB.db.transaction(n,"readwrite").objectStore(n);e.delete(t)}},{key:"clearData",value:function(n){var t=this.myDB.db.transaction(n,"readwrite").objectStore(n);t.clear()}}]),i}(),zu=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Wu=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Ku=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],ri="data-xgplayerid";function bs(i,s,n){for(var t=arguments.length,e=new Array(t>3?t-3:0),r=3;r<t;r++)e[r-3]=arguments[r];var a=s.call.apply(s,[i].concat(e));!n||typeof n!="function"||(a&&a.then?a.then(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];n.call.apply(n,[i].concat(l))}):n.call.apply(n,[i].concat(e)))}function ia(i,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[i]&&(this.__hooks[i]=null),(function(){var t=arguments,e=this;if(n.pre)try{var r;(r=n.pre).call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))}catch(o){throw o.message="[pluginName: ".concat(this.pluginName,":").concat(i,":pre error] >> ").concat(o.message),o}if(this.__hooks&&this.__hooks[i])try{var a=Pn.apply(void 0,[this,i,s].concat(Array.prototype.slice.call(arguments)));a?a.then?a.then(function(o){o!==!1&&bs.apply(void 0,[e,s,n.next].concat(gn(t)))}).catch(function(o){throw o}):bs.apply(void 0,[this,s,n.next].concat(Array.prototype.slice.call(arguments))):a===void 0&&bs.apply(void 0,[this,s,n.next].concat(Array.prototype.slice.call(arguments)))}catch(o){throw o.message="[pluginName: ".concat(this.pluginName,":").concat(i,"] >> ").concat(o.message),o}else bs.apply(void 0,[this,s,n.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function ld(i,s){var n=this.__hooks;if(!n||!Array.isArray(n[i]))return-1;for(var t=n[i],e=0;e<t.length;e++)if(t[e]===s)return e;return-1}function ra(i,s){var n=this.__hooks;if(n)return n.hasOwnProperty(i)?(Array.isArray(n[i])||(n[i]=[]),ld.call(this,i,s)===-1&&n[i].push(s),!0):(console.warn("has no supported hook which name [".concat(i,"]")),!1)}function sa(i,s){var n=this.__hooks;if(n)if(Array.isArray(n[i])){var t=n[i],e=ld.call(this,i,s);e!==-1&&t.splice(e,1)}else n[i]&&(n[i]=null)}function Yu(i){if(!(!this.plugins||!this.plugins[i.toLowerCase()])){for(var s=this.plugins[i.toLowerCase()],n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return s.useHooks&&s.useHooks.apply(s,t)}}function Xu(i){if(!(!this.plugins||!this.plugins[i.toLowerCase()])){var s=this.plugins[i.toLowerCase()];if(s){for(var n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return s.removeHooks&&s.removeHooks.apply(s,t)}}}function ud(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];i.__hooks={},s&&s.map(function(n){i.__hooks[n]=null}),Object.defineProperty(i,"hooks",{get:function(){return i.__hooks&&Object.keys(i.__hooks).map(function(t){if(i.__hooks[t])return t})}})}function cd(i){i.__hooks=null}function Pn(i,s,n){for(var t=arguments.length,e=new Array(t>3?t-3:0),r=3;r<t;r++)e[r-3]=arguments[r];if(i.__hooks&&Array.isArray(i.__hooks[s])){var a=i.__hooks[s],o=-1,l=function u(c,f,h){for(var d=arguments.length,v=new Array(d>3?d-3:0),m=3;m<d;m++)v[m-3]=arguments[m];if(o++,a.length===0||o===a.length)return h.call.apply(h,[c,c].concat(v));var p=a[o],S=p.call.apply(p,[c,c].concat(v));if(S&&S.then)return S.then(function(C){return C===!1?null:u.apply(void 0,[c,f,h].concat(v))}).catch(function(C){console.warn("[runHooks]".concat(f," reject"),C.message)});if(S!==!1)return u.apply(void 0,[c,f,h].concat(v));if(S===!1)return!1};return l.apply(void 0,[i,s,n].concat(e))}else return n.call.apply(n,[i,i].concat(e))}function Za(i,s){$e.logError("[".concat(i,"] event or callback cant be undefined or null when call ").concat(s))}var Ln=function(){function i(s){pe(this,i),g.checkIsFunction(this.beforeCreate)&&this.beforeCreate(s),ud(this),this.__args=s,this.__events={},this.__onceEvents={},this.config=s.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(s)}return ge(i,[{key:"beforeCreate",value:function(n){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(n){this.player=n.player,this.playerConfig=n.player&&n.player.config,this.pluginName=n.pluginName?n.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=n.player&&n.player.logger}},{key:"updateLang",value:function(n){n||(n=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var n=g.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(n=this.playerConfig.domEventType),n}},{key:"on",value:function(n,t){var e=this;if(!n||!t||!this.player){Za(this.pluginName,"plugin.on(event, callback)");return}typeof n=="string"?(this.__events[n]=t,this.player.on(n,t)):Array.isArray(n)&&n.forEach(function(r){e.__events[r]=t,e.player.on(r,t)})}},{key:"once",value:function(n,t){var e=this;if(!n||!t||!this.player){Za(this.pluginName,"plugin.once(event, callback)");return}typeof n=="string"?(this.__onceEvents[n]=t,this.player.once(n,t)):Array.isArray(n)&&n.forEach(function(r){e.__onceEvents[r]=t,e.player.once(n,t)})}},{key:"off",value:function(n,t){var e=this;if(!n||!t||!this.player){Za(this.pluginName,"plugin.off(event, callback)");return}typeof n=="string"?(delete this.__events[n],this.player.off(n,t)):Array.isArray(n)&&n.forEach(function(r){delete e.__events[n],e.player.off(r,t)})}},{key:"offAll",value:function(){var n=this;["__events","__onceEvents"].forEach(function(t){Object.keys(n[t]).forEach(function(e){n[t][e]&&n.off(e,n[t][e]),e&&delete n[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(n){var t;if(this.player){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];(t=this.player).emit.apply(t,[n].concat(r))}}},{key:"emitUserAction",value:function(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var r=ct(ct({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(n,t,r)}}},{key:"hook",value:function(n,t){return ia.call.apply(ia,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(n,t){for(var e=arguments.length,r=new Array(e>2?e-2:0),a=2;a<e;a++)r[a-2]=arguments[a];return ra.call.apply(ra,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(n,t){for(var e=arguments.length,r=new Array(e>2?e-2:0),a=2;a<e;a++)r[a-2]=arguments[a];return sa.call.apply(sa,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:n,options:t})}},{key:"getPlugin",value:function(n){return this.player?this.player.getPlugin(n):null}},{key:"__destroy",value:function(){var n=this,t=this.player,e=this.pluginName;this.offAll(),g.clearAllTimers(this),g.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(r){n[r]=null}),t.unRegisterPlugin(e),cd(this)}}],[{key:"defineGetterOrSetter",value:function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&Object.defineProperty(n,e,t[e])}},{key:"defineMethod",value:function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&typeof t[e]=="function"&&Object.defineProperty(n,e,{configurable:!0,value:t[e]})}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),i}(),Vm=9;if(typeof Element<"u"&&!Element.prototype.matches){var Wi=Element.prototype;Wi.matches=Wi.matchesSelector||Wi.mozMatchesSelector||Wi.msMatchesSelector||Wi.oMatchesSelector||Wi.webkitMatchesSelector}function Hm(i,s){for(;i&&i.nodeType!==Vm;){if(typeof i.matches=="function"&&i.matches(s))return i;i=i.parentNode}}var $m=Hm,Gm=$m;function eo(i,s,n,t,e){var r=zm.apply(this,arguments);return i.addEventListener(n,r,e),{destroy:function(){i.removeEventListener(n,r,e)}}}function jm(i,s,n,t,e){return typeof i.addEventListener=="function"?eo.apply(null,arguments):typeof n=="function"?eo.bind(null,document).apply(null,arguments):(typeof i=="string"&&(i=document.querySelectorAll(i)),Array.prototype.map.call(i,function(r){return eo(r,s,n,t,e)}))}function zm(i,s,n,t){return function(e){e.delegateTarget=Gm(e.target,s),e.delegateTarget&&t.call(i,e)}}var Wm=jm;const qu=Pl(Wm);var Km={CONTROLS:"controls",ROOT:"root"},it={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"},Ju={ICON_DISABLE:"xg-icon-disable",ICON_HIDE:"xg-icon-hide"};function to(i){return i?i.indexOf&&/^(?:http|data:|\/)/.test(i):!1}function Ym(i,s){return Nt(i)==="object"&&i.class&&typeof i.class=="string"?"".concat(s," ").concat(i.class):s}function Xm(i,s){return Nt(i)==="object"&&i.attr&&Nt(i.attr)==="object"&&Object.keys(i.attr).map(function(n){s[n]=i.attr[n]}),s}function Qu(i,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",r=null;if(i instanceof window.Element)return g.addClass(i,n),Object.keys(t).map(function(a){i.setAttribute(a,t[a])}),i;if(to(i)||to(i.url))return t.src=to(i)?i:i.url||"",r=g.createDom(i.tag||"img","",t,"xg-img ".concat(n)),r;if(typeof i=="function")try{return r=i(),r instanceof window.Element?(g.addClass(r,n),Object.keys(t).map(function(a){r.setAttribute(a,t[a])}),r):($e.logWarn("warn>>icons.".concat(s," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(a){return $e.logError("Plugin named [".concat(e,"]:createIcon"),a),null}return typeof i=="string"?g.createDomFromHtml(i,t,n):($e.logWarn("warn>>icons.".concat(s," in config of plugin named [").concat(e,"] is invalid")),null)}function qm(i,s){var n=s.config.icons||s.playerConfig.icons;Object.keys(i).map(function(t){var e=i[t],r=e&&e.class?e.class:"",a=e&&e.attr?e.attr:{},o=null;n&&n[t]&&(r=Ym(n[t],r),a=Xm(n[t],a),o=Qu(n[t],t,r,a,s.pluginName)),!o&&e&&(o=Qu(e.icon?e.icon:e,a,r,{},s.pluginName)),s.icons[t]=o})}function Jm(i,s){Object.keys(i).map(function(n){Object.defineProperty(s.langText,n,{get:function(){var e=s.lang,r=s.i18n;return r[n]?r[n]:i[n]&&i[n][e]||""}})})}var Ye=function(i){Te(n,i);var s=Ce(n);function n(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return pe(this,n),t=s.call(this,e),t.__delegates=[],t}return ge(n,[{key:"__init",value:function(e){if(Oe(Le(n.prototype),"__init",this).call(this,e),!!e.root){var r=e.root,a=null;this.icons={},this.root=null,this.parent=null,this.extraEls=[];var o=this.registerIcons()||{};qm(o,this),this.langText={};var l=this.registerLanguageTexts()||{};Jm(l,this);var u="";try{u=this.render()}catch(h){throw $e.logError("Plugin:".concat(this.pluginName,":render"),h),new Error("Plugin:".concat(this.pluginName,":render:").concat(h.message))}if(u)a=n.insert(u,r,e.index),a.setAttribute("data-index",e.index);else if(e.tag)a=g.createDom(e.tag,"",e.attr,e.name),a.setAttribute("data-index",e.index),r.appendChild(a);else return;this.root=a,this.parent=r;var c=this.config.attr||{},f=this.config.style||{};this.setAttr(c),this.setStyle(f),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var r=this.children();r&&Nt(r)==="object"&&Object.keys(r).length>0&&Object.keys(r).map(function(a){var o=a,l=r[o],u={root:e.root},c,f;typeof l=="function"?(c=e.config[o]||{},f=l):Nt(l)==="object"&&typeof l.plugin=="function"&&(c=l.options?g.deepCopy(e.config[o]||{},l.options):e.config[o]||{},f=l.plugin),u.config=c,c.index!==void 0&&(u.index=c.index),c.root&&(u.root=c.root),e.registerPlugin(f,u,o)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function r(u,c){for(var f=0;f<u.children.length;f++)u.children[f].children.length>0?r(u.children[f],c):c(u.children[f])}var a=this.root,o=this.i18n,l=this.langText;a&&r(a,function(u){var c=u.getAttribute&&u.getAttribute("lang-key");if(c){var f=o[c.toUpperCase()]||l[c];f&&(u.innerHTML=typeof f=="function"?f(e):f)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=this.i18n||{},o=this.langText;e.setAttribute&&e.setAttribute("lang-key",r);var l=a[r]||o[r]||"";l&&(e.innerHTML=l)}},{key:"plugins",value:function(){return this._children}},{key:"disable",value:function(){this.config.disable=!0,g.addClass(this.find(".xgplayer-icon"),Ju.ICON_DISABLE)}},{key:"enable",value:function(){this.config.disable=!1,g.removeClass(this.find(".xgplayer-icon"),Ju.ICON_DISABLE)}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";r.root=r.root||this.root;var o=Oe(Le(n.prototype),"registerPlugin",this).call(this,e,r,a);return this._children.push(o),o}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,r,a){var o=this;if(arguments.length<3&&typeof r=="function")Array.isArray(e)?e.forEach(function(u){o.bindEL(u,r)}):this.bindEL(e,r);else{var l=n.delegate.call(this,this.root,e,r,a);this.__delegates=this.__delegates.concat(l)}}},{key:"unbind",value:function(e,r){var a=this;if(arguments.length<3&&typeof r=="function")Array.isArray(e)?e.forEach(function(u){a.unbindEL(u,r)}):this.unbindEL(e,r);else for(var o="".concat(e,"_").concat(r),l=0;l<this.__delegates.length;l++)if(this.__delegates[l].key===o){this.__delegates[l].destroy(),this.__delegates.splice(l,1);break}}},{key:"setStyle",value:function(e,r){var a=this;if(this.root){if(g.typeOf(e)==="String")return this.root.style[e]=r;g.typeOf(e)==="Object"&&Object.keys(e).map(function(o){a.root.style[o]=e[o]})}}},{key:"setAttr",value:function(e,r){var a=this;if(this.root){if(g.typeOf(e)==="String")return this.root.setAttribute(e,r);g.typeOf(e)==="Object"&&Object.keys(e).map(function(o){a.root.setAttribute(o,e[o])})}}},{key:"setHtml",value:function(e,r){this.root&&(this.root.innerHTML=e,typeof r=="function"&&r())}},{key:"bindEL",value:function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof r=="function"&&this.root.addEventListener(e,r,a)}},{key:"unbindEL",value:function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof r=="function"&&this.root.removeEventListener(e,r,a)}},{key:"show",value:function(e){if(this.root){this.root.style.display=e!==void 0?e:"block";var r=window.getComputedStyle(this.root,null),a=r.getPropertyValue("display");if(a==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,r){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!r||!(r instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(r):e.appendChild(r)}catch(a){return $e.logError("Plugin:appendChild",a),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,r=this.player;this.__delegates.map(function(a){a.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(a){r.unRegisterPlugin(a.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),Oe(Le(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(a){e[a]=null}),this.extraEls=[]}}],[{key:"insert",value:function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=r.children.length,l=Number(a),u=e instanceof window.Node;if(o){for(var c=0,f=null,h="";c<o;c++){f=r.children[c];var d=Number(f.getAttribute("data-index"));if(d>=l){h="beforebegin";break}else d<l&&(h="afterend")}return u?h==="afterend"?r.appendChild(e):r.insertBefore(e,f):f.insertAdjacentHTML(h,e),h==="afterend"?r.children[r.children.length-1]:r.children[c]}else return u?r.appendChild(e):r.insertAdjacentHTML("beforeend",e),r.children[r.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,r,a,o){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=[];if(e instanceof window.Node&&typeof o=="function")if(Array.isArray(a))a.forEach(function(f){var h=qu(e,r,f,o,l);h.key="".concat(r,"_").concat(f),u.push(h)});else{var c=qu(e,r,a,o,l);c.key="".concat(r,"_").concat(a),u.push(c)}return u}},{key:"ROOT_TYPES",get:function(){return Km}},{key:"POSITIONS",get:function(){return it}}]),n}(Ln),Qm=function(){function i(){var s=this;if(pe(this,i),G(this,"__trigger",function(n){var t=new Date().getTime();s.timeStamp=t;for(var e=0;e<n.length;e++)s.__runHandler(n[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(km(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(n){console.error(n)}}return ge(i,[{key:"addObserver",value:function(n,t){if(this.observer){this.observer.observe(n);for(var e=n.getAttribute(ri),r=this.__handlers,a=-1,o=0;o<r.length;o++)r[o]&&n===r[o].target&&(a=o);a>-1?this.__handlers[a].handler=t:this.__handlers.push({target:n,handler:t,playerId:e})}}},{key:"unObserver",value:function(n){var t=-1;this.__handlers.map(function(r,a){n===r.target&&(t=a)});try{var e;(e=this.observer)===null||e===void 0||e.unobserve(n)}catch{}t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){var n;(n=this.observer)===null||n===void 0||n.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(n){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&n===t[e].target){try{t[e].handler(n)}catch(r){console.error(r)}return!0}return!1}}]),i}(),Pr=null;function Zm(i,s){return Pr||(Pr=new Qm),Pr.addObserver(i,s),Pr}function e0(i,s){var n;(n=Pr)===null||n===void 0||n.unObserver(i,s)}var Et={pluginGroup:{},init:function(s){var n=s._pluginInfoId;n||(n=new Date().getTime(),s._pluginInfoId=n),!s.config.closeResizeObserver&&Zm(s.root,function(){s.resize()}),this.pluginGroup[n]={_originalOptions:s.config||{},_plugins:{}}},formatPluginInfo:function(s,n){var t=null,e=null;return s.plugin&&typeof s.plugin=="function"?(t=s.plugin,e=s.options):(t=s,e={}),n&&(e.config=n||{}),{PLUFGIN:t,options:e}},checkPluginIfExits:function(s,n){for(var t=0;t<n.length;t++)if(s.toLowerCase()===n[t].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(s,n){for(var t=Object.keys(n),e=null,r=0;r<t.length;r++)if(s.toLowerCase()===t[r].toLowerCase()){e=n[t[r]];break}return g.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(s,n){var t=this,e=n.timeout||1500;return Promise.race([n.loader().then(function(r){var a;r&&r.__esModule?a=r.default:a=r,t.register(s,a,r.options)}),new Promise(function(r,a){setTimeout(function(){a(new Error("timeout"))},e)})])},register:function(s,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!s||!n||typeof n!="function"||n.prototype===void 0)){var e=s._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var r=this.pluginGroup[e]._plugins,a=this.pluginGroup[e]._originalOptions;t.player=s;var o=t.pluginName||n.pluginName;if(!o)throw new Error("The property pluginName is necessary");if(n.isSupported&&!n.isSupported(s.config.mediaType,s.config.codecType)){console.warn("not supported plugin [".concat(o,"]"));return}t.config||(t.config={});for(var l=Object.keys(a),u=0;u<l.length;u++)if(o.toLowerCase()===l[u].toLowerCase()){var c=a[l[u]];g.typeOf(c)==="Object"?t.config=Object.assign({},t.config,a[l[u]]):g.typeOf(c)==="Boolean"&&(t.config.disable=!c);break}n.defaultConfig&&Object.keys(n.defaultConfig).forEach(function(h){typeof t.config[h]>"u"&&(t.config[h]=n.defaultConfig[h])}),t.root?typeof t.root=="string"&&(t.root=s[t.root]):t.root=s.root,t.index=t.config.index||0;try{r[o.toLowerCase()]&&(this.unRegister(e,o.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(o,"] exist, destroy the old instance")));var f=new n(t);return r[o.toLowerCase()]=f,r[o.toLowerCase()].func=n,f&&typeof f.afterCreate=="function"&&f.afterCreate(),f}catch(h){throw console.error(h),h}}}},unRegister:function(s,n){s._pluginInfoId&&(s=s._pluginInfoId),n=n.toLowerCase();try{var t=this.pluginGroup[s]._plugins[n];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[s]._plugins[n])}catch(e){console.error("[unRegister:".concat(n,"] cgid:[").concat(s,"] error"),e)}},deletePlugin:function(s,n){var t=s._pluginInfoId;t&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins&&delete this.pluginGroup[t]._plugins[n]},getPlugins:function(s){var n=s._pluginInfoId;return n&&this.pluginGroup[n]?this.pluginGroup[n]._plugins:{}},findPlugin:function(s,n){var t=s._pluginInfoId;if(!t||!this.pluginGroup[t])return null;var e=n.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(s){var n=this;function t(e){return!e||!e.then?new Promise(function(r){r()}):e}return new Promise(function(e){if(n.pluginGroup){var r;return s._loadingPlugins&&s._loadingPlugins.length?r=Promise.all(s._loadingPlugins):r=Promise.resolve(),r.then(function(){var a=s._pluginInfoId;if(!n.pluginGroup[a]){e();return}var o=n.pluginGroup[a]._plugins,l=[];Object.keys(o).forEach(function(u){if(o[u]&&o[u].beforePlayerInit)try{var c=o[u].beforePlayerInit();l.push(t(c))}catch(f){throw l.push(t(null)),f}}),Promise.all([].concat(l)).then(function(){e()}).catch(function(u){console.error(u),e()})})}})},afterInit:function(s){var n=s._pluginInfoId;if(!(!n||!this.pluginGroup[n])){var t=this.pluginGroup[n]._plugins;Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()})}},setLang:function(s,n){var t=n._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=this.pluginGroup[t]._plugins;Object.keys(e).forEach(function(r){if(e[r].updateLang)e[r].updateLang(s);else try{e[r].lang=s}catch{console.warn("".concat(r," setLang"))}})}},reRender:function(s){var n=this,t=s._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=[],r=this.pluginGroup[t]._plugins;Object.keys(r).forEach(function(a){a!=="controls"&&r[a]&&(e.push({plugin:r[a].func,options:r[a].__args}),n.unRegister(t,a))}),e.forEach(function(a){n.register(s,a.plugin,a.options)})}},onPluginsReady:function(s){var n=s._pluginInfoId;if(!(!n||!this.pluginGroup[n])){var t=this.pluginGroup[n]._plugins||{};Object.keys(t).forEach(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})}},destroy:function(s){var n=s._pluginInfoId;if(this.pluginGroup[n]){e0(s.root);for(var t=this.pluginGroup[n]._plugins,e=0,r=Object.keys(t);e<r.length;e++){var a=r[e];this.unRegister(n,a)}delete this.pluginGroup[n],delete s._pluginInfoId}}},Z={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function Zu(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:wm(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var t0=function(s,n){var t,e,r;n.preset&&n.options?r=new n.preset(n.options,s.config):r=new n({},s.config);var a=r,o=a.plugins,l=o===void 0?[]:o,u=a.ignores,c=u===void 0?[]:u,f=a.icons,h=f===void 0?{}:f,d=a.i18n,v=d===void 0?[]:d;s.config.plugins||(s.config.plugins=[]),s.config.ignores||(s.config.ignores=[]),(t=s.config.plugins).push.apply(t,gn(l)),(e=s.config.ignores).push.apply(e,gn(c)),Object.keys(h).map(function(p){s.config.icons[p]||(s.config.icons[p]=h[p])});var m=s.config.i18n||[];v.push.apply(v,gn(m)),s.config.i18n=v},n0=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"onMouseEnter",function(o){var l=B(t),u=l.player,c=l.playerConfig;c.closeControlsBlur&&u.focus({autoHide:!1})}),G(B(t),"onMouseLeave",function(o){var l=B(t),u=l.player;u.focus()}),t}return ge(n,[{key:"beforeCreate",value:function(e){!e.config.mode&&Fe.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,r=this.config,a=r.disable,o=r.height,l=r.mode;if(!a){l==="flex"&&this.player.addClass(Z.FLEX_CONTROLS);var u={height:"".concat(o,"px")};Object.keys(u).map(function(f){e.root.style[f]=u[f]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(ea,function(f){f?g.addClass(e.root,"mini-controls"):g.removeClass(e.root,"mini-controls")});var c=this.playerConfig.isMobileSimulateMode;Fe.device!=="mobile"&&c!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&g.addClass(this.root,Z.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){g.removeClass(this.root,Z.CONTROLS_AUTOHIDE)}},{key:"show",value:function(e){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(this.root){var o=e.defaultConfig||{};if(!r.root){var l=r.position?r.position:r.config&&r.config.position?r.config.position:o.position;switch(l){case it.CONTROLS_LEFT:r.root=this.left;break;case it.CONTROLS_RIGHT:r.root=this.right;break;case it.CONTROLS_CENTER:r.root=this.center;break;case it.CONTROLS:r.root=this.root;break;default:r.root=this.left}return Oe(Le(n.prototype),"registerPlugin",this).call(this,e,r,a)}}}},{key:"destroy",value:function(){Fe.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave)),this.left=null,this.center=null,this.right=null,this.innerRoot=null}},{key:"render",value:function(){var e=this.config,r=e.mode,a=e.autoHide,o=e.initShow,l=e.disable;if(!l){var u=g.classNames({"xgplayer-controls":!0},{"flex-controls":r==="flex"},{"bottom-controls":r==="bottom"},G({},Z.CONTROLS_AUTOHIDE,a),{"xgplayer-controls-initshow":o||!a});return'<xg-controls class="'.concat(u,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(Ye),i0={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},Xt={lang:{},langKeys:[],textKeys:[]};function Yr(i,s){return Object.keys(s).forEach(function(n){var t=g.typeOf(s[n]),e=g.typeOf(i[n]);if(t==="Array"){var r;e!=="Array"&&(i[n]=[]),(r=i[n]).push.apply(r,gn(s[n]))}else t==="Object"?(e!=="Object"&&(i[n]={}),Yr(i[n],s[n])):i[n]=s[n]}),i}function fd(){Object.keys(Xt.lang.en).map(function(i){Xt.textKeys[i]=i})}function r0(i,s){var n=[];if(s||(s=Xt),!!s.lang){g.typeOf(i)!=="Array"?n=Object.keys(i).map(function(r){var a=r==="zh"?"zh-cn":r;return{LANG:a,TEXT:i[r]}}):n=i;var t=s,e=t.lang;n.map(function(r){r.LANG==="zh"&&(r.LANG="zh-cn"),e[r.LANG]?Yr(e[r.LANG]||{},r.TEXT||{}):Rl(r,s)}),fd()}}function Rl(i,s){var n=i.LANG;if(s||(s=Xt),!!s.lang){var t=i.TEXT||{};n==="zh"&&(n="zh-cn"),s.lang[n]?Yr(s.lang[n],t):(s.langKeys.push(n),s.lang[n]=t),fd()}}function s0(i){var s,n={lang:{},langKeys:[],textKeys:{},pId:i};return Yr(n.lang,Xt.lang),(s=n.langKeys).push.apply(s,gn(Xt.langKeys)),Yr(n.textKeys,Xt.textKeys),n}Rl(i0);var ir={get textKeys(){return Xt.textKeys},get langKeys(){return Xt.langKeys},get lang(){var i={};return Xt.langKeys.map(function(s){i[s]=Xt.lang[s]}),Xt.lang["zh-cn"]&&(i.zh=Xt.lang["zh-cn"]||{}),i},extend:r0,use:Rl,init:s0},je={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},ec=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Vt={},no=null,hd=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"add",value:function(e){e&&(Vt[e.playerId]=e,Object.keys(Vt).length===1&&this.setActive(e.playerId,!0))}},{key:"remove",value:function(e){e&&(e.isUserActive,delete Vt[e.playerId])}},{key:"_iterate",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(var a in Vt)if(Object.prototype.hasOwnProperty.call(Vt,a)){var o=Vt[a];if(r){if(e(o))break}else e(o)}}},{key:"forEach",value:function(e){this._iterate(e)}},{key:"find",value:function(e){var r=null;return this._iterate(function(a){var o=e(a);return o&&(r=a),o},!0),r}},{key:"findAll",value:function(e){var r=[];return this._iterate(function(a){e(a)&&r.push(a)}),r}},{key:"setActive",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(Vt[e])return r?this.forEach(function(a){e===a.playerId?(a.isUserActive=!0,a.isInstNext=!1):a.isUserActive=!1}):Vt[e].isUserActive=r,e}},{key:"getActiveId",value:function(){for(var e=Object.keys(Vt),r=0;r<e.length;r++){var a=Vt[e[r]];if(a&&a.isUserActive)return e[r]}return null}},{key:"setNext",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(Vt[e])return r?this.forEach(function(a){e===a.playerId?(a.isUserActive=!1,a.isInstNext=!0):a.isInstNext=!1}):Vt[e].isInstNext=r,e}}],[{key:"getInstance",value:function(){return no||(no=new n),no}}]),n}($h.EventEmitter);function a0(i){for(var s=Object.keys(Vt),n=0;n<s.length;n++){var t=Vt[s[n]];if(t.root===i)return t}return null}var o0=["play","pause","replay","retry"],tc=0,nc=0,ti=null,Ia=function(i){Te(n,i);var s=Ce(n);function n(t){var e;pe(this,n);var r=g.deepMerge(Zu(),t);e=s.call(this,r),G(B(e),"canPlayFunc",function(){if(e.config){var v=e.config,m=v.autoplay,p=v.defaultPlaybackRate;$e.logInfo("player","canPlayFunc, startTime",e.__startTime),e._seekToStartTime(),e.playbackRate=p,(m||e._useAutoplay)&&e.mediaPlay(),e.off(Un,e.canPlayFunc),e.removeClass(Z.ENTER)}}),G(B(e),"onFullscreenChange",function(v,m){var p=function(){g.setTimeout(B(e),function(){e.resize()},100)},S=g.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(na,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var C=Tm(S,e.playerId,ri);if(m||S&&(S===e._fullscreenEl||C))p(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,S,Z.FULLSCREEN),e.emit(Nn,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){p();var _=B(e),E=_._fullScreenOffset,k=_.config;if(k.needFullscreenScroll?(window.scrollTo(E.left,E.top),g.setTimeout(B(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen)e.removeClass(Z.FULLSCREEN);else{var N=e._fullscreenEl;!N&&(e.root.contains(v.target)||v.target===e.root)&&(N=v.target),e.recoverFullStyle(e.root,N,Z.FULLSCREEN)}e._fullscreenEl=null,e.emit(Nn,!1)}}),G(B(e),"_onWebkitbeginfullscreen",function(v){e._fullscreenEl=e.media,e.onFullscreenChange(v,!0)}),G(B(e),"_onWebkitendfullscreen",function(v){e.onFullscreenChange(v,!1)}),ud(B(e),o0),e.config=r,e._pluginInfoId=g.generateSessionId(),_m(B(e));var a=e.constructor.defaultPreset;if(e.config.presets.length){var o=e.config.presets.indexOf("default");o>=0&&a&&(e.config.presets[o]=a)}else a&&e.config.presets.push(a);e.userTimer=null,e.waitTimer=null,e.handleSource=!0,e._state=je.INITIAL,e.isAd=!1,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.__startTime=-1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e.timeSegments=[],e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},e.sizeInfo={width:0,height:0,left:0,top:0},e._accPlayed={t:0,acc:0,loopAcc:0},e._offsetInfo={currentTime:-1,duration:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=ir.init(e._pluginInfoId),Fe.os.isAndroid&&Fe.osVersion>0&&Fe.osVersion<6&&(e.config.autoplay=!1),e.database=new Um,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0,e.innerStates={isActiveLocked:!1},e.instManager=ti;var l=e._initDOM();if(!l)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),Cl(e);var u=e.config,c=u.definition,f=c===void 0?{}:c,h=u.url;if(!h&&f.list&&f.list.length>0){var d=f.list.find(function(v){return v.definition&&v.definition===f.defaultDefinition});d||(f.defaultDefinition=f.list[0].definition,d=f.list[0]),e.config.url=d.url,e.curDefinition=d}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),Et.onPluginsReady(B(e)),e.getInitDefinition(),e.setState(je.READY),g.setTimeout(B(e),function(){e.emit(Il)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<je.ATTACHED)&&e.start(),e}return ge(n,[{key:"_initDOM",value:function(){var e,r=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var a=this.config.el;if(a&&a.nodeType===1)this.root=a;else return this.emit(Vi,new Kr("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var o=a0(this.root);if(o&&($e.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),o.destroy()),this.root.setAttribute(ri,this.playerId),this.media.setAttribute(ri,this.playerId),(e=ti)===null||e===void 0||e.add(this),Et.init(this),this._initBaseDoms(),this.config.controls){var l=this.config.controls.root||null,u=Et.register(this,n0,{root:l});this.controls=u}var c=this.config.isMobileSimulateMode==="mobile"?"mobile":Fe.device;if(this.addClass("".concat(Z.DEFAULT," ").concat(Z.INACTIVE," xgplayer-").concat(c," ").concat(this.config.controls?"":Z.NO_CONTROLS)),this.config.autoplay?this.addClass(Z.ENTER):this.addClass(Z.NO_START),this.config.fluid){var f=this.config,h=f.width,d=f.height;(typeof h!="number"||typeof d!="number")&&(h=600,d=337.5);var v={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(d*100/h,"%")};Object.keys(v).forEach(function(E){r.root.style[E]=v[E]})}else["width","height"].forEach(function(E){r.config[E]&&(typeof r.config[E]!="number"?r.root.style[E]=r.config[E]:r.root.style[E]="".concat(r.config[E],"px"))});var m=this.root.getBoundingClientRect(),p=m.width,S=m.height,C=m.left,_=m.top;return this.sizeInfo.width=p,this.sizeInfo.height=S,this.sizeInfo.left=C,this.sizeInfo.top=_,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=g.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(r){e.on(r,e["on"+r.charAt(0).toUpperCase()+r.slice(1)])}),zu.forEach(function(r){document&&document.addEventListener(r,e.onFullscreenChange)}),Fe.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(Wn,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(en,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),zu.forEach(function(r){document.removeEventListener(r,e.onFullscreenChange)}),this.playFunc&&this.off(en,this.playFunc),this.off(Un,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_clearUserTimer",value:function(){this.userTimer&&(g.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"_startInit",value:function(e){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.media&&!((!e||e===""||g.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(Yh),$e.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){g.isNotNull(a.playSessionId)&&(this._playSessionId=a.playSessionId),this.handleSource&&(this._detachSourceEvents(this.media),g.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src")),g.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var o=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!o.contains(this.media)&&o.insertBefore(this.media,o.firstChild);var l=this.media.readyState;$e.logInfo("_startInit readyState",l),this.config.autoplay&&(!g.isMSE(this.media)&&this.load(),(Fe.os.isIpad||Fe.os.isPhone)&&this.mediaPlay());var u=this.config.startTime;this.__startTime=u>0?u:-1,this.config.startTime=0,l>=2&&this.duration>0?this.canPlayFunc():this.on(Un,this.canPlayFunc),(!this.hasStart||this.state<je.ATTACHED)&&Et.afterInit(this),this.hasStart=!0,this.setState(je.ATTACHED),g.setTimeout(this,function(){r.emit(Aa)},0)}}},{key:"_registerPlugins",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var a=this.config.ignores||[],o=this.config.plugins||[],l=this.config.i18n||[];r&&ir.extend(l,this.__i18n);var u=a.join("||").toLowerCase().split("||"),c=this.plugins;o.forEach(function(f){try{var h=f.plugin?f.plugin.pluginName:f.pluginName;if(h&&u.indexOf(h.toLowerCase())>-1)return null;if(!r&&c[h.toLowerCase()])return;if(f.lazy&&f.loader){var d=Et.lazyRegister(e,f);f.forceBeforeInit&&(d.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(d),1)}).catch(function(v){$e.logError("_registerPlugins:loadingPlugin",v),e._loadingPlugins.splice(e._loadingPlugins.indexOf(d),1)}),e._loadingPlugins.push(d));return}return e.registerPlugin(f)}catch(v){$e.logError("_registerPlugins:",v)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(r){t0(e,r)})}},{key:"_getRootByPosition",value:function(e){var r=null;switch(e){case it.ROOT_RIGHT:this.rightBar||(this.rightBar=g.createPositionBar("xg-right-bar",this.root)),r=this.rightBar;break;case it.ROOT_LEFT:this.leftBar||(this.leftBar=g.createPositionBar("xg-left-bar",this.root)),r=this.leftBar;break;case it.ROOT_TOP:this.topBar||(this.topBar=g.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&g.addClass(this.topBar,Z.TOP_BAR_AUTOHIDE)),r=this.topBar;break;default:r=this.innerContainer||this.root;break}return r}},{key:"registerPlugin",value:function(e,r){var a=Et.formatPluginInfo(e,r),o=a.PLUFGIN,l=a.options,u=this.config.plugins,c=Et.checkPluginIfExits(o.pluginName,u);!c&&u.push(o);var f=Et.getRootByConfig(o.pluginName,this.config);f.root&&(l.root=f.root),f.position&&(l.position=f.position);var h=l.position?l.position:l.config&&l.config.position||o.defaultConfig&&o.defaultConfig.position;if(!l.root&&typeof h=="string"&&h.indexOf("controls")>-1){var d;return(d=this.controls)===null||d===void 0?void 0:d.registerPlugin(o,l,o.pluginName)}return l.root||(l.root=this._getRootByPosition(h)),Et.register(this,o,l)}},{key:"deregister",value:function(e){typeof e=="string"?Et.unRegister(this,e):e instanceof Ln&&Et.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),r&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var r;if(typeof e=="string"?r=e:e instanceof Ln&&(r=e.pluginName),!!r)for(var a=this.config.plugins.length-1;a>-1;a--){var o=this.config.plugins[a];if(o.pluginName.toLowerCase()===r.toLowerCase()){this.config.plugins.splice(a,1);break}}}},{key:"plugins",get:function(){return Et.getPlugins(this)}},{key:"getPlugin",value:function(e){var r=Et.findPlugin(this,e);return r&&r.pluginName?r:null}},{key:"addClass",value:function(e){this.root&&(g.hasClass(this.root,e)||g.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&g.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return g.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,r){this.root&&this.root.setAttribute(e,r)}},{key:"removeAttribute",value:function(e,r){this.root&&this.root.removeAttribute(e,r)}},{key:"start",value:function(e){var r=this;if(!(this.state>je.ATTACHING)){var a=this._playSessionId;return g.isNotNull(a)&&(this._playSessionId=void 0),!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(je.ATTACHING),this._registerPlugins(!1),Et.beforeInit(this).then(function(){if(r.config){e||(e=r.url||r.config.url);var o=r.preProcessUrl(e),l=r._startInit(o.url,{playSessionId:a});return l}}).catch(function(o){throw o.fileName="player",o.lineNumber="236",$e.logError("start:beforeInit:",o),o})}}},{key:"switchURL",value:function(e,r){var a=this,o=e;g.typeOf(e)==="Object"&&(o=e.url),o=this.preProcessUrl(o).url;var l=this.currentTime;this.__startTime=l;var u=this.paused&&!this.isError;return this.src=o,new Promise(function(c,f){var h=function(m){a.off("timeupdate",d),a.off("canplay",d),f(m)},d=function(){a._seekToStartTime(),u&&a.pause(),a.off("error",h),c(!0)};if(a.once("error",h),!o){a.errorHandler("error",{code:6,message:"empty_src"});return}Fe.os.isAndroid?a.once("timeupdate",d):a.once("canplay",d),a.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<je.ATTACHED){this.removeClass(Z.NO_START),this.addClass(Z.ENTER),this.start(),this._useAutoplay=!0;return}this.state<je.RUNNING&&(this.removeClass(Z.NO_START),!this.isCanplay&&this.addClass(Z.ENTER));var r=Oe(Le(n.prototype),"play",this).call(this);return r!==void 0&&r&&r.then?r.then(function(){e.removeClass(Z.NOT_ALLOW_AUTOPLAY),e.addClass(Z.PLAYING),e.state<je.RUNNING&&($e.logInfo(">>>>playPromise.then"),e.setState(je.RUNNING),e.emit(Ri))}).catch(function(a){if($e.logWarn(">>>>playPromise.catch",a.name),e.media&&e.media.error){e.onError(),e.removeClass(Z.ENTER);return}a.name==="NotAllowedError"&&(e._errorTimer=g.setTimeout(e,function(){e._errorTimer=null,e.emit(Dl),e.addClass(Z.NOT_ALLOW_AUTOPLAY),e.removeClass(Z.ENTER),e.pause(),e.setState(je.NOTALLOW)},0))}):($e.logWarn("video.play not return promise"),this.state<je.RUNNING&&(this.setState(je.RUNNING),this.removeClass(Z.NOT_ALLOW_AUTOPLAY),this.removeClass(Z.NO_START),this.removeClass(Z.ENTER),this.addClass(Z.PLAYING),this.emit(Ri))),r}},{key:"mediaPause",value:function(){Oe(Le(n.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){Oe(Le(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(Z.PAUSED),Pn(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;Pn(this,"pause",function(){Oe(Le(n.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,r){var a=this;if(!(!this.media||Number.isNaN(Number(e))||!this.hasStart)){var o=this.config,l=o.isSeekedPlay,u=o.seekedStatus,c=r||(l?"play":u);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(Hn,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(a.removeClass(Z.ENTER),a.isSeeking=!1,c){case"play":a.play();break;case"pause":a.pause();break;default:a._isPauseBeforeSeek>1||a.paused?a.pause():a.play()}a._isPauseBeforeSeek=0,a._onceSeekCanplay=null},this.once(Hn,this._onceSeekCanplay),this.state<je.RUNNING?(this.removeClass(Z.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,r=this.config,a=r.definition,o=r.url;!o&&a&&a.list&&a.list.length>0&&a.defaultDefinition&&a.list.map(function(l){l.definition===a.defaultDefinition&&(e.config.url=l.url,e.curDefinition=l)})}},{key:"changeDefinition",value:function(e,r){var a=this,o=this.config.definition;if(Array.isArray(o==null?void 0:o.list)&&o.list.forEach(function(u){(e==null?void 0:e.definition)===u.definition&&(a.curDefinition=u)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(Ol,{from:r,to:e}),!this.hasStart){this.config.url=e.url;return}var l=this.switchURL(e.url,ct({seamless:o.seamless!==!1&&typeof MediaSource<"u"&&typeof MediaSource.isTypeSupported=="function"},e));l&&l.then?l.then(function(){a.emit(Ho,{from:r,to:e})}):this.emit(Ho,{from:r,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(Wn,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,r=Z.NOT_ALLOW_AUTOPLAY,a=Z.PLAYING,o=Z.NO_START,l=Z.PAUSED,u=Z.REPLAY,c=Z.ENTER,f=Z.ENDED,h=Z.ERROR,d=Z.LOADING,v=[r,a,o,l,u,c,f,h,d];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,v.forEach(function(m){e.removeClass(m)}),this.addClass(Z.NO_START),this.emit(La)}},{key:"reset",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;this.resetState();var o=this.plugins;if(o&&(r.map(function(u){e.deregister(u)}),a)){var l=Zu();Object.keys(this.config).forEach(function(u){e.config[u]!=="undefined"&&(u==="plugins"||u==="presets"||u==="el"||u==="id")&&(e.config[u]=l[u])})}}},{key:"destroy",value:function(){var e,r=this,a=this.innerContainer,o=this.root,l=this.media;if(!(!o||!l)){if(this.hasStart=!1,this._useAutoplay=!1,o.removeAttribute(ri),l.removeAttribute(ri),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),g.clearAllTimers(this),this.emit(xa),(e=ti)===null||e===void 0||e.remove(this),Et.destroy(this),cd(this),Oe(Le(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),a)for(var u=a.children,c=0;c<u.length;c++)a.removeChild(u[c]);!a&&l instanceof window.Node&&o.contains(l)&&!this.config.remainMediaAfterDestroy&&o.removeChild(l),["topBar","leftBar","rightBar","innerContainer"].map(function(h){r[h]&&o.removeChild(r[h]),r[h]=null});var f=o.className.split(" ");f.length>0?o.className=f.filter(function(h){return h.indexOf("xgplayer")<0}).join(" "):o.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(h){r[h]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(Z.ENDED),this.currentTime=0,this.isSeeking=!1,Pn(this,"replay",function(){e.once(Hn,function(){var r=e.mediaPlay();r&&r.catch&&r.catch(function(a){console.log(a)})}),e.emit(Qs),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(Z.ERROR),this.addClass(Z.LOADING),Pn(this,"retry",function(){var r=e.currentTime,a=e.config.url,o=g.isMSE(e.media)?{url:a}:e.preProcessUrl(a);e.src=o.url,!e.config.isLive&&(e.currentTime=r),e.once(Un,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,r,a,o){e&&(o||(o=Z.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=g.filterStyleFromText(e)),g.addClass(e,a),r&&r!==e&&!this._orgPCss&&(this._orgPCss=g.filterStyleFromText(r),g.addClass(r,o),r.setAttribute(ri,this.playerId)))}},{key:"recoverFullStyle",value:function(e,r,a,o){o||(o=Z.PARENT_FULLSCREEN),this._orgCss&&(g.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),g.removeClass(e,a),r&&r!==e&&this._orgPCss&&(g.setStyleFromCsstext(r,this._orgPCss),this._orgPCss="",g.removeClass(r,o),r.removeAttribute(ri))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,r=this.root,a=this.media;(e==="video"||e==="media")&&(e=this[e]),e||(e=r),this._fullScreenOffset={top:g.scrollTop(),left:g.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var o=g.getFullScreenEl();if(o===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var l=0;l<Wu.length;l++){var u=Wu[l];if(e[u]){var c=u==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[u]();return c&&c.then?c:Promise.resolve()}}return a.fullscreenEnabled||a.webkitSupportsFullscreen?(a.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch{return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!g.getFullScreenEl())){this.root;var r=this.media;this._fullActionFrom="exit";try{for(var a=0;a<Ku.length;a++){var o=Ku[a];if(document[o]){var l=document[o]();return l&&l.then?l:Promise.resolve()}}return r&&r.webkitSupportsFullscreen?(r.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch{return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var r=e?"".concat(Z.INNER_FULLSCREEN," ").concat(Z.CSS_FULLSCREEN):Z.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,r);var a=this.config.fullscreen,o=a===void 0?{}:a,l=o.useCssFullscreen===!0||typeof o.useCssFullscreen=="function"&&o.useCssFullscreen();l&&(this.fullscreen=!0,this.emit(Nn,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(Zs,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(Z.INNER_FULLSCREEN," ").concat(Z.CSS_FULLSCREEN):Z.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var r=this.config.fullscreen,a=r===void 0?{}:r,o=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();o?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(Nn,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(Zs,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var r=e?"".concat(Z.INNER_FULLSCREEN," ").concat(Z.ROTATE_FULLSCREEN):Z.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,r,Z.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style");var a=Math.abs(window.orientation)===90||Math.abs(screen.orientation.angle)===90;this.root.style.width=a?"".concat(window.innerWidth,"px"):"".concat(window.innerHeight,"px"),this.emit(Nn,!0)}},{key:"exitRotateFullscreen",value:function(e){var r=this._fullscreenEl!==this.root?"".concat(Z.INNER_FULLSCREEN," ").concat(Z.ROTATE_FULLSCREEN):Z.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,r,Z.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(Nn,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(Ll,ct({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this._clearUserTimer(),this.emit(Kh,ct({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!0,delay:3e3},a=this.innerStates;if(this.isActive=!0,this.removeClass(Z.INACTIVE),this._clearUserTimer(),r.isLock!==void 0&&(a.isActiveLocked=r.isLock),r.autoHide===!1||r.isLock===!0||a.isActiveLocked){this._clearUserTimer();return}var o=r&&r.delay?r.delay:this.config.inactive;this.userTimer=g.setTimeout(this,function(){e.userTimer=null,e.blur()},o)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.ignorePaused,a=r===void 0?!1:r;if(!this.innerStates.isActiveLocked){var o=this.config.closePauseVideoFocus;this.isActive=!1,(a||o||!this.paused&&!this.ended)&&this.addClass(Z.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(Z.ENTER),this.removeClass(Z.ERROR),this.removeClass(Z.LOADING),this.isCanplay=!0,this.waitTimer&&g.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){var e=this;this.isError=!1,this.isSeeking=!1,this.__startTime>0&&(this.duration>0?this._seekToStartTime():this.once(Jn,function(){e._seekToStartTime()}))}},{key:"onLoadstart",value:function(){this.removeClass(Z.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===je.ENDED&&this.setState(je.RUNNING),this.removeClass(Z.PAUSED),this.ended&&this.removeClass(Z.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(Z.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this._clearUserTimer(),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(Z.ENDED),this.setState(je.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(Z.NOT_ALLOW_AUTOPLAY),this.removeClass(Z.NO_START),this.removeClass(Z.ENTER),this.removeClass(Z.LOADING),this.addClass(Z.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(Z.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&g.clearTimeout(this,this.waitTimer),this.removeClass(Z.LOADING),this.removeClass(Z.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&g.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=g.setTimeout(this,function(){e.addClass(Z.LOADING),e.emit(Jh),g.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var r=Z.NO_START,a=Z.PAUSED,o=Z.ENDED,l=Z.ERROR,u=Z.REPLAY,c=Z.LOADING,f=[r,a,o,l,u,c];f.forEach(function(h){e.removeClass(h)}),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(Z.LOADING))&&this.media.readyState>2&&(this.removeClass(Z.LOADING),g.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state===je.NOTALLOW&&this.duration&&(this.setState(je.RUNNING),this.emit(Ri)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){g.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,r,a){if(!(!this.media||!r||!e)){var o=g.typeOf(e)==="String"?e:e.type||"";a.props&&g.typeOf(a.props)!=="Array"&&(a.props=[a.props]),this.emit(na,ct({eventType:o,action:r,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},a))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var r=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=r,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{startDiff:0,endDiff:0},a=r||{},o=a.startDiff,l=o===void 0?0:o,u=a.endDiff,c=u===void 0?0:u,f=this.media.buffered;if(!f||f.length===0||!this.duration)return!0;for(var h=e||this.media.currentTime||.2,d=f.length,v=0;v<d;v++)if(f.start(v)+l<=h&&f.end(v)-c>h)return!0;return!1}},{key:"resizePosition",value:function(){var e=this,r=this.videoPos,a=r.vy,o=r.vx,l=r.h,u=r.w,c=this.videoPos.rotate;if(!(c<0&&l<0&&u<0)){var f=this.videoPos._pi;if(!f&&this.media.videoHeight&&(f=this.media.videoWidth/this.media.videoHeight*100),!!f){this.videoPos.pi=f,c=c<0?0:c;var h={rotate:c},d=0,v=0,m=1,p=Math.abs(c/90),S=this.root,C=this.innerContainer,_=S.offsetWidth,E=C?C.offsetHeight:S.offsetHeight,k={},N=E,I=_;if(p%2===0)m=l>0?100/l:u>0?100/u:1,h.scale=m,d=a>0?(100-l)/2-a:0,h.y=p===2?0-d:d,v=o>0?(100-u)/2-o:0,h.x=p===2?0-v:v,k.width="".concat(I,"px"),k.height="".concat(N,"px"),k.maxWidth="",k.maxHeight="";else if(p%2===1){I=E,N=_;var U=E-_;v=-U/2/I*100,h.x=p===3?v+a/2:v-a/2,d=U/2/N*100,h.y=p===3?d+o/2:d-o/2,h.scale=m,k.width="".concat(I,"px"),k.maxWidth="".concat(I,"px"),k.height="".concat(N,"px"),k.maxHeight="".concat(N,"px")}var D=g.getTransformStyle(h,this.media.style.transform||this.media.style.webkitTransform);k.transform=D,k.webkitTransform=D,Object.keys(k).map(function(O){e.media.style[O]=k[O]})}}}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var r=this.videoPos;r.h=e.h*100||0,r.w=e.w*100||0,r.vx=e.x*100||0,r.vy=e.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var r=this;e&&Object.keys(e).map(function(a){if(a!=="plugins"){r.config[a]=e[a];var o=r.plugins[a.toLowerCase()];o&&g.typeOf(o.setConfig)==="Function"&&o.setConfig(e[a])}})}},{key:"playNext",value:function(e){var r=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,Pn(this,"playnext",function(){r.start(),r.emit(ta,e)})}},{key:"resize",value:function(){var e=this;if(!(!this.media||!this.root)){var r=this.root.getBoundingClientRect();this.sizeInfo.width=r.width,this.sizeInfo.height=r.height,this.sizeInfo.left=r.left,this.sizeInfo.top=r.top;var a=this.media,o=a.videoWidth,l=a.videoHeight,u=this.config,c=u.fitVideoSize,f=u.videoFillMode;if((f==="fill"||f==="cover"||f==="contain")&&this.setAttribute("data-xgfill",f),!(!l||!o)){this._videoHeight=l,this._videoWidth=o;var h=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,d=r.width,v=r.height-h,m=parseInt(o/l*1e3,10),p=parseInt(d/v*1e3,10),S=d,C=v,_={};c==="auto"&&p>m||c==="fixWidth"?(C=d/m*1e3,this.config.fluid?_.paddingTop="".concat(C*100/S,"%"):_.height="".concat(C+h,"px")):(c==="auto"&&p<m||c==="fixHeight")&&(S=m*v/1e3,_.width="".concat(S,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(_).forEach(function(k){e.root.style[k]=_[k]}),(f==="fillHeight"&&p<m||f==="fillWidth"&&p>m)&&this.setAttribute("data-xgfill","cover");var E={videoScale:m,vWidth:S,vHeight:C,cWidth:S,cHeight:C+h};this.resizePosition(),this.emit(pi,E)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,r);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(r*100,"%")}},{key:"setState",value:function(e){$e.logInfo("setState","state from:".concat(ec[this.state]," to:").concat(ec[e])),this._state=e}},{key:"preProcessUrl",value:function(e,r){var a=this.config,o=a.preProcessUrl,l=a.preProcessUrlOptions,u=Object.assign({},l,r);return!g.isBlob(e)&&typeof o=="function"?o(e,u):{url:e}}},{key:"_seekToStartTime",value:function(){this.__startTime>0&&this.duration>0&&(this.currentTime=this.__startTime>this.duration?this.duration:this.__startTime,this.__startTime=-1)}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(je.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===je.RUNNING||this._state===je.ENDED},set:function(e){e?this.setState(je.RUNNING):this._state>=je.RUNNING&&this.setState(je.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var r=this,a=this.config.definition,o=null,l=null;a.list=e,this.emit("resourceReady",e),e.forEach(function(u){var c;((c=r.curDefinition)===null||c===void 0?void 0:c.definition)===u.definition&&(o=u),a.defaultDefinition===u.definition&&(l=u)}),!l&&e.length>0&&(l=e[0]),o?this.changeDefinition(o):l&&this.changeDefinition(l)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var r=this.media.getVideoPlaybackQuality();return e.dropped=r.droppedVideoFrames||0,e.total=r.totalVideoFrames||0,e.corrupted=r.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var r=ir.langKeys.filter(function(a){return a===e});if(r.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(ir.langKeys.join(),"] "));return}this.config.lang=e,Et.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return Uo}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return Oe(Le(n.prototype),"readyState",this)}},{key:"error",get:function(){var e=Oe(Le(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return Oe(Le(n.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed,r=e.acc,a=e.t;return a?new Date().getTime()-a+r:r}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){e=g.convertDeg(e),!(e%90!==0||e===this.videoPos.rotate)&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return nc},set:function(e){nc=e}},{key:"realTimeSpeed",get:function(){return tc},set:function(e){tc=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime||0},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration||0},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,r){return ia.call.apply(ia,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,r){return ra.call.apply(ra,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,r){return sa.call.apply(sa,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,r,a){for(var o=arguments.length,l=new Array(o>3?o-3:0),u=3;u<o;u++)l[u-3]=arguments[u];return Yu.call.apply(Yu,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,r,a){for(var o=arguments.length,l=new Array(o>3?o-3:0),u=3;u<o;u++)l[u-3]=arguments[u];return Xu.call.apply(Xu,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,r){var a;typeof r=="boolean"&&r!==this.muted&&(this.addInnerOP("volumechange"),g.typeOf(r)===Boolean&&(this.muted=r)),(a=ti)===null||a===void 0||a.setActive(this.playerId,e)}}],[{key:"debugger",get:function(){return $e.config.debug},set:function(e){$e.config.debug=e}},{key:"instManager",get:function(){return ti},set:function(e){ti=e}},{key:"getCurrentUserActivePlayerId",value:function(){var e;return(e=ti)===null||e===void 0?void 0:e.getActiveId()}},{key:"setCurrentUserActive",value:function(e,r){var a;(a=ti)===null||a===void 0||a.setActive(e,r)}},{key:"isHevcSupported",value:function(){return Fe.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return Fe.probeConfigSupported(e)}},{key:"install",value:function(e,r){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=r)}},{key:"use",value:function(e,r){n.plugins||(n.plugins={}),n.plugins[e]=r}}]),n}(Fm);G(Ia,"defaultPreset",null);G(Ia,"XgVideoProxy",null);Ia.instManager=hd.getInstance();function mi(i,s,n){try{return' <div class="xg-tips '.concat(n?"hide":" ",'" lang-key="').concat(i.i18nKeys[s],`">
    `).concat(i.i18n[s],`
    </div>`)}catch{return'<div class="xg-tips hide"></div>'}}var $i=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"_onMouseenter",function(o){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),G(B(t),"_onMouseLeave",function(o){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return ge(n,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave),this.config.disable&&this.disable()}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),n}(Ye);function l0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function u0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Go=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;Oe(Le(n.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Zs,function(r){e.animate(r)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,r=this.find(".xgplayer-icon");r.appendChild(e.cssFullscreen),r.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var r=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:r}),r?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var r=this.i18nKeys,a=this.find(".xg-tips");a&&this.changeLangTextKey(a,e?r.EXITCSSFULLSCREEN_TIPS:r.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:l0,class:"xg-get-cssfull"},exitCssFullscreen:{icon:u0,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){Oe(Le(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(mi(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}($i);function c0(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var f0=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(r){r.preventDefault(),r.stopPropagation(),e.config.onClick(r)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:c0,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){g.addClass(this.root,"show")}},{key:"hide",value:function(){g.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:it.ROOT_TOP,index:0}}}]),n}(Ye);function h0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function d0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var dd=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"_onOrientationChange",function(o){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return ge(n,[{key:"afterCreate",value:function(){var e=this;Oe(Le(n.prototype),"afterCreate",this).call(this);var r=this.config,a=this.playerConfig;if(!r.disable){r.target&&(this.playerConfig.fullscreenTarget=this.config.target);var o=g.getFullScreenEl();a.fullscreenTarget===o&&this.player.getFullscreen().catch(function(l){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(u){var c=e.player.fullscreen;e.emitUserAction(u,"switch_fullscreen",{prop:"fullscreen",from:c,to:!c})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(Nn,function(l){var u=e.find(".xg-tips");u&&e.changeLangTextKey(u,l?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(l)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:f0,options:{config:{onClick:function(u){e.handleFullscreen(u)}}}})),Fe.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:h0,class:"xg-get-fullscreen"},exitFullscreen:{icon:d0,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){Oe(Le(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",Fe.device==="mobile"?"touchend":"click",this.handleFullscreen),Fe.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e instanceof Event&&(e.preventDefault(),e.stopPropagation());var r=this.player,a=this.config,o=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();o?(r.fullscreen?r.exitCssFullscreen():r.getCssFullscreen(),this.animate(r.fullscreen)):a.rotateFullscreen?(r.fullscreen?r.exitRotateFullscreen():r.getRotateFullscreen(),this.animate(r.fullscreen)):a.switchCallback&&typeof a.switchCallback=="function"?a.switchCallback(r.fullscreen):r.fullscreen?(r.exitFullscreen(),a.useScreenOrientation&&this.unlockScreen()):(r.getFullscreen().catch(function(l){}),a.useScreenOrientation&&r.aspectRatio>1&&this.lockScreen(a.lockOrientationType))}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(mi(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}},{key:"lockScreen",value:function(e){try{screen.orientation.lock(e).catch(function(r){})}catch{}}},{key:"unlockScreen",value:function(){try{screen.orientation.unlock().catch(function(e){})}catch{}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,useScreenOrientation:!1,lockOrientationType:"landscape",switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}($i);function Ml(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function Nl(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var vd=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"btnClick",function(o){o.preventDefault(),o.stopPropagation();var l=B(t),u=l.player;return t.emitUserAction(o,"switch_play_pause",{prop:"paused",from:u.paused,to:!u.paused}),u.ended?u.replay():u.paused?(u.play(),t.animate(!1)):(u.pause(),t.animate(!0)),!1}),t}return ge(n,[{key:"afterCreate",value:function(){Oe(Le(n.prototype),"afterCreate",this).call(this);var e=this.config;e.disable||(this.initIcons(),this.bind(["touchend","click"],this.btnClick),this.listenEvents(),this.animate(!0))}},{key:"listenEvents",value:function(){var e=this,r=this.player;this.on([en,_r,Vi,Hi],function(){e.animate(r.paused)})}},{key:"registerIcons",value:function(){return{play:{icon:Ml,class:"xg-icon-play"},pause:{icon:Nl,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var r=this.i18nKeys,a=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),a&&this.changeLangTextKey(a,r.PLAY_TIPS)):(this.setAttr("data-state","play"),a&&this.changeLangTextKey(a,r.PAUSE_TIPS))}}},{key:"destroy",value:function(){Oe(Le(n.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(mi(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_LEFT,index:0,disable:!1}}}]),n}($i),v0=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],p0=function(){function i(s){pe(this,i),this.fragments=s.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=s.actionCallback,this.fragConfig={fragFocusClass:s.fragFocusClass||"inner-focus-point",fragAutoFocus:!!s.fragAutoFocus,fragClass:s.fragClass||""},this.style=s.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return ge(i,[{key:"updateDuration",value:function(n){var t=this;this.duration=n;var e=0,r=this.fragments;this.fragments=r.map(function(a){return a.start=parseInt(e,10),a.end=parseInt(e+a.percent*t.duration,10),a.duration=parseInt(a.percent*t.duration,10),e+=a.percent*t.duration,a})}},{key:"updateProgress",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,r=this.fragments;if(!(e.length<1)){var a=t.newIndex,o=t.curIndex,l=t.millisecond;a!==o&&e.map(function(f,h){h<a?f[n].style.width="100%":h>a&&(f[n].style.width=0)});var u=r[a],c=l===0?0:(l-u.start)/u.duration;e[a][n].style.width=c<0?0:"".concat(c*100,"%")}}},{key:"updateFocus",value:function(n){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!n){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var e=this.findIndex(n.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var r={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(r)}}}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(parseInt(t*1e3,10))}var e=this.playedIndex,r=this.cachedIndex;if(g.typeOf(n.played)!=="Undefined"){var a=this.findIndex(n.played*1e3,e);if(a<0)return;this.updateProgress("played",{newIndex:a,curIndex:e,millisecond:parseInt(n.played*1e3,10)}),this.playedIndex=a}if(g.typeOf(n.cached)!=="Undefined"){var o=this.findIndex(n.cached*1e3,r);if(o<0)return;this.updateProgress("cached",{newIndex:o,curIndex:r,millisecond:parseInt(n.cached*1e3,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(n,t){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(t>-1&&t<e.length&&n>e[t].start&&n<e[t].end)return t;if(n>e[e.length-1].start)return e.length-1;for(var r=0;r<e.length;r++)if(n>e[r].start&&n<=e[r].end){t=r;break}return t}},{key:"findHightLight",value:function(){for(var n=this.root.children,t=0;t<n.length;t++)if(g.hasClass(n[t],this.fragConfig.fragFocusClass))return{dom:n[t],pos:n[t].getBoundingClientRect()}}},{key:"findFragment",value:function(n){var t=this.root.children;return n<0||n>=t.length?null:{dom:t[n],pos:t[n].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var n=this.root.children,t=0;t<n.length;t++)g.removeClass(n[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(n){var t=this.root.children;if(n<t.length)return g.addClass(t[n],this.fragConfig.fragFocusClass),{dom:t[n],pos:t[n].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(n){var t=this;if(Object.keys(this.fragConfig).forEach(function(r){n[r]!==void 0&&(t.fragConfig[r]=n[r])}),n.fragments){if(this.fragments=n.fragments.length===0?[{percent:1}]:n.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var n=this,t=this.style.progressColor;if(this.root||(this.root=g.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,r=e.fragClass,a=e.fragFocusClass;this.progressList=this.fragments.map(function(o){var l=g.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(o.percent):"flex: ".concat(o.percent)},"".concat(o.isFocus?a:""," xgplayer-progress-inner ").concat(r));return n.root.appendChild(l),v0.forEach(function(u){l.appendChild(g.createDom(u.tag,"",{style:u.styleKey?"background: ".concat(n.style[u.styleKey],"; width:0;"):"width:0;"},u.className))}),{cached:l.children[0],played:l.children[1]}})}return this.root}}]),i}(),ic={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},pd=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),G(B(e),"onMoveOnly",function(r,a){var o=B(e),l=o.pos,u=o.config,c=o.player,f=a;if(r){g.event(r);var h=g.getEventPos(r,c.zoom),d=c.rotateDeg===90?h.clientY:h.clientX;if(l.moving&&Math.abs(l.x-d)<u.miniMoveStep)return;l.moving=!0,l.x=d,f=e.computeTime(r,d)}e.triggerCallbacks("dragmove",f,r),e._updateInnerFocus(f)}),G(B(e),"onBodyClick",function(r){e.pos.isLocked&&(e.pos.isLocked=!1,r.preventDefault(),r.stopPropagation())}),G(B(e),"_mouseDownHandler",function(r,a){e._state.time=a.currentTime,e.updateWidth(a.currentTime,a.seekTime,a.percent,0),e._updateInnerFocus(a)}),G(B(e),"_mouseUpHandler",function(r,a){var o=B(e),l=o.pos;l.moving&&e.updateWidth(a.currentTime,a.seekTime,a.percent,2)}),G(B(e),"_mouseMoveHandler",function(r,a){var o=B(e),l=o._state,u=o.pos,c=o.config,f=o.player;l.time<a.currentTime?a.forward=!0:a.forward=!1,l.time=a.currentTime,u.isDown&&!u.moving&&(u.moving=!0,c.isPauseMoving&&f.pause(),e.triggerCallbacks("dragstart",a,r),e.emitUserAction("drag","dragstart",a)),e.updateWidth(a.currentTime,a.seekTime,a.percent,1),e.triggerCallbacks("dragmove",a,r),e._updateInnerFocus(a)}),G(B(e),"onMouseDown",function(r){var a=B(e),o=a._state,l=a.player,u=a.pos,c=a.config,f=a.playerConfig,h=g.getEventPos(r,l.zoom),d=l.rotateDeg===90?h.clientY:h.clientX;if(!(l.isMini||c.closeMoveSeek||!f.allowSeekAfterEnded&&l.ended)){if(!l.duration&&!l.isPlaying){l.play();return}r.stopPropagation(),e.focus(),g.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),g.checkIsFunction(c.onMoveStart)&&c.onMoveStart(),g.event(r),u.x=d,u.isDown=!0,u.moving=!1,o.prePlayTime=l.currentTime,l.focus({autoHide:!1}),e.isProgressMoving=!0,g.addClass(e.progressBtn,"active");var v=e.computeTime(r,d);v.prePlayTime=o.prePlayTime,e._mouseDownHandlerHook(r,v);var m=r.type;return m==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp),e.root.addEventListener("touchcancel",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),G(B(e),"onMouseUp",function(r){var a=B(e),o=a.player,l=a.config,u=a.pos,c=a.playerConfig,f=a._state;if(u){r.stopPropagation(),r.preventDefault(),g.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),g.checkIsFunction(l.onMoveEnd)&&l.onMoveEnd(),g.event(r),g.removeClass(e.progressBtn,"active");var h=e.computeTime(r,u.x);h.prePlayTime=f.prePlayTime,u.moving?(e.triggerCallbacks("dragend",h,r),e.emitUserAction("drag","dragend",h)):(e.triggerCallbacks("click",h,r),e.emitUserAction("click","click",h)),e._mouseUpHandlerHook(r,h),u.moving=!1,u.isDown=!1,u.x=0,u.y=0,u.isLocked=!0,f.prePlayTime=0,f.time=0;var d=r.type;d==="touchend"||d==="touchcancel"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.root.removeEventListener("touchcancel",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),u.isEnter?c.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(r)),g.setTimeout(B(e),function(){e.resetSeekState()},1),o.focus()}}),G(B(e),"onMouseMove",function(r){var a=B(e),o=a._state,l=a.pos,u=a.player,c=a.config;g.checkTouchSupport()&&r.preventDefault(),g.event(r);var f=g.getEventPos(r,u.zoom),h=u.rotateDeg===90?f.clientY:f.clientX,d=Math.abs(l.x-h);if(!(l.moving&&d<c.miniMoveStep||!l.moving&&d<c.miniStartStep)){l.x=h;var v=e.computeTime(r,h);v.prePlayTime=o.prePlayTime,e._mouseMoveHandlerHook(r,v)}}),G(B(e),"onMouseOut",function(r){e.triggerCallbacks("mouseout",null,r)}),G(B(e),"onMouseOver",function(r){e.triggerCallbacks("mouseover",null,r)}),G(B(e),"onMouseEnter",function(r){var a=B(e),o=a.player,l=a.pos;if(!(l.isDown||l.isEnter||o.isMini||!o.config.allowSeekAfterEnded&&o.ended)){l.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),g.event(r);var u=g.getEventPos(r,o.zoom),c=o.rotateDeg===90?u.clientY:u.clientX,f=e.computeTime(r,c);e.triggerCallbacks("mouseenter",f,r),e.focus()}}),G(B(e),"onMouseLeave",function(r){e.triggerCallbacks("mouseleave",null,r),e.unlock(),e._updateInnerFocus(null)}),G(B(e),"onVideoResize",function(){var r=e.pos,a=r.x,o=r.isDown,l=r.isEnter;if(l&&!o){var u=e.computeTime(null,a);e.onMoveOnly(null,u)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,typeof e.config.isDragingSeek=="boolean"&&(console.warn("[XGPLAYER] 'isDragingSeek' is deprecated, please use 'isDraggingSeek' instead"),e.config.isDraggingSeek=e.config.isDragingSeek),e}return ge(n,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"currentTime",get:function(){var e=this.player,r=e.offsetCurrentTime,a=e.currentTime;return r>=0?r:a+this.timeOffset}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"show",value:function(e){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!r||r.length===0)&&(r=[{percent:1}]);var o=ct(ct({fragments:r},a),{},{actionCallback:function(u){e.emitUserAction("fragment_focus","fragment_focus",u)}});this.innerList?this.innerList.reset(o):(this.innerList=new p0(o),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(l){e[l]=e.innerList[l].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var e=this.config,r=e.fragFocusClass,a=e.fragAutoFocus,o=e.fragClass;this._initInner(this.config.fragments,{fragFocusClass:r,fragAutoFocus:a,fragClass:o,style:this.playerConfig.commonStyle||{}}),Fe.device==="mobile"&&(this.config.isDraggingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.listenEvents(),this.bindDomEvents(),this.initCustomStyle()}}},{key:"listenEvents",value:function(){var e=this;this.on(Jn,function(){e.onMouseLeave()}),this.on(Zt,function(){e.onTimeupdate()}),this.on(Hn,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(Wh,function(){e.onCacheUpdate()}),this.on(Ui,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(Hi,function(){e.onReset()}),this.on(pi,function(){e.onVideoResize()})}},{key:"setConfig",value:function(e){var r=this,a=null;Object.keys(e).forEach(function(o){r.config[o]=e[o],o==="fragments"&&(a=e[o])}),a&&this._initInner(a,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},r=e.commonStyle,a=r.sliderBtnStyle,o=this.progressBtn;a&&(typeof a=="string"?o.style.boxShadow=a:Nt(a)==="object"&&Object.keys(a).map(function(l){o.style[l]=a[l]}))}},{key:"triggerCallbacks",value:function(e,r,a){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(o){if(o&&o.handler&&o.type===e)try{o.handler(r,a)}catch(l){console.error("[XGPLAYER][triggerCallbacks] ".concat(o," error"),l)}})}},{key:"addCallBack",value:function(e,r){r&&typeof r=="function"&&this.__dragCallBacks.push({type:e,handler:r})}},{key:"removeCallBack",value:function(e,r){var a=this.__dragCallBacks,o=-1;a.map(function(l,u){l&&l.type===e&&l.handler===r&&(o=u)}),o>-1&&a.splice(o,1)}},{key:"unlock",value:function(){var e=this.player,r=this.pos;if(r.isEnter=!1,r.isLocked=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),r.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&this.root.addEventListener("touchstart",this.onMouseDown),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),e.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),g.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),g.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,r,a,o){var l=this.config,u=this.player;if(!(l.isCloseClickSeek&&o===0)){var c=r=r>=u.duration?u.duration-l.endedDiff:Number(r).toFixed(1);this.updatePercent(a),this.updateTime(e),!(o===1&&(!l.isDraggingSeek||u.config.mediaType==="audio"))&&(this._state.now=c,this._state.direc=c>u.currentTime?0:1,u.seek(c))}}},{key:"computeTime",value:function(e,r){var a=this.player,o=this.root.getBoundingClientRect(),l=o.width,u=o.height,c=o.top,f=o.left,h,d,v=r;a.rotateDeg===90?(h=u,d=c):(h=l,d=f);var m=v-d;m=m>h?h:m<0?0:m;var p=m/h;p=p<0?0:p>1?1:p,Number.isNaN(p)&&(p=this.player.currentTime/this.offsetDuration);var S=parseInt(p*this.offsetDuration*1e3,10)/1e3,C=g.getCurrentTimeByOffset(S,a.timeSegments);return{percent:p,currentTime:S,seekTime:C,offset:m,width:h,left:d,e}}},{key:"updateTime",value:function(e){var r=this.player,a=this.duration;e>a?e=a:e<0&&(e=0);var o=r.plugins.time;o&&o.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,r){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.offsetDuration},this.offsetDuration);var a=this.player.plugins.miniprogress;a&&a.update({played:e*this.offsetDuration},this.offsetDuration)}}},{key:"onTimeupdate",value:function(e){var r=this.player,a=this._state,o=this.offsetDuration;if(!(r.isSeeking&&r.media.seeking||this.isProgressMoving||!r.hasStart)){if(a.now>-1){var l=parseInt(a.now*1e3,10)-parseInt(r.currentTime*1e3,10);if(a.direc===0&&l>300||a.direc===1&&l>-300){a.now=-1;return}else a.now=-1}var u=this.currentTime;u=g.adjustTimeByDuration(u,o,e),this.innerList.update({played:u},o),this.progressBtn.style.left="".concat(u/o*100,"%")}}},{key:"onCacheUpdate",value:function(e){var r=this.player,a=this.duration;if(r){var o=r.bufferedPoint.end;o=g.adjustTimeByDuration(o,a,e),this.innerList.update({cached:o},a)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0),this.progressBtn.style.left="0%"}},{key:"destroy",value:function(){var e=this.player;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var r=this.domEventType;(r==="touch"||r==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),this.root.removeEventListener("touchcancel",this.onMouseUp)),(r==="mouse"||r==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",r=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(r,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_CENTER,index:0,disable:!1,isDraggingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:ic.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return ic}}]),n}(Ye),gd=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),e.isActiving=!1,e}return ge(n,[{key:"duration",get:function(){var e=this.player,r=e.offsetDuration,a=e.duration;return this.playerConfig.customDuration||r||a}},{key:"currentTime",get:function(){var e=this.player,r=e.offsetCurrentTime,a=e.currentTime;return r>=0?r:a}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this.player.controls.config.mode;this.mode=e==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.listenEvents())}},{key:"listenEvents",value:function(){var e=this;this.on([Jn,Hn,Zt],function(r){r.eventName==="durationchange"&&(e.isActiving=!1),e.onTimeUpdate()}),this.on(Ui,function(){e.onTimeUpdate(!0)}),this.on(Hi,function(){e.onReset()})}},{key:"show",value:function(e){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var r=this.player,a=this.config,o=this.duration;if(!(a.disable||this.isActiving||!r.hasStart)){var l=this.currentTime+this.timeOffset;l=g.adjustTimeByDuration(l,o,e),this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(g.format(l)),o!==1/0&&o>0&&(this.centerDurDom.innerHTML=g.format(o))):(this.timeDom.innerHTML=this.minWidthTime(g.format(l)),o!==1/0&&o>0&&(this.durationDom.innerHTML=g.format(o)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(g.format(0)),this.centerDurDom.innerHTML=g.format(0)):(this.timeDom.innerHTML=this.minWidthTime(g.format(0)),this.durationDom.innerHTML=g.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var r=e.controls.center;this.centerCurDom=g.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=g.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),r.children.length>0?r.insertBefore(this.centerCurDom,r.children[0]):r.appendChild(this.centerCurDom),r.appendChild(this.centerDurDom),this.extraEls=[this.centerCurDom,this.centerDurDom]}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(g.hide(this.durationDom),g.hide(this.timeDom),g.hide(this.find(".time-separator")),g.show(this.find(".time-live-tag"))):g.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(g.hide(this.durationDom),g.hide(this.timeDom),g.hide(this.find(".time-separator")),g.show(this.find(".time-live-tag"))):(g.hide(this.find(".time-live-tag")),g.show(this.find(".time-separator")),g.show(this.durationDom),g.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=this.minWidthTime(g.format(e));return}this.timeDom.innerHTML=this.minWidthTime(g.format(e))}}},{key:"minWidthTime",value:function(e){return e.split(":").map(function(r){return'<span class="time-min-width">'.concat(r,"</span>")}).join(":")}},{key:"resetActive",value:function(){var e=this,r=this.player,a=function(){e.isActiving=!1};this.off(Hn,a),r.isSeeking&&r.media.seeking?this.once(Hn,a):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(Ye);function g0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function m0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function y0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var md=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"onBarMousedown",function(o){var l=B(t),u=l.player,c=t.find(".xgplayer-bar");g.event(o);var f=c.getBoundingClientRect(),h=g.getEventPos(o,u.zoom),d=f.height-(h.clientY-f.top);if(h.h=d,h.barH=f.height,t.pos=h,!(d<-2))return t.updateVolumePos(d,o),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),G(B(t),"onBarMouseMove",function(o){var l=B(t),u=l._d;if(u.isStart){var c=B(t),f=c.pos,h=c.player;o.preventDefault(),o.stopPropagation(),g.event(o);var d=g.getEventPos(o,h.zoom);u.isMoving=!0;var v=f.h-d.clientY+f.clientY;v>f.barH||t.updateVolumePos(v,o)}}),G(B(t),"onBarMouseUp",function(o){g.event(o),document.removeEventListener("mouseup",t.onBarMouseUp);var l=B(t),u=l._d;u.isStart=!1,u.isMoving=!1}),G(B(t),"onMouseenter",function(o){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),G(B(t),"onMouseleave",function(o){t._d.isActive=!1,t.unFocus(100,!1,o),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),G(B(t),"onVolumeChange",function(o){if(t.player){var l=t.player,u=l.muted,c=l.volume;t._d.isMoving||(t.find(".xgplayer-drag").style.height=u||c===0?"4px":"".concat(c*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(u,c)}}),t}return ge(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:m0,class:"xg-volume-small"},volumeLarge:{icon:g0,class:"xg-volume"},volumeMuted:{icon:y0,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var r=this.playerConfig,a=r.commonStyle,o=r.volume;a.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=a.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(l){e.changeMuted(l)},{pre:function(u){u.preventDefault(),u.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),Fe.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(jh,this.onVolumeChange),this.once(Wn,this.onVolumeChange),g.typeOf(o)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,r){var a=this.player,o=this.find(".xgplayer-drag"),l=this.find(".xgplayer-bar");if(!(!l||!o)){var u=parseInt(e/l.getBoundingClientRect().height*1e3,10);o.style.height="".concat(e,"px");var c=Math.max(Math.min(u/1e3,1),0),f={volume:{from:a.volume,to:c}};a.muted&&(f.muted={from:!0,to:!1}),this.emitUserAction(r,"change_volume",{muted:a.muted,volume:a.volume,props:f}),a.volume=Math.max(Math.min(u/1e3,1),0),a.muted&&(a.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,r=e.volume,a=e.muted,o=this.find(".xgplayer-value-label"),l=Math.max(Math.min(r,1),0);o.innerText=a?0:Math.round(l*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(g.clearTimeout(this,this._timerId),this._timerId=null),g.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2?arguments[2]:void 0,l=this._d,u=this.player;l.isActive||(this._timerId&&(g.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=g.setTimeout(this,function(){l.isActive||(a?u.blur():u.focus(),g.removeClass(e.root,"slide-show"),l.isStart&&e.onBarMouseUp(o)),e._timerId=null},r))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var r=this.player,a=this._d;a.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:r.muted,volume:r.volume,props:{muted:{from:r.muted,to:!r.muted}}}),r.volume>0&&(r.muted=!r.muted),r.volume<.01&&(r.volume=this.config.miniVolume)}},{key:"animate",value:function(e,r){e||r===0?this.setAttr("data-state","mute"):r<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(g.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",Fe.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,r=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(r?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(Ye);function It(){return new Date().getTime()}var ni={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},_0=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&($e.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),G(B(t),"_onAutoplayStart",function(){$e.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),G(B(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=It(),t.loadedCostTime=0,t.startCostTime=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&g.clearTimeout(B(t),t._waitTimer),t._waittTimer&&g.clearTimeout(B(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),G(B(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=It(),t.emitLog(ni.SEEK_START,{start:It()}))}),G(B(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),G(B(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=It(),t.fixedWaitingStart=It(),t._waitType=1,t.emitLog(ni.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),G(B(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=It(),t._waitTimer=g.setTimeout(B(t),function(){t._isWaiting&&(t.waitingStart=It(),g.clearTimeout(B(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(ni.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),G(B(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),G(B(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return ge(n,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=It(),this.loadedCostTime=0,this.startCostTime=0,this.on(xl,function(){var r=e._state,a=r.autoplayStart,o=r.isFFSend;e.startCostTime=It()-e.newPointTime,$e.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(a," isFFSend:").concat(o," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!o&&(!r.isLs&&e.emitLog(ni.LOAD_START,{}),r.isLs=!0,r.isTimeUpdate=!1,r.isFFLoading=!0,e.pt=It(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on(Wn,function(){e.vt=It(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var r=e._state,a=r.isTimeUpdate,o=r.isFFSend,l=r.autoplayStart;$e.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(a||l)&&e._sendFF("loadedData"),o||e.emitLog(ni.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(Pa,this._onSeeking),this.on(Hn,this._onSeeked),this.on(xa,function(){e.endState("destroy")}),this.on(os,function(){e.endState("urlChange"),$e.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([Al,Un],this._onPlaying),this.on(as,this._onWaiting),this.on(Vi,this._onError),this.on(La,function(){$e.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(Ri,this._onAutoplayStart),this.off(Zt,this._onTimeupdate),this.once(Ri,this._onAutoplayStart),this.once(Zt,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=It();var r=this._state,a=r.isFFLoading,o=r.isFFSend;$e.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(a," !isFFSend:").concat(!o)),this.vt>0&&a&&!o&&($e.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(ni.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&g.clearTimeout(this,this._waittTimer),this._waittTimer=g.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),g.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var r=It(),a=r-this.seekingStart;this.seekingStart=0,this.emitLog(ni.SEEK_END,{end:r,costTime:a,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(g.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(g.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var r=It(),a=r-this.waitingStart,o=r-this.fixedWaitingStart,l=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(ni.WAIT_END,{fixedCostTime:o>l?l:o,costTime:a>l?l:a,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,r){var a=this.player;this.emit(td,ct({t:It(),host:g.getHostFromUrl(a.currentSrc),vtype:a.vtype,eventType:e,currentTime:this.player.currentTime,readyState:a.video.readyState,networkState:a.video.networkState},r))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),n}(Ye);function b0(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var S0=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"registerIcons",value:function(){return{replay:b0}}},{key:"afterCreate",value:function(){var e=this;Ye.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(Ui,function(){if(e.playerConfig.loop||g.addClass(e.player.root,"replay"),!e.config.disable){e.show();var r=e.root.querySelector("path");if(r){var a=window.getComputedStyle(r).getPropertyValue("transform");if(typeof a=="string"&&a.indexOf("none")>-1)return null;r.setAttribute("transform",a)}}}),this.on(en,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),g.removeClass(this.player.root,"replay")}},{key:"show",value:function(e){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(Ye),E0=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){g.addClass(this.root,"hide")}},{key:"show",value:function(e){g.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(Ui,function(){e.isEndedShow&&g.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(Zt,function(){e.onTimeUpdate()}),this.on(os,function(){g.removeClass(e.root,"hide"),g.addClass(e.root,"xg-showplay"),e.once(Zt,function(){e.onTimeUpdate()})})):this.on(en,function(){g.addClass(e.root,"hide")})}},{key:"setConfig",value:function(e){var r=this;Object.keys(e).forEach(function(o){r.config[o]=e[o]});var a=this.config.poster;this.update(a)}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?g.removeClass(this.root,"xg-showplay"):this.once(Zt,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"getBgSize",value:function(e){var r="";switch(e){case"cover":r="cover";break;case"contain":r="contain";break;case"fixHeight":r="auto 100%";break;default:r=""}return r?"background-size: ".concat(r,";"):""}},{key:"render",value:function(){var e=this.config,r=e.poster,a=e.hideCanplay,o=e.fillMode,l=e.notHidden,u=this.getBgSize(o),c=r?"background-image:url(".concat(r,");").concat(u):u,f=l?"xg-not-hidden":a?"xg-showplay":"";return'<xg-poster class="xgplayer-poster '.concat(f,'" style="').concat(c,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,notHidden:!1,poster:"",fillMode:"fixWidth"}}}]),n}(Ye),Cn={};function k0(i,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};return Cn[i]&&window.clearTimeout(Cn[i].id),Cn[i]={},n.start&&n.start(),Cn[i].id=window.setTimeout(function(){n.end&&n.end(),window.clearTimeout(Cn[i].id),delete Cn[i]},s),Cn[i].id}function rc(i){if(i){window.clearTimeout(i);return}Object.keys(Cn).map(function(s){window.clearTimeout(Cn[s].id),delete Cn[s]})}var w0=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),G(B(e),"onPlayerReset",function(){e.autoPlayStart=!1;var r=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),g.removeClass(e.root,r),e.show()}),G(B(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var r=e.config.mode==="auto"?"auto-hide":"hide";g.addClass(e.root,r),e.autoPlayStart=!0,e.toggleTo("play")}}),e.autoPlayStart=!1,e}return ge(n,[{key:"afterCreate",value:function(){var e=this.playerConfig;this.initIcons(),this.listenEvents(),this.bindClickEvents(),e.autoplay||this.show()}},{key:"listenEvents",value:function(){var e=this,r=this.player,a=this.playerConfig;this.once(Il,function(){a&&(a.lang&&a.lang==="en"?g.addClass(r.root,"lang-is-en"):a.lang==="jp"&&g.addClass(r.root,"lang-is-jp"))}),this.on(Ri,this.onAutoplayStart),this.on(Dl,function(){var o=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),g.removeClass(e.root,o),e.show()}),this.on(en,function(){e.toggleTo("play")}),this.on(_r,function(){e.toggleTo("pause")}),this.on(La,function(){e.onPlayerReset()})}},{key:"bindClickEvents",value:function(){var e=this;this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(a){a.cancelable&&a.preventDefault(),a.stopPropagation();var o=e.player.paused;e.emitUserAction(a,"switch_play_pause",{props:"paused",from:o,to:!o})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:Ml,class:"xg-icon-play"},startPause:{icon:Nl,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){g.addClass(this.root,"hide")}},{key:"show",value:function(e){g.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){g.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){g.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var r=this;this._animateId=k0("pauseplay",400,{start:function(){g.addClass(r.root,"interact"),r.show(),r.switchStatus(!0)},end:function(){g.removeClass(r.root,"interact"),!e&&r.hide(),r._animateId=null}})}},{key:"endAnimate",value:function(){g.removeClass(this.root,"interact"),rc(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var r=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(r.state<je.READY)){var a=this.player.paused;!a&&r.state===je.RUNNING?r.pause():r.play()}}},{key:"onPlayPause",value:function(e){this.toggleTo(e)}},{key:"toggleTo",value:function(e){var r=this.config,a=this.player;if(!(!a||a.state<je.RUNNING||!this.autoPlayStart)){if(r.mode==="show"){this.switchStatus(),this.show();return}if(r.mode==="auto"){this.switchStatus();return}if(r.isShowPause&&a.paused&&!a.ended||r.isShowEnd&&a.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(r.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||a.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),rc(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(Ye),T0=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"render",value:function(){var e=this.config.innerHtml,r=g.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)r.appendChild(e);else if(e&&typeof e=="string")r.innerHTML=e;else{for(var a="",o=1;o<=12;o++)a+='<div class="xgplayer-enter-bar'.concat(o,'"></div>');r.innerHTML='<div class="xgplayer-enter-spinner">'.concat(a,"</div>")}return r}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(Ye),sc=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:10}}}]),n}(Ye);function ac(i){var s=parseFloat(i),n=i.indexOf("%")===-1&&!Number.isNaN(s);return n&&s}var Bl=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],yd=Bl.length;function C0(){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},s=0;s<yd;s++){var n=Bl[s];i[n]=0}return i}function P0(i){var s=window.getComputedStyle(i);return s}function oc(i){if(typeof i=="string"&&(i=document.querySelector(i)),!(!i||Nt(i)!=="object"||!i.nodeType)){var s=P0(i);if(s.display==="none")return C0();var n={};n.width=i.offsetWidth,n.height=i.offsetHeight;for(var t=n.isBorderBox=s.boxSizing==="border-box",e=0;e<yd;e++){var r=Bl[e],a=s[r],o=parseFloat(a);n[r]=Number.isNaN(o)?0:o}var l=n.paddingLeft+n.paddingRight,u=n.paddingTop+n.paddingBottom,c=n.marginLeft+n.marginRight,f=n.marginTop+n.marginBottom,h=n.borderLeftWidth+n.borderRightWidth,d=n.borderTopWidth+n.borderBottomWidth,v=t,m=ac(s.width);m!==!1&&(n.width=m+(v?0:l+h));var p=ac(s.height);return p!==!1&&(n.height=p+(v?0:u+d)),n.innerWidth=n.width-(l+h),n.innerHeight=n.height-(u+d),n.outerWidth=n.width+c,n.outerHeight=n.height+f,n}}function io(i,s){for(var n=0;n<i.length;n++){var t=i[n];if(t.identifier===s)return t}}var ro={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},lc={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},A0=function(i){Te(n,i);var s=Ce(n);function n(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pe(this,n),e=s.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=r.handle instanceof Element?r.handle:document.querySelector(r.handle),!e._root||!e._handlerDom?Cl(e):(e._bindStartEvent(),e)}return ge(n,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),lc[this._startKey].map(function(r){e["on".concat(r)]=e["on".concat(r)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var r=this;if(e){var a=lc[this._startKey];a.map(function(o){window.addEventListener(o,r["on".concat(o)])}),this._boundPointerEvents=a}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(r){window.removeEventListener(r,e["on".concat(r)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var r=e.changedTouches[0];this.dragStart(e,r),this.touchIdentifier=r.pointerId!==void 0?r.pointerId:r.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var r=io(e.changedTouches,this.touchIdentifier);r&&this.dragMove(e,r)}},{key:"ontouchend",value:function(e){var r=io(e.changedTouches,this.touchIdentifier);r&&this.dragEnd(e,r),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var r=io(e.changedTouches,this.touchIdentifier);r&&this.dragCancel(e,r)}},{key:"dragStart",value:function(e,r){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=r,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var a=oc(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-a.height,this.startPos.maxX=window.innerWidth-a.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,r){this.isDragging=!0,this.animate(),this.emit(ro.START,this.startPos)}},{key:"dragEnd",value:function(e,r){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(ro.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,r){var a={x:r.pageX-this.downPoint.pageX,y:r.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this.dragRealStart(e,r),a}},{key:"dragMove",value:function(e,r){if(e=e||window.event,!!this.isDown){var a=this.startPos,o=a.x,l=a.y,u=this._dragPointerMove(e,r),c=u.x,f=u.y;c=this.checkContain("x",c,o),f=this.checkContain("y",f,l),this.position.x=o+c,this.position.y=l+f,this.dragPoint.x=c,this.dragPoint.y=f,this.emit(ro.MOVE,this.position)}}},{key:"dragCancel",value:function(e,r){this.dragEnd(e,r)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,r,a){return r+a<0?0-a:e==="x"&&r+a>this.startPos.maxX?this.startPos.maxX-a:e==="y"&&r+a>this.startPos.maxY?this.startPos.maxY-a:r}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),r=this._getPositionCoord(e.left,"width"),a=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(r)?0:r,this.position.y=Number.isNaN(a)?0:a,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var r=e.transform;if(r.indexOf("matrix")===0){var a=r.split(","),o=r.indexOf("matrix3d")===0?12:4,l=parseInt(a[o],10),u=parseInt(a[o+1],10);this.position.x+=l,this.position.y+=u}}},{key:"_getPositionCoord",value:function(e,r){if(e.indexOf("%")!==-1){var a=oc(this._root.parentNode);return a?parseFloat(e)/100*a[r]:0}return parseInt(e,10)}}]),n}(yr),x0=function(i){Te(n,i);var s=Ce(n);function n(t){var e;pe(this,n),e=s.call(this,t),G(B(e),"onCancelClick",function(o){e.exitMini(),e.isClose=!0}),G(B(e),"onCenterClick",function(o){var l=B(e),u=l.player;u.paused?u.play():u.pause()}),G(B(e),"onScroll",function(o){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var l=parseInt(g.getCss(e.player.root,"height"));l+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>l+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=l&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var r=B(e),a=r.config;return e.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return ge(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(_r,function(){e.setAttr("data-state","pause")}),this.on(en,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,r=this.player,a=this.config;if(!a.disable){if(this.config.isShowIcon){var o={config:{onClick:function(){e.getMini()}}};r.controls.registerPlugin(sc,o,sc.pluginName)}var l=g.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",l,this.onCancelClick),this.bind(".play-icon",l,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new A0(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:Ml,class:"xg-icon-play"},pause:{icon:Nl,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var r=this.player,a=this.playerConfig,o=this.config.target||this.player.root;this.lastStyle={},g.addClass(r.root,"xgplayer-mini"),["width","height","top","left"].map(function(l){e.lastStyle[l]=o.style[l],o.style[l]="".concat(e.pos[l],"px")}),a.fluid&&(o.style["padding-top"]=""),this.emit(ea,!0),r.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var r=this.player,a=this.playerConfig,o=this.config.target||this.player.root;g.removeClass(r.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(l){o.style[l]=e.lastStyle[l]}),this.lastStyle=null,a.fluid&&(r.root.style.width="100%",r.root.style.height="0",r.root.style["padding-top"]="".concat(a.height*100/a.width,"%")),this.emit(ea,!1),this.isMini=r.isMini=!1}},{key:"updatePos",value:function(e){this.pos=Object.assign(this.pos,e),this.isMini&&(this.player.root.style.left="".concat(this.pos.left,"px"),this.player.root.style.top="".concat(this.pos.top,"px"),this.player.root.style.width="".concat(this.pos.width,"px"),this.player.root.style.height="".concat(this.pos.height,"px"))}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=g.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(mi(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(Ye),Ss={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},so=["videoClick","videoDbClick"],ao=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"onMouseMove",function(o){var l=B(t),u=l.player,c=l.playerConfig;u.isActive||(u.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&u.media.focus())}),G(B(t),"onMouseEnter",function(o){var l=B(t),u=l.playerConfig,c=l.player;!u.closeFocusVideoFocus&&c.media.focus(),u.closeDelayBlur?c.focus({autoHide:!1}):c.focus(),t.emit(qh)}),G(B(t),"onMouseLeave",function(o){var l=t.playerConfig,u=l.closePlayerBlur,c=l.leavePlayerTime,f=l.closeDelayBlur;!u&&!f&&(c?t.player.focus({autoHide:!0,delay:c}):t.player.blur({ignorePaused:!0})),t.emit(Xh)}),G(B(t),"onVideoClick",function(o){var l=B(t),u=l.player,c=l.playerConfig;o.target&&c.closeVideoClick||(o.target===u.root||o.target===u.media||o.target===u.innerContainer||o.target===u.media.__canvas)&&(o.preventDefault(),c.closeVideoStopPropagation||o.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,Pn(B(t),so[0],function(f,h){t.switchPlayPause(h.e)},{e:o,paused:u.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),G(B(t),"onVideoDblClick",function(o){var l=B(t),u=l.player,c=l.playerConfig;if(!(c.closeVideoDblclick||!o.target||o.target!==u.media&&o.target!==u.media.__canvas)){if(!c.closeVideoClick&&t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),o.preventDefault(),o.stopPropagation(),Pn(B(t),so[1],function(f,h){t.emitUserAction(h.e,"switch_fullscreen",{props:"fullscreen",from:u.fullscreen,to:!u.fullscreen}),u.fullscreen?u.exitFullscreen():u.getFullscreen()},{e:o,fullscreen:u.fullscreen})}}),t}return ge(n,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,so.map(function(a){e.__hooks[a]=null});var r=this.playerConfig.isMobileSimulateMode;r==="mobile"||Fe.device==="mobile"&&!Fe.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,r=this.player,a=r.media,o=r.root,l=this.playerConfig.enableContextmenu;o&&o.addEventListener("click",this.onVideoClick,!1),o&&o.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(Ss).map(function(u){o.addEventListener(u,e[Ss[u]],!1)}),!l&&a&&a.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var r=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:r.paused,to:!r.paused}),r.ended?r.duration!==1/0&&r.duration>0&&r.replay():r.paused?r.play():r.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,r=this.player,a=r.video,o=r.root;this.clickTimer&&clearTimeout(this.clickTimer),o.removeEventListener("click",this.onVideoClick,!1),o.removeEventListener("dblclick",this.onVideoDblClick,!1),a.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(Ss).map(function(l){o.removeEventListener(l,e[Ss[l]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),n}(Ln),ii={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},L0={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},I0={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function uc(i){return i&&i.length>0?i[i.length-1]:null}function D0(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var O0=function(){function i(s){var n=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};pe(this,i),G(this,"onTouchStart",function(e){var r=n._pos,a=n.root,o=uc(e.touches);r.x=o?parseInt(o.pageX,10):e.pageX,r.y=o?parseInt(o.pageX,10):e.pageX,r.start=!0,n.__setPress(e),a.addEventListener(n.events.end,n.onTouchEnd),a.addEventListener(n.events.cancel,n.onTouchCancel),a.addEventListener(n.events.move,n.onTouchMove),n.trigger(ii.TOUCH_START,e)}),G(this,"onTouchCancel",function(e){n.onTouchEnd(e)}),G(this,"onTouchEnd",function(e){var r=n._pos,a=n.root;n.__clearPress(),a.removeEventListener(n.events.cancel,n.onTouchCancel),a.removeEventListener(n.events.end,n.onTouchEnd),a.removeEventListener(n.events.move,n.onTouchMove),e.moving=r.moving,e.press=r.press,r.press&&n.trigger(ii.PRESS_END,e),n.trigger(ii.TOUCH_END,e),!r.press&&!r.moving&&n.__setDb(e),r.press=!1,r.start=!1,r.moving=!1}),G(this,"onTouchMove",function(e){var r=n._pos,a=n.config,o=uc(e.touches),l=o?parseInt(o.pageX,10):e.pageX,u=o?parseInt(o.pageY,10):e.pageX,c=l-r.x,f=u-r.y;Math.abs(f)<a.miniStep&&Math.abs(c)<a.miniStep||(n.__clearPress(),r.press&&n.trigger(ii.PRESS_END,e),r.press=!1,r.moving=!0,n.trigger(ii.TOUCH_MOVE,e))}),this._pos={moving:!1,start:!1,x:0,y:0},this.config=D0(),Object.keys(t).map(function(e){n.config[e]=t[e]}),this.root=s,this.events=t.eventType==="mouse"?I0:L0,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return ge(i,[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(n){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(ii.PRESS,n),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(n){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(ii.DOUBlE_CLICK,n);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(ii.CLICK,n)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(n,t){this.__handlers[n]||(this.__handlers[n]=[]),this.__handlers[n].push(t)}},{key:"off",value:function(n,t){if(this.__handlers[n]){for(var e=this.__handlers[n],r=-1,a=0;a<e.length;a++)if(e[a]===t){r=a;break}r>=0&&this.__handlers[n].splice(r,1)}}},{key:"trigger",value:function(n,t){this.__handlers[n]&&this.__handlers[n].map(function(e){try{e(t)}catch(r){console.error("trigger>>:".concat(n),r)}})}},{key:"destroy",value:function(){var n=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).forEach(function(e){n.root.removeEventListener(e,n[t[e]])})}}]),i}();function R0(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var Ki={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},oo=["videoClick","videoDbClick"],M0=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),G(B(e),"onTouchStart",function(r){var a=B(e),o=a.player,l=a.config,u=a.pos,c=a.playerConfig,f=e.getTouche(r);if(f&&!l.disableGesture&&e.duration>0&&!o.ended){u.isStart=!0,e.timer&&clearTimeout(e.timer),g.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),e.find(".xg-dur").innerHTML=g.format(e.duration);var h=e.root.getBoundingClientRect();o.rotateDeg===90?(u.top=h.left,u.left=h.top,u.width=h.height,u.height=h.width):(u.top=h.top,u.left=h.left,u.width=h.width,u.height=h.height);var d=parseInt(f.pageX-u.left,10),v=parseInt(f.pageY-u.top,10);u.x=o.rotateDeg===90?v:d,u.y=o.rotateDeg===90?d:v,u.scopeL=l.scopeL*u.width,u.scopeR=(1-l.scopeR)*u.width,u.scopeM1=u.width*(1-l.scopeM)/2,u.scopeM2=u.width-u.scopeM1}}),G(B(e),"onTouchMove",function(r){var a=e.getTouche(r),o=B(e),l=o.pos,u=o.config,c=o.player;if(!(!a||u.disableGesture||!e.duration||!l.isStart)){var f=u.miniMoveStep,h=u.hideControlsActive,d=parseInt(a.pageX-l.left,10),v=parseInt(a.pageY-l.top,10),m=c.rotateDeg===90?v:d,p=c.rotateDeg===90?d:v;if(Math.abs(m-l.x)>f||Math.abs(p-l.y)>f){var S=m-l.x,C=p-l.y,_=l.scope;if(_===-1&&(_=e.checkScope(m,p,S,C,l),_===0&&(h?c.blur():c.focus({autoHide:!1}),!l.time&&(l.time=parseInt(c.currentTime*1e3,10)+e.timeOffset*1e3)),l.scope=_),_===-1||_>0&&!u.gestureY||_===0&&!u.gestureX)return;e.executeMove(S,C,_,l.width,l.height),l.x=m,l.y=p}}}),G(B(e),"onTouchEnd",function(r){var a=B(e),o=a.player,l=a.pos,u=a.playerConfig;if(setTimeout(function(){o.getPlugin("progress")&&o.getPlugin("progress").resetSeekState()},10),!!l.isStart){l.scope>-1&&r.cancelable&&r.preventDefault();var c=e.config,f=c.disableGesture,h=c.gestureX;!f&&h?e.endLastMove(l.scope):l.time=0,l.scope=-1,e.resetPos(),g.checkIsFunction(u.enableSwipeHandler)&&u.enableSwipeHandler(),e.changeAction(Ki.AUTO)}}),G(B(e),"onRootTouchMove",function(r){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(r)&&(r.stopPropagation(),e.pos.isStart?e.onTouchMove(r):e.onTouchStart(r))}),G(B(e),"onRootTouchEnd",function(r){e.pos.scope>-1&&e.onTouchEnd(r)}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return ge(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:R0,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;oo.map(function(h){e.__hooks[h]=null});var r=this.playerConfig,a=this.config,o=this.player;r.closeVideoDblclick===!0&&(a.closedbClick=!0),this.resetPos(),g.isUndefined(r.disableGesture)||(a.disableGesture=!!r.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=g.createDom("xg-mask","",{},"xgmask"),o.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var l=this.domEventType==="mouse"?"mouse":"touch";this.touch=new O0(this.root,{eventType:l,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(h){h.preventDefault()}),o.root.addEventListener("touchmove",this.onRootTouchMove,!0),o.root.addEventListener("touchend",this.onRootTouchEnd,!0),o.root.addEventListener("touchcancel",this.onRootTouchEnd,!0);var u=this.player.controls;u&&u.center&&(u.center.addEventListener("touchmove",this.onRootTouchMove,!0),u.center.addEventListener("touchend",this.onRootTouchEnd,!0),u.center.addEventListener("touchcancel",this.onRootTouchEnd,!0)),this.on(Jn,function(){var h=e.player,d=e.config;h.duration>0&&h.duration*1e3<d.moveDuration&&(d.moveDuration=h.duration*1e3)}),this.on([Un,Ui],function(){var h=e.pos,d=h.time,v=h.isStart;!v&&d>0&&(e.pos.time=0)});var c={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(c).map(function(h){e.touch.on(h,function(d){e[c[h]](d)})}),!a.disableActive){var f=o.plugins.progress;f&&(f.addCallBack("dragmove",function(h){e.activeSeekNote(h.currentTime,h.forward)}),["dragend","click"].forEach(function(h){f.addCallBack(h,function(){e.changeAction(Ki.AUTO)})}))}}},{key:"registerThumbnail",value:function(){var e=this.player,r=e.plugins.thumbnail;if(r&&r.usable){this.thumbnail=r.createThumbnail(null,"mobile-thumbnail");var a=this.find(".time-preview");a.insertBefore(this.thumbnail,a.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},r=e.commonStyle,a=r.playedColor,o=r.progressColor,l=r.timePreviewStyle,u=r.curTimeColor,c=r.durationColor;if(a&&(this.find(".xg-curbar").style.backgroundColor=a),o&&(this.find(".xg-bar").style.backgroundColor=o),l){var f=this.find(".time-preview");Object.keys(l).forEach(function(v){f.style[v]=l[v]})}var h=u||a,d=c;h&&(this.find(".xg-cur").style.color=h),d&&(this.find(".xg-dur").style.color=d),this.config.disableTimeProgress&&g.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(r){e.pos[r]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var r=this.player,a=this.root;a.setAttribute("data-xg-action",e);var o=r.plugins.start;o&&o.recover()}},{key:"getTouche",value:function(e){var r=this.player.rotateDeg,a=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return r===0?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.pageX,pageY:a.pageY}}},{key:"checkScope",value:function(e,r,a,o,l){var u=l.width,c=-1;if(e<0||e>u)return c;var f=Math.abs(o===0?a:a/o);return Math.abs(a)>0&&f>=1.73&&e>l.scopeM1&&e<l.scopeM2?c=0:(Math.abs(a)===0||f<=.57)&&(c=e<l.scopeL?1:e>l.scopeR?2:3),c}},{key:"executeMove",value:function(e,r,a,o,l){switch(a){case 0:this.updateTime(e/o*this.config.scopeM);break;case 1:this.updateBrightness(r/l);break;case 2:Fe.os.isIos||this.updateVolume(r/l);break}}},{key:"endLastMove",value:function(e){var r=this,a=this.pos,o=this.player,l=this.config,u=(a.time-this.timeOffset)/1e3;switch(e){case 0:o.seek(Number(u).toFixed(1)),l.hideControlsEnd?o.blur():o.focus(),this.timer=setTimeout(function(){r.pos.time=0},500);break}this.changeAction(Ki.AUTO)}},{key:"checkIsRootTarget",value:function(e){var r=this.player.plugins||{};return r.progress&&r.progress.root.contains(e.target)?!1:r.start&&r.start.root.contains(e.target)||r.controls&&r.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var r=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:r,to:!r})}},{key:"clickHandler",value:function(e){var r=this.player,a=this.config,o=this.playerConfig;if(r.state<je.RUNNING){o.closeVideoClick||(this.sendUseAction(g.createEvent("click")),r.play());return}!a.closedbClick||o.closeVideoClick?r.isActive?r.blur():r.focus():o.closeVideoClick||((r.isActive||a.focusVideoClick)&&(this.sendUseAction(g.createEvent("click")),this.switchPlayPause()),r.focus())}},{key:"dbClickHandler",value:function(e){var r=this.config,a=this.player;!r.closedbClick&&a.state>=je.RUNNING&&(this.sendUseAction(g.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var r=this,a=this.player;Pn(this,oo[0],function(o,l){r.clickHandler(l.e)},{e,paused:a.paused})}},{key:"onDbClick",value:function(e){var r=this,a=this.player;Pn(this,oo[1],function(o,l){r.dbClickHandler(l.e)},{e,paused:a.paused})}},{key:"onPress",value:function(e){var r=this.pos,a=this.config,o=this.player;a.disablePress||(r.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:o.playbackRate,to:a.pressRate}),o.playbackRate=a.pressRate,this.changeAction(Ki.PLAYBACK))}},{key:"onPressEnd",value:function(e){var r=this.pos,a=this.config,o=this.player;a.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:o.playbackRate,to:r.rate}),o.playbackRate=r.rate,r.rate=1,this.changeAction(Ki.AUTO))}},{key:"updateTime",value:function(e){var r=this.player,a=this.config,o=this.player.duration;e=Number(e.toFixed(4));var l=parseInt(e*a.moveDuration,10)+this.timeOffset;l+=this.pos.time,l=l<0?0:l>o*1e3?o*1e3-200:l,r.getPlugin("time")&&r.getPlugin("time").updateTime(l/1e3),r.getPlugin("progress")&&r.getPlugin("progress").updatePercent(l/1e3/this.duration,!0),this.activeSeekNote(l/1e3,e>0),a.isTouchingSeek&&r.seek(Number((l-this.timeOffset)/1e3).toFixed(1)),this.pos.time=l}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var r=this.player,a=this.pos;if(e=parseInt(e*100,10),a.volume+=e,!(Math.abs(a.volume)<10)){var o=parseInt(r.volume*10,10)-parseInt(a.volume/10,10);o=o>10?10:o<1?0:o,r.volume=o/10,a.volume=0}}},{key:"updateBrightness",value:function(e){var r=this.pos,a=this.config,o=this.xgMask;if(a.darkness){this.player.rotateDeg&&(e=-e);var l=r.light+.8*e;l=l>a.maxDarkness?a.maxDarkness:l<0?0:l,o&&(o.style.backgroundColor="rgba(0,0,0,".concat(l,")")),r.light=l}}},{key:"activeSeekNote",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.player,o=this.config,l=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||l||o.disableActive)){e<0?e=0:e>a.duration&&(e=a.duration-.2),this.changeAction(Ki.SEEKING);var u=a.plugins.start;u&&u.focusHide(),this.find(".xg-dur").innerHTML=g.format(this.duration),this.find(".xg-cur").innerHTML=g.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),r?g.removeClass(this.find(".xg-seek-show"),"xg-back"):g.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var r=this.player,a=r.plugins.thumbnail;a&&a.usable&&this.thumbnail&&a.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<je.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!0}},{key:"enableGesture",value:function(){this.config.disableGesture=!1}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0),e.root.removeEventListener("touchcancel",this.onRootTouchEnd,!0);var r=this.player.controls;r&&r.center&&(r.center.removeEventListener("touchmove",this.onRootTouchMove,!0),r.center.removeEventListener("touchend",this.onRootTouchEnd,!0),r.center.removeEventListener("touchcancel",this.onRootTouchEnd,!0))}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span class="xg-separator">/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(Ye);function N0(i){i.preventDefault(),i.returnValue=!1}function cc(i){var s=i.tagName;return!!(s==="INPUT"||s==="TEXTAREA"||i.isContentEditable)}var fc=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"onBodyKeyDown",function(o){if(t.player){var l=o||window.event,u=l.keyCode,c=B(t),f=c._keyState,h=c.player,d=t.config,v=d.disable,m=d.disableBodyTrigger,p=d.isIgnoreUserActive;if(v||m||!(h.isUserActive||p)||cc(l.target)||!t.checkIsVisible()||l.metaKey||l.altKey||l.ctrlKey){f.isBodyKeyDown=!1;return}!o.repeat&&!f.isKeyDown&&((l.target===document.body||t.config.isGlobalTrigger&&!cc(l.target))&&t.checkCode(u,!0)&&(f.isBodyKeyDown=!0),document.addEventListener("keyup",t.onBodyKeyUp)),f.isBodyKeyDown&&t.handleKeyDown(l)}}),G(B(t),"onBodyKeyUp",function(o){t.player&&(document.removeEventListener("keyup",t.onBodyKeyUp),t.handleKeyUp(o))}),G(B(t),"onKeydown",function(o){if(t.player){var l=o||window.event,u=B(t),c=u._keyState;if(!l.repeat){if(t.config.disable||t.config.disableRootTrigger||l.metaKey||l.altKey||l.ctrlKey)return;l&&(l.keyCode===37||t.checkCode(l.keyCode))&&(l.target===t.player.root||l.target===t.player.video||l.target===t.player.controls.el)&&(c.isKeyDown=!0),t.player.root.addEventListener("keyup",t.onKeyup)}c.isKeyDown&&t.handleKeyDown(l)}}),G(B(t),"onKeyup",function(o){t.player&&(t.player.root.removeEventListener("keyup",t.onKeyup),t.handleKeyUp(o))}),t}return ge(n,[{key:"mergekeyCodeMap",value:function(){var e=this,r=this.config.keyCodeMap;r&&Object.keys(r).map(function(a){e.keyCodeMap[a]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(o){r[a][o]&&(e.keyCodeMap[a][o]=r[a][o])}):e.keyCodeMap[a]=r[a]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"setConfig",value:function(e){var r=this;Object.keys(e).forEach(function(a){r.config[a]=e[a]})}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),r=e.height,a=e.top,o=e.bottom,l=window.innerHeight;return!(a<0&&a<0-r*.9||o>0&&o-l>r*.9)}},{key:"checkCode",value:function(e,r){var a=this,o=!1;return Object.keys(this.keyCodeMap).map(function(l){a.keyCodeMap[l]&&e===a.keyCodeMap[l].keyCode&&!a.keyCodeMap[l].disable&&(o=!r||r&&!a.keyCodeMap[l].noBodyTarget)}),o}},{key:"downVolume",value:function(e){var r=this.player;if(!(r.volume<=0)){var a=parseFloat((r.volume-.1).toFixed(1)),o={volume:{from:r.volume,to:a}};this.emitUserAction(e,"change_volume",{props:o}),a>=0?r.volume=a:r.volume=0}}},{key:"upVolume",value:function(e){var r=this.player;if(!(r.volume>=1)){var a=parseFloat((r.volume+.1).toFixed(1)),o={volume:{from:r.volume,to:a}};this.emitUserAction(e,"change_volume",{props:o}),a<=1?r.volume=a:r.volume=1}}},{key:"seek",value:function(e){var r=this.player,a=r.currentTime,o=r.offsetCurrentTime,l=r.duration,u=r.offsetDuration,c=r.timeSegments,f=o>-1?o:a,h=u||l,d=e.repeat&&this.seekStep>=4?parseInt(this.seekStep/2,10):this.seekStep;f+d<=h?f=f+d:f=h;var v=g.getCurrentTimeByOffset(f,c),m={currentTime:{from:a,to:v}};this.emitUserAction(e,"seek",{props:m}),this.player.currentTime=v}},{key:"seekBack",value:function(e){var r=this.player,a=r.currentTime,o=r.offsetCurrentTime,l=r.timeSegments,u=e.repeat?parseInt(this.seekStep/2,10):this.seekStep,c=o>-1?o:a,f=c-u;f<0&&(f=0),f=g.getCurrentTimeByOffset(f,l);var h={currentTime:{from:a,to:f}};this.emitUserAction(e,"seek",{props:h}),this.player.currentTime=f}},{key:"changePlaybackRate",value:function(e){var r=this._keyState,a=this.config,o=this.player;r.playbackRate===0&&(r.playbackRate=o.playbackRate,o.playbackRate=a.playbackRate)}},{key:"playPause",value:function(e){var r=this.player;r&&(this.emitUserAction(e,"switch_play_pause"),r.paused?r.play():r.pause())}},{key:"exitFullscreen",value:function(e){var r=this.player,a=r.fullscreen,o=r.cssfullscreen;a&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:a,to:!a}),r.exitFullscreen()),o&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:o,to:!o}),r.exitCssFullscreen())}},{key:"handleKeyDown",value:function(e){var r=this._keyState;if(e.repeat){r.isPress=!0;var a=Date.now();if(a-r.tt<200)return;r.tt=a}this.handleKeyCode(e.keyCode,e,r.isPress)}},{key:"handleKeyUp",value:function(e){var r=this._keyState;r.playbackRate>0&&(this.player.playbackRate=r.playbackRate,r.playbackRate=0),r.isKeyDown=!1,r.isPress=!1,r.tt=0}},{key:"handleKeyCode",value:function(e,r,a){for(var o=Object.keys(this.keyCodeMap),l=0;l<o.length;l++){var u=this.keyCodeMap[o[l]],c=u.action,f=u.keyCode,h=u.disable,d=u.pressAction,v=u.disablePress;if(f===e){if(!h&&!(a&&v)){var m=a&&d||c;typeof m=="function"?c(r,this.player,a):typeof m=="string"&&typeof this[m]=="function"&&this[m](r,this.player,a),this.emit(ed,ct({key:o[l],target:r.target,isPress:a},this.keyCodeMap[o[l]]))}N0(r),r.stopPropagation();break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!0,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!0}}}]),n}(Ln);function B0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var F0=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"registerIcons",value:function(){return{loadingIcon:B0}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:it.ROOT}}}]),n}(Ye),U0=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"_onDurationChange",function(){t.updateSegments();var o=t.player,l=o.currentTime,u=o.timeSegments;if(t._checkIfEnabled(u)){var c=g.getIndexByTime(l,u),f=g.getOffsetCurrentTime(l,u,c);t.player.offsetCurrentTime=f,t.changeIndex(c,u)}}),G(B(t),"_onLoadedData",function(){var o=t.player.timeSegments;if(t._checkIfEnabled(o)){var l=g.getOffsetCurrentTime(0,o);t.player.offsetCurrentTime=l,t.changeIndex(0,o),t.curPos.start>0&&(t.player.currentTime=t.curPos.start)}}),G(B(t),"_onTimeupdate",function(){var o=t.player,l=o.currentTime,u=o.timeSegments;if(t._checkIfEnabled(u)){var c=u.length;t.lastCurrentTime=l;var f=g.getIndexByTime(l,u);f!==t.curIndex&&t.changeIndex(f,u);var h=g.getOffsetCurrentTime(l,u,f);if(t.player.offsetCurrentTime=h,!!t.curPos){var d=t.curPos,v=d.start,m=d.end;l<v?t.player.currentTime=v:l>m&&f>=c-1&&t.player.pause()}}}),G(B(t),"_onSeeking",function(){var o=t.player,l=o.currentTime,u=o.timeSegments;if(t._checkIfEnabled(u))if(l<u[0].start)t.player.currentTime=u[0].start;else if(l>u[u.length-1].end)t.player.currentTime=u[u.length-1].end;else{var c=g.getIndexByTime(l,u);if(c>=0){var f=t.getSeekTime(l,t.lastCurrentTime,c,u);f>=0&&(t.player.currentTime=f)}}}),G(B(t),"_onPlay",function(){var o=t.player,l=o.currentTime,u=o.timeSegments;t._checkIfEnabled(u)&&l>=u[u.length-1].end&&(t.player.currentTime=u[0].start)}),t}return ge(n,[{key:"afterCreate",value:function(){this.curIndex=-1,this.curPos=null,this.lastCurrentTime=0,this.updateSegments(),this.on(Jn,this._onDurationChange),this.on(Wn,this._onLoadedData),this.on(Zt,this._onTimeupdate),this.on(Pa,this._onSeeking),this.on(en,this._onPlay)}},{key:"setConfig",value:function(e){var r=this;if(e){var a=Object.keys(e);a.length<1||(a.forEach(function(o){r.config[o]=e[o]}),this.updateSegments())}}},{key:"updateSegments",value:function(){var e=this.config,r=e.disable,a=e.segments,o=this.player;if(r||!a||a.length===0)o.timeSegments=[],o.offsetDuration=0,o.offsetCurrentTime=-1;else{var l=this.formatTimeSegments(a,o.duration);o.timeSegments=l,o.offsetDuration=l.length>0?l[l.length-1].duration:0}}},{key:"formatTimeSegments",value:function(e,r){var a=[];return e?(e.sort(function(o,l){return o.start-l.start}),e.forEach(function(o,l){var u={};if(u.start=o.start<0?0:o.start,u.end=r>0&&o.end>r?r:o.end,!(r>0&&u.start>r)){a.push(u);var c=u.end-u.start;if(l===0)u.offset=o.start,u.cTime=0,u.segDuration=c,u.duration=c;else{var f=a[l-1];u.offset=f.offset+(u.start-f.end),u.cTime=f.duration+f.cTime,u.segDuration=c,u.duration=f.duration+c}}}),a):[]}},{key:"getSeekTime",value:function(e,r,a,o){var l=-1,u=o[a],c=u.start,f=u.end;if(e>=c&&e<=f)return l;var h=e-r;if(h<0&&e<c){var d=r>c?r-c:0;return l=a-1>=0?o[a-1].end+h+d:0,l}return-1}},{key:"_checkIfEnabled",value:function(e){return!(!e||e.length<1)}},{key:"changeIndex",value:function(e,r){this.curIndex=e,e>=0&&r.length>0?this.curPos=r[e]:this.curPos=null}}],[{key:"pluginName",get:function(){return"TimeSegmentsControls"}},{key:"defaultConfig",get:function(){return{disable:!0,segments:[]}}}]),n}(Ln);function V0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g>
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath>
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var H0=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return ge(n,[{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){Oe(Le(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(pi,function(){e.rotateDeg&&e.config.innerRotate&&g.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)});var r=this.player.root;this.rootWidth=r.style.width||r.offsetWidth||r.clientWidth,this.rootHeight=r.style.height||r.offsetHeight||r.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}}},{key:"destroy",value:function(){Oe(Le(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,r){if(e||(e=0),r){this.player.videoRotateDeg=e;return}var a=this.player,o=this.rootWidth,l=this.rootHeight,u=a.root,c=a.innerContainer,f=a.media,h=u.offsetWidth,d=c&&r?c.offsetHeight:u.offsetHeight,v=o,m=l,p=0,S=0;(e===.75||e===.25)&&(v="".concat(d,"px"),m="".concat(h,"px"),p=-(d-h)/2,S=-(h-d)/2);var C="translate(".concat(p,"px,").concat(S,"px) rotate(").concat(e,"turn)"),_={transformOrigin:"center center",transform:C,webKitTransform:C,height:m,width:v},E=r?f:u,k=r?a.getPlugin("poster"):null;Object.keys(_).map(function(N){E.style[N]=_[N],k&&k.root&&(k.root.style[N]=_[N])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=this.player;this.rotateDeg||(this.rotateDeg=0);var l=e?1:-1;this.rotateDeg=(this.rotateDeg+1+l*.25*a)%1,this.updateRotateDeg(this.rotateDeg,r),o.emit(Qh,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:V0}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(mi(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}($i);function $0(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function G0(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var Yi={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},j0=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"switchPIP",function(o){if(!t.isPIPAvailable())return!1;o.stopPropagation&&o.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):t.player.media.readyState===4&&(t.requestPIP(),t.emitUserAction(o,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}return ge(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(Oe(Le(n.prototype),"afterCreate",this).call(this),this.pMode=Yi.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(Aa,function(){e.config.showIcon&&(g.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:$0,class:"xg-get-pip"},pipIconExit:{icon:G0,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,r=this.player;this.leavePIPCallback=function(){var a=r.paused;g.setTimeout(e,function(){!a&&r.mediaPlay()},0),!a&&r.mediaPlay(),e.setAttr("data-state","normal"),e.pipWindow=null,r.emit($o,!1)},this.enterPIPCallback=function(a){r.emit($o,!0),a!=null&&a.pictureInPictureWindow&&(e.pipWindow=a.pictureInPictureWindow),e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(a){var o=r.media.webkitPresentationMode;e.pMode===Yi.FULLSCREEN&&o!==Yi.FULLSCREEN&&r.onFullscreenChange(null,!1),e.pMode=o,o===Yi.PIP?e.enterPIPCallback(a):o===Yi.INLINE&&e.leavePIPCallback(a)},r.media&&(r.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),r.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(r.media)&&r.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"copyStyleIntoPiPWindow",value:function(e){var r=gn(document.styleSheets).map(function(o){try{return gn(o.cssRules).map(function(u){return u.cssText}).join("")}catch{var l=document.createElement("link");l.rel="stylesheet",l.type=o.type,l.media=o.media,l.href=o.href,e.document.head.appendChild(l)}return""}).filter(Boolean).join(`
`),a=document.createElement("style");a.textContent=r,e.document.head.appendChild(a)}},{key:"requestPIP",value:function(){var e=this,r=this.player,a=this.playerConfig,o=this.config;if(!(!this.isPIPAvailable()||this.isPip))try{var l=a.poster;if(l&&(r.media.poster=g.typeOf(l)==="String"?l:l.poster),o.preferDocument&&this.isDocPIPAvailable()){var u={};if(o.width&&o.height)u.width=o.width,u.height=o.height;else{var c=r.root.getBoundingClientRect();u.width=c.width,u.height=c.height}documentPictureInPicture.requestWindow(u).then(function(f){var h=o.docPiPNode,d=o.docPiPStyle;e.enterPIPCallback();var v=h||r.root,m=v.parentElement,p=v.previousSibling,S=v.nextSibling;e.copyStyleIntoPiPWindow(f);var C=document.createElement("style");if(C.append("body{padding:0; margin:0;}"),d){var _="";typeof d=="string"?_=d:typeof d=="function"&&(_=d.call(o)),_&&C.append(_)}else v===r.root&&C.append(`
              .xgplayer{width: 100%!important; height: 100%!important;}
            `);f.document.head.append(C),f.document.body.append(v),f.addEventListener("pagehide",function(E){m&&(S?m.insertBefore(v,S):p?m.insertBefore(v,p.nextSibling):m.appendChild(v)),e.leavePIPCallback()},{once:!0})})}else n.checkWebkitSetPresentationMode(r.media)?r.media.webkitSetPresentationMode("picture-in-picture"):r.media.requestPictureInPicture();return!0}catch(f){return console.error("requestPiP",f),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{if(this.isPIPAvailable()&&this.isPip){var r;this.isDocPIPAvailable()&&(r=documentPictureInPicture)!==null&&r!==void 0&&r.window?documentPictureInPicture.window.close():n.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()}return!0}catch(a){return console.error("exitPIP",a),!1}}},{key:"isPip",get:function(){var e,r=this.player;return!!(this.isDocPIPAvailable()&&(e=documentPictureInPicture)!==null&&e!==void 0&&e.window)||document.pictureInPictureElement&&document.pictureInPictureElement===r.media||r.media.webkitPresentationMode===Yi.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,r=g.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!1;return r&&(g.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&g.typeOf(e.webkitSetPresentationMode)==="Function")||this.isDocPIPAvailable()}},{key:"isDocPIPAvailable",value:function(){return"documentPictureInPicture"in window&&/^(https|file)/.test(location.protocol)}},{key:"destroy",value:function(){Oe(Le(n.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(mi(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:6,showIcon:!1,preferDocument:!1,width:void 0,height:void 0,docPiPNode:void 0,docPiPStyle:void 0}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),n}($i);function z0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var W0=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),G(B(e),"playNext",function(r){var a=B(e),o=a.player;r.preventDefault(),r.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),o.emit(ta,e.idx+1)):(e.nextHandler(),o.emit(ta))}),e.idx=-1,e}return ge(n,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:z0}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=Fe.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var r=this.player;e&&(r.pause(),r.currentTime=0,r.switchURL?r.switchURL(e):r.src=e,r.config.url=e,r.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(mi(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(Ye),_d={exports:{}};(function(i,s){(function(n,t){i.exports=t()})(mm,function(){return function n(t,e,r){var a=window,o="application/octet-stream",l=r||o,u=t,c=!e&&!r&&u,f=document.createElement("a"),h=function(I){return String(I)},d=a.Blob||a.MozBlob||a.WebKitBlob||h,v=e||"download",m,p;if(d=d.call?d.bind(a):Blob,String(this)==="true"&&(u=[u,l],l=u[0],u=u[1]),c&&c.length<2048&&(v=c.split("/").pop().split("?")[0],f.href=c,f.href.indexOf(c)!==-1)){var S=new XMLHttpRequest;return S.open("GET",c,!0),S.responseType="blob",S.onload=function(I){n(I.target.response,v,o)},setTimeout(function(){S.send()},0),S}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u))if(u.length>1024*1024*1.999&&d!==h)u=k(u),l=u.type||o;else return navigator.msSaveBlob?navigator.msSaveBlob(k(u),v):N(u);else if(/([\x80-\xff])/.test(u)){var C=0,_=new Uint8Array(u.length),E=_.length;for(C;C<E;++C)_[C]=u.charCodeAt(C);u=new d([_],{type:l})}m=u instanceof d?u:new d([u],{type:l});function k(I){var U=I.split(/[:;,]/),D=U[1],O=U[2]=="base64"?atob:decodeURIComponent,K=O(U.pop()),y=K.length,b=0,w=new Uint8Array(y);for(b;b<y;++b)w[b]=K.charCodeAt(b);return new d([w],{type:D})}function N(I,U){if("download"in f)return f.href=I,f.setAttribute("download",v),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),U===!0&&setTimeout(function(){a.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(I)&&(I="data:"+I.replace(/^data:([\w\/\-\+]+)/,o)),window.open(I)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=I),!0;var D=document.createElement("iframe");document.body.appendChild(D),!U&&/^data:/.test(I)&&(I="data:"+I.replace(/^data:([\w\/\-\+]+)/,o)),D.src=I,setTimeout(function(){document.body.removeChild(D)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(m,v);if(a.URL)N(a.URL.createObjectURL(m),!0);else{if(typeof m=="string"||m.constructor===h)try{return N("data:"+l+";base64,"+a.btoa(m))}catch{return N("data:"+l+","+encodeURIComponent(m))}p=new FileReader,p.onload=function(I){N(this.result)},p.readAsDataURL(m)}return!0}})})(_d);var K0=_d.exports;const Y0=Pl(K0);function X0(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var q0=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),G(B(e),"download",function(r){if(!e.isLock){e.emitUserAction(r,"download");var a=e.playerConfig.url,o="";g.typeOf(a)==="String"?o=a:g.typeOf(a)==="Array"&&a.length>0&&(o=a[0].src);var l=e.getAbsoluteURL(o);Y0(l),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return ge(n,[{key:"afterCreate",value:function(){Oe(Le(n.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(r){r.preventDefault(),r.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:X0}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var r=document.createElement("div");r.innerHTML='<a href="'.concat(e,'">x</a>'),e=r.firstChild.href}return e}},{key:"destroy",value:function(){Oe(Le(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(mi(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}($i),J0=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){Oe(Le(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(r){e.fitVideo&&(e.width=r.vWidth,e.height=r.vHeight)},this.once(pi,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,r){var a=document.createElement("a");a.href=e,a.download=r;var o;try{typeof MouseEvent<"u"?o=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}):(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null))}catch(l){console.error("MouseEvent unsupported",l)}o&&a.dispatchEvent(o)}},{key:"createCanvas",value:function(e,r){var a=document.createElement("canvas"),o=a.getContext("2d");this.canvasCtx=o,this.canvas=a,a.width=e||this.config.width,a.height=r||this.config.height,o.imageSmoothingEnabled=!0,o.imageSmoothingEnabled&&(o.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var r=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot");var a=this.config;this.shot(a.width,a.height).then(function(o){r.emit(Zh,o),a.saveImg&&r.saveScreenShot(o,a.name+a.format)})}},{key:"shot",value:function(e,r){var a=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},l=this.config,u=this.player,c=o.quality||l.quality,f=o.type||l.type;return new Promise(function(h,d){var v=null,m;if(u.media.canvas)v=u.media.canvas;else{a.canvas?(a.canvas.width=e||l.width,a.canvas.height=r||l.height):a.createCanvas(e,r),v=a.canvas,m=a.canvasCtx;var p=u.media.videoWidth/u.media.videoHeight,S=v.width/v.height,C=0,_=0,E=u.media.videoWidth,k=u.media.videoHeight,N,I,U,D;p>S?(U=v.width,D=v.width/p,N=0,I=Math.round((v.height-D)/2)):p===S?(U=v.width,D=v.height,N=0,I=0):p<S&&(U=v.height*p,D=v.height,N=Math.round((v.width-U)/2),I=0),m.drawImage(u.media,C,_,E,k,N,I,U,D)}var O=v.toDataURL(f,c).replace(f,"image/octet-stream");O=O.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),h(O)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){Oe(Le(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(pi,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",r="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[r],'">').concat(this.i18n[r],"</span>"),`
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,saveImg:!0,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}($i),Q0=function(){function i(s){pe(this,i),this.config=s.config,this.parent=s.root,this.root=g.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),s.root.appendChild(this.root);var n=this.config.maxHeight;n&&this.setStyle({maxHeight:n}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var t=this.config.domEventType==="touch"?"touchend":"click";this._delegates=Ye.delegate.call(this,this.root,"li",t,this.onItemClick)}return ge(i,[{key:"renderItemList",value:function(n){var t=this,e=this.config,r=this.root;n?e.data=n:n=e.data,e.style&&Object.keys(e.style).map(function(a){r.style[a]=e[a]}),n.length>0&&(this.attrKeys=Object.keys(n[0])),this.root.innerHTML="",n.map(function(a,o){var l=a.selected?"option-item selected":"option-item";a["data-index"]=o,t.root.appendChild(g.createDom("li","<span>".concat(a.showText,"</span>"),a,l))})}},{key:"onItemClick",value:function(n){n.delegateTarget||(n.delegateTarget=n.target);var t=n.delegateTarget;if(t&&g.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,r=this.root.querySelector(".selected");g.addClass(t,"selected"),r&&g.removeClass(r,"selected"),e(n,{from:r?this.getAttrObj(r,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(n,t){if(!n||!t)return{};var e={};t.map(function(a){e[a]=n.getAttribute(a)});var r=n.getAttribute("data-index");return r&&(e.index=Number(r)),e}},{key:"show",value:function(){g.removeClass(this.root,"hide"),g.addClass(this.root,"active")}},{key:"hide",value:function(){g.removeClass(this.root,"active"),g.addClass(this.root,"hide")}},{key:"setStyle",value:function(n){var t=this;Object.keys(n).forEach(function(e){t.root.style[e]=n[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(n){n.destroy&&n.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),i}(),En={SIDE:"side",MIDDLE:"middle",DEFAULT:"default"},Xi={CLICK:"click",HOVER:"hover"};function Z0(i,s){return i===En.SIDE?s===it.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var ki=Fe.device==="mobile",aa=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),G(B(e),"onEnter",function(r){r.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.switchActiveState(r)}),G(B(e),"switchActiveState",function(r){r.stopPropagation();var a=e.config.toggleMode;a===Xi.CLICK?e.toggle(!e.isActive):e.toggle(!0)}),G(B(e),"onLeave",function(r){r.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==En.SIDE&&e.isActive&&e.toggle(!1)}),G(B(e),"onListEnter",function(r){e.enterType=2}),G(B(e),"onListLeave",function(r){e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return ge(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,r=this.config;this.initIcons(),ki=ki||this.domEventType==="touch",ki&&Fe.device==="mobile"&&r.listType===En.DEFAULT&&(r.listType=En.SIDE),r.hidePortrait&&g.addClass(this.root,"portrait"),this.on([pi,Nn],function(){e._resizeList()}),this.once(Un,function(){r.list&&r.list.length>0&&(e.renderItemList(r.list),e.show())}),ki&&this.on(Ll,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),ki?(r.toggleMode=Xi.CLICK,this.activeEvent="touchend"):this.activeEvent=r.toggleMode===Xi.CLICK?"click":"mouseenter",r.toggleMode===Xi.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,r=this.icons,a=Object.keys(r),o=!1;a.length>0&&(a.forEach(function(l){e.appendChild(".xgplayer-icon",r[l]),!o&&(o=r[l])}),this.isIcons=o),!o&&(this.appendChild(".xgplayer-icon",g.createDom("span","",{},"icon-text")),g.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||g.addClass(this.root,"show")}},{key:"hide",value:function(){g.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,r,a){if(e===void 0)return"";var o=this.config.list;!a&&(a=this.player.lang),r=!r||g.isUndefined(e[r])?"text":r,typeof e=="number"&&(e=o[e]);try{return Nt(e[r])==="object"?e[r][a]||e[r].en:e[r]}catch(l){return console.warn(l),""}}},{key:"toggle",value:function(e){if(!(e===this.isActive||this.config.disable)){var r=this.player.controls,a=this.config.listType;e?(a===En.SIDE?r.blur():r.focus(),this.optionsList&&this.optionsList.show()):(a===En.SIDE?r.focus():r.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,r){e.stopPropagation();var a=this.config,o=a.listType,l=a.list;this.curIndex=r.to.index,this.curItem=l[this.curIndex],this.changeCurrentText();var u=this.config.isItemClickHide;(u||ki||o===En.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,r=this.curIndex<e.length?this.curIndex:0,a=e[r];a&&(this.find(".icon-text").innerHTML=this.getTextByLang(a,"iconText"))}}},{key:"renderItemList",value:function(e,r){var a=this,o=this.config,l=this.optionsList,u=this.player;if(typeof r=="number"&&(this.curIndex=r,this.curItem=o.list[r]),l){l.renderItemList(e),this.changeCurrentText();return}var c={config:{data:e||[],className:Z0(o.listType,o.position),onItemClick:function(m,p){a.onItemClick(m,p)},domEventType:ki?"touch":"mouse"},root:o.listType===En.SIDE?u.innerContainer||u.root:this.root};if(this.config.isShowIcon){var f=this.player.root.getBoundingClientRect(),h=f.height,d=o.listType===En.MIDDLE?h-50:h;d&&o.heightLimit&&(c.config.maxHeight="".concat(d,"px")),this.optionsList=new Q0(c),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){if(this.config.heightLimit){var e=this.player.root.getBoundingClientRect(),r=e.height,a=this.config.listType===En.MIDDLE?r-50:r;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(a,"px")})}}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===Xi.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:100,list:[],listType:"default",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:Xi.HOVER,heightLimit:!0}}}]),n}(Ye),ey=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),e.curTime=0,e.isPaused=!0,e}return ge(n,[{key:"beforeCreate",value:function(e){var r=e.config.list;Array.isArray(r)&&r.length>0&&(e.config.list=r.map(function(a){return!a.text&&a.name&&(a.text=a.name),a.text||(a.text=a.definition),a}))}},{key:"afterCreate",value:function(){var e=this;Oe(Le(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(r){e.changeDefinitionList(r)}),this.on(Ol,function(r){e.renderItemList(e.config.list,r.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||g.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,r=e.list,a=e.defaultDefinition;if(r.length>0){var o=null;r.map(function(l){l.definition===a&&(o=l)}),o||(o=r[0]),this.changeDefinition(o)}}},{key:"renderItemList",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],a=arguments.length>1?arguments[1]:void 0,o=a&&a.definition?a.definition:this.config.defaultDefinition;a&&r.forEach(function(c){c.selected=!1});var l=0,u=r.map(function(c,f){var h=ct(ct({},c),{},{showText:e.getTextByLang(c)||c.definition,selected:!1});return(c.selected||c.definition&&c.definition==o)&&(h.selected=!0,l=f),h});Oe(Le(n.prototype),"renderItemList",this).call(this,u,l)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(r){return!r.text&&r.name&&(r.text=r.name),r.text||(r.text=r.definition),r}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,r){this.player.changeDefinition(e,r)}},{key:"onItemClick",value:function(e,r){var a=this.player.definitionList;Oe(Le(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:r.from,to:r.to});for(var o=0;o<a.length;o++)r.to&&a[o].definition===r.to.definition&&(r.to.url=a[o].url),r.from&&a[o].definition===r.from.definition&&(r.from.url=a[o].url);this.player.changeDefinition(r.to,r.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return ct(ct({},aa.defaultConfig),{},{position:it.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),n}(aa),ty=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),e.curRate=1,e}return ge(n,[{key:"beforeCreate",value:function(e){var r=e.player.config.playbackRate,a=r?Array.isArray(r)?r:e.config.list:[];Array.isArray(a)&&(e.config.list=a.map(function(o){return typeof o=="number"?o={rate:o,text:"".concat(o,"x")}:!o.text&&o.rate&&(o.text="".concat(o.rate,"x")),o}))}},{key:"afterCreate",value:function(){var e=this;Oe(Le(n.prototype),"afterCreate",this).call(this),this.on(zh,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(e){!this.config.list||this.config.list.length===0||Oe(Le(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,r){Oe(Le(n.prototype),"onItemClick",this).call(this,e,r);var a=e.delegateTarget,o=Number(a.getAttribute("rate"));if(!o||o===this.curValue)return!1;var l={playbackRate:{from:this.player.playbackRate,to:o}};this.emitUserAction(e,"change_rate",{props:l}),this.curValue=o,this.player.playbackRate=o}},{key:"renderItemList",value:function(){var e=this,r=this.player.playbackRate||1;this.curValue=r;var a=-1,o=this.config.list.map(function(l,u){var c={rate:l.rate};return c.rate===r&&(c.selected=!0,a=u),c.showText=e.getTextByLang(l),c});Oe(Le(n.prototype),"renderItemList",this).call(this,o,a)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,r=this.curIndex<e.length?this.curIndex:0,a=e[r],o="";!a||this.curIndex<0?o="".concat(this.player.playbackRate,"x"):o=this.getTextByLang(a,"iconText"),this.find(".icon-text").innerHTML=o}}},{key:"destroy",value:function(){Oe(Le(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return ct(ct({},aa.defaultConfig),{},{position:it.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),n}(aa),ny=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(Vi,function(r){e.onError(r)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=this.player,a=e.errorType,o=r.errorNote?this.i18n[r.errorNote]:"";if(!o)switch(a){case"decoder":o=this.i18n.MEDIA_ERR_DECODE;break;case"network":o=this.i18n.MEDIA_ERR_NETWORK;break;default:o=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=o,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),n}(Ye),iy=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(r){(e.config.onClick||e.customOnClick)&&(r.preventDefault(),r.stopPropagation(),e.customOnClick?e.customOnClick(r):e.config.onClick(r))}),this.player.showPrompt=function(){e.showPrompt.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var r=this;Object.keys(e).map(function(a){r.root.style[a]=e[a]})}},{key:"showPrompt",value:function(e){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=o;var l=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),g.addClass(this.root,"show"),a.mode==="arrow"&&g.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),a.style&&this.setStyle(a.style);var u=typeof a.autoHide=="boolean"?a.autoHide:this.config.autoHide;if(u){var c=a.interval||l;this.intervalId=setTimeout(function(){r.hide()},c)}}}},{key:"hide",value:function(){g.removeClass(this.root,"show"),g.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(Z.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(Ye),hc={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function bd(i){Object.keys(hc).map(function(s){i[s]===void 0&&(i[s]=hc[s])})}var dc={_updateDotDom:function(s,n){if(n){var t=this.calcuPosition(s.time,s.duration),e=s.style||{};e.left="".concat(t.left,"%"),e.width="".concat(t.width,"%"),n.setAttribute("data-text",s.text),n.setAttribute("data-time",s.time),t.isMini?g.addClass(n,"mini"):g.removeClass(n,"mini"),Object.keys(e).map(function(r){n.style[r]=e[r]})}},initDots:function(){var s=this;this._ispots.map(function(n){s.createDot(n,!1)}),this.ispotsInit=!0},createDot:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(t&&(n&&(bd(s),this._ispots.push(s)),!(!this.ispotsInit&&n))){var e=this.calcuPosition(s.time,s.duration),r=s.style||{};r.left="".concat(e.left,"%"),r.width="".concat(e.width,"%");var a="xgspot_".concat(s.id," xgplayer-spot");e.isMini&&(a+=" mini");var o=s.template?'<div class="xgplayer-spot-pop">'.concat(s.template,"</div>"):"",l=g.createDom("xg-spot",o,{"data-text":s.text,"data-time":s.time,"data-id":s.id},a);Object.keys(r).map(function(u){l.style[u]=r[u]}),t.outer&&t.outer.appendChild(l),this.positionDot(l,s.id)}},findDot:function(s){if(this.player.plugins.progress){var n=this._ispots.filter(function(t,e){return t.id===s});return n.length>0?n[0]:null}},updateDot:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(t){var e=this.findDot(s.id);if(e&&Object.keys(s).map(function(a){e[a]=s[a]}),!!this.ispotsInit){var r=t.find('xg-spot[data-id="'.concat(s.id,'"]'));r&&(this._updateDotDom(s,r),n&&this.showDot(s.id))}}},deleteDot:function(s){var n=this._ispots,t=this.player.plugins.progress;if(t){for(var e=[],r=0;r<n.length;r++)n[r].id===s&&e.push(r);for(var a=e.length,o=a-1;o>=0;o--)if(n.splice(e[o],1),this.ispotsInit){var l=t.find('xg-spot[data-id="'.concat(s,'"]'));l&&l.parentElement.removeChild(l)}}},deleteAllDots:function(){var s=this.player.plugins.progress;if(s){if(!this.ispotsInit){this._ispots=[];return}for(var n=s.root.getElementsByTagName("xg-spot"),t=n.length-1;t>=0;t--)s.outer.removeChild(n[t]);this._ispots=[]}},updateAllDots:function(){var s=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(t){if(!this.ispotsInit){this._ispots=n;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),r=e.length;if(r>n.length)for(var a=r-1;a>n.length-1;a--)t.outer.removeChild(e[a]);n.forEach(function(o,l){l<r?(e[l].setAttribute("data-id","".concat(o.id)),s._ispots.push(o),s.updateDot(o)):s.createDot(o)})}},positionDots:function(){var s=this,n=this._ispots,t=this.playerSize,e=this.player.sizeInfo,r=this.player.plugins.progress;!r||e.width===t.width||(t.width=e.width,t.left=e.left,n.forEach(function(a){var o=r.find('xg-spot[data-id="'.concat(a.id,'"]'));o&&s.positionDot(o,a.id)}))},positionDot:function(s,n){var t=g.findDom(s,".xgplayer-spot-pop");if(t){var e=this.playerSize,r=s.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.left-e.left,l=e.width-o-r.width/2;if(o<a.width/2||e.width<a.width){var u=a.width/2-o;t.style.left="".concat(u,"px")}else if(l<a.width/2){var c=l-a.width/2+r.width/2;t.style.left="".concat(c,"px")}else t.style.left="50%"}},updateDuration:function(){var s=this,n=this.player.plugins.progress;if(n){var t=this._ispots;t.forEach(function(e){var r=n.find('xg-spot[data-id="'.concat(e.id,'"]'));s._updateDotDom(e,r)})}},getAllDotsDom:function(){var s=this.player.plugins.progress;if(!s)return[];var n=s.root.getElementsByTagName("xg-spot");return n},getDotDom:function(s){var n=this.player.plugins.progress;if(n)return n.find('xg-spot[data-id="'.concat(s,'"]'))}};function ry(i){var s=i.config,n=i.player;Object.keys(dc).map(function(e){i[e]=dc[e].bind(i)});var t=n.config.progressDot||s.ispots||[];i._ispots=t.map(function(e){return bd(e),e}),i.ispotsInit=!1,i.playerSize={left:n.sizeInfo.left,width:n.sizeInfo.width},i.on(Jn,function(){i.ispotsInit?i.updateDuration():i.initDots()}),i.on(pi,function(){i.positionDots()})}var qi={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMouseOver"},sy=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),G(B(e),"onMousemove",function(r){if(!e.config.disable){if(g.hasClass(r.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(r);return}(e._state.f||g.hasClass(r.target,"xg-spot-content"))&&(g.event(r),r.stopPropagation())}}),G(B(e),"onMousedown",function(r){e.config.disable||(e._state.f||g.hasClass(r.target,"xg-spot-content"))&&(g.event(r),r.stopPropagation())}),G(B(e),"onMouseup",function(r){if(e.isDrag){var a=e.player.plugins.progress;a&&a.pos&&(a.onMouseUp(r),!a.pos.isEnter&&a.onMouseLeave(r))}}),G(B(e),"onDotMouseLeave",function(r){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(r.target),e._curDot=null;var a=e.player.plugins.progress;a&&a.enableBlur(),e.show()}}),G(B(e),"onProgressMouseOver",function(r,a){if(!e.config.disable&&g.hasClass(a.target,"xgplayer-spot")&&!e._curDot){e._curDot=a.target,e.focusDot(a.target),e._curDot.children.length>0&&e.hide();var o=e.player.plugins.progress;o&&o.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return ge(n,[{key:"beforeCreate",value:function(e){var r=e.player.plugins.progress;r&&(e.root=r.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(r,a){a.seekTime&&e.player.seek(a.seekTime)}),this.transformTimeHook=this.hook("transformTime",function(r){e.setTimeContent(g.format(r))}),ry(this),this.on(Jn,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var r=this;e&&Object.keys(e).map(function(a){r.config[a]=e[a]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,r=this.player.plugins.progress;if(r&&(Object.keys(qi).map(function(o){e[qi[o]]=e[qi[o]].bind(e),r.addCallBack(o,e[qi[o]])}),Fe.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var a=this.hook("previewClick",function(){});this.handlerPreviewClick=function(o){o.stopPropagation(),a(parseInt(e._state.now*1e3,10)/1e3,o),r&&r.onMouseUp(o)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,r){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&g.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&g.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,r){this.config.disable||g.hasClass(r.target,"xgplayer-spot")&&(r.stopPropagation(),r.preventDefault(),["time","id","text"].map(function(a){e[a]=r.target.getAttribute("data-".concat(a))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(r,e))}},{key:"updateLinePos",value:function(e,r){var a=this.root,o=this.previewLine,l=this.player,u=this.config,c=l.controls.mode,f=c==="flex",h=a.getBoundingClientRect().width;if(!(!h&&this._hasThumnail)){h=this._hasThumnail&&h<u.width?u.width:h;var d=e-h/2,v;d<0&&!f?(d=0,v=e-h/2):d>r-h&&!f?(v=d-(r-h),d=r-h):v=0,v!==void 0&&(o.style.transform="translateX(".concat(v.toFixed(2),"px)")),a.style.transform="translateX(".concat(d.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var r=this.timeText,a=this.timePoint;r.innerHTML=e,!this.thumbnail&&(a.innerHTML=e)}},{key:"updatePosition",value:function(e,r,a,o){var l=this.root,u=this.config,c=this._state;if(l){c.now=a,this.transformTimeHook(a);var f=this.timeStr;o&&o.target&&g.hasClass(o.target,"xgplayer-spot")?(this.showTips(o.target.getAttribute("data-text"),!1,f),this.focusDot(o.target),c.f=!0,u.isFocusDots&&c.f&&(c.now=parseInt(o.target.getAttribute("data-time"),10))):u.defaultText?(c.f=!1,this.showTips(u.defaultText,!0,f)):(c.f=!1,this.hideTips("")),this.updateTimeText(f),this.updateThumbnails(c.now),this.updateLinePos(e,r)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var r=this.player,a=this.videoPreview,o=this.config,l=r.plugins.thumbnail;if(l&&l.usable){this.thumbnail&&l.update(this.thumbnail,e,o.width,o.height);var u=a&&a.getBoundingClientRect();this.videothumbnail&&l.update(this.videothumbnail,e,u.width,u.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Fe.device!=="mobile"){var r=this.player,a=this.config,o=r.getPlugin("thumbnail");if(o&&o.setConfig(e),!o||!o.usable||!a.isShowThumbnail){g.addClass(this.root,"short-line no-thumbnail");return}else g.removeClass(this.root,"short-line no-thumbnail");a.mode==="short"&&g.addClass(this.root,"short-line"),this._hasThumnail=!0;var l=this.find(".xg-spot-thumbnail");this.thumbnail=o.createThumbnail(l,"progress-thumbnail"),a.isShowCoverPreview&&(this.videoPreview=g.createDom("xg-video-preview","",{},"xgvideo-preview"),r.root.appendChild(this.videoPreview),this.videothumbnail=o.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,r){var a=this.player.plugins.progress,o=this.player,l=a.root.getBoundingClientRect().width,u=o.duration/l*6;return e+r>o.duration&&(r=o.duration-e),e/o.duration*100,r/o.duration,{left:e/o.duration*100,width:r/o.duration*100,isMini:r<u}}},{key:"showDot",value:function(e){var r=this.findDot(e);if(r){var a=this.root.getBoundingClientRect(),o=a.width,l=r.time/this.player.duration*o;this.updatePosition(l,o,r.time)}}},{key:"focusDot",value:function(e,r){e&&(r||(r=e.getAttribute("data-id")),g.addClass(e,"active"),this._activeDotId=r)}},{key:"blurDot",value:function(e){if(!e){var r=this._activeDotId;e=this.getDotDom(r)}e&&(g.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";g.addClass(this.root,"no-timepoint"),e&&(g.addClass(this.find(".xg-spot-content"),"show-text"),r&&this.config.mode==="production"?(g.addClass(this.root,"product"),this.tipText.textContent=e):(g.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(a," ").concat(e)))}},{key:"hideTips",value:function(){g.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",g.removeClass(this.find(".xg-spot-content"),"show-text"),g.removeClass(this.root,"product")}},{key:"hide",value:function(){g.addClass(this.root,"hide")}},{key:"show",value:function(e){g.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,r=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(r.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,r=this.player.plugins.progress;r&&Object.keys(qi).map(function(a){r.removeCallBack(a,e[qi[a]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return Fe.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),n}(Ye),ay=function(i){Te(n,i);var s=Ce(n);function n(t){var e;return pe(this,n),e=s.call(this,t),e.ratio=1,e.interval=null,e._preloadMark={},e}return ge(n,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([Jn],function(){var r=e.config,a=r.pic_num,o=r.interval;e.usable&&(e.interval=o>0?o:Math.round(e.player.duration*1e3/a)/1e3)})}},{key:"setConfig",value:function(e){var r=this;if(e){var a=Object.keys(e);a.length<1||(a.forEach(function(o){r.config[o]=e[o]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,r=e.urls,a=e.pic_num;return r&&r.length>0&&a>0}},{key:"initThumbnail",value:function(){var e=this.config,r=e.width,a=e.height,o=e.pic_num,l=e.interval;this.ratio=r/a*100,this.interval=l||Math.round(this.player.duration/o),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var r=this;if(!this._preloadMark[e]){var a=this.config.urls,o=a.length,l=[];e>0&&l.push(e-1),l.push(e),e>0&&e<o-1&&l.push(e+1),l.map(function(u){!r._preloadMark[u]&&u>=0&&u<o&&(r._preloadMark[u]=1,g.preloadImg(a[u],function(){r._preloadMark[u]=2}))})}}},{key:"getPosition",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=this.config,l=o.pic_num,u=o.row,c=o.col,f=o.width,h=o.height;this.interval=Math.round(this.player.duration/l);var d=Math.ceil(e/this.interval);d=d>l?l:d;var v=d<u*c?0:Math.ceil(d/(u*c))-1,m=d-v*(c*u),p=m>0?Math.ceil(m/c)-1:0,S=m>0?m-p*c-1:0,C=0,_=0;if(r&&a){var E=r/a;E<f/h?(_=a,C=_*(f/h)):(C=r,_=C/(f/h))}else a?r||(_=a||h,C=_*(f/h)):(C=r||f,_=C/(f/h));var k=this.getUrlByIndex(v);return{urlIndex:v,rowIndex:p,colIndex:S,url:k,height:_,width:C,style:{backgroundImage:"url(".concat(k,")"),backgroundSize:"".concat(C*c,"px auto"),backgroundPosition:"-".concat(S*C,"px -").concat(p*_,"px"),width:"".concat(C,"px"),height:"".concat(_,"px")}}}},{key:"update",value:function(e,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=this.config,c=u.pic_num,f=u.urls;if(!(c<=0||!f||f.length===0)){var h=this.getPosition(r,a,o);this.preload(h.urlIndex),Object.keys(h.style).map(function(d){e.style[d]=h.style[d]}),Object.keys(l).map(function(d){e.style[d]=l[d]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,r){var a=g.createDom("xg-thumbnail","",{},"thumbnail ".concat(r));return e&&e.appendChild(a),a}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),n}(Ye);function lo(i){return i?"background:".concat(i,";"):""}var oy=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"onTimeupdate",function(){var o=t.player.ended,l=B(t),u=l.offsetDuration,c=t.currentTime;c=g.adjustTimeByDuration(c,u,o),t.update({played:c},u)}),t}return ge(n,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"currentTime",get:function(){var e=this.player,r=e.offsetCurrentTime,a=e.currentTime;return r>=0?r:a}},{key:"afterCreate",value:function(){var e=this;this.root&&(this.on(Zt,this.onTimeupdate),this.on(Hi,function(){e.reset()}))}},{key:"reset",value:function(){this.update({played:0,cached:0},0)}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},r=arguments.length>1?arguments[1]:void 0;!r||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/r*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/r*100,"%")))}},{key:"render",value:function(){var e=this.playerConfig,r=e.commonStyle,a=e.miniprogress;if(a){var o=this.config,l=o.mode,u=o.height,c={cached:lo(r.cachedColor),played:lo(r.playedColor),progress:lo(r.progressColor),height:u>0&&u!==2?"height: ".concat(u,"px;"):""},f=l==="show"?"xg-mini-progress-show":"";return'<xg-mini-progress class="xg-mini-progress '.concat(f,'" style="').concat(c.progress," ").concat(c.height,`">
    <xg-mini-progress-cache class="xg-mini-progress-cache" style="`).concat(c.cached,`"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played" style="`).concat(c.played,`"></xg-mini-progress-played>
    </xg-mini-progress>`)}}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{mode:"auto",height:2}}}]),n}(Ye),Ji={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function ly(){try{return parseInt(window.performance.now(),10)}catch{return new Date().getTime()}}function uy(){try{var i=document.createElement("canvas").getContext;return!!i}catch{return!1}}var Es=null,cy=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"onLoadedData",function(o){t.player&&(t._frameCount=t.config.startFrameCount,t.stop(),t.renderOnTimeupdate(o),t.off(Zt,t.renderOnTimeupdate),t.on(Zt,t.renderOnTimeupdate))}),G(B(t),"onVisibilitychange",function(o){document.visibilityState==="visible"?t._checkIfCanStart()&&t.start():document.visibilityState==="hidden"&&t.stop()}),G(B(t),"renderOnTimeupdate",function(o){if(t._frameCount>0)t.renderOnce(),t._frameCount--;else{t._isLoaded=!0,t.off(Zt,t.renderOnTimeupdate);var l=t.config.startInterval;!t.player.paused&&t._checkIfCanStart()&&t.start(0,l)}}),G(B(t),"start",function(o,l){var u=t.player.video,c=ly(),f=t.checkVideoIsSupport(u);!f||!t.canvasCtx||(l||(l=t.interval),t.stop(),u.videoWidth&&u.videoHeight&&(t.videoPI=u.videoHeight>0?parseInt(u.videoWidth/u.videoHeight*100,10):0,(t.config.mode===Ji.REAL_TIME||c-t.preTime>=l)&&(u&&u.videoWidth&&t.update(f,t.videoPI),t.preTime=c)),t.frameId=t._loopType==="timer"?g.setTimeout(B(t),t.start,l):g.requestAnimationFrame(t.start))}),G(B(t),"stop",function(){t.frameId&&(t._loopType==="timer"?g.clearTimeout(B(t),t.frameId):g.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return ge(n,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var r=this.config,a=r.disable,o=r.mode,l=r.frameRate;a||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/l,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this._loopType=this.config.mode!==Ji.REAL_TIME&&this.interval>=1e3?"timer":"animation",this.once(Aa,function(){e.player&&(e.init(),e.renderByPoster(),e.player.paused||e.start())}),o!==Ji.POSTER&&(o!==Ji.FIRST_FRAME&&(this.on(Hi,function(){e.stop()}),this.on(en,function(){var u=e.config.startInterval;e._checkIfCanStart()&&e.start(0,u)}),this.on(_r,function(){e.stop()})),this.on(Wn,this.onLoadedData),this.on(xl,function(){e._isLoaded=!1,e.stop()}),document.addEventListener("visibilitychange",this.onVisibilitychange)))}},{key:"setConfig",value:function(e){var r=this;Object.keys(e).forEach(function(a){a==="root"&&e[a]!==r.config[a]?r.reRender(e[a]):a==="frameRate"?r.interval=parseInt(1e3/e[a],10):a==="disable"&&e[a]&&r.stop(),r.config[a]=e[a]})}},{key:"init",value:function(e){var r=this.player,a=this.config;this.canvasFilter=n.supportCanvasFilter();try{var o=e||a.root;o||(o=a.isInnerRender&&r.innerContainer||r.root),o.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(a.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=o.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=a.filter,this.canvas.style.webkitFilter=a.filter),this.mask=this.find("xgmask"),a.addMask&&(this.mask.style.background=a.maskBg),this.canvasCtx=this.canvas.getContext("2d")}catch(l){$e.logError("plugin:DynamicBg",l)}}},{key:"reRender",value:function(e){var r=this.config.disable;if(!(!r&&!this.root)){this.stop();var a=this.root?this.root.parentElement:null;if(a!==e&&a.removeChild(this.root),!e){this.root=null;return}this.init(e),this.renderOnce();var o=this.config.startInterval;this._checkIfCanStart()&&this.start(0,o)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var r=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(r&&!(Fe.browser==="safari"&&g.isMSE(r)))return r;var a=r?r.tagName.toLowerCase():"";return a==="canvas"||a==="img"?r:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var r=g.typeOf(e)==="String"?e:g.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(r)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&!this.player.paused&&e!==Ji.FIRST_FRAME&&e!==Ji.POSTER}},{key:"renderOnce",value:function(){var e=this.player.video;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var r=this.checkVideoIsSupport(e);r&&this.update(r,this.videoPI)}}},{key:"updateImg",value:function(e){var r=this;if(e){var a=this.canvas.getBoundingClientRect(),o=a.width,l=a.height,u=new window.Image;u.onload=function(){if(!(!r.canvas||r.frameId||r.isStart)){r.canvas.height=l,r.canvas.width=o;var c=parseInt(o/l*100,10);r.update(u,c),u=null}},u.src=e}}},{key:"update",value:function(e,r){if(!(!this.canvas||!this.canvasCtx||!r))try{var a=this._pos,o=this.config,l=this.canvas.getBoundingClientRect(),u=l.width,c=l.height;if(u!==a.width||c!==a.height||a.pi!==r){var f=parseInt(u/c*100,10);a.pi=r,a.width!==u&&(a.width=this.canvas.width=u),a.height!==c&&(a.height=this.canvas.height=c);var h=c,d=u;f<r?d=parseInt(c*r/100,10):f>r&&(h=parseInt(u*100/r,10)),a.rwidth=d*o.multiple,a.rheight=h*o.multiple,a.x=(u-a.rwidth)/2,a.y=(c-a.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=o.filter),this.canvasCtx.drawImage(e,a.x,a.y,a.rwidth,a.rheight)}catch(v){$e.logError("plugin:DynamicBg",v)}}},{key:"destroy",value:function(){this.stop(),document.removeEventListener("visibilitychange",this.onVisibilitychange),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,startInterval:0,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof Es=="boolean"||(Es=uy()),Es}},{key:"supportCanvasFilter",value:function(){return!(Fe.browser==="safari"||Fe.browser==="firefox")}}]),n}(Ye),fy={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:""},mse:{code:2,msg:""},parse:{code:3,msg:""},format:{code:4,msg:""},decoder:{code:5,msg:""},runtime:{code:6,msg:""},timeout:{code:7,msg:""},other:{code:8,msg:""}},HAVE_NOTHING:"/",HAVE_METADATA:"/",HAVE_CURRENT_DATA:"/",HAVE_FUTURE_DATA:"",HAVE_ENOUGH_DATA:"",NETWORK_EMPTY:"/",NETWORK_IDLE:"/",NETWORK_LOADING:"",NETWORK_NO_SOURCE:"/",MEDIA_ERR_ABORTED:"",MEDIA_ERR_NETWORK:"",MEDIA_ERR_DECODE:"",MEDIA_ERR_SRC_NOT_SUPPORTED:"/",REPLAY:"",ERROR:"",PLAY_TIPS:"",PAUSE_TIPS:"",PLAYNEXT_TIPS:"",DOWNLOAD_TIPS:"",ROTATE_TIPS:"",RELOAD_TIPS:"",FULLSCREEN_TIPS:"",EXITFULLSCREEN_TIPS:"",CSSFULLSCREEN_TIPS:"",EXITCSSFULLSCREEN_TIPS:"",TEXTTRACK:"",PIP:"",SCREENSHOT:"",LIVE:"",OFF:"",OPEN:"",MINI_DRAG:"",MINISCREEN:"",REFRESH_TIPS:"",REFRESH:"",FORWARD:"",LIVE_TIP:""}},wr="info",uo=ad,hy=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"_recordUserActions",function(o){var l=t._getTime(),u=Object.assign({},o,{msg:o.msg||o.action});t._stats[wr].push(ct(ct({type:"userAction"},l),{},{payload:u}))}),G(B(t),"_onReset",function(){t.reset()}),G(B(t),"_recordInfo",function(o){t.info(o)}),G(B(t),"_downloadStats",function(){var o=t.getStats(),l=new Blob([JSON.stringify(o)],{type:"application/json"}),u=window.URL.createObjectURL(l),c=document.createElement("a");c.style.display="none",c.href=u,c.download="player.txt",c.disabled=!1,c.click()}),t}return ge(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(na,this._recordUserActions),this.on(uo.STATS_INFO,this._recordInfo),this.on(uo.STATS_DOWNLOAD,this._downloadStats),this.on(uo.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var r=this._getTime();this._stats[wr].push(ct(ct({},r),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var r=Date.now(),a=r-e.startMs,o=ct({cat:"function",dur:a,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(o)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},G(e,wr,[]),G(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,r=e.media,a=[],o=0;o<r.buffered.length;o++)a.push({start:r.buffered.start(o),end:r.buffered.end(o)});var l={currentTime:r.currentTime,readyState:r.readyState,buffered:a,paused:r.paused,ended:r.ended};return this._stats.media=l,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[wr],r=e.map(function(a){var o=a.payload.data,l="";try{o instanceof Error?l=o.msg:o!==void 0&&(l=JSON.stringify(o))}catch(u){console.log("err",u)}return"[".concat(a.timeFormat,"] : ").concat(a.payload.msg," ").concat(l," ")});return r}},{key:"_getProfile",value:function(){var e={traceEvents:[]},r=this._stats[wr];return r.forEach(function(a){a.payload.profile&&e.traceEvents.push(a.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(Ln),Sd=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"onGapJump",function(){var o=B(t),l=o.player,u=o.config;if(l.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(l.media.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){var c=l.media.buffered,f=u.smallGapLimit||.5,h=u.gapDetectionThreshold||.3,d=l.media.currentTime,v=t._getIndex(c,d,h);if(!(v===null||v===0)){console.log("GapJump  bufferRange ",c.start(v),c.end(v));var m=c.start(v)+.1,p=l.media.duration;if(!(m>p)){var S=m-d,C=S<=f;S<n.BROWSER_GAP_TOLERANCE||C&&(u.useGapJump!==!1&&(l.media.currentTime=t.isSafari?m+.1:m),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",v," isGapSamll:",C," currentTime:",l.media.currentTime," jumpSize:",d-l.media.currentTime),m!==.08&&l&&l.emit("log",{type:"oneevent",end_type:"gap",vid:l.config.vid,ext:{video_postion:Math.floor(m*1e3)}}))}}}}}),t}return ge(n,[{key:"afterCreate",value:function(){var e=this,r=this.config.useGapJump;r!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(as,this.onGapJump),this.on(en,function(){e.hasPlayed=!0}),this.on(Pa,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,r,a){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var o=this._getBuffered(e),l=null,u=0;u<o.length;u++){var c=o[u];if(c.start>r&&(u===0||o[u-1].end-r<=a)){l=u;break}}return l}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var r=[],a=0;a<e.length;a++)r.push({start:e.start(a),end:e.end(a)});return r}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),n}(Ye);Sd.BROWSER_GAP_TOLERANCE=.001;var dy=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"onWaiting",function(){var o=B(t),l=o.config;t.jumpCnt>l.jumpCntMax||t.timer||l.useWaitingTimeoutJump===!1||(t.timer=setTimeout(t.onJump,l.waitingTime*1e3))}),G(B(t),"onJump",function(){var o=B(t),l=o.player,u=o.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>u.jumpCntMax||u.useWaitingTimeoutJump===!1)&&!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){t.jumpSize=u.jumpSize*(t.jumpCnt+1),t.jumpCnt===u.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var c=l.currentTime+t.jumpSize,f=l.media.duration;c>f||(t.jumpCnt++,l.currentTime=c)}}),t}return ge(n,[{key:"afterCreate",value:function(){var e=this,r=this.config,a=r.useWaitingTimeoutJump,o=r.jumpSize;a!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=o,this.on(as,this.onWaiting),this.on([Al,Un],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(en,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),n}(Ye),Qi="cdn",ks=["cdn"],vy=function(i){Te(n,i);var s=Ce(n);function n(){var t;pe(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),G(B(t),"getSpeed",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qi;if(!t.speedListCache||!t.speedListCache[o]||t.speedListCache[o].length<=0)return 0;var l=0;return t.speedListCache[o].map(function(u){l+=u}),Math.floor(l/t.speedListCache[o].length)}),G(B(t),"startTimer",function(){g.isMSE(t.player.video)||(t.initSpeedList(),t.cnt=0,t.timer=setTimeout(t.testSpeed,t.config.testTimeStep))}),G(B(t),"initSpeedList",function(){t.speedListCache={},ks.forEach(function(o){t.speedListCache[o]=[]})}),G(B(t),"_onRealSpeedChange",function(o){o.speed&&t.appendList(o.speed,o.type||Qi)}),G(B(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,!(!t.player||!t.config.openSpeed)){var o=t.config,l=o.url,u=o.loadSize,c=o.testCnt,f=o.testTimeStep,h=l+(l.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=c)){t.cnt++;try{var d=new Date().getTime(),v=null,m=new XMLHttpRequest;t.xhr=m,m.open("GET",h);var p={},S=Math.floor(Math.random()*10);p.Range="bytes="+S+"-"+(u+S),p&&Object.keys(p).forEach(function(C){m.setRequestHeader(C,p[C])}),m.onreadystatechange=function(){if(m.readyState===4){t.xhr=null,v=new Date().getTime();var C=m.getResponseHeader("Content-Length")/1024*8,_=Math.round(C*1e3/(v-d));t.appendList(_),t.timer=setTimeout(t.testSpeed,f)}},m.send()}catch(C){console.error(C)}}}}),G(B(t),"appendList",function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qi;if(!(!t.speedListCache||!t.speedListCache[l])){var u=t.config.saveSpeedMax;t.speedListCache[l].length>=u&&t.speedListCache[l].shift(),t.speedListCache[l].push(o);var c=B(t),f=c.player;f&&(l===Qi?f.realTimeSpeed=o:f[t.getSpeedName("realTime",l)]=o),t.updateSpeed(l)}}),G(B(t),"updateSpeed",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qi,l=t.getSpeed(o),u=B(t),c=u.player;if(c)if(o===Qi)(!c.avgSpeed||l!==c.avgSpeed)&&(c.avgSpeed=l,c.emit(Vo,{speed:l,realTimeSpeed:c.realTimeSpeed}));else{var f=t.getSpeedName("avg",o);(!c[f]||l!==c[f])&&(c[f]=l,c.emit(Vo,{speed:l,realTimeSpeed:c.realTimeSpeed}))}}),t}return ge(n,[{key:"afterCreate",value:function(){var e=this.config,r=e.openSpeed,a=e.addSpeedTypeList;(a==null?void 0:a.length)>0&&ks.push.apply(ks,gn(a)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,r&&this.on([Wn,Qs],this.startTimer)}},{key:"getSpeedName",value:function(e,r){return e+"Speed"+r.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var e=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([Wn,Qs],this.startTimer),ks.forEach(function(r){e.speedListCache&&e.speedListCache[r]&&(e.speedListCache[r]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),n}(Ye),py=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n,[{key:"afterCreate",value:function(){var e=this,r=this.player,a=this.config,o=r.media||r.video;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!a.disabled){var l=o.getVideoPlaybackQuality;l&&(this.on(en,function(){e._startTick()}),this.on(_r,function(){e._stopTick()}),this.on(Ui,function(){e._stopTick()}),this.on(Hi,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkBuffer",value:function(e,r){for(var a=!1,o=[],l=0;l<r.length;l++){var u=r.start(l),c=r.end(l);if(o.push({start:u,end:c}),u<=e&&e<=c-1){a=!0;break}}return{enoughBuffer:a,buffers:o}}},{key:"_checkStuck",value:function(e,r,a,o){var l=this.player.media||this.player.video,u=document.hidden,c=l.paused,f=l.readyState,h=l.currentTime,d=l.buffered;if(!(u||c||f<4)){var v=this._checkBuffer(h,d),m=v.enoughBuffer,p=v.buffers;m&&(e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({currentTime:h,buffers:p,curDecodedFrames:e,totalVideoFrames:r,droppedVideoFrames:a,checkInterval:o}),this._currentStuckCount>=this.config.stuckCount&&(this.emit(od,this._payload),this._reset())):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){var e=this.player.media||this.player.video;if(e){var r=e.getVideoPlaybackQuality(),a=r.totalVideoFrames,o=r.droppedVideoFrames,l=performance.now();if(a&&this._lastCheckPoint){var u=a-this._lastDecodedFrames,c=l-this._lastCheckPoint;this._checkStuck(u,a,o,c)}this._lastDecodedFrames=a,this._lastCheckPoint=l}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),n}(Ye);ir.use(fy);var gy=ge(function i(s,n){var t,e,r;pe(this,i);var a=n&&n.isMobileSimulateMode==="mobile",o=n.isLive,l=o?[]:[U0,pd,oy,sy,gd],u=[].concat(l,[vd,dd,H0,W0,ey,ty,q0,J0,md,j0]),c=[S0,E0,w0,F0,T0,ny,iy,ay,x0];this.plugins=[hy,_0].concat(gn(u),c,[Sd,dy]);var f=a?"mobile":Fe.device;switch(f){case"pc":(t=this.plugins).push.apply(t,[fc,ao,Go,vy,py]);break;case"mobile":(e=this.plugins).push.apply(e,[M0]);break;default:(r=this.plugins).push.apply(r,[fc,ao,Go])}(Fe.os.isIpad||f==="pc")&&this.plugins.push(cy),Fe.os.isIpad&&this.plugins.push(ao),this.ignores=[],this.i18n=[]}),_t=function(i){Te(n,i);var s=Ce(n);function n(){return pe(this,n),s.apply(this,arguments)}return ge(n)}(Ia);G(_t,"defaultPreset",gy);G(_t,"Util",g);G(_t,"Sniffer",Fe);G(_t,"Errors",Kr);G(_t,"Events",Nm);G(_t,"Plugin",Ye);G(_t,"BasePlugin",Ln);G(_t,"I18N",ir);G(_t,"STATE_CLASS",Z);G(_t,"InstManager",hd);G(_t,"PlayIcon",vd);G(_t,"TimeIcon",gd);G(_t,"Progress",pd);G(_t,"FullscreenIcon",dd);G(_t,"CssFullscreenIcon",Go);G(_t,"VolumeIcon",md);function my(i,s){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var t,e,r,a,o=[],l=!0,u=!1;try{if(r=(n=n.call(i)).next,s===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(t=r.call(n)).done)&&(o.push(t.value),o.length!==s);l=!0);}catch(c){u=!0,e=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw e}}return o}}function vc(i,s){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})),n.push.apply(n,t)}return n}function Ge(i){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?vc(Object(n),!0).forEach(function(t){L(i,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):vc(Object(n)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(n,t))})}return i}function ce(){ce=function(){return i};var i={},s=Object.prototype,n=s.hasOwnProperty,t=Object.defineProperty||function(y,b,w){y[b]=w.value},e=typeof Symbol=="function"?Symbol:{},r=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function l(y,b,w){return Object.defineProperty(y,b,{value:w,enumerable:!0,configurable:!0,writable:!0}),y[b]}try{l({},"")}catch{l=function(b,w,R){return b[w]=R}}function u(y,b,w,R){var P=b&&b.prototype instanceof h?b:h,H=Object.create(P.prototype),$=new D(R||[]);return t(H,"_invoke",{value:k(y,w,$)}),H}function c(y,b,w){try{return{type:"normal",arg:y.call(b,w)}}catch(R){return{type:"throw",arg:R}}}i.wrap=u;var f={};function h(){}function d(){}function v(){}var m={};l(m,r,function(){return this});var p=Object.getPrototypeOf,S=p&&p(p(O([])));S&&S!==s&&n.call(S,r)&&(m=S);var C=v.prototype=h.prototype=Object.create(m);function _(y){["next","throw","return"].forEach(function(b){l(y,b,function(w){return this._invoke(b,w)})})}function E(y,b){function w(P,H,$,ie){var Ee=c(y[P],y,H);if(Ee.type!=="throw"){var re=Ee.arg,We=re.value;return We&&typeof We=="object"&&n.call(We,"__await")?b.resolve(We.__await).then(function(Pe){w("next",Pe,$,ie)},function(Pe){w("throw",Pe,$,ie)}):b.resolve(We).then(function(Pe){re.value=Pe,$(re)},function(Pe){return w("throw",Pe,$,ie)})}ie(Ee.arg)}var R;t(this,"_invoke",{value:function(P,H){function $(){return new b(function(ie,Ee){w(P,H,ie,Ee)})}return R=R?R.then($,$):$()}})}function k(y,b,w){var R="suspendedStart";return function(P,H){if(R==="executing")throw new Error("Generator is already running");if(R==="completed"){if(P==="throw")throw H;return K()}for(w.method=P,w.arg=H;;){var $=w.delegate;if($){var ie=N($,w);if(ie){if(ie===f)continue;return ie}}if(w.method==="next")w.sent=w._sent=w.arg;else if(w.method==="throw"){if(R==="suspendedStart")throw R="completed",w.arg;w.dispatchException(w.arg)}else w.method==="return"&&w.abrupt("return",w.arg);R="executing";var Ee=c(y,b,w);if(Ee.type==="normal"){if(R=w.done?"completed":"suspendedYield",Ee.arg===f)continue;return{value:Ee.arg,done:w.done}}Ee.type==="throw"&&(R="completed",w.method="throw",w.arg=Ee.arg)}}}function N(y,b){var w=b.method,R=y.iterator[w];if(R===void 0)return b.delegate=null,w==="throw"&&y.iterator.return&&(b.method="return",b.arg=void 0,N(y,b),b.method==="throw")||w!=="return"&&(b.method="throw",b.arg=new TypeError("The iterator does not provide a '"+w+"' method")),f;var P=c(R,y.iterator,b.arg);if(P.type==="throw")return b.method="throw",b.arg=P.arg,b.delegate=null,f;var H=P.arg;return H?H.done?(b[y.resultName]=H.value,b.next=y.nextLoc,b.method!=="return"&&(b.method="next",b.arg=void 0),b.delegate=null,f):H:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,f)}function I(y){var b={tryLoc:y[0]};1 in y&&(b.catchLoc=y[1]),2 in y&&(b.finallyLoc=y[2],b.afterLoc=y[3]),this.tryEntries.push(b)}function U(y){var b=y.completion||{};b.type="normal",delete b.arg,y.completion=b}function D(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(I,this),this.reset(!0)}function O(y){if(y){var b=y[r];if(b)return b.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var w=-1,R=function P(){for(;++w<y.length;)if(n.call(y,w))return P.value=y[w],P.done=!1,P;return P.value=void 0,P.done=!0,P};return R.next=R}}return{next:K}}function K(){return{value:void 0,done:!0}}return d.prototype=v,t(C,"constructor",{value:v,configurable:!0}),t(v,"constructor",{value:d,configurable:!0}),d.displayName=l(v,o,"GeneratorFunction"),i.isGeneratorFunction=function(y){var b=typeof y=="function"&&y.constructor;return!!b&&(b===d||(b.displayName||b.name)==="GeneratorFunction")},i.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,v):(y.__proto__=v,l(y,o,"GeneratorFunction")),y.prototype=Object.create(C),y},i.awrap=function(y){return{__await:y}},_(E.prototype),l(E.prototype,a,function(){return this}),i.AsyncIterator=E,i.async=function(y,b,w,R,P){P===void 0&&(P=Promise);var H=new E(u(y,b,w,R),P);return i.isGeneratorFunction(b)?H:H.next().then(function($){return $.done?$.value:H.next()})},_(C),l(C,o,"Generator"),l(C,r,function(){return this}),l(C,"toString",function(){return"[object Generator]"}),i.keys=function(y){var b=Object(y),w=[];for(var R in b)w.push(R);return w.reverse(),function P(){for(;w.length;){var H=w.pop();if(H in b)return P.value=H,P.done=!1,P}return P.done=!0,P}},i.values=O,D.prototype={constructor:D,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(U),!y)for(var b in this)b.charAt(0)==="t"&&n.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if(y.type==="throw")throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var b=this;function w(Ee,re){return H.type="throw",H.arg=y,b.next=Ee,re&&(b.method="next",b.arg=void 0),!!re}for(var R=this.tryEntries.length-1;R>=0;--R){var P=this.tryEntries[R],H=P.completion;if(P.tryLoc==="root")return w("end");if(P.tryLoc<=this.prev){var $=n.call(P,"catchLoc"),ie=n.call(P,"finallyLoc");if($&&ie){if(this.prev<P.catchLoc)return w(P.catchLoc,!0);if(this.prev<P.finallyLoc)return w(P.finallyLoc)}else if($){if(this.prev<P.catchLoc)return w(P.catchLoc,!0)}else{if(!ie)throw new Error("try statement without catch or finally");if(this.prev<P.finallyLoc)return w(P.finallyLoc)}}}},abrupt:function(y,b){for(var w=this.tryEntries.length-1;w>=0;--w){var R=this.tryEntries[w];if(R.tryLoc<=this.prev&&n.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var P=R;break}}P&&(y==="break"||y==="continue")&&P.tryLoc<=b&&b<=P.finallyLoc&&(P=null);var H=P?P.completion:{};return H.type=y,H.arg=b,P?(this.method="next",this.next=P.finallyLoc,f):this.complete(H)},complete:function(y,b){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&b&&(this.next=b),f},finish:function(y){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.finallyLoc===y)return this.complete(w.completion,w.afterLoc),U(w),f}},catch:function(y){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.tryLoc===y){var R=w.completion;if(R.type==="throw"){var P=R.arg;U(w)}return P}}throw new Error("illegal catch attempt")},delegateYield:function(y,b,w){return this.delegate={iterator:O(y),resultName:b,nextLoc:w},this.method==="next"&&(this.arg=void 0),f}},i}function Xr(i){"@babel/helpers - typeof";return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Xr(i)}function pc(i,s,n,t,e,r,a){try{var o=i[r](a),l=o.value}catch(u){n(u);return}o.done?s(l):Promise.resolve(l).then(t,e)}function He(i){return function(){var s=this,n=arguments;return new Promise(function(t,e){var r=i.apply(s,n);function a(l){pc(r,t,e,a,o,"next",l)}function o(l){pc(r,t,e,a,o,"throw",l)}a(void 0)})}}function dt(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}function gc(i,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,kd(t.key),t)}}function vt(i,s,n){return s&&gc(i.prototype,s),n&&gc(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}function L(i,s,n){return s=kd(s),s in i?Object.defineProperty(i,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[s]=n,i}function Da(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),s&&jo(i,s)}function oa(i){return oa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oa(i)}function jo(i,s){return jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jo(i,s)}function yy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _y(i,s){if(i==null)return{};var n={},t=Object.keys(i),e,r;for(r=0;r<t.length;r++)e=t[r],!(s.indexOf(e)>=0)&&(n[e]=i[e]);return n}function zo(i,s){if(i==null)return{};var n=_y(i,s),t,e;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(e=0;e<r.length;e++)t=r[e],!(s.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(i,t)&&(n[t]=i[t])}return n}function De(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function by(i,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return De(i)}function Oa(i){var s=yy();return function(){var t=oa(i),e;if(s){var r=oa(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return by(this,e)}}function Kn(i,s){return ky(i)||my(i,s)||Ed(i,s)||Cy()}function Sy(i){return Ey(i)||wy(i)||Ed(i)||Ty()}function Ey(i){if(Array.isArray(i))return Wo(i)}function ky(i){if(Array.isArray(i))return i}function wy(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Ed(i,s){if(i){if(typeof i=="string")return Wo(i,s);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wo(i,s)}}function Wo(i,s){(s==null||s>i.length)&&(s=i.length);for(var n=0,t=new Array(s);n<s;n++)t[n]=i[n];return t}function Ty(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Py(i,s){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var t=n.call(i,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)}function kd(i){var s=Py(i,"string");return typeof s=="symbol"?s:String(s)}function mc(i,s){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})),n.push.apply(n,t)}return n}function qr(i){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?mc(Object(n),!0).forEach(function(t){z(i,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):mc(Object(n)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(n,t))})}return i}function gt(){gt=function(){return i};var i={},s=Object.prototype,n=s.hasOwnProperty,t=Object.defineProperty||function(y,b,w){y[b]=w.value},e=typeof Symbol=="function"?Symbol:{},r=e.iterator||"@@iterator",a=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function l(y,b,w){return Object.defineProperty(y,b,{value:w,enumerable:!0,configurable:!0,writable:!0}),y[b]}try{l({},"")}catch{l=function(b,w,R){return b[w]=R}}function u(y,b,w,R){var P=b&&b.prototype instanceof h?b:h,H=Object.create(P.prototype),$=new D(R||[]);return t(H,"_invoke",{value:k(y,w,$)}),H}function c(y,b,w){try{return{type:"normal",arg:y.call(b,w)}}catch(R){return{type:"throw",arg:R}}}i.wrap=u;var f={};function h(){}function d(){}function v(){}var m={};l(m,r,function(){return this});var p=Object.getPrototypeOf,S=p&&p(p(O([])));S&&S!==s&&n.call(S,r)&&(m=S);var C=v.prototype=h.prototype=Object.create(m);function _(y){["next","throw","return"].forEach(function(b){l(y,b,function(w){return this._invoke(b,w)})})}function E(y,b){function w(P,H,$,ie){var Ee=c(y[P],y,H);if(Ee.type!=="throw"){var re=Ee.arg,We=re.value;return We&&typeof We=="object"&&n.call(We,"__await")?b.resolve(We.__await).then(function(Pe){w("next",Pe,$,ie)},function(Pe){w("throw",Pe,$,ie)}):b.resolve(We).then(function(Pe){re.value=Pe,$(re)},function(Pe){return w("throw",Pe,$,ie)})}ie(Ee.arg)}var R;t(this,"_invoke",{value:function(P,H){function $(){return new b(function(ie,Ee){w(P,H,ie,Ee)})}return R=R?R.then($,$):$()}})}function k(y,b,w){var R="suspendedStart";return function(P,H){if(R==="executing")throw new Error("Generator is already running");if(R==="completed"){if(P==="throw")throw H;return K()}for(w.method=P,w.arg=H;;){var $=w.delegate;if($){var ie=N($,w);if(ie){if(ie===f)continue;return ie}}if(w.method==="next")w.sent=w._sent=w.arg;else if(w.method==="throw"){if(R==="suspendedStart")throw R="completed",w.arg;w.dispatchException(w.arg)}else w.method==="return"&&w.abrupt("return",w.arg);R="executing";var Ee=c(y,b,w);if(Ee.type==="normal"){if(R=w.done?"completed":"suspendedYield",Ee.arg===f)continue;return{value:Ee.arg,done:w.done}}Ee.type==="throw"&&(R="completed",w.method="throw",w.arg=Ee.arg)}}}function N(y,b){var w=b.method,R=y.iterator[w];if(R===void 0)return b.delegate=null,w==="throw"&&y.iterator.return&&(b.method="return",b.arg=void 0,N(y,b),b.method==="throw")||w!=="return"&&(b.method="throw",b.arg=new TypeError("The iterator does not provide a '"+w+"' method")),f;var P=c(R,y.iterator,b.arg);if(P.type==="throw")return b.method="throw",b.arg=P.arg,b.delegate=null,f;var H=P.arg;return H?H.done?(b[y.resultName]=H.value,b.next=y.nextLoc,b.method!=="return"&&(b.method="next",b.arg=void 0),b.delegate=null,f):H:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,f)}function I(y){var b={tryLoc:y[0]};1 in y&&(b.catchLoc=y[1]),2 in y&&(b.finallyLoc=y[2],b.afterLoc=y[3]),this.tryEntries.push(b)}function U(y){var b=y.completion||{};b.type="normal",delete b.arg,y.completion=b}function D(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(I,this),this.reset(!0)}function O(y){if(y){var b=y[r];if(b)return b.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var w=-1,R=function P(){for(;++w<y.length;)if(n.call(y,w))return P.value=y[w],P.done=!1,P;return P.value=void 0,P.done=!0,P};return R.next=R}}return{next:K}}function K(){return{value:void 0,done:!0}}return d.prototype=v,t(C,"constructor",{value:v,configurable:!0}),t(v,"constructor",{value:d,configurable:!0}),d.displayName=l(v,o,"GeneratorFunction"),i.isGeneratorFunction=function(y){var b=typeof y=="function"&&y.constructor;return!!b&&(b===d||(b.displayName||b.name)==="GeneratorFunction")},i.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,v):(y.__proto__=v,l(y,o,"GeneratorFunction")),y.prototype=Object.create(C),y},i.awrap=function(y){return{__await:y}},_(E.prototype),l(E.prototype,a,function(){return this}),i.AsyncIterator=E,i.async=function(y,b,w,R,P){P===void 0&&(P=Promise);var H=new E(u(y,b,w,R),P);return i.isGeneratorFunction(b)?H:H.next().then(function($){return $.done?$.value:H.next()})},_(C),l(C,o,"Generator"),l(C,r,function(){return this}),l(C,"toString",function(){return"[object Generator]"}),i.keys=function(y){var b=Object(y),w=[];for(var R in b)w.push(R);return w.reverse(),function P(){for(;w.length;){var H=w.pop();if(H in b)return P.value=H,P.done=!1,P}return P.done=!0,P}},i.values=O,D.prototype={constructor:D,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(U),!y)for(var b in this)b.charAt(0)==="t"&&n.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if(y.type==="throw")throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var b=this;function w(Ee,re){return H.type="throw",H.arg=y,b.next=Ee,re&&(b.method="next",b.arg=void 0),!!re}for(var R=this.tryEntries.length-1;R>=0;--R){var P=this.tryEntries[R],H=P.completion;if(P.tryLoc==="root")return w("end");if(P.tryLoc<=this.prev){var $=n.call(P,"catchLoc"),ie=n.call(P,"finallyLoc");if($&&ie){if(this.prev<P.catchLoc)return w(P.catchLoc,!0);if(this.prev<P.finallyLoc)return w(P.finallyLoc)}else if($){if(this.prev<P.catchLoc)return w(P.catchLoc,!0)}else{if(!ie)throw new Error("try statement without catch or finally");if(this.prev<P.finallyLoc)return w(P.finallyLoc)}}}},abrupt:function(y,b){for(var w=this.tryEntries.length-1;w>=0;--w){var R=this.tryEntries[w];if(R.tryLoc<=this.prev&&n.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var P=R;break}}P&&(y==="break"||y==="continue")&&P.tryLoc<=b&&b<=P.finallyLoc&&(P=null);var H=P?P.completion:{};return H.type=y,H.arg=b,P?(this.method="next",this.next=P.finallyLoc,f):this.complete(H)},complete:function(y,b){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&b&&(this.next=b),f},finish:function(y){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.finallyLoc===y)return this.complete(w.completion,w.afterLoc),U(w),f}},catch:function(y){for(var b=this.tryEntries.length-1;b>=0;--b){var w=this.tryEntries[b];if(w.tryLoc===y){var R=w.completion;if(R.type==="throw"){var P=R.arg;U(w)}return P}}throw new Error("illegal catch attempt")},delegateYield:function(y,b,w){return this.delegate={iterator:O(y),resultName:b,nextLoc:w},this.method==="next"&&(this.arg=void 0),f}},i}function Ni(i){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ni(i)}function yc(i,s,n,t,e,r,a){try{var o=i[r](a),l=o.value}catch(u){n(u);return}o.done?s(l):Promise.resolve(l).then(t,e)}function $n(i){return function(){var s=this,n=arguments;return new Promise(function(t,e){var r=i.apply(s,n);function a(l){yc(r,t,e,a,o,"next",l)}function o(l){yc(r,t,e,a,o,"throw",l)}a(void 0)})}}function Gt(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}function _c(i,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,Td(t.key),t)}}function jt(i,s,n){return s&&_c(i.prototype,s),n&&_c(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}function z(i,s,n){return s=Td(s),s in i?Object.defineProperty(i,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[s]=n,i}function ls(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),s&&Jr(i,s)}function Bi(i){return Bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bi(i)}function Jr(i,s){return Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jr(i,s)}function wd(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bs(i,s,n){return wd()?Bs=Reflect.construct.bind():Bs=function(e,r,a){var o=[null];o.push.apply(o,r);var l=Function.bind.apply(e,o),u=new l;return a&&Jr(u,a.prototype),u},Bs.apply(null,arguments)}function Ay(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function la(i){var s=typeof Map=="function"?new Map:void 0;return la=function(t){if(t===null||!Ay(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(t))return s.get(t);s.set(t,e)}function e(){return Bs(t,arguments,Bi(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Jr(e,t)},la(i)}function xy(i,s){if(i==null)return{};var n={},t=Object.keys(i),e,r;for(r=0;r<t.length;r++)e=t[r],!(s.indexOf(e)>=0)&&(n[e]=i[e]);return n}function Ly(i,s){if(i==null)return{};var n=xy(i,s),t,e;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(e=0;e<r.length;e++)t=r[e],!(s.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(i,t)&&(n[t]=i[t])}return n}function me(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Iy(i,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return me(i)}function us(i){var s=wd();return function(){var t=Bi(i),e;if(s){var r=Bi(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Iy(this,e)}}function Dy(i,s){for(;!Object.prototype.hasOwnProperty.call(i,s)&&(i=Bi(i),i!==null););return i}function Fs(){return typeof Reflect<"u"&&Reflect.get?Fs=Reflect.get.bind():Fs=function(s,n,t){var e=Dy(s,n);if(e){var r=Object.getOwnPropertyDescriptor(e,n);return r.get?r.get.call(arguments.length<3?s:t):r.value}},Fs.apply(this,arguments)}function Oy(i,s){if(i){if(typeof i=="string")return bc(i,s);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bc(i,s)}}function bc(i,s){(s==null||s>i.length)&&(s=i.length);for(var n=0,t=new Array(s);n<s;n++)t[n]=i[n];return t}function Ry(i,s){var n=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!n){if(Array.isArray(i)||(n=Oy(i))||s&&i&&typeof i.length=="number"){n&&(i=n);var t=0,e=function(){};return{s:e,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r=!0,a=!1,o;return{s:function(){n=n.call(i)},n:function(){var l=n.next();return r=l.done,l},e:function(l){a=!0,o=l},f:function(){try{!r&&n.return!=null&&n.return()}finally{if(a)throw o}}}}function My(i,s){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var t=n.call(i,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)}function Td(i){var s=My(i,"string");return typeof s=="symbol"?s:String(s)}var $t=function(){function i(){Gt(this,i)}return jt(i,null,[{key:"start",value:function(n){return!n||!n.length||n.length===1&&n.end(0)-n.start(0)<1e-6||n.length===1&&n.start(0)<0?0:n.start(0)}},{key:"end",value:function(n){return!n||!n.length||n.length===1&&n.end(0)-n.start(0)<1e-6?0:n.end(n.length-1)}},{key:"get",value:function(n){if(n)try{return n.buffered}catch{}}},{key:"buffers",value:function(n,t){if(!n||!n.length)return[];for(var e=[],r=0,a=n.length;r<a;r++){var o=e.length;if(!o||!t)e.push([n.start(r),n.end(r)]);else{var l=e[o-1],u=l[1],c=n.start(r);if(c-u<=t){var f=n.end(r);f>u&&(l[1]=f)}else e.push([n.start(r),n.end(r)])}}return e}},{key:"totalLength",value:function(n){return!n||!n.length?0:n.reduce(function(t,e){return t+=e[1]-e[0]},0)}},{key:"info",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!n||!n.length)return{start:0,end:0,buffers:[]};for(var r=0,a=0,o=0,l=0,u=0,c=0,f=0,h=i.buffers(n,e),d=0,v=h.length;d<v;d++){var m=h[d];if(t+e>=m[0]&&t<=m[1])r=m[0],a=m[1],o=d;else if(t+e<m[0]){l=m[0],u=m[1];break}else t+e>m[1]&&(c=m[0],f=m[1])}return{start:r,end:a,index:o,buffers:h,nextStart:l,nextEnd:u,prevStart:c,prevEnd:f,currentTime:t,behind:t-r,remaining:a?a-t:0,length:i.totalLength&&i.totalLength(h)}}},{key:"isBuffered",value:function(n,t){if(n){var e=i.get(n);if(e!=null&&e.length){for(var r=0;r<e.length;r++)if(t>=e.start(r)&&t<=e.end(r))return!0}}return!1}}]),i}(),Ny=typeof window<"u",Ut,Me={MANIFEST:"manifest",NETWORK:"network",NETWORK_TIMEOUT:"network_timeout",NETWORK_FORBIDDEN:"network_forbidden",NETWORK_NOTFOUND:"network_notfound",NETWROK_RANGE_NOT_SATISFIABLE:"network_range_not_satisfiable",DEMUX:"demux",REMUX:"remux",MEDIA:"media",DRM:"drm",OTHER:"other",RUNTIME:"runtime",SUB_TYPES:{FLV:"FLV",HLS:"HLS",MP4:"MP4",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",MSE_CHANGE_TYPE:"MSE_CHANGE_TYPE",OPTION:"OPTION",DASH:"DASH",LICENSE:"LICENSE",CUSTOM_LICENSE:"CUSTOM_LICENSE",MSE_HIJACK:"MSE_HIJACK",EME_HIJACK:"EME_HIJACK",SIDX:"SIDX",NO_CANPLAY_ERROR:"NO_CANPLAY_ERROR",BUFFERBREAK_ERROR:"BUFFERBREAK_ERROR",WAITING_TIMEOUT_ERROR:"WAITING_TIMEOUT_ERROR",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_CODEC_NOT_SUPPORTED:"MEDIA_ERR_CODEC_NOT_SUPPORTED",MEDIA_ERR_URL_EMPTY:"MEDIA_ERR_URL_EMPTY"}},co=(Ut={},z(Ut,Me.MANIFEST,{HLS:1100,DASH:1200}),z(Ut,Me.NETWORK,2100),z(Ut,Me.NETWORK_TIMEOUT,2101),z(Ut,Me.NETWORK_FORBIDDEN,2103),z(Ut,Me.NETWORK_NOTFOUND,2104),z(Ut,Me.NETWROK_RANGE_NOT_SATISFIABLE,2116),z(Ut,Me.DEMUX,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),z(Ut,Me.REMUX,{FMP4:4100,MP4:4200}),z(Ut,Me.MEDIA,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,MSE_CHANGE_TYPE:5205,EME_HIJACK:5301}),z(Ut,Me.DRM,{LICENSE:7100,CUSTOM_LICENSE:7200}),z(Ut,Me.OTHER,8e3),z(Ut,Me.RUNTIME,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),Ut),st=function(i){ls(n,i);var s=us(n);function n(t,e,r,a,o){var l;return Gt(this,n),l=s.call(this,o||(r==null?void 0:r.message)),l.errorType=t===Me.NETWORK_TIMEOUT?Me.NETWORK:t,l.originError=r,l.ext=a,l.errorCode=co[t][e]||co[t],l.errorMessage=l.message,l.errorCode||(l.errorType=Me.OTHER,l.errorCode=co[l.errorType]),l}return jt(n,null,[{key:"create",value:function(e,r,a,o,l){return e instanceof n?e:(e instanceof Error&&(a=e,e=""),e||(e=Me.OTHER),new n(e,r,a,o,l))}},{key:"network",value:function(e){var r;return new n(e!=null&&e.isTimeout?Me.NETWORK_TIMEOUT:Me.NETWORK,null,e instanceof Error?e:null,{url:e==null?void 0:e.url,response:e==null?void 0:e.response,httpCode:e==null||(r=e.response)===null||r===void 0?void 0:r.status})}}]),n}(la(Error)),ws={DEBUG:1,LOG:2,WARN:3,ERROR:4},By=200*1024,Fy=["Boolean","Number","String","Undefined","Null","Date","Object"],In=function(){function i(s,n){Gt(this,i),this.name=s||"",this._prefix="[".concat(this.name,"]"),this.logCacheLevel=(n==null?void 0:n.logCacheLevel)||3,this.logMaxSize=(n==null?void 0:n.logMaxSize)||By,this.logSize=0,this.logTextArray=[]}return jt(i,[{key:"debug",value:function(){for(var n,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.logCache.apply(this,[ws.DEBUG].concat(e)),!i.disabled&&(n=console).debug.apply(n,["[".concat(Tr(),"]"),this._prefix].concat(e))}},{key:"log",value:function(){for(var n,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.logCache.apply(this,[ws.LOG].concat(e)),!i.disabled&&(n=console).log.apply(n,["[".concat(Tr(),"]"),this._prefix].concat(e))}},{key:"warn",value:function(){for(var n,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.logCache.apply(this,[ws.WARN].concat(e)),!i.disabled&&(n=console).warn.apply(n,["[".concat(Tr(),"]"),this._prefix].concat(e))}},{key:"error",value:function(){for(var n,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.logCache.apply(this,[ws.ERROR].concat(e)),!i.disabled&&(n=console).error.apply(n,["[".concat(Tr(),"]"),this._prefix].concat(e))}},{key:"logCache",value:function(n){if(!(n<this.logCacheLevel)){var t="";try{for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];var o=r.map(function(u){return Cd(u)});t="[".concat(Tr(),"]")+this._prefix+JSON.stringify(o)}catch{return}if(n>=this.logCacheLevel&&(this.logSize+=t.length,this.logTextArray.push(t)),this.logSize>this.logMaxSize){var l=this.logTextArray.shift();this.logSize-=l.length}}}},{key:"getLogCache",value:function(){var n=this.logTextArray.join(`
`);return this.reset(),n}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var n;i.disabled||(console.group(this._prefix),(n=console).table.apply(n,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(n){this.logCacheLevel=n}}],[{key:"enable",value:function(){i.disabled=!1}},{key:"disable",value:function(){i.disabled=!0}}]),i}();z(In,"disabled",!0);function Tr(){return new Date().toLocaleString()}function Uy(i){if(Ni(i)!=="object")return i;var s=Object.prototype.toString.call(i).slice(8,-1);switch(s){case"Array":case"Uint8Array":case"ArrayBuffer":return s+"["+i.length+"]";case"Object":return"{}";default:return s}}function Cd(i,s,n){n||(n=1),s||(s=2);var t={};if(!i||Ni(i)!=="object")return i;var e=Object.prototype.toString.call(i).slice(8,-1);if(!Fy.includes(e))return e;if(!(n>s)){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n===s?t[r]=Uy(i[r]):Ni(i[r])==="object"?t[r]=Cd(i[r],s,n+1):t[r]=i[r]);return t}}function tr(){var i,s,n=new Promise(function(t,e){i=t,s=e});return n.used=!1,n.resolve=function(){return n.used=!0,i.apply(void 0,arguments)},n.reject=function(){return n.used=!0,s.apply(void 0,arguments)},n}function Zi(){try{return parseInt(performance.now(),10)}catch{return new Date().getTime()}}var Vy={stringify:function(s){try{return JSON.stringify(s)}catch{return""}},parse:function(s){try{return JSON.parse(s)}catch{return}}};function Sc(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;try{return Ny?i&&typeof ManagedMediaSource<"u"?ManagedMediaSource:window.MediaSource:null}catch{}}function fo(i){return/ManagedMediaSource/gi.test(Object.prototype.toString.call(i))}function Hy(i){var s=[];if(i instanceof TimeRanges)for(var n=0;n<i.length;n++)s.push({start:i.start(n),end:i.end(n)});return s}var Ts={APPEND:"appendBuffer",REMOVE:"removeBuffer",UPDATE_DURATION:"updateDuration"},Rt=function(){function i(s,n){var t=this;Gt(this,i),z(this,"media",null),z(this,"mediaSource",null),z(this,"_openPromise",tr()),z(this,"_queue",Object.create(null)),z(this,"_sourceBuffer",Object.create(null)),z(this,"_mseFullFlag",{}),z(this,"_st",0),z(this,"_opst",0),z(this,"_logger",null),z(this,"_config",null),z(this,"_url",null),z(this,"_onStartStreaming",function(){t._logger.debug("startstreaming")}),z(this,"_onEndStreaming",function(){t._logger.debug("endstreaming")}),z(this,"_onSBUpdateEnd",function(e){var r=t._queue[e];if(r){var a=r[0];if((a==null?void 0:a.opName)!==Ts.UPDATE_DURATION&&r.shift(),a){var o,l,u=Zi()-t._opst;t._logger.debug("UpdateEnd(".concat(e,"/").concat(a.opName,")"),Vy.stringify(Hy((o=t._sourceBuffer[e])===null||o===void 0?void 0:o.buffered)),u,a.context),a.promise.resolve({name:a.opName,context:a.context,costtime:u});var c=(l=a.context)===null||l===void 0?void 0:l.callback;c&&typeof c=="function"&&c(a.context),t._startQueue(e)}}}),z(this,"_onSBUpdateError",function(e,r){var a=t._queue[e];if(a){var o=a[0];o&&(t._logger.error("UpdateError",e,o.opName,o.context),o.promise.reject(new st(Me.MEDIA,Me.SUB_TYPES.MSE_APPEND_BUFFER,r)))}}),this._config=Object.assign(i.getDefaultConfig(),n),s&&this.bindMedia(s),this._logger=new In("MSE"),this._config.openLog&&In.enable()}return jt(i,[{key:"isOpened",get:function(){var n;return((n=this.mediaSource)===null||n===void 0?void 0:n.readyState)==="open"}},{key:"hasOpTasks",get:function(){var n=this,t=!1;return Object.keys(this._queue).forEach(function(e){var r=n._queue[e];Array.isArray(r)&&(t||(t=r.length>0))}),t}},{key:"url",get:function(){return this._url}},{key:"duration",get:function(){var n;return((n=this.mediaSource)===null||n===void 0?void 0:n.duration)||-1}},{key:"isEnded",get:function(){return this.mediaSource?this.mediaSource.readyState==="ended":!1}},{key:"streaming",get:function(){return fo(this.mediaSource)?this.mediaSource.streaming:!0}},{key:"isFull",value:function(n){return n?this._mseFullFlag[n]:this._mseFullFlag[i.VIDEO]}},{key:"updateDuration",value:function(n){var t=this,e=this.mediaSource&&this.mediaSource.duration>n;if(this.mediaSource&&this.mediaSource.duration>n){var r=0;if(Object.keys(this._sourceBuffer).forEach(function(a){try{r=Math.max(t.bufferEnd(a)||0,r)}catch{}}),n<r)return Promise.resolve()}return this._enqueueBlockingOp(function(){if(t.isEnded){t._logger.debug("setDuration but ended");return}t.mediaSource&&(t.mediaSource.duration=n,t._logger.debug("setDuration",n))},Ts.UPDATE_DURATION,{isReduceDuration:e})}},{key:"open",value:function(){var n=this;if(this._openPromise.used&&!this.isOpened&&this.mediaSource){var t=this.mediaSource,e=function r(){var a=Zi()-n._st;n._logger.debug("sourceopen",a),t.removeEventListener("sourceopen",r),n._openPromise.resolve({costtime:a})};t.addEventListener("sourceopen",e),this._openPromise=tr()}return this._openPromise}},{key:"bindMedia",value:function(){var s=$n(gt().mark(function t(e){var r=this,a,o,l,u;return gt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this.mediaSource||this.media)){f.next=3;break}return f.next=3,this.unbindMedia();case 3:if(a=Sc(this._config.preferMMS),!(!e||!a)){f.next=6;break}throw new Error("Param media or MediaSource does not exist");case 6:return this.media=e,o=this.mediaSource=new a,l=fo(o),this._st=Zi(),u=function h(){var d=Zi()-r._st;r._logger.debug("sourceopen"),o.removeEventListener("sourceopen",h),URL.revokeObjectURL(e.src),r._openPromise.resolve({costtime:d})},o.addEventListener("sourceopen",u),l&&(o.addEventListener("startstreaming",this._onStartStreaming),o.addEventListener("endstreaming",this._onEndStreaming)),this._url=URL.createObjectURL(o),e.src=this._url,e.disableRemotePlayback=l,f.abrupt("return",this._openPromise);case 17:case"end":return f.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"unbindMedia",value:function(){var s=$n(gt().mark(function t(){var e=this,r,a,o;return gt().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this._openPromise.used||this._openPromise.resolve(),r=this.mediaSource,r){if(Object.keys(this._queue).forEach(function(c){var f=e._queue[c];f&&f.forEach(function(h){var d,v;return(d=h.promise)===null||d===void 0||(v=d.resolve)===null||v===void 0?void 0:v.call(d)})}),a=!!this.media&&this.media.readyState>=1,o=r.readyState==="open",a&&o)try{r.endOfStream()}catch{}Object.keys(this._sourceBuffer).forEach(function(c){try{r.removeSourceBuffer(e._sourceBuffer[c])}catch{}}),fo(r)&&(r.removeEventListener("startstreaming",this._onStartStreaming),r.removeEventListener("endstreaming",this._onEndStreaming))}if(this.media){this.media.disableRemotePlayback=!1,this.media.removeAttribute("src");try{this.media.load()}catch{}this.media=null}this.mediaSource=null,this._openPromise=tr(),this._queue=Object.create(null),this._sourceBuffer=Object.create(null);case 8:case"end":return u.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"createSource",value:function(n,t){if(!(this._sourceBuffer[n]||!this.mediaSource)){var e;try{e=this._sourceBuffer[n]=this.mediaSource.addSourceBuffer(t)}catch(r){throw new st(Me.MEDIA,Me.SUB_TYPES.MSE_ADD_SB,r)}e.mimeType=t,e.addEventListener("updateend",this._onSBUpdateEnd.bind(this,n)),e.addEventListener("error",this._onSBUpdateError.bind(this,n))}}},{key:"changeType",value:function(n,t){var e=this,r=this._sourceBuffer[n];return!this.mediaSource||!r||r.mimeType===t?Promise.resolve():typeof r.changeType!="function"?Promise.reject(new st(Me.MEDIA,Me.SUB_TYPES.MSE_CHANGE_TYPE,new Error("changeType is not a function"))):this._enqueueOp(n,function(){try{r.changeType(t)}catch(a){throw new st(Me.MEDIA,Me.SUB_TYPES.MSE_CHANGE_TYPE,a)}r.mimeType=t,e._onSBUpdateEnd(n)},"changeType",{mimeType:t})}},{key:"createOrChangeSource",value:function(n,t){return this.createSource(n,t),this.changeType(n,t)}},{key:"append",value:function(n,t,e){var r=this;return!t||!t.byteLength||!this._sourceBuffer[n]?Promise.resolve():this._enqueueOp(n,function(){var a;!r.mediaSource||r.media.error||(r._logger.debug("MSE APPEND START",e),r._opst=Zi(),(a=r._sourceBuffer[n])===null||a===void 0||a.appendBuffer(t))},Ts.APPEND,e)}},{key:"remove",value:function(n,t,e,r){var a=this,o=!1;return this._mseFullFlag[n]&&(o=!0),this._enqueueOp(n,function(){if(!(!a.mediaSource||a.media.error)){var l=a._sourceBuffer[n];if(t>=e||!l){a._onSBUpdateEnd(n);return}a._opst=Zi(),a._logger.debug("MSE REMOVE START",n,t,e,r),l.remove(t,e)}},Ts.REMOVE,r,o)}},{key:"clearBuffer",value:function(n,t){var e=this,r;return Object.keys(this._sourceBuffer).forEach(function(a){r=e.remove(a,n,t)}),r||Promise.resolve()}},{key:"clearAllBuffer",value:function(){var n=this,t;return Object.keys(this._sourceBuffer).forEach(function(e){var r=n._sourceBuffer[e];t=n.remove(e,0,$t.end($t.get(r)))}),t}},{key:"clearOpQueues",value:function(n,t){var e;this._logger.debug("MSE clearOpQueue START");var r=this._queue[n];if(t&&r){this._queue[n]=[];return}if(!(!r||!r[n]||r.length<5)){var a=[];r.forEach(function(o){o.context&&o.context.isinit&&a.push(o)}),this._queue[n]=r.slice(0,2),a.length>0&&(e=this._queue[n]).push.apply(e,a)}}},{key:"endOfStream",value:function(n){var t=this;return!this.mediaSource||this.mediaSource.readyState!=="open"?Promise.resolve():this._enqueueBlockingOp(function(){var e=t.mediaSource;!e||e.readyState!=="open"||(t._logger.debug("MSE endOfStream START"),n?e.endOfStream(n):e.endOfStream())},"endOfStream")}},{key:"setLiveSeekableRange",value:function(n,t){var e=this.mediaSource;n<0||t<n||!(e!=null&&e.setLiveSeekableRange)||e.readyState!=="open"||e.setLiveSeekableRange(n,t)}},{key:"getSourceBuffer",value:function(n){return this._sourceBuffer[n]}},{key:"buffered",value:function(n){return $t.get(this._sourceBuffer[n])}},{key:"bufferStart",value:function(n){return $t.start(this.buffered(n))}},{key:"bufferEnd",value:function(n){return $t.end(this.buffered(n))}},{key:"_enqueueOp",value:function(n,t,e,r,a){var o=this;if(!this.mediaSource)return Promise.resolve();var l=this._queue[n]=this._queue[n]||[],u={exec:t,promise:tr(),opName:e,context:r};return a?(l.splice(0,0,u),this._mseFullFlag[n]=!1,this._startQueue(n)):l.push(u),this.isOpened||this.isEnded?l.length===1&&this._startQueue(n):this._openPromise.then(function(){l.length===1&&o._startQueue(n)}),u.promise}},{key:"_enqueueBlockingOp",value:function(){var s=$n(gt().mark(function t(e,r,a){var o=this,l,u;return gt().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.mediaSource){f.next=2;break}return f.abrupt("return",Promise.resolve());case 2:if(l=Object.keys(this._sourceBuffer),l.length){f.next=5;break}return f.abrupt("return",e());case 5:return u=[],l.forEach(function(h){var d=o._queue[h],v=tr();u.push(v),d.push({exec:function(){v.resolve()},promise:v,opName:r,context:a}),d.length===1&&o._startQueue(h)}),f.abrupt("return",Promise.all(u).then(function(){try{return e()}finally{l.forEach(function(h){var d=o._queue[h],v=o._sourceBuffer[h];d==null||d.shift(),(!v||!v.updating)&&o._startQueue(h)})}}));case 8:case"end":return f.stop()}},t,this)}));function n(t,e,r){return s.apply(this,arguments)}return n}()},{key:"_startQueue",value:function(n){var t=this._queue[n];if(t){var e=t[0];if(e&&!this._mseFullFlag[n])try{e.exec()}catch(o){if(o&&o.message&&o.message.indexOf("SourceBuffer is full")>=0){var r;this._mseFullFlag[n]=!0,e.context&&Ni(e.context)==="object"&&(e.context.isFull=!0),this._logger.error("[MSE error],  context,",e.context," ,name,",e.opName,",err,SourceBuffer is full"),e==null||(r=e.promise)===null||r===void 0||r.reject(new st(Me.MEDIA,Me.SUB_TYPES.MSE_FULL,o))}else{var a;this._logger.error(o),e==null||(a=e.promise)===null||a===void 0||a.reject(o.constructor===st?o:new st(Me.MEDIA,Me.SUB_TYPES.MSE_OTHER,o)),t.shift(),this._startQueue(n)}}}}},{key:"setTimeoffset",value:function(n,t,e){var r=this;return this._enqueueOp(n,function(){t<0&&(t+=.001),r._sourceBuffer[n].timestampOffset=t,r._onSBUpdateEnd(n)},"setTimeoffset",e)}},{key:"abort",value:function(n,t){var e=this;return this.isOpened?this._enqueueOp(n,function(){e._sourceBuffer[n].abort(),e._onSBUpdateEnd(n)},"abort",t):Promise.resolve()}}],[{key:"isSupported",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"',t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=Sc(t);if(!e)return!1;try{return e.isTypeSupported(n)}catch(r){return this._logger.error(n,r),!1}}},{key:"isMMSOnly",value:function(){return typeof ManagedMediaSource<"u"&&typeof MediaSource>"u"}},{key:"getDefaultConfig",value:function(){return{openLog:!1,preferMMS:!1}}}]),i}();z(Rt,"VIDEO","video");z(Rt,"AUDIO","audio");var Ai={FETCH:"fetch",XHR:"xhr"},Qr={ARRAY_BUFFER:"arraybuffer",TEXT:"text",JSON:"json"},An=function(i){ls(n,i);var s=us(n);function n(t,e,r,a){var o;return Gt(this,n),o=s.call(this,a),z(me(o),"retryCount",0),z(me(o),"isTimeout",!1),z(me(o),"loaderType",Ai.FETCH),z(me(o),"startTime",0),z(me(o),"endTime",0),z(me(o),"options",{}),o.url=t,o.request=e,o.response=r,o}return jt(n)}(la(Error)),Pd=Object.prototype.toString;function $y(i){return i!==null&&Ni(i)==="object"}function Ec(i){if(Pd.call(i)!=="[object Object]")return!1;var s=Object.getPrototypeOf(i);return s===null||s===Object.prototype}function Gy(i){return Pd.call(i)==="[object Date]"}function Ad(i){if(!(!i||i[0]===null||i[0]===void 0||i[0]===0&&(i[1]===null||i[1]===void 0))){var s="bytes="+i[0]+"-";return i[1]&&(s+=i[1]),s}}function kc(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xd(i,s){if(i){if(!s)return i;var n,t=Object.keys(s).map(function(r){if(n=s[r],n!=null)return Array.isArray(n)?r=r+"[]":n=[n],n.map(function(a){return Gy(a)?a=a.toISOString():$y(a)&&(a=JSON.stringify(a)),"".concat(kc(r),"=").concat(kc(a))}).join("&")}).filter(Boolean).join("&");if(t){var e=i.indexOf("#");e!==-1&&(i=i.slice(0,e)),i+=(i.indexOf("?")===-1?"?":"&")+t}return i}}function Ko(i,s,n,t,e,r,a,o,l,u,c){e=e!=null?parseFloat(e):null,t=parseInt(t||"0",10),Number.isNaN(t)&&(t=0);var f={range:l,vid:u,index:o,contentLength:t,age:e,startTime:r,firstByteTime:a,endTime:Date.now(),priOptions:c};return{data:i,done:s,options:f,response:n}}function Yo(i,s){return Math.round(i*8*1e3/s/1024)}var _e={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",MEDIASOURCE_OPENED:"core.mediasourceopened",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",APPEND_BUFFER:"core.appendbuffer",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",CHASEFRAME:"core.chaseframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"core.demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"},wc=2*1024*1024,Xo=function(i){ls(n,i);var s=us(n);function n(){var t;return Gt(this,n),t=s.call(this),z(me(t),"_abortController",null),z(me(t),"_timeoutTimer",null),z(me(t),"_reader",null),z(me(t),"_response",null),z(me(t),"_aborted",!1),z(me(t),"_index",-1),z(me(t),"_range",null),z(me(t),"_receivedLength",0),z(me(t),"_running",!1),z(me(t),"_logger",null),z(me(t),"_vid",""),z(me(t),"_firtstByte",0),z(me(t),"_onProcessMinLen",0),z(me(t),"_onCancel",null),z(me(t),"_priOptions",null),t}return jt(n,[{key:"load",value:function(e){var r,a=this,o=e.url,l=e.vid,u=e.timeout,c=e.responseType,f=e.onProgress,h=e.index,d=e.onTimeout,v=e.onCancel,m=e.range,p=e.transformResponse,S=e.request,C=e.params,_=e.logger,E=e.method,k=e.headers,N=e.body,I=e.mode,U=e.credentials,D=e.cache,O=e.redirect,K=e.referrer,y=e.referrerPolicy,b=e.onProcessMinLen,w=e.priOptions,R=e.streamRes,P=e.firstMaxChunkSize;this._logger=_,this._aborted=!1,this._onProcessMinLen=b,this._onCancel=v,this._abortController=typeof AbortController<"u"&&new AbortController,this._running=!0,this._index=h,this._range=m||[0,0],this._vid=l||o,this._priOptions=w||{},this._firstMaxChunkSize=P;var H={method:E,headers:k,body:N,mode:I,credentials:U,cache:D,redirect:O,referrer:K,referrerPolicy:y,signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},$=!1;clearTimeout(this._timeoutTimer),o=xd(o,C);var ie=Ad(m);ie&&(S?k=S.headers:k=H.headers=H.headers||(Headers?new Headers:{}),Headers&&k instanceof Headers?k.append("Range",ie):k.Range=ie),u&&(this._timeoutTimer=setTimeout(function(){if($=!0,a.cancel(),d){var re=new An(o,H,null,"timeout");re.isTimeout=!0,d(re,{index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions})}},u));var Ee=Date.now();return this._logger.debug("[fetch load start], index,",h,",range,",m),new Promise(function(re,We){var Pe=R?new Promise(function(pt){pt(R)}):fetch(S||o,S?void 0:H);Pe.then(function(){var pt=$n(gt().mark(function tn(lt){var nn,bt,bn,zt;return gt().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(clearTimeout(a._timeoutTimer),a._response=lt,!(a._aborted||!a._running)){Qe.next=4;break}return Qe.abrupt("return");case 4:if(p&&(lt=p(lt,o)||lt),lt.ok){Qe.next=7;break}throw new An(o,H,lt,"bad network response");case 7:if(nn=Date.now(),c!==Qr.TEXT){Qe.next=15;break}return Qe.next=11,lt.text();case 11:bt=Qe.sent,a._running=!1,Qe.next=37;break;case 15:if(c!==Qr.JSON){Qe.next=22;break}return Qe.next=18,lt.json();case 18:bt=Qe.sent,a._running=!1,Qe.next=37;break;case 22:if(!f){Qe.next=29;break}return a.resolve=re,a.reject=We,a._loadChunk(lt,f,Ee,nn),Qe.abrupt("return");case 29:return Qe.next=31,lt.arrayBuffer();case 31:bt=Qe.sent,bt=new Uint8Array(bt),a._running=!1,bn=Date.now()-Ee,zt=Yo(bt.byteLength,bn),a.emit(_e.REAL_TIME_SPEED,{speed:zt,len:bt.byteLength,time:bn,vid:a._vid,index:a._index,range:a._range,priOptions:a._priOptions});case 37:a._logger.debug("[fetch load end], index,",h,",range,",m),re(Ko(bt,!0,lt,lt.headers.get("Content-Length"),lt.headers.get("age"),Ee,nn,h,m,a._vid,a._priOptions));case 39:case"end":return Qe.stop()}},tn)}));return function(tn){return pt.apply(this,arguments)}}()).catch(function(pt){var tn;clearTimeout(a._timeoutTimer),a._running=!1,!(a._aborted&&!$)&&(pt=pt instanceof An?pt:new An(o,H,null,(tn=pt)===null||tn===void 0?void 0:tn.message),pt.startTime=Ee,pt.endTime=Date.now(),pt.isTimeout=$,pt.options={index:a._index,range:a._range,vid:a._vid,priOptions:a._priOptions},We(pt))})})}},{key:"cancel",value:function(){var t=$n(gt().mark(function r(){return gt().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this._aborted){o.next=2;break}return o.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){o.next=14;break}if(o.prev=5,!this._reader){o.next=9;break}return o.next=9,this._reader.cancel();case 9:o.next=13;break;case 11:o.prev=11,o.t0=o.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch{}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return o.stop()}},r,this,[[5,11]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadChunk",value:function(e,r,a,o){var l=this;if(!e.body||!e.body.getReader){this._running=!1;var u=new An(e.url,"",e,"onProgress of bad response.body.getReader");u.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this.reject(u);return}this._onProcessMinLen>0&&(this._cache=new Uint8Array(wc),this._writeIdx=0);var c=this._reader=e.body.getReader(),f,h,d,v=function(){var m=$n(gt().mark(function p(){var S,C,_,E,k,N,I,U,D,O;return gt().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return h=Date.now(),y.prev=1,y.next=4,c.read();case 4:f=y.sent,d=Date.now(),y.next=13;break;case 8:return y.prev=8,y.t0=y.catch(1),d=Date.now(),l._aborted||(l._running=!1,y.t0.options={index:l._index,range:l._range,vid:l._vid,priOptions:l._priOptions},l.reject(y.t0)),y.abrupt("return");case 13:if(C=((S=l._range)===null||S===void 0?void 0:S.length)>0?l._range[0]:0,_=C+l._receivedLength,!l._aborted){y.next=19;break}return l._running=!1,r(void 0,!1,{range:[_,_],vid:l._vid,index:l._index,startTime:h,endTime:d,st:a,firstByteTime:o,priOptions:l._priOptions},e),y.abrupt("return");case 19:E=f.value?f.value.byteLength:0,l._receivedLength+=E,l._logger.debug("fetchLoader,onProgress call,task,",l._range,", start,",_,", end,",C+l._receivedLength,", done,",f.done),l._onProcessMinLen>0?l._writeIdx+E>=l._onProcessMinLen||f.done?(k=new Uint8Array(l._writeIdx+E),k.set(l._cache.slice(0,l._writeIdx),0),E>0&&k.set(f.value,l._writeIdx),l._writeIdx=0,l._logger.debug("fetchLoader,onProgress enough,done,",f.done,",len,",k.byteLength,", writeIdx,",l._writeIdx)):E>0&&l._writeIdx+E<wc?(l._cache.set(f.value,l._writeIdx),l._writeIdx+=E,l._logger.debug("fetchLoader,onProgress cache,len,",E,", writeIdx,",l._writeIdx)):E>0&&(N=new Uint8Array(l._writeIdx+E+2048),l._logger.debug("fetchLoader,onProgress extra start,size,",l._writeIdx+E+2048,", datalen,",E,", writeIdx,",l._writeIdx),N.set(l._cache.slice(0,l._writeIdx),0),E>0&&N.set(f.value,l._writeIdx),l._writeIdx+=E,delete l._cache,l._cache=N,l._logger.debug("fetchLoader,onProgress extra end,len,",E,", writeIdx,",l._writeIdx)):k=f.value,(k&&k.byteLength>0||f.done)&&(l._firstMaxChunkSize&&(l._firtstByte?l._cacheData&&(U=new Uint8Array(l._cacheData.byteLength+k.byteLength),U.set(l._cacheData,0),U.set(k,l._cacheData.byteLength),k=U,l._cacheData=null):(l._firtstByte++,I=k.slice(0,l._firstMaxChunkSize),l._cacheData=k.slice(l._firstMaxChunkSize),k=I)),r(k,f.done,{range:[l._range[0]+l._receivedLength-(k?k.byteLength:0),l._range[0]+l._receivedLength],vid:l._vid,index:l._index,startTime:h,endTime:d,st:a,firstByteTime:o,priOptions:l._priOptions},e)),f.done?(D=Date.now()-a,O=Yo(l._receivedLength,D),l.emit(_e.REAL_TIME_SPEED,{speed:O,len:l._receivedLength,time:D,vid:l._vid,index:l._index,range:l._range,priOptions:l._priOptions}),l._running=!1,l._logger.debug("[fetchLoader onProgress end],task,",l._range,",done,",f.done),l.resolve(Ko(f,!0,e,e.headers.get("Content-Length"),e.headers.get("age"),a,o,l._index,l._range,l._vid,l._priOptions))):l._firstMaxChunkSize?setTimeout(function(){v()},0):v();case 25:case"end":return y.stop()}},p,null,[[1,8]])}));return function(){return m.apply(this,arguments)}}();v()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}}],[{key:"isSupported",value:function(){return typeof fetch<"u"}}]),n}(yr);function jy(i){return qr({loaderType:Ai.FETCH,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:Qr.TEXT,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},i)}var zy=function(i){ls(n,i);var s=us(n);function n(){var t;return Gt(this,n),t=s.call(this),z(me(t),"_xhr",null),z(me(t),"_aborted",!1),z(me(t),"_timeoutTimer",null),z(me(t),"_range",null),z(me(t),"_receivedLength",0),z(me(t),"_url",null),z(me(t),"_onProgress",null),z(me(t),"_index",-1),z(me(t),"_headers",null),z(me(t),"_currentChunkSizeKB",384),z(me(t),"_timeout",null),z(me(t),"_xhr",null),z(me(t),"_withCredentials",null),z(me(t),"_startTime",-1),z(me(t),"_loadCompleteResolve",null),z(me(t),"_loadCompleteReject",null),z(me(t),"_runing",!1),z(me(t),"_logger",!1),z(me(t),"_vid",""),z(me(t),"_responseType",void 0),z(me(t),"_credentials",void 0),z(me(t),"_method",void 0),z(me(t),"_transformResponse",void 0),z(me(t),"_firstRtt",void 0),z(me(t),"_onCancel",null),z(me(t),"_priOptions",null),t}return jt(n,[{key:"load",value:function(e){var r=this;clearTimeout(this._timeoutTimer),this._logger=e.logger,this._range=e.range,this._onProgress=e.onProgress,this._index=e.index,this._headers=e.headers,this._withCredentials=e.credentials==="include"||e.credentials==="same-origin",this._body=e.body||null,e.method&&(this._method=e.method),this._timeout=e.timeout||null,this._runing=!0,this._vid=e.vid||e.url,this._responseType=e.responseType,this._firstRtt=-1,this._onTimeout=e.onTimeout,this._onCancel=e.onCancel,this._request=e.request,this._priOptions=e.priOptions||{},this._logger.debug("xhrLoader task, range",this._range),this._url=xd(e.url,e.params);var a=Date.now();return new Promise(function(o,l){r._loadCompleteResolve=o,r._loadCompleteReject=l,r._startLoad()}).catch(function(o){if(clearTimeout(r._timeoutTimer),r._runing=!1,!r._aborted)throw o=o instanceof An?o:new An(r._url,r._request),o.startTime=a,o.endTime=Date.now(),o.options={index:r._index,vid:r._vid,priOptions:r._priOptions},o})}},{key:"_startLoad",value:function(){var e=null;if(this._responseType===Qr.ARRAY_BUFFER&&this._range&&this._range.length>1)if(this._onProgress){this._firstRtt=-1;var r=this._currentChunkSizeKB*1024,a=this._range[0]+this._receivedLength,o=this._range[1];r<this._range[1]-a&&(o=a+r),e=[a,o],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",e)}else e=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",e);this._internalOpen(e)}},{key:"_internalOpen",value:function(e){var r=this;try{this._startTime=Date.now();var a=this._xhr=new XMLHttpRequest;a.open(this._method||"GET",this._url,!0),a.responseType=this._responseType,this._timeout&&(a.timeout=this._timeout),a.withCredentials=this._withCredentials,a.onload=this._onLoad.bind(this),a.onreadystatechange=this._onReadyStatechange.bind(this),a.onerror=function(u){var c,f,h;r._running=!1;var d=new An(r._url,r._request,u==null||(c=u.currentTarget)===null||c===void 0?void 0:c.response,"xhr.onerror.status:"+(u==null||(f=u.currentTarget)===null||f===void 0?void 0:f.status)+",statusText,"+(u==null||(h=u.currentTarget)===null||h===void 0?void 0:h.statusText));d.options={index:r._index,range:r._range,vid:r._vid,priOptions:r._priOptions},r._loadCompleteReject(d)},a.ontimeout=function(u){r.cancel();var c=new An(r._url,r._request,{status:408},"timeout");r._onTimeout&&(c.isTimeout=!0,r._onTimeout(c,{index:r._index,range:r._range,vid:r._vid,priOptions:r._priOptions})),c.options={index:r._index,range:r._range,vid:r._vid,priOptions:r._priOptions},r._loadCompleteReject(c)};var o=this._headers||{},l=Ad(e);l&&(o.Range=l),o&&Object.keys(o).forEach(function(u){a.setRequestHeader(u,o[u])}),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",e),a.send(this._body)}catch(u){u.options={index:this._index,range:e,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(u)}}},{key:"_onReadyStatechange",value:function(e){var r=e.target;r.readyState===2&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(e){var r,a=e.target.status;if(a<200||a>299){var o=new An(this._url,null,qr(qr({},e.target.response),{},{status:a}),"bad response,status:"+a);return o.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(o)}var l=null,u=!1,c,f=((r=this._range)===null||r===void 0?void 0:r.length)>0?this._range[0]:0;if(this._responseType===Qr.ARRAY_BUFFER){var h,d=new Uint8Array(e.target.response);if(c=f+this._receivedLength,d&&d.byteLength>0){this._receivedLength+=d.byteLength;var v=Date.now()-this._startTime,m=Yo(this._receivedLength,v);this.emit(_e.REAL_TIME_SPEED,{speed:m,len:this._receivedLength,time:v,vid:this._vid,index:this._index,range:[c,f+this._receivedLength],priOptions:this._priOptions})}l=d,((h=this._range)===null||h===void 0?void 0:h.length)>1&&this._range[1]&&this._receivedLength<this._range[1]-this._range[0]?u=!1:u=!0,this._logger.debug("[xhr load done->], tast :",this._range,", start",c,"end ",f+this._receivedLength,",dataLen,",d?d.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",u)}else u=!0,l=e.target.response;var p={ok:a>=200&&a<300,status:a,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(p=this._transformResponse(p,this._url)||p),this._onProgress&&this._onProgress(l,u,{index:this._index,vid:this._vid,range:[c,f+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},p),u?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve(Ko(this._onProgress?null:l,u,p,p.headers["content-length"],p.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted&&(this._aborted=!0,this._runing=!1,Fs(Bi(n.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr))return this._xhr.abort()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}},{key:"_getHeaders",value:function(e){var r=e.getAllResponseHeaders().trim().split(`\r
`),a={},o=Ry(r),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,c=u.split(": ");a[c[0].toLowerCase()]=c.slice(1).join(": ")}}catch(f){o.e(f)}finally{o.f()}return a}}],[{key:"isSupported",value:function(){return typeof XMLHttpRequest<"u"}}]),n}(yr),Wy=["retry","retryDelay","onRetryError","transformError"],Ky=function(){function i(s,n){Gt(this,i),this.promise=tr(),this.alive=!!n.onProgress,!n.logger&&(n.logger=new In("Loader")),this._loaderType=s,this._loader=s===Ai.FETCH&&typeof fetch<"u"?new Xo:new zy,this._config=n,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=n.retryCheckFunc,this._logger=n.logger}return jt(i,[{key:"exec",value:function(){var n=this,t=this._config,e=t.retry,r=t.retryDelay,a=t.onRetryError,o=t.transformError,l=Ly(t,Wy),u=function(){var c=$n(gt().mark(function f(){var h,d,v;return gt().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,n._loader.load(l);case 3:h=p.sent,n.promise.resolve(h),p.next=27;break;case 7:if(p.prev=7,p.t0=p.catch(0),n._loader.running=!1,n._logger.debug("[task request catch err]",p.t0),!n._canceled){p.next=13;break}return p.abrupt("return");case 13:if(p.t0.loaderType=n._loaderType,p.t0.retryCount=n._retryCount,d=p.t0,o&&(d=o(d)||d),a&&n._retryCount>0&&a(d,n._retryCount,{index:l.index,vid:l.vid,range:l.range,priOptions:l.priOptions}),n._retryCount++,v=!0,n._retryCheckFunc&&(v=n._retryCheckFunc(p.t0)),!(v&&n._retryCount<=e)){p.next=26;break}return clearTimeout(n._retryTimer),n._logger.debug("[task request setTimeout],retry",n._retryCount,",retry range,",l.range),n._retryTimer=setTimeout(u,r),p.abrupt("return");case 26:n.promise.reject(d);case 27:case"end":return p.stop()}},f,null,[[0,7]])}));return function(){return c.apply(this,arguments)}}();return u(),this.promise}},{key:"cancel",value:function(){var s=$n(gt().mark(function t(){return gt().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,r.abrupt("return",this._loader.cancel());case 4:case"end":return r.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),i}();function Yy(i){return i&&!i.paused&&!i.ended&&i.playbackRate!==0&&i.readyState!==0}function Xy(i){if(!i)return{};if(typeof i.getVideoPlaybackQuality=="function"){var s=i.getVideoPlaybackQuality();return{droppedVideoFrames:s.droppedVideoFrames||s.corruptedVideoFrames,totalVideoFrames:s.totalVideoFrames,creationTime:s.creationTime}}return{droppedVideoFrames:i.webkitDroppedFrameCount,totalVideoFrames:i.webkitDecodedFrameCount,creationTime:performance.now()}}function Us(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];if(s=s.filter(Boolean),s.length<2)return s[0];var t=new Uint8Array(s.reduce(function(r,a){return r+a.byteLength},0)),e=0;return s.forEach(function(r){t.set(r,e),e+=r.byteLength}),t}function qy(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(s){return setTimeout(s,i)})}var hr=function(i){ls(n,i);var s=us(n);function n(t){var e;return Gt(this,n),e=s.call(this,t),z(me(e),"type",Ai.FETCH),z(me(e),"_queue",[]),z(me(e),"_alive",[]),z(me(e),"_currentTask",null),z(me(e),"_finnalUrl",""),z(me(e),"_config",void 0),e._config=jy(t),(e._config.loaderType===Ai.XHR||!Xo.isSupported())&&(e.type=Ai.XHR),e.log=t.logger,e}return jt(n,[{key:"isFetch",value:function(){return this.type===Ai.FETCH}},{key:"load",value:function(e){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof e=="string"||!e?a.url=e||a.url||this._config.url:a=e,a=Object.assign({},this._config,a),a.params&&(a.params=Object.assign({},a.params)),a.headers&&Ec(a.headers)&&(a.headers=Object.assign({},a.headers)),a.body&&Ec(a.body)&&(a.body=Object.assign({},a.body)),a.transformRequest&&(a=a.transformRequest(a)||a),a.logger=this.log;var o=new Ky(this.type,a);return o.loader.on(_e.REAL_TIME_SPEED,function(l){r.emit(_e.REAL_TIME_SPEED,l)}),this._queue.push(o),this._queue.length===1&&(!this._currentTask||!this._currentTask.running)&&this._processTask(),o.promise}},{key:"cancel",value:function(){var t=$n(gt().mark(function r(){var a;return gt().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=this._queue.map(function(u){return u.cancel()}).concat(this._alive.map(function(u){return u.cancel()})),this._currentTask&&a.push(this._currentTask.cancel()),this._queue=[],this._alive=[],l.next=6,Promise.all(a);case 6:return l.next=8,qy();case 8:case"end":return l.stop()}},r,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_processTask",value:function(){var e=this;if(this._currentTask=this._queue.shift(),!!this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var r=this._currentTask.exec().catch(function(a){});r&&typeof r.finally=="function"&&r.finally(function(){var a,o;(a=e._currentTask)!==null&&a!==void 0&&a.alive&&((o=e._alive)===null||o===void 0?void 0:o.length)>0&&(e._alive=e._alive.filter(function(l){return l&&l!==e._currentTask})),e._processTask()})}}}],[{key:"isFetchSupport",value:function(){return Xo.isSupported()}}]),n}(yr),Jy=function(){function i(){Gt(this,i),z(this,"_prevCurrentTime",0)}return jt(i,[{key:"do",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,e=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(n){var a=n.currentTime,o=0;if(this._prevCurrentTime===a){var l=$t.info($t.get(n),a);if(!l.buffers.length)return;e&&l.nextStart||l.nextStart&&l.nextStart-a<t?o=l.nextStart+.1:l.end&&l.end-a>r&&!n.seeking&&(o=a+.1)}this._prevCurrentTime=a,o&&a!==o&&(n.currentTime=o)}}}]),i}(),Qy=function(){function i(s){var n=this;Gt(this,i),z(this,"_seiSet",new Set),this.emitter=s,s.on(_e.SEI,function(t){t&&n._seiSet.add(t)})}return jt(i,[{key:"throw",value:function(n,t){var e=this;if(!(n==null||!this._seiSet.size)){var r=n-.2,a=n+.2,o=[];this._seiSet.forEach(function(l){l.time>=r&&l.time<=a&&o.push(l)}),o.forEach(function(l){e._seiSet.delete(l),e.emitter.emit(_e.SEI_IN_TIME,l)}),t&&this._seiSet.forEach(function(l){l.time<n-5&&e._seiSet.delete(l)})}}},{key:"reset",value:function(){this._seiSet.clear()}}]),i}(),Zy=1e3,e_=50,t_=3,n_=3e3,i_=function(){function i(s){Gt(this,i),z(this,"_chunkSpeed",0),z(this,"_chunkCache",[]),z(this,"_speeds",[]),z(this,"_totalSize",0),z(this,"_totalCost",0),this._opts=s||{}}return jt(i,[{key:"addRecord",value:function(n,t){!n||!t||(this._speeds.push(8e3*n/t),this._speeds=this._speeds.slice(-t_))}},{key:"addChunkRecord",value:function(n,t){var e,r;if(!(!n||!t||n<(((e=this._opts)===null||e===void 0?void 0:e.skipChunkSize)||Zy))){this._totalSize+=n,this._totalCost+=t,this._chunkSpeed=8e3*n/t,this._chunkCache.push({size:n,duration:t,timestamp:performance.now()});var a=((r=this._opts)===null||r===void 0?void 0:r.chunkCountForSpeed)||e_;this._chunkCache.length>a&&(this._chunkCache=this._chunkCache.slice(-a))}}},{key:"getAvgSpeed",value:function(){var n;if(!this._chunkCache.length&&!this._speeds.length)return 0;if(this._speeds.length)return this._speeds.reduce(function(o,l){return o+=l})/this._speeds.length;var t=this._chunkCache[this._chunkCache.length-1],e=performance.now()-t.timestamp;e>(((n=this._opts)===null||n===void 0?void 0:n.longtimeNoReceived)||n_)&&this._chunkCache.push({size:0,duration:e,timestamp:performance.now()});var r=this._chunkCache.reduce(function(o,l){return o+=l.size},0),a=this._chunkCache.reduce(function(o,l){return o+=l.duration},0);return 8e3*r/a}},{key:"getLatestSpeed",value:function(){return!this._chunkCache.length&&!this._speeds.length?0:this._speeds.length?this._speeds[this._speeds.length-1]:this._chunkSpeed}},{key:"getTotalSize",value:function(){return this._totalSize}},{key:"getTotalCost",value:function(){return this._totalCost}},{key:"reset",value:function(){this._chunkCache=[],this._speeds=[],this._totalSize=0,this._totalCost=0}}]),i}(),Tc=function(){function i(s){Gt(this,i),z(this,"encodeType",""),z(this,"audioCodec",""),z(this,"videoCodec",""),z(this,"domain",""),z(this,"fps",0),z(this,"bitrate",0),z(this,"width",0),z(this,"height",0),z(this,"samplerate",0),z(this,"channelCount",0),z(this,"gop",0),z(this,"_bitsAccumulateSize",0),z(this,"_bitsAccumulateDuration",0),z(this,"_startGopId",-1),this._timescale=s}return jt(i,[{key:"getStats",value:function(){return{encodeType:this.encodeType,audioCodec:this.audioCodec,videoCodec:this.videoCodec,domain:this.domain,fps:this.fps,bitrate:this.bitrate,width:this.width,height:this.height,samplerate:this.samplerate,channelCount:this.channelCount,gop:this.gop}}},{key:"setEncodeType",value:function(n){this.encodeType=n}},{key:"setFpsFromScriptData",value:function(n){var t,e=n.data,r=e==null||(t=e.onMetaData)===null||t===void 0?void 0:t.framerate;r&&r>0&&r<100&&(this.fps=r)}},{key:"setVideoMeta",value:function(n){if(this.width=n.width,this.height=n.height,this.videoCodec=n.codec,this.encodeType=n.codecType,n.fpsNum&&n.fpsDen){var t=n.fpsNum/n.fpsDen;t>0&&t<100&&(this.fps=t)}}},{key:"setAudioMeta",value:function(n){this.audioCodec=n.codec,this.samplerate=n.sampleRate,this.channelCount=n.channelCount}},{key:"setDomain",value:function(n){this.domain=n.split("/").slice(2,3)[0]}},{key:"updateBitrate",value:function(n){var t=this;if((!this.fps||this.fps>=100)&&n.length){var e=n.reduce(function(r,a){return r+=a.duration},0)/n.length;this.fps=Math.round(this._timescale/e)}n.forEach(function(r){t._startGopId===-1&&(t._startGopId=r.gopId),r.gopId===t._startGopId&&t.gop++,t._bitsAccumulateDuration+=r.duration/(t._timescale/1e3),t._bitsAccumulateSize+=r.units.reduce(function(a,o){return a+=o.length},0),t._bitsAccumulateDuration>=1e3&&(t.bitrate=t._bitsAccumulateSize*8,t._bitsAccumulateDuration=0,t._bitsAccumulateSize=0)})}}]),i}(),r_=function(){function i(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;Gt(this,i),z(this,"_core",null),z(this,"_samples",[]),this._core=s,this._timescale=n,this._stats=new Tc(n),this._bindEvents()}return jt(i,[{key:"getStats",value:function(){var n,t,e,r,a,o,l,u,c,f,h,d=((n=this._core)===null||n===void 0?void 0:n.media)||{},v=d.currentTime,m=v===void 0?0:v,p=d.decodeFps,S=p===void 0?0:p;return qr(qr({},this._stats.getStats()),{},{downloadSpeed:((t=this._core)===null||t===void 0||(e=t.speedInfo)===null||e===void 0?void 0:e.call(t).speed)||0,avgSpeed:((r=this._core)===null||r===void 0||(a=r.speedInfo)===null||a===void 0?void 0:a.call(r).avgSpeed)||0,totalReceivedByte:((o=this._core)===null||o===void 0||(l=o.speedInfo)===null||l===void 0?void 0:l.call(o).totalSize)||0,totalReceivedCost:((u=this._core)===null||u===void 0||(c=u.speedInfo)===null||c===void 0?void 0:c.call(u).totalCost)||0,currentTime:m,bufferEnd:((f=this._core)===null||f===void 0||(h=f.bufferInfo())===null||h===void 0?void 0:h.remaining)||0,decodeFps:S})}},{key:"_bindEvents",value:function(){var n=this;this._core.on(_e.DEMUXED_TRACK,function(t){var e=t.videoTrack;return n._stats.updateBitrate(e.samples)}),this._core.on(_e.FLV_SCRIPT_DATA,function(t){n._stats.setFpsFromScriptData(t)}),this._core.on(_e.METADATA_PARSED,function(t){t.type==="video"?n._stats.setVideoMeta(t.track):n._stats.setAudioMeta(t.track)}),this._core.on(_e.TTFB,function(t){n._stats.setDomain(t.responseUrl)})}},{key:"reset",value:function(){this._samples=[],this._stats=new Tc(this._timescale)}}]),i}();function s_(i,s){var n=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(n!=null){var t,e,r,a,o=[],l=!0,u=!1;try{if(r=(n=n.call(i)).next,s===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(t=r.call(n)).done)&&(o.push(t.value),o.length!==s);l=!0);}catch(c){u=!0,e=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw e}}return o}}function at(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}function Cc(i,s){for(var n=0;n<s.length;n++){var t=s[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,Ld(t.key),t)}}function ot(i,s,n){return s&&Cc(i.prototype,s),n&&Cc(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i}function q(i,s,n){return s=Ld(s),s in i?Object.defineProperty(i,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[s]=n,i}function a_(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),s&&qo(i,s)}function ua(i){return ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ua(i)}function qo(i,s){return qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qo(i,s)}function o_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l_(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u_(i,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l_(i)}function c_(i){var s=o_();return function(){var t=ua(i),e;if(s){var r=ua(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return u_(this,e)}}function f_(i,s){return d_(i)||s_(i,s)||Fl(i,s)||g_()}function Ht(i){return h_(i)||v_(i)||Fl(i)||p_()}function h_(i){if(Array.isArray(i))return Jo(i)}function d_(i){if(Array.isArray(i))return i}function v_(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Fl(i,s){if(i){if(typeof i=="string")return Jo(i,s);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jo(i,s)}}function Jo(i,s){(s==null||s>i.length)&&(s=i.length);for(var n=0,t=new Array(s);n<s;n++)t[n]=i[n];return t}function p_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m_(i,s){var n=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!n){if(Array.isArray(i)||(n=Fl(i))||s&&i&&typeof i.length=="number"){n&&(i=n);var t=0,e=function(){};return{s:e,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(l){throw l},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r=!0,a=!1,o;return{s:function(){n=n.call(i)},n:function(){var l=n.next();return r=l.done,l},e:function(l){a=!0,o=l},f:function(){try{!r&&n.return!=null&&n.return()}finally{if(a)throw o}}}}function y_(i,s){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var t=n.call(i,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(i)}function Ld(i){var s=y_(i,"string");return typeof s=="symbol"?s:String(s)}var hi={VIDEO:"video",AUDIO:"audio",METADATA:"metadata"},di={AV1:"av1",AVC:"avc",HEVC:"hevc"},qt={AAC:"aac",G711PCMA:"g7110a",G711PCMU:"g7110m",OPUS:"opus",MP3:"mp3"},ln={LARGE_AV_SHIFT:"LARGE_AV_SHIFT",LARGE_VIDEO_GAP:"LARGE_VIDEO_GAP",LARGE_VIDEO_GAP_BETWEEN_CHUNK:"LARGE_VIDEO_GAP_BETWEEN_CHUNK",LARGE_AUDIO_GAP:"LARGE_AUDIO_GAP",AUDIO_FILLED:"AUDIO_FILLED",AUDIO_DROPPED:"AUDIO_DROPPED"},Id=function(){function i(){at(this,i),q(this,"id",1),q(this,"type",hi.VIDEO),q(this,"codecType",di.AVC),q(this,"pid",-1),q(this,"hvcC",void 0),q(this,"codec",""),q(this,"timescale",0),q(this,"formatTimescale",0),q(this,"sequenceNumber",0),q(this,"baseMediaDecodeTime",0),q(this,"baseDts",0),q(this,"duration",0),q(this,"warnings",[]),q(this,"samples",[]),q(this,"pps",[]),q(this,"sps",[]),q(this,"vps",[]),q(this,"fpsNum",0),q(this,"fpsDen",0),q(this,"sarRatio",[]),q(this,"width",0),q(this,"height",0),q(this,"nalUnitSize",4),q(this,"present",!1),q(this,"isVideoEncryption",!1),q(this,"isAudioEncryption",!1),q(this,"isVideo",!0),q(this,"lastKeyFrameDts",0),q(this,"kid",null),q(this,"pssh",null),q(this,"ext",void 0)}return ot(i,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var n=this.samples[0],t=this.samples[this.samples.length-1];return t.dts-n.dts+t.duration}return 0}},{key:"exist",value:function(){return/av01/.test(this.codec)?!0:!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),i}(),Dd=function(){function i(){at(this,i),q(this,"id",2),q(this,"type",hi.AUDIO),q(this,"codecType",qt.AAC),q(this,"pid",-1),q(this,"codec",""),q(this,"container",""),q(this,"sequenceNumber",0),q(this,"sampleDuration",0),q(this,"timescale",0),q(this,"formatTimescale",0),q(this,"baseMediaDecodeTime",0),q(this,"duration",0),q(this,"warnings",[]),q(this,"samples",[]),q(this,"baseDts",0),q(this,"sampleSize",16),q(this,"sampleRate",0),q(this,"channelCount",0),q(this,"objectType",0),q(this,"sampleRateIndex",0),q(this,"config",[]),q(this,"present",!1),q(this,"isVideoEncryption",!1),q(this,"isAudioEncryption",!1),q(this,"kid",null),q(this,"ext",void 0)}return ot(i,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&(this.codec||this.container)&&(this.codecType===qt.AAC||this.codecType===qt.G711PCMA||this.codecType===qt.G711PCMU||this.codecType===qt.OPUS||this.codecType===qt.MP3))}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var n=this.samples[0],t=this.samples[this.samples.length-1];return t.dts-n.dts+t.duration}return 0}}]),i}(),Qo=function(){function i(s,n,t){at(this,i),q(this,"flag",{}),q(this,"keyframe",!1),q(this,"gopId",0),q(this,"duration",0),q(this,"size",0),q(this,"units",[]),q(this,"chromaFormat",420),this.originPts=this.pts=s,this.originDts=this.dts=n,t&&(this.units=t)}return ot(i,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),i}(),Mr=ot(function i(s,n,t,e){at(this,i),q(this,"duration",1024),q(this,"flag",{dependsOn:2,isNonSyncSample:0}),q(this,"keyframe",!0),this.originPts=this.pts=this.dts=s,this.data=n,this.size=n.byteLength,this.sampleOffset=e,t&&(this.duration=t)}),__=ot(function i(s,n){at(this,i),q(this,"time",0),this.data=s,this.originPts=this.pts=n}),b_=function(i){a_(n,i);var s=c_(n);function n(){return at(this,n),s.apply(this,arguments)}return ot(n)}(__),Od=function(){function i(){at(this,i),q(this,"id",3),q(this,"type",hi.METADATA),q(this,"timescale",0),q(this,"flvScriptSamples",[]),q(this,"seiSamples",[])}return ot(i,[{key:"exist",value:function(){return!!((this.flvScriptSamples.length||this.seiSamples.length)&&this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!!(this.flvScriptSamples.length||this.seiSamples.length)}}]),i}(),ca=function(){function i(s){at(this,i),this.name=s||"",this._prefix="[".concat(this.name,"]")}return ot(i,[{key:"warn",value:function(){var n;if(!i.disabled){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];(n=console).warn.apply(n,[this._prefix].concat(e))}}}],[{key:"enable",value:function(){i.disabled=!1}},{key:"disable",value:function(){i.disabled=!0}}]),i}();q(ca,"disabled",!0);var Ra=typeof window<"u",Ul=Ra&&navigator.userAgent.toLocaleLowerCase(),S_=Ra&&/^((?!chrome|android).)*safari/.test(Ul),Rd=Ra&&Ul.includes("firefox"),E_=Ra&&Ul.includes("android"),Vn=function(){function i(){at(this,i)}return ot(i,null,[{key:"getRateIndexByRate",value:function(n){return i.FREQ.indexOf(n)}},{key:"parseADTS",value:function(n,t){for(var e=n.length,r=0;r+2<e&&!(n[r]===255&&(n[r+1]&246)===240);)r++;if(!(r>=e)){var a=r,o=[],l=(n[r+2]&60)>>>2,u=i.FREQ[l];if(!u)throw new Error("Invalid sampling index: ".concat(l));for(var c=((n[r+2]&192)>>>6)+1,f=(n[r+2]&1)<<2|(n[r+3]&192)>>>6,h=i._getConfig(l,f,c),d=h.config,v=h.codec,m,p,S=0,C=i.getFrameDuration(u);r+7<e;){if(n[r]!==255||(n[r+1]&246)!==240){r++;continue}if(p=(n[r+3]&3)<<11|n[r+4]<<3|(n[r+5]&224)>>5,!p||e-r<p)break;m=(~n[r+1]&1)*2,o.push({pts:t+S*C,data:n.subarray(r+7+m,r+p)}),S++,r+=p}return{skip:a,remaining:r>=e?void 0:n.subarray(r),frames:o,samplingFrequencyIndex:l,sampleRate:u,objectType:c,channelCount:f,codec:v,config:d,originCodec:"mp4a.40.".concat(c)}}}},{key:"parseAudioSpecificConfig",value:function(n){if(n.length){var t=n[0]>>>3,e=(n[0]&7)<<1|n[1]>>>7,r=(n[1]&120)>>>3,a=i.FREQ[e];if(a){var o=i._getConfig(e,r,t),l=o.config,u=o.codec;return{samplingFrequencyIndex:e,sampleRate:a,objectType:t,channelCount:r,config:l,codec:u,originCodec:"mp4a.40.".concat(t)}}}}},{key:"getFrameDuration",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4;return 1024*t/n}},{key:"_getConfig",value:function(n,t,e){var r=[],a,o;return Rd?n>=6?(a=5,o=n-3):(a=2,o=n):E_?(a=2,o=n):(a=5,o=n,n>=6?o=n-3:t===1&&(a=2,o=n)),r[0]=a<<3,r[0]|=(n&14)>>1,r[1]=(n&1)<<7,r[1]|=t<<3,a===5&&(r[1]|=(o&14)>>1,r[2]=(o&1)<<7,r[2]|=8,r[3]=0),{config:r,codec:"mp4a.40.".concat(a)}}},{key:"getSilentFrame",value:function(n,t){switch(n){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}]),i}();q(Vn,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);function Yt(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];s=s.filter(Boolean);var t=new Uint8Array(s.reduce(function(r,a){return r+a.byteLength},0)),e=0;return s.forEach(function(r){t.set(r,e),e+=r.byteLength}),t}var k_=Math.pow(2,32);function tt(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i[s]<<8)+(i[s+1]||0)}function w_(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i[s]<<16)+(i[s+1]<<8)+(i[s+2]||0)}function oe(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(i[s]<<24>>>0)+(i[s+1]<<16)+(i[s+2]<<8)+(i[s+3]||0)}function wi(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return oe(i,s)*k_+oe(i,s+4)}function Md(i){for(var s="avc1.",n,t=0;t<3;t++)n=i[t].toString(16),n.length<2&&(n="0".concat(n)),s+=n;return s}function Pc(i){if(!Array.isArray(i)){for(var s=[],n="",t=0;t<i.length;t++)t%2&&(n=i[t-1]+i[t],s.push(parseInt(n,16)),n="");return s}return i.map(function(e){return parseInt(e,16)})}function ho(i,s){return+(i+"."+s)}function T_(i){if(i.length<5)return 0;var s=Math.hypot(i[0],i[3]),n=Math.hypot(i[1],i[4]);return s===0||n===0?0:180*Math.atan2(i[1]/n,i[0]/s)/Math.PI}var li=function(){function i(){at(this,i)}return ot(i,null,[{key:"parseAnnexB",value:function(n){var t=n.byteLength-1,e=0;do{if(n[t]===0)e++;else break;t--}while(t>0);e>=3&&(n=n.subarray(0,t+1));for(var r=n.length,a=2,o=0;n[a]!==null&&n[a]!==void 0&&n[a]!==1;)a++;if(a++,o=a+2,o>=r)return[];for(var l=[];o<r;)switch(n[o]){case 0:if(n[o-1]!==0){o+=2;break}else if(n[o-2]!==0){o++;break}else if(o<r-1&&n[o+1]!==1){o++;break}a!==o-2&&l.push(n.subarray(a,o-2));do o++;while(n[o]!==1&&o<r);a=o+1,o=a+2;break;case 1:if(n[o-1]!==0||n[o-2]!==0){o+=3;break}a!==o-2&&l.push(n.subarray(a,o-2)),a=o+1,o=a+2;break;default:o+=3;break}return a<r&&l.push(n.subarray(a)),l}},{key:"parseAvcC",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;if(!(n.length<4)){for(var e=n.length,r=[],a=0,o;a+t<e;)if(o=oe(n,a),t===3&&(o>>>=8),a+=t,!!o){if(a+o>e)break;r.push(n.subarray(a,a+o)),a+=o}return r}}},{key:"parseSEI",value:function(n,t){for(var e=n.length,r=t?2:1,a=0,o=0,l="";n[r]===255;)a+=255,r++;for(a+=n[r++];n[r]===255;)o+=255,r++;if(o+=n[r++],a===5&&e>r+16)for(var u=0;u<16;u++)l+=n[r].toString(16),r++;return{payload:n.subarray(r,r+o),type:a,size:o,uuid:l}}},{key:"removeEPB",value:function(n){for(var t=n.byteLength,e=[],r=1;r<t-2;)n[r]===0&&n[r+1]===0&&n[r+2]===3?(e.push(r+2),r+=2):r++;if(!e.length)return n;var a=t-e.length,o=new Uint8Array(a),l=0;for(r=0;r<a;l++,r++)l===e[0]&&(l++,e.shift()),o[r]=n[l];return o}}]),i}(),Zo=function(){function i(s){if(at(this,i),q(this,"_bytesAvailable",void 0),q(this,"_bitsAvailable",0),q(this,"_word",0),!s)throw new Error("ExpGolomb data params is required");this._data=s,this._bytesAvailable=s.byteLength,this._bytesAvailable&&this._loadWord()}return ot(i,[{key:"bitsAvailable",get:function(){return this._bitsAvailable}},{key:"_loadWord",value:function(){var n=this._data.byteLength-this._bytesAvailable,t=Math.min(4,this._bytesAvailable);if(t===0)throw new Error("No bytes available");var e=new Uint8Array(4);e.set(this._data.subarray(n,n+t)),this._word=new DataView(e.buffer).getUint32(0),this._bitsAvailable=t*8,this._bytesAvailable-=t}},{key:"skipBits",value:function(n){if(this._bitsAvailable>n)this._word<<=n,this._bitsAvailable-=n;else{n-=this._bitsAvailable;var t=Math.floor(n/8);n-=t*8,this._bytesAvailable-=t,this._loadWord(),this._word<<=n,this._bitsAvailable-=n}}},{key:"readBits",value:function(n){if(n>32)throw new Error("Cannot read more than 32 bits");var t=Math.min(this._bitsAvailable,n),e=this._word>>>32-t;return this._bitsAvailable-=t,this._bitsAvailable>0?this._word<<=t:this._bytesAvailable>0&&this._loadWord(),t=n-t,t>0&&this._bitsAvailable?e<<t|this.readBits(t):e}},{key:"skipLZ",value:function(){var n;for(n=0;n<this._bitsAvailable;++n)if(this._word&2147483648>>>n)return this._word<<=n,this._bitsAvailable-=n,n;return this._loadWord(),n+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var n=this.skipLZ();return this.readBits(n+1)-1}},{key:"readEG",value:function(){var n=this.readUEG();return 1&n?1+n>>>1:-1*(n>>>1)}},{key:"readBool",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(n){for(var t=8,e=8,r,a=0;a<n;a++)e!==0&&(r=this.readEG(),e=(t+r+256)%256),t=e===0?t:e}}]),i}(),C_=function(){function i(){at(this,i)}return ot(i,null,[{key:"parseAVCDecoderConfigurationRecord",value:function(n){if(!(n.length<7)){for(var t=(n[4]&3)+1,e,r=[],a=[],o=6,l=n[5]&31,u,c=0;c<l;c++)if(u=n[o]<<8|n[o+1],o+=2,!!u){var f=n.subarray(o,o+u);o+=u,r.push(f),e||(e=i.parseSPS(li.removeEPB(f)))}var h=n[o];o++;for(var d,v=0;v<h;v++)d=n[o]<<8|n[o+1],o+=2,d&&(a.push(n.subarray(o,o+d)),o+=d);return{sps:e,spsArr:r,ppsArr:a,nalUnitSize:t}}}},{key:"parseSPS",value:function(n){var t=new Zo(n);t.readUByte();var e=t.readUByte(),r=t.readUByte(),a=t.readUByte();t.skipUEG();var o=420;if(e===100||e===110||e===122||e===244||e===44||e===83||e===86||e===118||e===128||e===138||e===144){var l=t.readUEG();if(l<=3&&(o=[0,420,422,444][l]),l===3&&t.skipBits(1),t.skipUEG(),t.skipUEG(),t.skipBits(1),t.readBool())for(var u=l!==3?8:12,c=0;c<u;c++)t.readBool()&&(c<6?t.skipScalingList(16):t.skipScalingList(64))}t.skipUEG();var f=t.readUEG();if(f===0)t.readUEG();else if(f===1){t.skipBits(1),t.skipUEG(),t.skipUEG();for(var h=t.readUEG(),d=0;d<h;d++)t.skipUEG()}t.skipUEG(),t.skipBits(1);var v=t.readUEG(),m=t.readUEG(),p=t.readBits(1);p===0&&t.skipBits(1),t.skipBits(1);var S=0,C=0,_=0,E=0;t.readBool()&&(S=t.readUEG(),C=t.readUEG(),_=t.readUEG(),E=t.readUEG());var k,N,I,U,D;if(t.readBool()){if(t.readBool()){var O=t.readUByte();switch(O){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:{k=[t.readUByte()<<8|t.readUByte(),t.readUByte()<<8|t.readUByte()];break}}}if(t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(4),t.readBool()&&t.readBits(24)),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool()){var K=t.readBits(32),y=t.readBits(32);N=t.readBool(),I=y,U=K*2,D=I/U}}return{codec:Md(n.subarray(1,4)),profileIdc:e,profileCompatibility:r,levelIdc:a,chromaFormat:o,width:Math.ceil((v+1)*16-2*(S+C)),height:(2-p)*(m+1)*16-(p?2:4)*(_+E),sarRatio:k,fpsNum:I,fpsDen:U,fps:D,fixedFrame:N}}}]),i}(),Ac=function(){function i(){at(this,i)}return ot(i,null,[{key:"parseHEVCDecoderConfigurationRecord",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(n.length<23)){t=t||{};for(var e=(n[21]&3)+1,r,a,o=[],l=[],u=[],c=23,f=n[22],h,d,v,m=0;m<f;m++){h=n[c]&63,d=n[c+1]<<8|n[c+2],c+=3;for(var p=0;p<d;p++)if(v=n[c]<<8|n[c+1],c+=2,!!v){switch(h){case 32:{var S=n.subarray(c,c+v);r||(r=i.parseVPS(li.removeEPB(S),t)),u.push(S)}break;case 33:{var C=n.subarray(c,c+v);a||(a=i.parseSPS(li.removeEPB(C),t)),o.push(C)}break;case 34:l.push(n.subarray(c,c+v));break}c+=v}}return{hvcC:t,sps:a,spsArr:o,ppsArr:l,vpsArr:u,nalUnitSize:e}}}},{key:"parseVPS",value:function(n,t){t=t||{};var e=new Zo(n);e.readUByte(),e.readUByte(),e.readBits(12);var r=e.readBits(3);return t.numTemporalLayers=Math.max(t.numTemporalLayers||0,r+1),e.readBits(17),i._parseProfileTierLevel(e,r,t),t}},{key:"parseSPS",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=t||{};var e=new Zo(n);e.readUByte(),e.readUByte(),e.readBits(4);var r=e.readBits(3);t.numTemporalLayers=Math.max(r+1,t.numTemporalLayers||0),t.temporalIdNested=e.readBits(1),i._parseProfileTierLevel(e,r,t),e.readUEG();var a=t.chromaFormatIdc=e.readUEG(),o=420;a<=3&&(o=[0,420,422,444][a]);var l=0;a===3&&(l=e.readBits(1));var u=e.readUEG(),c=e.readUEG(),f=e.readBits(1),h,d,v,m;if(f===1&&(h=e.readUEG(),d=e.readUEG(),v=e.readUEG(),m=e.readUEG()),t.bitDepthLumaMinus8=e.readUEG(),t.bitDepthChromaMinus8=e.readUEG(),f===1){var p=(a===1||a===2)&&l===0?2:1,S=a===1&&l===0?2:1;u-=p*(d+h),c-=S*(m+v)}return{codec:"hev1.1.6.L93.B0",width:u,height:c,chromaFormat:o,hvcC:t}}},{key:"_parseProfileTierLevel",value:function(n,t,e){var r=e.generalTierFlag||0;e.generalProfileSpace=n.readBits(2),e.generalTierFlag=Math.max(n.readBits(1),r),e.generalProfileIdc=Math.max(n.readBits(5),e.generalProfileIdc||0),e.generalProfileCompatibilityFlags=n.readBits(32),e.generalConstraintIndicatorFlags=[n.readBits(8),n.readBits(8),n.readBits(8),n.readBits(8),n.readBits(8),n.readBits(8)];var a=n.readBits(8);r<e.generalTierFlag?e.generalLevelIdc=a:e.generalLevelIdc=Math.max(a,e.generalLevelIdc||0);var o=[],l=[];if(t>n.bitsAvailable)throw new Error("maxSubLayersMinus inavlid size ".concat(t));for(var u=0;u<t;u++)o[u]=n.readBits(1),l[u]=n.readBits(1);t>0&&n.readBits((8-t)*2);for(var c=0;c<t;c++)o[c]!==0&&(n.readBits(2),n.readBits(1),n.readBits(5),n.readBits(16),n.readBits(16),n.readBits(4),n.readBits(16),n.readBits(16),n.readBits(12)),l[c]!==0&&n.readBits(8)}}]),i}(),P_=9e4/2,xc=3,Cs=9e4,vo=5*9e4,po=9e4,A_=9e4/2,x_=9e4*5,L_=function(){function i(s,n,t,e){at(this,i),this.videoTrack=s,this.audioTrack=n,this.metadataTrack=t,this._baseDts=-1,this._baseVideoDts=-1,this._baseAudioDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=!1,this._videoTimestampBreak=!1,this._lastAudioExceptionGapDot=0,this._lastAudioExceptionOverlapDot=0,this._lastAudioExceptionLargeGapDot=0,this._needForceFixLargeGap=e==null?void 0:e.forceFixLargeGap,this._largeGapThreshold=(e==null?void 0:e.largeGapThreshold)||x_}return ot(i,[{key:"fix",value:function(){var n=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t=Math.round(t*9e4);var a=this.videoTrack,o=this.audioTrack,l=a.samples,u=o.samples;if(!(!l.length&&!u.length)){var c=l[0],f=u[0],h=0;if(l.length&&u.length&&(h=c.dts-f.pts),this._baseDtsInited||this._calculateBaseDts(this.audioTrack,this.videoTrack),e&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t,this._baseAudioDts-=t,this._baseVideoDts-=t),!r){this._videoNextDts=h>0?t+h:t,this._audioNextPts=h>0?t:t-h,this._needForceFixLargeGap&&(this._videoNextDts=0,this._audioNextPts=0);var d=c?c.dts-this._baseDts-this._videoNextDts:0,v=f?f.pts-this._baseDts-this._audioNextPts:0;Math.abs(d||v)>po&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t)}if(this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(o),this._fixVideo(a),this.metadataTrack.exist()){var m=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach(function(p){p.pts=p.originPts-n._baseDts,p.time=Math.max(0,p.pts)/m})}a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].dts),o.samples.length&&(o.baseMediaDecodeTime=o.samples[0].pts*o.timescale/9e4)}}},{key:"_fixVideo",value:function(n){var t=this,e=n.samples;if(e.length){if(e.forEach(function(I){I.dts-=t._needForceFixLargeGap?t._baseVideoDts:t._baseDts,I.pts-=t._needForceFixLargeGap?t._baseVideoDts:t._baseDts}),this._videoNextDts===void 0){var r=e[0];this._videoNextDts=r.dts}var a=e.length,o=0,l=e[0],u=e[1],c=this._videoNextDts-l.dts;if(Math.abs(c)>A_){var f;if(n.warnings.push({type:ln.LARGE_VIDEO_GAP_BETWEEN_CHUNK,nextDts:this._videoNextDts/90,firstSampleDts:l.dts/90,nextSampleDts:(((f=e[1])===null||f===void 0?void 0:f.dts)||0)/90,sampleDuration:c/90}),l.dts+=c,l.pts+=c,u&&Math.abs(u.dts-l.dts)>po)this._videoTimestampBreak=!0,e.forEach(function(I,U){U!==0&&(I.dts+=c,I.pts+=c)});else for(var h=1;h<=a-1;h++){var d,v=(d=e[h])===null||d===void 0?void 0:d.dts,m=e[h-1].dts;v&&v-m<0&&(e[h].dts+=c,e[h].pts+=c)}}var p;if(n.fpsNum&&n.fpsDen&&(p=n.timescale*(n.fpsDen/n.fpsNum)),p<90*10&&(p=0),!p){var S=n.samples[0],C=n.samples[1];p=a===1?9e3:Math.floor(C.dts-S.dts)}for(var _=0;_<a;_++){var E=e[_].dts,k=e[_+1];if(_<a-1?o=k.dts-E:e[_-1]?o=Math.min(E-e[_-1].dts,p):o=p,o>po||o<0){this._videoTimestampBreak=!0,o=this._audioTimestampBreak?p:Math.max(o,30*90);var N=this._audioNextPts||0;k&&k.dts>N&&(o=p),n.warnings.push({type:ln.LARGE_VIDEO_GAP,time:E/n.timescale,dts:E,originDts:e[_].originDts,nextDts:this._videoNextDts,sampleDuration:o,refSampleDuration:p})}e[_].duration=o,this._videoNextDts+=o}}}},{key:"_fixAudio",value:function(n){var t=this,e=n.samples;if(e.length){if(n.codecType===qt.MP3){this.lastAudioSample&&e.unshift(this.lastAudioSample);for(var r=0;r<e.length;r++){var a=e[r];if(e[r+1])a.duration=e[r+1].pts-a.pts;else break;a.pts-=this._baseDts,a.dts=a.pts}this.lastAudioSample=e.pop();return}e.forEach(function(o){o.pts-=t._needForceFixLargeGap?t._baseAudioDts:t._baseDts,o.dts=o.pts}),this._doFixAudioInternal(n,e,9e4)}}},{key:"_calculateBaseDts",value:function(n,t){var e=n.samples,r=t.samples;if(!e.length&&!r.length)return!1;var a=1/0,o=1/0;e.length&&(n.baseDts=a=e[0].pts,this._baseAudioDts=a),r.length&&(t.baseDts=o=r[0].dts,this._baseVideoDts=o),this._baseDts=Math.min(a,o);var l=o-a,u=!1;return Number.isFinite(l)&&Math.abs(l)>P_&&t.warnings.push({type:ln.LARGE_AV_SHIFT,videoBaseDts:o,audioBasePts:a,baseDts:this._baseDts,delta:l}),Number.isFinite(l)&&Math.abs(l)>this._largeGapThreshold*Cs&&(u=!0),this._baseDtsInited||(u&&this._needForceFixLargeGap?this._needForceFixLargeGap=!0:this._needForceFixLargeGap=!1),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){if(this._baseDtsInited&&this._videoTimestampBreak&&this._audioTimestampBreak){var n=this._calculateBaseDts(this.audioTrack,this.videoTrack);if(!n)return;this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts),this._audioLastSample=null,this._videoLastSample=null,this._videoTimestampBreak=!1,this._audioTimestampBreak=!1}}},{key:"_doFixAudioInternal",value:function(n,t,e){n.sampleDuration||(n.sampleDuration=Vn.getFrameDuration(n.timescale,e));var r=n.sampleDuration;if(this._audioNextPts===void 0){var a=t[0];this._audioNextPts=a.pts}for(var o=0;o<t.length;o++){var l=this._audioNextPts,u=t[o],c=u.pts-l;if(!this._audioTimestampBreak&&c>=xc*r&&c<=Cs&&!S_){var f=Vn.getSilentFrame(n.codec,n.channelCount)||t[0].data.subarray(),h=Math.floor(c/r);Math.abs(u.pts-this._lastAudioExceptionGapDot)>vo&&(this._lastAudioExceptionGapDot=u.pts),n.warnings.push({type:ln.AUDIO_FILLED,pts:u.pts/90,originPts:u.originPts,count:h,nextPts:l/90,refSampleDuration:r});for(var d=0;d<h;d++){var v=new Mr(Math.floor(l),f);v.originPts=Math.floor(this._baseDts+l),t.splice(o,0,v),this._audioNextPts+=r,o++}o--}else c<=-xc*r&&c>=-1*Cs?(Math.abs(u.pts-this._lastAudioExceptionOverlapDot)>vo&&(this._lastAudioExceptionOverlapDot=u.pts,n.warnings.push({type:ln.AUDIO_DROPPED,pts:u.pts/90,originPts:u.originPts,nextPts:l/90,refSampleDuration:r})),t.splice(o,1),o--):(Math.abs(c)>=Cs&&(this._audioTimestampBreak=!0,Math.abs(u.pts-this._lastAudioExceptionLargeGapDot)>vo&&(this._lastAudioExceptionLargeGapDot=u.pts,n.warnings.push({type:ln.LARGE_AUDIO_GAP,time:u.pts/1e3,pts:u.pts/90,originPts:u.originPts,nextPts:l/90,sampleDuration:c,refSampleDuration:r}))),u.dts=u.pts=l,this._audioNextPts+=r)}}}]),i}(),I_=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],D_=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],O_=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],R_=[0,1,1,4],Ps=null,Lc=function(){function i(){at(this,i)}return ot(i,null,[{key:"isHeader",value:function(n,t){return t+1<n.length&&n[t]===255&&(n[t+1]&224)===224&&(n[t+1]&6)!==0}},{key:"appendFrame",value:function(n,t,e,r,a){if(!(e+24>t.length)){var o=i.parseHeader(t,e);if(o&&e+o.frameLength<=t.length){var l=o.samplesPerFrame*9e4/o.sampleRate,u=r+a*l,c={data:t.subarray(e,e+o.frameLength),pts:u,dts:u};return c.size=c.data.byteLength,n.config=[],n.channelCount=o.channelCount,n.sampleRate=o.sampleRate,Rd?n.codec="mp3":n.container="audio/mpeg",n.samples.push(c),{length:o.frameLength}}}}},{key:"parseHeader",value:function(n,t){var e=n[t+1]>>3&3,r=n[t+1]>>1&3,a=n[t+2]>>4&15,o=n[t+2]>>2&3;if(e!==1&&a!==0&&a!==15&&o!==3){var l=n[t+2]>>1&1,u=n[t+3]>>6,c=e===3?3-r:r===3?3:4,f=I_[c*14+a-1]*1e3,h=e===3?0:e===2?1:2,d=D_[h*3+o],v=u===3?1:2,m=O_[e][r],p=R_[r],S=m*8*p,C=Math.floor(m*f/d+l)*p;if(Ps===null){var _=navigator.userAgent||"",E=_.match(/Chrome\/(\d+)/i);Ps=E?parseInt(E[1]):0}var k=!!Ps&&Ps<=87;return k&&r===2&&f>=224e3&&u===0&&(n[t+3]=n[t+3]|128),{sampleRate:d,channelCount:v,frameLength:C,samplesPerFrame:S}}}}]),i}(),sn=new ca("TsDemuxer"),Nd=function(){function i(s,n,t){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};at(this,i),q(this,"_pmtId",-1),q(this,"_remainingPacketData",null),q(this,"_videoPesData",[]),q(this,"_audioPesData",[]),q(this,"_gopId",0),this.videoTrack=s||new Id,this.audioTrack=n||new Dd,this.metadataTrack=t||new Od,this._fixer=new L_(this.videoTrack,this.audioTrack,this.metadataTrack,e)}return ot(i,[{key:"demux",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=this.audioTrack,a=this.videoTrack,o=this.metadataTrack;t&&(this._pmtId=-1,a.reset(),r.reset(),o.reset()),!e||t?(this._remainingPacketData=null,this._videoPesData=[],this._audioPesData=[]):(a.samples=[],r.samples=[],o.seiSamples=[],a.warnings=[],r.warnings=[],this._remainingPacketData&&(n=Yt(this._remainingPacketData,n),this._remainingPacketData=null));var l=n.length,u=l%188;u&&(this._remainingPacketData=n.subarray(l-u),l-=u);for(var c=a.pid,f=r.pid,h=0;h<l;h+=188){if(n[h]!==71)throw new Error("TS packet did not start with 0x47");var d=!!(n[h+1]&64),v=((n[h+1]&31)<<8)+n[h+2],m=(n[h+3]&48)>>4,p=void 0;if(m>1){if(p=h+5+n[h+4],p===h+188)continue}else p=h+4;switch(v){case 0:d&&(p+=n[p]+1),this._pmtId=(n[p+10]&31)<<8|n[p+11];break;case this._pmtId:{d&&(p+=n[p]+1);var S=p+3+((n[p+1]&15)<<8|n[p+2])-4,C=(n[p+10]&15)<<8|n[p+11];for(p+=12+C;p<S;){var _=(n[p+1]&31)<<8|n[p+2];switch(n[p]){case 15:r.pid=f=_;break;case 3:case 4:r.pid===-1&&(r.pid=f=_,r.codecType=qt.MP3);break;case 27:if(c!==-1)break;a.codecType=di.AVC,a.pid=c=_;break;case 36:if(c!==-1)break;a.codecType=di.HEVC,a.pid=c=_;break;default:sn.warn("Unsupported stream. type: ".concat(n[p],", pid: ").concat(_))}p+=((n[p+3]&15)<<8|n[p+4])+5}}break;case c:d&&this._videoPesData.length&&this._parseVideoData(),this._videoPesData.push(n.subarray(p,h+188));break;case f:d&&this._audioPesData.length&&this._parseAudioData(),this._audioPesData.push(n.subarray(p,h+188));break;case 17:case 8191:break;default:sn.warn("Unknown pid: ".concat(v))}}return this._parseVideoData(),this._parseAudioData(),r.formatTimescale=a.formatTimescale=a.timescale=o.timescale=9e4,r.timescale=r.sampleRate||0,{videoTrack:a,audioTrack:r,metadataTrack:o}}},{key:"fix",value:function(n,t,e){return this._fixer.fix(n,t,e),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(n,t,e,r){return this.demux(n,t,e),this.fix(r,t,e)}},{key:"_parseVideoData",value:function(){if(this._videoPesData.length){var n=i._parsePES(Yt.apply(void 0,Ht(this._videoPesData)));if(!n){sn.warn("Cannot parse video pes",this._videoPesData);return}var t=li.parseAnnexB(n.data);t?this._createVideoSample(t,n.pts,n.dts):sn.warn("Cannot parse avc units",n),this._videoPesData=[]}}},{key:"_createVideoSample",value:function(n,t,e){var r=this;if(n.length){var a=this.videoTrack,o=a.codecType===di.HEVC,l=new Qo(t,e);n.forEach(function(u){var c=o?u[0]>>>1&63:u[0]&31;switch(c){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!o&&c!==5||o&&c===5)break;l.setToKeyframe(),r._gopId++;break;case 6:case 39:case 40:if(!o&&c!==6||o&&c===6)break;r.metadataTrack.seiSamples.push(new b_(li.parseSEI(li.removeEPB(u),o),t));return;case 32:if(!o)break;if(!a.vps.length){var f=Ac.parseVPS(li.removeEPB(u),a.hvcC);a.hvcC=a.hvcC||f,a.vps=[u]}break;case 7:case 33:if(!o&&c!==7||o&&c===7)break;if(!a.sps.length){var h=li.removeEPB(u),d=o?Ac.parseSPS(h,a.hvcC):C_.parseSPS(h);a.sps=[u],a.hvcC=a.hvcC||d.hvcC,a.codec=d.codec,a.width=d.width,a.height=d.height,a.sarRatio=d.sarRatio,a.fpsNum=d.fpsNum,a.fpsDen=d.fpsDen}break;case 8:case 34:if(!o&&c!==8||o&&c===8)break;a.pps.length||(a.pps=[u]);break;case 9:case 35:break;case 38:if(o){for(var v=!1,m=2;m<u.byteLength;m++)if(u[m]===255){v=!0;break}if(!v)return}break}l.units.push(u)}),l.gopId=this._gopId,this._pushVideoSample(a,l)}}},{key:"_pushVideoSample",value:function(n,t){if(t.units.length)if(t.pts===null||t.pts===void 0){sn.warn("Video sample no pts",t);var e=n.samples[n.samples.length-1];e?(t.pts=e.pts,t.dts=e.dts):sn.warn("Drop video sample",t)}else n.samples.push(t)}},{key:"_parseAudioData",value:function(){if(this._audioPesData.length){var n=i._parsePES(Yt.apply(void 0,Ht(this._audioPesData)));if(!n){sn.warn("Cannot parse audio pes",this._audioPesData);return}switch(this.audioTrack.codecType){case qt.AAC:this._parseAacData(n);break;case qt.MP3:this._parseMPEG(n);break}this._audioPesData=[]}}},{key:"_parseAacData",value:function(n){var t=this.audioTrack,e=n.pts;if(e==null){if(sn.warn("AAC pes not pts",t),!t.samples.length||!t.sampleRate)return;e=t.samples[t.samples.length-1].pts+Vn.getFrameDuration(t.sampleRate)}var r=Vn.parseADTS(n.data,e);if(r){var a;t.codec=r.codec,t.channelCount=r.channelCount,t.sampleRate=r.sampleRate,t.objectType=r.objectType,t.sampleRateIndex=r.samplingFrequencyIndex,t.config=r.config,(a=t.samples).push.apply(a,Ht(r.frames.map(function(o){return new Mr(o.pts,o.data)}))),r.skip&&sn.warn("Skip aac adts ".concat(r.skip," bits")),r.remaining&&sn.warn("Remaining aac adts ".concat(r.remaining," bits"))}else sn.warn("Cannot parse aac adts",n)}},{key:"_parseMPEG",value:function(n){var t=n.data,e=t.length,r=0,a=0,o=n.pts;if(o===void 0){sn.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<e;)if(Lc.isHeader(t,a)){var l=Lc.appendFrame(this.audioTrack,t,a,o,r);if(l)a+=l.length,r++;else break}else a++}}],[{key:"probe",value:function(n){return n.length?n[0]===71&&n[188]===71&&n[376]===71:!1}},{key:"_parsePES",value:function(n){var t=n[8];if(!(t==null||n.length<t+9)){var e=n[0]<<16|n[1]<<8|n[2];if(e===1){var r=(n[4]<<8)+n[5];if(!(r&&r>n.length-6)){var a,o,l=n[7];return l&192&&(a=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,l&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,a-o>60*9e4&&(a=o)):o=a),{data:n.subarray(9+t),pts:a,dts:o}}}}}}]),i}(),go=function(){function i(s,n,t){at(this,i),this.dv=new DataView(s),this.start=this.offset=n||this.dv.byteOffset,this.end=t?this.start+t:this.start+this.dv.byteLength}return ot(i,[{key:"buffer",get:function(){return this.dv.buffer}},{key:"unreadLength",get:function(){return Math.max(this.end-this.offset,0)}},{key:"size",get:function(){return this.end-this.start}},{key:"readFloat",value:function(n){var t=0;switch(n){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("read ".concat(n,"-byte float is not supported"))}return this.offset+=n,t}},{key:"back",value:function(n){this.offset-=n}},{key:"skip",value:function(n){this.offset+=n}},{key:"readInt",value:function(n){var t=this.offset;switch(this.offset+=n,n){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("read ".concat(n,"-byte integers is not supported"))}}},{key:"read",value:function(n){var t=this.offset;switch(this.offset+=n,n){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return(this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2);case 4:return this.dv.getUint32(t);default:return this.back(n-4),this.read(n-4)+this.dv.getUint32(t)*Math.pow(256,n-4)}}},{key:"write",value:function(n,t){var e=this.offset;switch(this.offset+=n,n){case 1:return this.dv.setUint8(e,t);case 2:return this.dv.setUint16(e,t);case 3:return this.dv.setUint8(e,t>>>16),this.dv.setUint16(e+1,65535&t);case 4:return this.dv.setUint32(e,t);default:throw new Error("write ".concat(n,"-byte integers is not supported"))}}},{key:"readToBuffer",value:function(n){var t;return this.offset||n?t=this.dv.buffer.slice(this.offset,n?this.offset+n:this.end):t=this.dv.buffer,this.offset+=t.byteLength,t}},{key:"readToUint8",value:function(n){var t=new Uint8Array(this.dv.buffer,this.offset,n||this.unreadLength);return this.offset+=t.byteLength,t}},{key:"readString",value:function(n){for(var t=0,e="";t<n;t++)e+=String.fromCharCode(this.dv.getUint8(this.offset)),this.offset++;return e}}],[{key:"fromUint8",value:function(n){return new i(n.buffer,n.byteOffset,n.byteLength)}},{key:"concatUint8s",value:function(n){var t=new Uint8Array(n.reduce(function(r,a){return r+a.byteLength},0)),e=0;return n.forEach(function(r){t.set(r,e),e+=r.byteLength}),t}},{key:"concatUint8",value:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return this.concatUint8s(t)}}]),i}(),M_=function(){function i(s,n){at(this,i),this.offset=0,this.val=s,this.size=n}return ot(i,[{key:"skip",value:function(n){this.offset+=n}},{key:"read",value:function(n){var t=this.size-this.offset-n;if(t>=0){var e=0,r=0;if(this.offset+=n,this.size>31){for(;r<n;r++)e+=Math.pow(2,r);return this.val/Math.pow(2,t)&e}else{for(;r<n;r++)e+=1<<r;return this.val>>>t&e}}throw new Error("the number of the read operation exceeds the total length limit of bits")}}],[{key:"fromByte",value:function(n,t){return new i(n.read(t),t<<3)}}]),i}(),et=function(){function i(){at(this,i)}return ot(i,null,[{key:"findBox",value:function(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=[];if(!n)return r;for(var a=0,o="",l=0;n.length>7;){if(a=oe(n),o=String.fromCharCode.apply(null,n.subarray(4,8)),l=8,a===1?(a=wi(n,8),l+=8):a||(a=n.length),!t[0]||o===t[0]){var u=n.subarray(0,a);if(t.length<2)r.push({start:e,size:a,headerSize:l,type:o,data:u});else return i.findBox(u.subarray(l),t.slice(1),e+l)}e+=a,n=n.subarray(a)}return r}},{key:"tfhd",value:function(n){return xe(n,!0,function(t,e){t.trackId=oe(e);var r=4,a=t.flags&255&1,o=t.flags&255&2,l=t.flags&255&8,u=t.flags&255&16,c=t.flags&255&32;a&&(r+=4,t.baseDataOffset=oe(e,r),r+=4),o&&(t.sampleDescriptionIndex=oe(e,r),r+=4),l&&(t.defaultSampleDuration=oe(e,r),r+=4),u&&(t.defaultSampleSize=oe(e,r),r+=4),c&&(t.defaultSampleFlags=oe(e,r))})}},{key:"sidx",value:function(n){return xe(n,!0,function(t,e){var r=0;t.reference_ID=oe(e,r),r+=4,t.timescale=oe(e,r),r+=4,t.version===0?(t.earliest_presentation_time=oe(e,r),r+=4,t.first_offset=oe(e,r),r+=4):(t.earliest_presentation_time=wi(e,r),r+=8,t.first_offset=wi(e,r),r+=8),r+=2,t.references=[];var a=tt(e,r);r+=2;for(var o=0;o<a;o++){var l={};t.references.push(l);var u=oe(e,r);r+=4,l.reference_type=u>>31&1,l.referenced_size=u&2147483647,l.subsegment_duration=oe(e,r),r+=4,u=oe(e,r),r+=4,l.starts_with_SAP=u>>31&1,l.SAP_type=u>>28&7,l.SAP_delta_time=u&268435455}})}},{key:"moov",value:function(n){return xe(n,!1,function(t,e,r){t.mvhd=i.mvhd(i.findBox(e,["mvhd"],r)[0]),t.trak=i.findBox(e,["trak"],r).map(function(a){return i.trak(a)}),t.pssh=i.pssh(i.findBox(e,["pssh"],r)[0])})}},{key:"mvhd",value:function(n){return xe(n,!0,function(t,e){var r=0;t.version===1?(t.timescale=oe(e,16),t.duration=wi(e,20),r+=28):(t.timescale=oe(e,8),t.duration=oe(e,12),r+=16),t.nextTrackId=oe(e,r+76)})}},{key:"trak",value:function(n){return xe(n,!1,function(t,e,r){t.tkhd=i.tkhd(i.findBox(e,["tkhd"],r)[0]),t.mdia=i.mdia(i.findBox(e,["mdia"],r)[0])})}},{key:"tkhd",value:function(n){return xe(n,!0,function(t,e){var r=go.fromUint8(e);t.version===1?(r.read(8),r.read(8),t.trackId=r.read(4),r.read(4),t.duration=r.read(8)):(r.read(4),r.read(4),t.trackId=r.read(4),r.read(4),t.duration=r.read(4)),r.skip(16),t.matrix=[];for(var a=0;a<36;a++)t.matrix.push(r.read(1));r.back(36);for(var o=[],l=0,u;l<3;l++)o.push(ho(r.readInt(2),r.readInt(2))),o.push(ho(r.readInt(2),r.readInt(2))),u=r.readInt(4),o.push(ho(u>>30,u&1073741823));t.rotation=T_(o),t.width=r.read(4),t.height=r.read(4)})}},{key:"mdia",value:function(n){return xe(n,!1,function(t,e,r){t.mdhd=i.mdhd(i.findBox(e,["mdhd"],r)[0]),t.hdlr=i.hdlr(i.findBox(e,["hdlr"],r)[0]),t.minf=i.minf(i.findBox(e,["minf"],r)[0])})}},{key:"mdhd",value:function(n){return xe(n,!0,function(t,e){var r=0;t.version===1?(t.timescale=oe(e,16),t.duration=wi(e,20),r+=28):(t.timescale=oe(e,8),t.duration=oe(e,12),r+=16);var a=tt(e,r);t.language=String.fromCharCode((a>>10&31)+96,(a>>5&31)+96,(a&31)+96)})}},{key:"hdlr",value:function(n){return xe(n,!0,function(t,e){t.version===0&&(t.handlerType=String.fromCharCode.apply(null,e.subarray(4,8)))})}},{key:"minf",value:function(n){return xe(n,!1,function(t,e,r){t.vmhd=i.vmhd(i.findBox(e,["vmhd"],r)[0]),t.smhd=i.smhd(i.findBox(e,["smhd"],r)[0]),t.stbl=i.stbl(i.findBox(e,["stbl"],r)[0])})}},{key:"vmhd",value:function(n){return xe(n,!0,function(t,e){t.graphicsmode=tt(e),t.opcolor=[tt(e,2),tt(e,4),tt(e,6)]})}},{key:"smhd",value:function(n){return xe(n,!0,function(t,e){t.balance=tt(e)})}},{key:"stbl",value:function(n){return xe(n,!1,function(t,e,r){var a,o,l;t.stsd=i.stsd(i.findBox(e,["stsd"],r)[0]),t.stts=i.stts(i.findBox(e,["stts"],r)[0]),t.ctts=i.ctts(i.findBox(e,["ctts"],r)[0]),t.stsc=i.stsc(i.findBox(e,["stsc"],r)[0]),t.stsz=i.stsz(i.findBox(e,["stsz"],r)[0]),t.stco=i.stco(i.findBox(e,["stco"],r)[0]),t.stco||(t.co64=i.co64(i.findBox(e,["co64"],r)[0]),t.stco=t.co64);var u=(a=t.stsd.entries[0])===null||a===void 0||(o=a.sinf)===null||o===void 0||(l=o.schi)===null||l===void 0?void 0:l.tenc.default_IV_size;t.stss=i.stss(i.findBox(e,["stss"],r)[0]),t.senc=i.senc(i.findBox(e,["senc"],r)[0],u)})}},{key:"senc",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;return xe(n,!0,function(e,r){var a=0,o=oe(r,a);a+=4,e.samples=[];for(var l=0;l<o;l++){var u={};u.InitializationVector=[];for(var c=0;c<t;c++)u.InitializationVector[c]=r[a+c];if(a+=t,e.flags&2){u.subsamples=[];var f=tt(r,a);a+=2;for(var h=0;h<f;h++){var d={};d.BytesOfClearData=tt(r,a),a+=2,d.BytesOfProtectedData=oe(r,a),a+=4,u.subsamples.push(d)}}e.samples.push(u)}})}},{key:"pssh",value:function(n){return xe(n,!0,function(t,e){for(var r=[],a=[],o=0,l=0;l<16;l++)a.push(yo(e[o+l]));if(o+=16,t.version>0){var u=oe(e,o);o+=4;for(var c=0;c<(""+u).length;c++)for(var f=0;f<16;f++){var h=e[o];o+=1,r.push(yo(h))}}var d=oe(e,o);t.data_size=d,o+=4,t.kid=r,t.system_id=a,t.buffer=e})}},{key:"stsd",value:function(n){return xe(n,!0,function(t,e,r){t.entryCount=oe(e),t.entries=i.findBox(e.subarray(4),[],r+4).map(function(a){switch(a.type){case"av01":return i.av01(a);case"avc1":case"avc2":case"avc3":case"avc4":return i.avc1(a);case"hvc1":case"hev1":return i.hvc1(a);case"mp4a":return i.mp4a(a);case"alaw":case"ulaw":return i.alaw(a);case"enca":return xe(a,!1,function(o,l,u){o.channelCount=tt(l,16),o.samplesize=tt(l,18),o.sampleRate=oe(l,24)/65536,l=l.subarray(28),o.sinf=i.sinf(i.findBox(l,["sinf"],u)[0]),o.esds=i.esds(i.findBox(l,["esds"],u)[0])});case"encv":return xe(a,!1,function(o,l,u){o.width=tt(l,24),o.height=tt(l,26),o.horizresolution=oe(l,28),o.vertresolution=oe(l,32),l=l.subarray(78),o.sinf=i.sinf(i.findBox(l,["sinf"],u)[0]),o.avcC=i.avcC(i.findBox(l,["avcC"],u)[0]),o.hvcC=i.hvcC(i.findBox(l,["hvcC"],u)[0]),o.pasp=i.pasp(i.findBox(l,["pasp"],u)[0])})}}).filter(Boolean)})}},{key:"tenc",value:function(n){return xe(n,!1,function(t,e){var r=6;t.default_IsEncrypted=e[r],r+=1,t.default_IV_size=e[r],r+=1,t.default_KID=[];for(var a=0;a<16;a++)t.default_KID.push(yo(e[r])),r+=1})}},{key:"schi",value:function(n){return xe(n,!1,function(t,e,r){t.tenc=i.tenc(i.findBox(e,["tenc"],r)[0])})}},{key:"sinf",value:function(n){return xe(n,!1,function(t,e,r){t.schi=i.schi(i.findBox(e,["schi"],r)[0]),t.frma=i.frma(i.findBox(e,["frma"],r)[0])})}},{key:"frma",value:function(n){return xe(n,!1,function(t,e){t.data_format="";for(var r=0;r<4;r++)t.data_format+=String.fromCharCode(e[r])})}},{key:"colr",value:function(n){return xe(n,!1,function(t,e){var r=go.fromUint8(e);t.data=n.data,t.colorType=r.readString(4),t.colorType==="nclx"?(t.colorPrimaries=r.read(2),t.transferCharacteristics=r.read(2),t.matrixCoefficients=r.read(2),t.fullRangeFlag=r.read(1)>>7):(t.colorType==="rICC"||t.colorType==="prof")&&(t.iccProfile=e.readToUint8())})}},{key:"av01",value:function(n){return xe(n,!1,function(t,e,r){var a=mo(t,e),o=e.subarray(a);r+=a,t.av1C=i.av1C(i.findBox(o,["av1C"],r)[0]),t.colr=i.colr(i.findBox(o,["colr"],r)[0])})}},{key:"av1C",value:function(n){return xe(n,!1,function(t,e){t.data=n.data;var r=go.fromUint8(e),a=M_.fromByte(r,4);t.marker=a.read(1),t.version=a.read(7),t.seqProfile=a.read(3),t.seqLevelIdx0=a.read(5),t.seqTier0=a.read(1),t.highBitdepth=a.read(1),t.twelveBit=a.read(1),t.monochrome=a.read(1),t.chromaSubsamplingX=a.read(1),t.chromaSubsamplingY=a.read(1),t.chromaSamplePosition=a.read(2),t.reserved=a.read(3),t.initialPresentationDelayPresent=a.read(1),t.initialPresentationDelayPresent?t.initialPresentationDelayMinusOne=a.read(4):t.initialPresentationDelayMinusOne=0,t.configOBUs=r.readToUint8();var o;t.seqLevelIdx0===2&&t.highBitdepth===1?o=t.twelveBit===1?"12":"10":t.seqProfile<=2&&(o=t.highBitdepth===1?"10":"08"),t.codec=["av01",t.seqProfile,(t.seqLevelIdx0<10?"0"+t.seqLevelIdx0:t.seqLevelIdx0)+(t.seqTier0?"H":"M"),o].join(".")})}},{key:"avc1",value:function(n){return xe(n,!1,function(t,e,r){var a=mo(t,e),o=e.subarray(a);r+=a,t.avcC=i.avcC(i.findBox(o,["avcC"],r)[0]),t.pasp=i.pasp(i.findBox(o,["pasp"],r)[0])})}},{key:"avcC",value:function(n){return xe(n,!1,function(t,e){t.data=n.data,t.configurationVersion=e[0],t.AVCProfileIndication=e[1],t.profileCompatibility=e[2],t.AVCLevelIndication=e[3],t.codec=Md([e[1],e[2],e[3]]),t.lengthSizeMinusOne=e[4]&3,t.spsLength=e[5]&31,t.sps=[];for(var r=6,a=0;a<t.spsLength;a++){var o=tt(e,r);r+=2,t.sps.push(e.subarray(r,r+o)),r+=o}t.ppsLength=e[r],r+=1,t.pps=[];for(var l=0;l<t.ppsLength;l++){var u=tt(e,r);r+=2,t.pps.push(e.subarray(r,r+=u)),r+=u}})}},{key:"hvc1",value:function(n){return xe(n,!1,function(t,e,r){var a=mo(t,e),o=e.subarray(a);r+=a,t.hvcC=i.hvcC(i.findBox(o,["hvcC"],r)[0]),t.pasp=i.pasp(i.findBox(o,["pasp"],r)[0])})}},{key:"hvcC",value:function(n){return xe(n,!1,function(t,e){t.data=n.data,t.codec="hev1.1.6.L93.B0",t.configurationVersion=e[0];var r=e[1];t.generalProfileSpace=r>>6,t.generalTierFlag=(r&32)>>5,t.generalProfileIdc=r&31,t.generalProfileCompatibility=oe(e,2),t.generalConstraintIndicatorFlags=e.subarray(6,12),t.generalLevelIdc=e[12],t.avgFrameRate=tt(e,19),t.numOfArrays=e[22],t.vps=[],t.sps=[],t.pps=[];for(var a=23,o=0,l=0,u=0,c=0;c<t.numOfArrays;c++){o=e[a]&63,l=tt(e,a+1),a+=3;for(var f=[],h=0;h<l;h++)u=tt(e,a),a+=2,f.push(e.subarray(a,a+u)),a+=u;if(o===32){var d;(d=t.vps).push.apply(d,f)}else if(o===33){var v;(v=t.sps).push.apply(v,f)}else if(o===34){var m;(m=t.pps).push.apply(m,f)}}})}},{key:"pasp",value:function(n){return xe(n,!1,function(t,e){t.hSpacing=oe(e),t.vSpacing=oe(e,4)})}},{key:"mp4a",value:function(n){return xe(n,!1,function(t,e,r){var a=Dc(t,e);t.esds=i.esds(i.findBox(e.subarray(a),["esds"],r+a)[0])})}},{key:"esds",value:function(n){return xe(n,!0,function(t,e){t.codec="mp4a.";for(var r=0,a=0,o=0,l=0;e.length;){for(r=0,l=e[r],a=e[r+1],r+=2;a&128;)o=(a&127)<<7,a=e[r],r+=1;if(o+=a&127,l===3)e=e.subarray(r+3);else if(l===4)t.codec+=(e[r].toString(16)+".").padStart(3,"0"),e=e.subarray(r+13);else if(l===5){var u=t.config=e.subarray(r,r+o),c=(u[0]&248)>>3;c===31&&u.length>=2&&(c=32+((u[0]&7)<<3)+((u[1]&224)>>5)),t.objectType=c,t.codec+=c.toString(16),t.codec[t.codec.length-1]==="."&&(t.codec=t.codec.substring(0,t.codec.length-1));return}else{t.codec[t.codec.length-1]==="."&&(t.codec=t.codec.substring(0,t.codec.length-1));return}}})}},{key:"alaw",value:function(n){return xe(n,!1,function(t,e){Dc(t,e)})}},{key:"stts",value:function(n){return xe(n,!0,function(t,e){for(var r=oe(e),a=[],o=4,l=0;l<r;l++)a.push({count:oe(e,o),delta:oe(e,o+4)}),o+=8;t.entryCount=r,t.entries=a})}},{key:"ctts",value:function(n){return xe(n,!0,function(t,e){var r=oe(e),a=[],o=4;if(t.version===1)for(var l=0;l<r;l++)a.push({count:oe(e,o),offset:oe(e,o+4)}),o+=8;else for(var u=0;u<r;u++)a.push({count:oe(e,o),offset:-(~oe(e,o+4)+1)}),o+=8;t.entryCount=r,t.entries=a})}},{key:"stsc",value:function(n){return xe(n,!0,function(t,e){for(var r=oe(e),a=[],o=4,l=0;l<r;l++)a.push({firstChunk:oe(e,o),samplesPerChunk:oe(e,o+4),sampleDescriptionIndex:oe(e,o+8)}),o+=12;t.entryCount=r,t.entries=a})}},{key:"stsz",value:function(n){return xe(n,!0,function(t,e){var r=oe(e),a=oe(e,4),o=[];if(!r)for(var l=8,u=0;u<a;u++)o.push(oe(e,l)),l+=4;t.sampleSize=r,t.sampleCount=a,t.entrySizes=o})}},{key:"stco",value:function(n){return xe(n,!0,function(t,e){for(var r=oe(e),a=[],o=4,l=0;l<r;l++)a.push(oe(e,o)),o+=4;t.entryCount=r,t.entries=a})}},{key:"co64",value:function(n){return xe(n,!0,function(t,e){for(var r=oe(e),a=[],o=4,l=0;l<r;l++)a.push(wi(e,o)),o+=8;t.entryCount=r,t.entries=a})}},{key:"stss",value:function(n){return xe(n,!0,function(t,e){for(var r=oe(e),a=[],o=4,l=0;l<r;l++)a.push(oe(e,o)),o+=4;t.entryCount=r,t.entries=a})}},{key:"moof",value:function(n){return xe(n,!1,function(t,e,r){t.mfhd=i.mfhd(i.findBox(e,["mfhd"],r)[0]),t.traf=i.findBox(e,["traf"],r).map(function(a){return i.traf(a)})})}},{key:"mfhd",value:function(n){return xe(n,!0,function(t,e){t.sequenceNumber=oe(e)})}},{key:"traf",value:function(n){return xe(n,!1,function(t,e,r){t.tfhd=i.tfhd(i.findBox(e,["tfhd"],r)[0]),t.tfdt=i.tfdt(i.findBox(e,["tfdt"],r)[0]),t.trun=i.trun(i.findBox(e,["trun"],r)[0])})}},{key:"trun",value:function(n){return xe(n,!0,function(t,e){var r=t.version,a=t.flags,o=e.length,l=t.sampleCount=oe(e),u=4;if(o>u&&a&1&&(t.dataOffset=-(~oe(e,u)+1),u+=4),o>u&&a&4&&(t.firstSampleFlags=oe(e,u),u+=4),t.samples=[],o>u)for(var c,f=0;f<l;f++)c={},a&256&&(c.duration=oe(e,u),u+=4),a&512&&(c.size=oe(e,u),u+=4),a&1024&&(c.flags=oe(e,u),u+=4),a&2048&&(r?c.cts=-(~oe(e,u+4)+1):c.cts=oe(e,u),u+=4),t.samples.push(c)})}},{key:"tfdt",value:function(n){return xe(n,!0,function(t,e){t.version===1?t.baseMediaDecodeTime=wi(e):t.baseMediaDecodeTime=oe(e)})}},{key:"probe",value:function(n){return!!i.findBox(n,["ftyp"])}},{key:"parseSampleFlags",value:function(n){return{isLeading:(n[0]&12)>>>2,dependsOn:n[0]&3,isDependedOn:(n[1]&192)>>>6,hasRedundancy:(n[1]&48)>>>4,paddingValue:(n[1]&14)>>>1,isNonSyncSample:n[1]&1,degradationPriority:n[2]<<8|n[3]}}},{key:"moovToTrack",value:function(n,t,e){var r,a,o=n.trak;if(!(!o||!o.length)){var l=o.find(function(Y){var W,te;return((W=Y.mdia)===null||W===void 0||(te=W.hdlr)===null||te===void 0?void 0:te.handlerType)==="vide"}),u=o.find(function(Y){var W,te;return((W=Y.mdia)===null||W===void 0||(te=W.hdlr)===null||te===void 0?void 0:te.handlerType)==="soun"});if(l&&t){var c,f,h,d,v,m,p,S=t,C=(c=l.tkhd)===null||c===void 0?void 0:c.trackId;C!=null&&(S.id=l.tkhd.trackId),S.tkhdDuration=l.tkhd.duration,S.mvhdDurtion=n.mvhd.duration,S.mvhdTimecale=n.mvhd.timescale,S.timescale=S.formatTimescale=l.mdia.mdhd.timescale,S.duration=l.mdia.mdhd.duration||S.mvhdDurtion/S.mvhdTimecale*S.timescale,S.rotation=l.tkhd.rotation,S.matrix=l.tkhd.matrix;var _=l.mdia.minf.stbl.stsd.entries[0];if(S.width=_.width,S.height=_.height,_.pasp&&(S.sarRatio=[_.pasp.hSpacing,_.pasp.vSpacing]),_.av1C)S.codecType=di.AV1,S.codec=_.av1C.codec,S.av1C=_.av1C.data,_.colr&&(S.colr=_.colr.data);else if(_.hvcC)S.codecType=di.HEVC,S.codec=_.hvcC.codec,S.vps=_.hvcC.vps,S.sps=_.hvcC.sps,S.pps=_.hvcC.pps,S.hvcC=_.hvcC.data;else if(_.avcC)S.codec=_.avcC.codec,S.sps=_.avcC.sps,S.pps=_.avcC.pps;else throw new Error("unknown video stsd entry");if(S.present=!0,S.ext={},S.ext.stss=(f=l.mdia)===null||f===void 0||(h=f.minf)===null||h===void 0||(d=h.stbl)===null||d===void 0?void 0:d.stss,S.ext.ctts=(v=l.mdia)===null||v===void 0||(m=v.minf)===null||m===void 0||(p=m.stbl)===null||p===void 0?void 0:p.ctts,_&&_.type==="encv"){var E,k,N,I,U,D,O,K;S.isVideoEncryption=!0,_.default_KID=(E=_.sinf)===null||E===void 0||(k=E.schi)===null||k===void 0?void 0:k.tenc.default_KID,_.default_IsEncrypted=(N=_.sinf)===null||N===void 0||(I=N.schi)===null||I===void 0?void 0:I.tenc.default_IsEncrypted,_.default_IV_size=(U=_.sinf)===null||U===void 0||(D=U.schi)===null||D===void 0?void 0:D.tenc.default_IV_size,S.videoSenc=l.mdia.minf.stbl.senc&&l.mdia.minf.stbl.senc.samples,_.data_format=(O=_.sinf)===null||O===void 0||(K=O.frma)===null||K===void 0?void 0:K.data_format,S.useEME=n.useEME,S.kidValue=n.kidValue,S.pssh=n.pssh,S.encv=_}}if(u&&e){var y,b,w,R,P,H,$,ie,Ee,re=e,We=(y=u.tkhd)===null||y===void 0?void 0:y.trackId;We!=null&&(re.id=u.tkhd.trackId),re.tkhdDuration=u.tkhd.duration,re.mvhdDurtion=n.mvhd.duration,re.mvhdTimecale=n.mvhd.timescale,re.timescale=re.formatTimescale=u.mdia.mdhd.timescale,re.duration=u.mdia.mdhd.duration||re.mvhdDurtion/re.mvhdTimecale*re.timescale;var Pe=u.mdia.minf.stbl.stsd.entries[0];switch(re.sampleSize=Pe.sampleSize,re.sampleRate=Pe.sampleRate,re.channelCount=Pe.channelCount,re.present=!0,Pe.type){case"alaw":re.codecType=re.codec=qt.G711PCMA,re.sampleRate=8e3;break;case"ulaw":re.codecType=re.codec=qt.G711PCMU,re.sampleRate=8e3;break;default:re.sampleDuration=Vn.getFrameDuration(re.sampleRate,re.timescale),re.sampleRateIndex=Vn.getRateIndexByRate(re.sampleRate),re.objectType=((r=Pe.esds)===null||r===void 0?void 0:r.objectType)||2,Pe.esds&&(re.config=Array.from(Pe.esds.config)),re.codec=((a=Pe.esds)===null||a===void 0?void 0:a.codec)||"mp4a.40.2";break}if(re.sampleDuration=Vn.getFrameDuration(re.sampleRate,re.timescale),re.objectType=((b=Pe.esds)===null||b===void 0?void 0:b.objectType)||2,Pe.esds&&(Pe.esds.config?re.config=Array.from(Pe.esds.config):console.warn("esds config is null")),re.codec=((w=Pe.esds)===null||w===void 0?void 0:w.codec)||"mp4a.40.2",re.sampleRateIndex=Vn.getRateIndexByRate(re.sampleRate),re.ext={},re.ext.stss=(R=u.mdia)===null||R===void 0||(P=R.minf)===null||P===void 0||(H=P.stbl)===null||H===void 0?void 0:H.stss,re.ext.ctts=($=u.mdia)===null||$===void 0||(ie=$.minf)===null||ie===void 0||(Ee=ie.stbl)===null||Ee===void 0?void 0:Ee.ctts,re.present=!0,Pe&&Pe.type==="enca"){var pt,tn,lt,nn,bt,bn,zt,Zn;re.isAudioEncryption=!0,Pe.data_format=(pt=Pe.sinf)===null||pt===void 0||(tn=pt.frma)===null||tn===void 0?void 0:tn.data_format,Pe.default_KID=(lt=Pe.sinf)===null||lt===void 0||(nn=lt.schi)===null||nn===void 0?void 0:nn.tenc.default_KID,Pe.default_IsEncrypted=(bt=Pe.sinf)===null||bt===void 0||(bn=bt.schi)===null||bn===void 0?void 0:bn.tenc.default_IsEncrypted,Pe.default_IV_size=(zt=Pe.sinf)===null||zt===void 0||(Zn=zt.schi)===null||Zn===void 0?void 0:Zn.tenc.default_IV_size,re.audioSenc=u.mdia.minf.stbl.senc&&u.mdia.minf.stbl.senc.samples,re.useEME=n.useEME,re.kidValue=n.kidValue,re.enca=Pe}}if(e&&(e.isVideoEncryption=t?t.isVideoEncryption:!1),t&&(t.isAudioEncryption=e?e.isAudioEncryption:!1),t!=null&&t.encv||e!=null&&e.enca){var Qe,T,x=t==null||(Qe=t.encv)===null||Qe===void 0?void 0:Qe.default_KID,V=e==null||(T=e.enca)===null||T===void 0?void 0:T.default_KID,J=x||V?(x||V).join(""):null;t&&(t.kid=J),e&&(e.kid=J)}return t&&(t.flags=3841),e&&(e.flags=1793),{videoTrack:t,audioTrack:e}}}},{key:"evaluateDefaultDuration",value:function(n,t,e){var r,a=t==null||(r=t.samples)===null||r===void 0?void 0:r.length;if(!a)return 1024;var o=1024*a/t.timescale;return o*n.timescale/e}},{key:"moofToSamples",value:function(n,t,e){var r={};return n.mfhd&&(t&&(t.sequenceNumber=n.mfhd.sequenceNumber),e&&(e.sequenceNumber=n.mfhd.sequenceNumber)),n.traf.forEach(function(a){var o=a.tfhd,l=a.tfdt,u=a.trun;if(!(!o||!u)){l&&(t&&t.id===o.trackId&&(t.baseMediaDecodeTime=l.baseMediaDecodeTime),e&&e.id===o.trackId&&(e.baseMediaDecodeTime=l.baseMediaDecodeTime));var c=o.defaultSampleSize||0,f=o.defaultSampleDuration||i.evaluateDefaultDuration(t,e,u.samples.length||u.sampleCount),h=u.dataOffset||0,d=0,v=-1;if(!u.samples.length&&u.sampleCount){r[o.trackId]=[];for(var m=0;m<u.sampleCount;m++)r[o.trackId].push({offset:h,dts:d,duration:f,size:c}),d+=f,h+=c}else r[o.trackId]=u.samples.map(function(p,S){return p={offset:h,dts:d,pts:d+(p.cts||0),duration:p.duration||f,size:p.size||c,gopId:v,keyframe:S===0||p.flags!==null&&p.flags!==void 0&&(p.flags&65536)>>>0!==65536},p.keyframe&&(v++,p.gopId=v),d+=p.duration,h+=p.size,p})}}),r}},{key:"moovToSamples",value:function(n){var t=n.trak;if(!(!t||!t.length)){var e=t.find(function(O){var K,y;return((K=O.mdia)===null||K===void 0||(y=K.hdlr)===null||y===void 0?void 0:y.handlerType)==="vide"}),r=t.find(function(O){var K,y;return((K=O.mdia)===null||K===void 0||(y=K.hdlr)===null||y===void 0?void 0:y.handlerType)==="soun"});if(!(!e&&!r)){var a,o;if(e){var l,u,c=(l=e.mdia)===null||l===void 0||(u=l.minf)===null||u===void 0?void 0:u.stbl;if(!c)return;var f=c.stts,h=c.stsc,d=c.stsz,v=c.stco,m=c.stss,p=c.ctts;if(!f||!h||!d||!v||!m)return;a=Ic(f,h,d,v,p,m)}if(r){var S,C,_,E=(S=r.mdia)===null||S===void 0||(C=S.minf)===null||C===void 0?void 0:C.stbl;if(!E)return;var k=(_=r.mdia.mdhd)===null||_===void 0?void 0:_.timescale,N=E.stts,I=E.stsc,U=E.stsz,D=E.stco;if(!k||!N||!I||!U||!D)return;o=Ic(N,I,U,D)}return{videoSamples:a,audioSamples:o}}}}}]),i}();function Ic(i,s,n,t,e,r){var a=[],o=e==null?void 0:e.entries,l=s.entries,u=t.entries,c=n.entrySizes,f=r==null?void 0:r.entries,h;f&&(h={},f.forEach(function(I){h[I-1]=!0}));var d;o&&(d=[],o.forEach(function(I){for(var U=I.count,D=I.offset,O=0;O<U;O++)d.push(D)}));var v,m=-1,p=0,S=0,C=0,_=0,E=0,k=l[0].samplesPerChunk,N=l[1]?l[1].firstChunk-1:1/0;return i.entries.forEach(function(I){for(var U=I.count,D=I.delta,O=0;O<U;O++)v={dts:p,duration:D,size:c[S]||n.sampleSize,offset:u[C]+E,index:S},f&&(v.keyframe=h[S],v.keyframe&&m++,v.gopId=m),d&&S<d.length&&(v.pts=v.dts+d[S]),a.push(v),p+=D,S++,S<k?E+=v.size:(C++,E=0,C>=N&&(_++,N=l[_+1]?l[_+1].firstChunk-1:1/0),k+=l[_].samplesPerChunk)}),a}function mo(i,s){return i.dataReferenceIndex=tt(s,6),i.width=tt(s,24),i.height=tt(s,26),i.horizresolution=oe(s,28),i.vertresolution=oe(s,32),i.frameCount=tt(s,40),i.depth=tt(s,74),78}function Dc(i,s){return i.dataReferenceIndex=tt(s,6),i.channelCount=tt(s,16),i.sampleSize=tt(s,18),i.sampleRate=oe(s,24)/65536,28}function xe(i,s,n){if(i){if(i.size!==i.data.length)throw new Error("box ".concat(i.type," size !== data.length"));var t={start:i.start,size:i.size,headerSize:i.headerSize,type:i.type};return s&&(t.version=i.data[i.headerSize],t.flags=w_(i.data,i.headerSize+1),t.headerSize+=4),n(t,i.data.subarray(t.headerSize),t.start+t.headerSize),t}}var N_=function(s,n,t){for(var e=String(t),r=n>>0,a=Math.ceil(r/e.length),o=[],l=String(s);a--;)o.push(e);return o.join("").substring(0,r-l.length)+l},yo=function(){for(var s=[],n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.forEach(function(r){s.push(N_(Number(r).toString(16),2,0))}),s[0]},B_=function(){function i(s,n,t){at(this,i),q(this,"__loadedMoofWraps",[]),q(this,"__lastRemainData",null),q(this,"__lastRemainDataStart",0),q(this,"__nextMoofStart",-1),this.videoTrack=s||new Id,this.audioTrack=n||new Dd,this.metadataTrack=t||new Od}return ot(i,[{key:"demuxPart",value:function(n,t,e){var r=this,a=this.videoTrack,o=this.audioTrack,l=a.exist(),u=o.exist(),c=/av01/.test(a.codec);a.samples=[],o.samples=[];var f=n,h=t;if(this.__lastRemainData){var d=this.__lastRemainDataStart+this.__lastRemainData.byteLength,v=t<=d&&t>this.__lastRemainDataStart&&t+n.byteLength>d;if(v){var m=n.subarray(this.__lastRemainData.byteLength+this.__lastRemainDataStart-t);f=Yt(this.__lastRemainData,m),h=this.__lastRemainDataStart,this.__lastRemainData=null}else this.__lastRemainData=null,this.__lastRemainDataStart=0,this.__nextMoofStart=-1}if(!e){var p=et.findBox(f,["moov"])[0];if(!p)throw new Error("cannot found moov box");e=et.moov(p)}if(f){var S=h+f.byteLength;!l&&!u&&et.moovToTrack(e,a,o);var C=[];this.__nextMoofStart<0?et.findBox(f,["moof"],h).forEach(function(I){return C.push(I)}):this.__nextMoofStart>=h&&this.__nextMoofStart<=S-8&&et.findBox(f.subarray(this.__nextMoofStart-h),["moof"],this.__nextMoofStart).forEach(function(I){return C.push(I)}),C.filter(function(I){return I.size<=I.data.length}).forEach(function(I){var U=et.moof(I);r.__nextMoofStart=U.start+Math.max.apply(Math,Ht(U.traf.map(function(D){return D.trun.samples.reduce(function(O,K){return O+K.size},D.trun.dataOffset||0)}))),r.__loadedMoofWraps.push({start:U.start,nextMoofStart:r.__nextMoofStart,moof:U}),r.__loadedMoofWraps.sort(function(D,O){return D.start-O.start})});var _=m_(this.__loadedMoofWraps),E;try{var k=function(){var U=E.value;if(U.start>S||U.nextMoofStart<h)return"continue";var D=U.start,O=et.moofToSamples(U.moof,a,o),K=a.baseMediaDecodeTime,y=o.baseMediaDecodeTime,b;Object.keys(O).forEach(function(w){a.id==w?O[w].some(function(R){var P=R.offset+=D;if(!(P<h)){if(P+R.size>S)return!0;var H=new Qo((R.pts||R.dts)+K,R.dts+K);H.duration=R.duration,H.gopId=R.gopId,R.keyframe&&H.setToKeyframe();var $=f.subarray(P-h,P-h+R.size);if(H.data=$,!c)for(var ie=0,Ee=$.length-1;ie<Ee;)b=oe($,ie),ie+=4,H.units.push($.subarray(ie,ie+b)),ie+=b;r.__lastRemainDataStart=P+R.size,a.samples.push(H)}}):o.id==w&&O[w].some(function(R){var P=R.offset+D;if(!(P<h)){if(P+R.size>S)return!0;var H=f.subarray(P-h,P-h+R.size);o.samples.push(new Mr(R.dts+y,H,R.duration)),r.__lastRemainDataStart=P+R.size}})})};for(_.s();!(E=_.n()).done;)var N=k()}catch(I){_.e(I)}finally{_.f()}}return this.__lastRemainDataStart>h&&this.__lastRemainDataStart<f.byteLength+h?this.__lastRemainData=f.subarray(this.__lastRemainDataStart-h):(this.__lastRemainData=f,this.__lastRemainDataStart=h),a.samples.length&&(a.baseMediaDecodeTime=a.samples[0].pts),o.samples.length&&(o.baseMediaDecodeTime=o.samples[0].pts),{videoTrack:a,audioTrack:o,metadataTrack:this.metadataTrack}}},{key:"demux",value:function(n,t){var e=this.videoTrack,r=this.audioTrack,a=e.exist(),o=r.exist();if(e.samples=[],r.samples=[],t){if(!o){var l=et.findBox(t,["moov"])[0];if(!l)throw new Error("cannot found moov box");et.moovToTrack(et.moov(l),null,r)}var u=et.findBox(t,["moof"])[0];if(u){var c=et.moofToSamples(et.moof(u),null,r)[r.id],f=r.baseMediaDecodeTime;if(c){var h=u.start;c.map(function(E){E.offset+=h;var k=t.subarray(E.offset,E.offset+E.size);r.samples.push(new Mr(E.dts+f,k,E.duration))})}}}if(n){if(!a&&!o){var d=et.findBox(n,["moov"])[0];if(!d)throw new Error("cannot found moov box");et.moovToTrack(et.moov(d),e,r)}var v=et.findBox(n,["moof"])[0];if(v){var m=et.moofToSamples(et.moof(v),e,r),p=e.baseMediaDecodeTime,S=r.baseMediaDecodeTime,C=v.start,_;Object.keys(m).forEach(function(E){e.id==E?m[E].map(function(k){k.offset+=C;var N=new Qo((k.pts||k.dts)+p,k.dts+p);N.duration=k.duration,N.gopId=k.gopId,k.keyframe&&N.setToKeyframe();var I=n.subarray(k.offset,k.offset+k.size);N.data=I;for(var U=0,D=I.length-1;U<D;)_=oe(I,U),U+=4,N.units.push(I.subarray(U,U+_)),U+=_;e.samples.push(N)}):r.id==E&&m[E].map(function(k){k.offset+=C;var N=n.subarray(k.offset,k.offset+k.size);r.samples.push(new Mr(k.dts+S,N,k.duration))})})}}return{videoTrack:e,audioTrack:r,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}}],[{key:"probe",value:function(n){return et.probe(n)}}]),i}();function F_(i){for(var s=0,n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];t.forEach(function(o){s+=o.length});var r=new i(s),a=0;return t.forEach(function(o){r.set(o,a),a+=o.length}),r}var kt=function(){function i(){at(this,i),this.buffer=new Uint8Array(0)}return ot(i,[{key:"write",value:function(){for(var n=this,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(a){a?n.buffer=F_(Uint8Array,n.buffer,a):window.console.warn(a)})}}],[{key:"writeUint16",value:function(n){return new Uint8Array([n>>8&255,n&255])}},{key:"writeUint32",value:function(n){return new Uint8Array([n>>24,n>>16&255,n>>8&255,n&255])}}]),i}(),Oc=Math.pow(2,32)-1,Re=function(){function i(){at(this,i)}return ot(i,null,[{key:"box",value:function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];e=e.filter(Boolean);var a=8+e.reduce(function(u,c){return u+c.byteLength},0),o=new Uint8Array(a);o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=a&255,o.set(n,4);var l=8;return e.forEach(function(u){o.set(u,l),l+=u.byteLength}),o}},{key:"ftyp",value:function(n){var t=n.find(function(e){return e.type===hi.VIDEO&&e.codecType===di.HEVC});return t?i.FTYPHEV1:i.FTYPAVC1}},{key:"initSegment",value:function(n){var t=i.ftyp(n),e=Yt(t,i.moov(n));return e}},{key:"pssh",value:function(n){var t=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],Pc(n.kid),[0,0,0,0]));return i.box(i.types.pssh,t)}},{key:"moov",value:function(n){if(n[0].useEME&&(n[0].encv||n[0].enca)){n[0].pssh||(n[0].pssh={kid:n[0].kid});var t=this.pssh(n[0].pssh);return i.box.apply(i,[i.types.moov,i.mvhd(n[0].mvhdDurtion||n[0].duration,n[0].mvhdTimecale||n[0].timescale),i.mvex(n)].concat(Ht(n.map(function(e){return i.trak(e)})),[t]))}else return i.box.apply(i,[i.types.moov,i.mvhd(n[0].mvhdDurtion||n[0].duration,n[0].mvhdTimecale||n[0].timescale)].concat(Ht(n.map(function(e){return i.trak(e)})),[i.mvex(n)]))}},{key:"mvhd",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=i.box(i.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return e}},{key:"trak",value:function(n){var t=i.box(i.types.trak,i.tkhd(n.id,n.tkhdDuration||0,n.width,n.height),i.mdia(n));return t}},{key:"tkhd",value:function(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=i.box(i.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,e>>8&255,e&255,0,0,r>>8&255,r&255,0,0]));return a}},{key:"mdia",value:function(n){var t=i.box(i.types.mdia,i.mdhd(n.duration,n.timescale),i.hdlr(n.type),i.minf(n));return t}},{key:"mdhd",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9e4,e=i.box(i.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,85,196,0,0]));return e}},{key:"hdlr",value:function(n){var t=i.box(i.types.hdlr,i.HDLR_TYPES[n]);return t}},{key:"minf",value:function(n){var t=i.box(i.types.minf,n.type===hi.VIDEO?i.VMHD:i.SMHD,i.DINF,i.stbl(n));return t}},{key:"stbl",value:function(n){var t=[];n&&n.ext&&n.ext.stss&&t.push(i.stss(n.ext.stss.entries));var e=i.box(i.types.stbl,i.stsd(n),i.STTS,t[0],i.STSC,i.STSZ,i.STCO);return e}},{key:"stsd",value:function(n){var t;n.type==="audio"?n.useEME&&n.enca?t=i.enca(n):n.codecType===qt.OPUS?t=i.opus(n):t=i.mp4a(n):n.useEME&&n.encv?t=i.encv(n):n.av1C?t=i.av01(n):t=i.avc1hev1(n);var e=i.box(i.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),t);return e}},{key:"enca",value:function(n){var t=n.enca.channelCount,e=n.enca.sampleRate,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,e>>8&255,e&255,0,0]),a=i.esds(n.config),o=i.sinf(n.enca);return i.box(i.types.enca,r,a,o)}},{key:"encv",value:function(n){var t,e,r=n.sps.length>0?n.sps[0]:[],a=n.pps.length>0?n.pps[0]:[],o=n.width,l=n.height,u=n.sarRatio[0],c=n.sarRatio[1],f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,o&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),h=new Uint8Array((t=(e=[1,r[1],r[2],r[3],255,225,r.length>>>8&255,r.length&255]).concat.apply(e,Ht(r)).concat([1,a.length>>>8&255,a.length&255])).concat.apply(t,Ht(a))),d=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),v=i.sinf(n.encv),m=new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,c>>24,c>>16&255,c>>8&255,c&255]);return i.box(i.types.encv,f,i.box(i.types.avcC,h),i.box(i.types.btrt,d),v,i.box(i.types.pasp,m))}},{key:"schi",value:function(n){var t=new Uint8Array([]),e=i.tenc(n);return i.box(i.types.schi,t,e)}},{key:"tenc",value:function(n){var t=new Uint8Array([0,0,0,0,0,0,n.default_IsEncrypted&255,n.default_IV_size&255].concat(Pc(n.default_KID)));return i.box(i.types.tenc,t)}},{key:"sinf",value:function(n){var t=new Uint8Array([]),e=new Uint8Array([n.data_format.charCodeAt(0),n.data_format.charCodeAt(1),n.data_format.charCodeAt(2),n.data_format.charCodeAt(3)]),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),a=i.schi(n);return i.box(i.types.sinf,t,i.box(i.types.frma,e),i.box(i.types.schm,r),a)}},{key:"av01",value:function(n){return i.box(i.types.av01,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n.width>>8&255,n.width&255,n.height>>8&255,n.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n.av1C,n.colr)}},{key:"avc1hev1",value:function(n){var t=n.codecType===di.HEVC,e=t?i.types.hvc1:i.types.avc1,r=t?i.hvcC(n):i.avcC(n),a=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,n.width>>8&255,n.width&255,n.height>>8&255,n.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),r];return t?a.push(i.box(i.types.fiel,new Uint8Array([1,0]))):n.sarRatio&&n.sarRatio.length>1&&a.push(i.pasp(n.sarRatio)),i.box.apply(i,[e].concat(a))}},{key:"avcC",value:function(n){var t,e,r=[],a=[],o;return n.sps.forEach(function(l){o=l.byteLength,r.push(o>>>8&255),r.push(o&255),r.push.apply(r,Ht(l))}),n.pps.forEach(function(l){o=l.byteLength,a.push(o>>>8&255),a.push(o&255),a.push.apply(a,Ht(l))}),i.box(i.types.avcC,new Uint8Array((t=(e=[1,r[3],r[4],r[5],255,224|n.sps.length]).concat.apply(e,r).concat([n.pps.length])).concat.apply(t,a)))}},{key:"hvcC",value:function(n){var t=n.hvcC;if(t instanceof ArrayBuffer||t instanceof Uint8Array)return t;var e=n.vps,r=n.sps,a=n.pps,o;if(t){var l=t.generalProfileCompatibilityFlags,u=t.generalConstraintIndicatorFlags,c=(e.length&&1)+(r.length&&1)+(a.length&&1);o=[1,t.generalProfileSpace<<6|t.generalTierFlag<<5|t.generalProfileIdc,l>>>24,l>>>16,l>>>8,l,u[0],u[1],u[2],u[3],u[4],u[5],t.generalLevelIdc,240,0,252,t.chromaFormatIdc|252,t.bitDepthLumaMinus8|248,t.bitDepthChromaMinus8|248,0,0,t.numTemporalLayers<<3|t.temporalIdNested<<2|3,c];var f=function(d){var v;o.push(d.length>>8,d.length),(v=o).push.apply(v,Ht(d))};e.length&&(o.push(160,0,e.length),e.forEach(f)),r.length&&(o.push(161,0,r.length),r.forEach(f)),a.length&&(o.push(162,0,a.length),a.forEach(f))}else o=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return i.box(i.types.hvcC,new Uint8Array(o))}},{key:"pasp",value:function(n){var t=f_(n,2),e=t[0],r=t[1];return i.box(i.types.pasp,new Uint8Array([e>>24,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255]))}},{key:"mp4a",value:function(n){return i.box(i.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.channelCount,0,16,0,0,0,0,n.sampleRate>>8&255,n.sampleRate&255,0,0]),n.config.length?i.esds(n.config):void 0)}},{key:"esds",value:function(n){var t=n.length,e=i.box(i.types.esds,new Uint8Array([0,0,0,0,3,23+t,0,0,0,4,15+t,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([t]).concat(n).concat([6,1,2])));return e}},{key:"opus",value:function(n){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.channelCount,0,16,0,0,0,0,n.sampleRate>>8&255,n.sampleRate&255,0,0]),e=n.config.length?i.dOps(n):[];return i.box(i.types.Opus,t,e)}},{key:"dOps",value:function(n){if(n.config)return n.config[4]=n.sampleRate>>>24&255,n.config[5]=n.sampleRate>>>16&255,n.config[6]=n.sampleRate>>>8&255,n.config[7]=n.sampleRate&255,i.box(i.types.dOps,n.config)}},{key:"mvex",value:function(n){var t=i.box.apply(i,[i.types.mvex].concat(Ht(n.map(function(e){return i.trex(e.id)}))));return t}},{key:"trex",value:function(n){var t=i.box(i.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]));return t}},{key:"trex1",value:function(n){var t=i.box(i.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]));return t}},{key:"trex2",value:function(n){var t=i.box(i.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]));return t}},{key:"moof",value:function(n){var t=i.box.apply(i,[i.types.moof,i.mfhd(n[0].samples?n[0].samples[0].gopId:0)].concat(Ht(n.map(function(e){return i.traf(e)}))));return t}},{key:"mfhd",value:function(n){var t=i.box(i.types.mfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]));return t}},{key:"traf",value:function(n){var t=i.tfhd(n.id),e=i.tfdt(n,n.baseMediaDecodeTime),r=0,a;if(n.isVideo&&n.videoSenc&&(a=n.videoSenc,a.forEach(function(b){r=r+8,b.subsamples&&b.subsamples.length&&(r=r+2,r=r+b.subsamples.length*6)})),n.videoSencLength=r,!n.useEME||!n.isVideoEncryption&&!n.isAudioEncryption){var o=i.sdtp(n),l=16+20+8+16+8+8;return i.box(i.types.traf,t,e,o,i.trun(n.samples,o.byteLength+l))}else if(n.isVideoEncryption)if(n.isVideo){var u=i.saiz(n),c=i.saio(n),f=i.trun1(n),h=i.senc(n),d=i.box(i.types.traf,t,e,u,c,f,h);return d}else if(n.isAudioEncryption){var p=i.sbgp(),S=i.saiz(n),C=i.saio(n),_=i.senc(n),E=i.trun1(n),k=i.box(i.types.traf,t,e,p,S,C,_,E);return k}else{var v=i.sbgp(),m=i.trun1(n);return i.box(i.types.traf,t,e,v,m)}else if(n.isVideo){var N=i.trun1(n);return i.box(i.types.traf,t,e,N)}else{var I=i.sbgp(),U=i.saiz(n),D=i.saio(n),O=i.senc(n),K=i.trun1(n),y=i.box(i.types.traf,t,e,I,U,D,O,K);return y}}},{key:"sdtp",value:function(n){var t=new kt;return n.samples.forEach(function(e){t.write(new Uint8Array(n.isVideo?[e.keyframe?32:16]:[16]))}),i.box(i.types.sdtp,this.extension(0,0),t.buffer)}},{key:"trun1",value:function(n){var t=new kt,e=kt.writeUint32(n.samples.length),r=null;if(n.isVideo){var a=n.videoSencLength;r=kt.writeUint32(n.samples.length*16+a+149),!n.isVideoEncryption&&n.isAudioEncryption&&(r=kt.writeUint32(n.samples.length*16+92))}else{var o=n.samples.length*12+124;n.isAudioEncryption&&(o=n.samples.length*12+8*n.audioSenc.length+177),r=kt.writeUint32(o)}return n.samples.forEach(function(l){t.write(kt.writeUint32(l.duration)),t.write(kt.writeUint32(l.size)),t.write(kt.writeUint32(l.keyframe?33554432:65536)),n.isVideo&&t.write(kt.writeUint32(l.cts?l.cts:0))}),i.box(i.types.trun,this.extension(0,n.flags),e,r,t.buffer)}},{key:"senc",value:function(n){var t=new kt,e=n.samples.length,r=n.isVideo?16:8,a=n.isVideo?2:0,o=[],l=0;return n.isVideo?(o=n.videoSenc,l=n.videoSencLength):o=n.audioSenc,l=l||r*e,t.write(kt.writeUint32(16+l),i.types.senc,this.extension(0,a)),t.write(kt.writeUint32(e)),o.forEach(function(u){for(var c=0;c<u.InitializationVector.length;c++)t.write(new Uint8Array([u.InitializationVector[c]]));u.subsamples&&u.subsamples.length&&(t.write(kt.writeUint16(u.subsamples.length)),u.subsamples.forEach(function(f){t.write(kt.writeUint16(f.BytesOfClearData)),t.write(kt.writeUint32(f.BytesOfProtectedData))}))}),t.buffer}},{key:"saio",value:function(n){var t=n.samples.length*12+141;!n.isVideo&&n.isAudioEncryption&&(t=149);var e=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255]);return i.box(i.types.saio,e)}},{key:"saiz",value:function(n){var t=n.samples.length,e=new Uint8Array([0,0,0,0,16,t>>24&255,t>>16&255,t>>8&255,t&255]);return i.box(i.types.saiz,e)}},{key:"sbgp",value:function(){var n=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return i.box(i.types.sbgp,this.extension(0,0),n)}},{key:"extension",value:function(n,t){return new Uint8Array([n,t>>16&255,t>>8&255,t&255])}},{key:"tfhd",value:function(n){return i.box(i.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255]))}},{key:"tfdt",value:function(n,t){var e=Math.floor(t/(Oc+1)),r=Math.floor(t%(Oc+1));return n.useEME&&(n.isVideoEncryption||n.isAudioEncryption)?i.box(i.types.tfdt,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])):i.box(i.types.tfdt,new Uint8Array([1,0,0,0,e>>24,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255]))}},{key:"trun",value:function(n,t){var e=n.length,r=12+16*e;t+=8+r;var a=new Uint8Array(r);a.set([0,0,15,1,e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0);for(var o=0;o<e;o++){var l=n[o],u=l.duration,c=l.size,f=l.flag,h=f===void 0?{}:f,d=l.cts,v=d===void 0?0:d;a.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,h.isLeading<<2|(h.dependsOn===null||h.dependsOn===void 0?1:h.dependsOn),h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|(h.isNonSyncSample===null||h.isNonSyncSample===void 0?1:h.isNonSyncSample),h.degradationPriority&61440,h.degradationPriority&15,v>>>24&255,v>>>16&255,v>>>8&255,v&255],12+16*o)}return i.box(i.types.trun,a)}},{key:"moovMP4",value:function(n){return i.box.apply(i,[i.types.moov,i.mvhd(n[0].duration,n[0].timescale)].concat(Ht(n.map(function(t){return i.trackMP4(t)}))))}},{key:"trackMP4",value:function(n){return i.box(i.types.trak,i.tkhd(n.id,n.duration,n.width,n.height),i.mdiaMP4(n))}},{key:"mdiaMP4",value:function(n){return i.box(i.types.mdia,i.mdhd(n.duration,n.timescale),i.hdlr(n.type),i.minfMP4(n))}},{key:"minfMP4",value:function(n){return i.box(i.types.minf,n.type===hi.VIDEO?i.VMHD:i.SMHD,i.DINF,i.stblMP4(n))}},{key:"stblMP4",value:function(n){var t=n.ext,e=[i.stsd(n),i.stts(t.stts),i.stsc(t.stsc),i.stsz(t.stsz),i.stco(t.stco)];return t.stss.length&&e.push(i.stss(t.stss)),t.ctts.length&&e.push(i.ctts(t.ctts)),i.box.apply(i,[i.types.stbl].concat(e))}},{key:"stts",value:function(n){var t=n.length,e=new Uint8Array(8*t),r=0;return n.forEach(function(a){var o=a.value,l=a.count;e.set([l>>24,l>>16&255,l>>8&255,l&255,o>>24,o>>16&255,o>>8&255,o&255],r),r+=8}),i.box(i.types.stts,Yt(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stsc",value:function(n){var t=n.length,e=new Uint8Array(12*t),r=0;return n.forEach(function(a){var o=a.firstChunk,l=a.samplesPerChunk,u=a.sampleDescIndex;e.set([o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255,u>>24,u>>16&255,u>>8&255,u&255],r),r+=12}),i.box(i.types.stsc,Yt(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stsz",value:function(n){var t=n.length,e=new Uint8Array(4*t),r=0;return n.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],r),r+=4}),i.box(i.types.stsz,Yt(new Uint8Array([0,0,0,0,0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stco",value:function(n){var t=n.length,e=new Uint8Array(4*t),r=0;return n.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],r),r+=4}),i.box(i.types.stco,Yt(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"stss",value:function(n){var t=n.length,e=new Uint8Array(4*t),r=0;return n.forEach(function(a){e.set([a>>24,a>>16&255,a>>8&255,a&255],r),r+=4}),i.box(i.types.stss,Yt(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"ctts",value:function(n){var t=n.length,e=new Uint8Array(8*t),r=0;return n.forEach(function(a){var o=a.value,l=a.count;e.set([l>>24,l>>16&255,l>>8&255,l&255,o>>24,o>>16&255,o>>8&255,o&255],r),r+=8}),i.box(i.types.ctts,Yt(new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]),e))}},{key:"styp",value:function(){return i.box(i.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(n){var t=n.timescale,e=n.samples[0].duration,r=e*n.samples.length,a=n.samples[0].sampleOffset*e,o=8;n.samples.forEach(function(h){o+=h.size});var l=0;if(n.isVideo){var u=0,c;n.videoSenc&&(c=n.videoSenc),n.isVideo&&c.forEach(function(h){u=u+8,h.subsamples&&h.subsamples.length&&(u=u+2,u=u+h.subsamples.length*6)}),n.videoSencLength=u,l=o+141+n.samples.length*16+u,n.useEME&&n.isAudioEncryption&&!n.isVideoEncryption&&(l=o+n.samples.length*16+84)}else l=o+116+n.samples.length*12,n.useEME&&n.isAudioEncryption&&(l=o+169+n.samples.length*12+8*n.audioSenc.length);var f=new Uint8Array([0,0,0,0,0,0,0,n.id&255,t>>24&255,t>>16&255,t>>8&255,t&255,a>>24&255,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,1,0,l>>16&255,l>>8&255,l&255,r>>24&255,r>>16&255,r>>8&255,r&255,144,0,0,0]);return i.box(i.types.sidx,f)}},{key:"mdat",value:function(n){var t=i.box(i.types.mdat,n);return t}}]),i}();q(Re,"types",["Opus","dOps","av01","av1C","avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce(function(i,s){return i[s]=[s.charCodeAt(0),s.charCodeAt(1),s.charCodeAt(2),s.charCodeAt(3)],i},Object.create(null)));q(Re,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])});q(Re,"FTYPAVC1",Re.box(Re.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49])));q(Re,"FTYPHEV1",Re.box(Re.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49])));q(Re,"DINF",Re.box(Re.types.dinf,Re.box(Re.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]))));q(Re,"VMHD",Re.box(Re.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])));q(Re,"SMHD",Re.box(Re.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0])));q(Re,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0]));q(Re,"STTS",Re.box(Re.types.stts,Re.StblTable));q(Re,"STSC",Re.box(Re.types.stsc,Re.StblTable));q(Re,"STSZ",Re.box(Re.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])));q(Re,"STCO",Re.box(Re.types.stco,Re.StblTable));var Bd=function(){function i(s,n){at(this,i),this.name=s||"",this._prefix="[".concat(this.name,"]"),i.disabled=n}return ot(i,[{key:"debug",value:function(){var n;if(!i.disabled){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];(n=console).debug.apply(n,[this._prefix].concat(e))}}},{key:"log",value:function(){var n;if(!i.disabled){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];(n=console).log.apply(n,[this._prefix].concat(e))}}},{key:"warn",value:function(){var n;if(!i.disabled){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];(n=console).warn.apply(n,[this._prefix].concat(e))}}},{key:"error",value:function(){var n;if(!i.disabled){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];(n=console).error.apply(n,[this._prefix].concat(e))}}},{key:"table",value:function(){var n;i.disabled||(console.group(this._prefix),(n=console).table.apply(n,arguments),console.groupEnd())}}],[{key:"enable",value:function(){i.disabled=!1}},{key:"disable",value:function(){i.disabled=!0}}]),i}();q(Bd,"disabled",!0);var U_=function(){function i(s,n,t){at(this,i),this.videoTrack=s,this.audioTrack=n;var e=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=e&&Number(e[1])<50,this.log=new Bd("FMP4Remuxer",t&&t.openLog?!t.openLog:!0)}return ot(i,[{key:"remux",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.videoTrack,r=this.audioTrack,a=e.exist(),o=r.exist(),l,u,c,f=[];n&&(t&&t.initMerge?(a&&f.push(this.videoTrack),o&&f.push(this.audioTrack),c=Re.initSegment(f)):(a&&(l=Re.initSegment([this.videoTrack])),o&&(u=Re.initSegment([this.audioTrack]))));var h,d;return a&&e.hasSample()&&(h=this._remuxVideo()),o&&r.hasSample()&&(d=this._remuxAudio()),e.samples=[],r.samples=[],{initSegment:c,videoInitSegment:l,audioInitSegment:u,videoSegment:h,audioSegment:d}}},{key:"_remuxVideo",value:function(){var n=this.videoTrack;this.forceFirstIDR&&(n.samples[0].flag={dependsOn:2,isNonSyncSample:0});var t=n.samples,e=/av01/.test(n.codec),r=0;e?t.forEach(function(_){r+=_.data.byteLength}):t.forEach(function(_){r+=_.units.reduce(function(E,k){return E+k.byteLength},0),r+=_.units.length*4});var a=new Uint8Array(r);if(e)for(var o=0,l=t.length,u=0,c;o<l;o++)c=t[o],a.set(c.data,u),c.size=c.data.byteLength,u+=c.size;else for(var f=new DataView(a.buffer),h=function(E,k){k=t[d];var N=0;k.units.forEach(function(I){f.setUint32(E,I.byteLength),E+=4,a.set(I,E),E+=I.byteLength,N+=4+I.byteLength}),k.size=N,m=E,p=k},d=0,v=t.length,m=0,p;d<v;d++)h(m,p);var S=Re.mdat(a),C=Re.moof([n]);return Yt(C,S)}},{key:"_remuxAudio",value:function(){var n=this.audioTrack,t=new Uint8Array(n.samples.reduce(function(a,o){return a+o.size},0));n.samples.reduce(function(a,o){return t.set(o.data,a),a+o.size},0);var e=Re.mdat(t),r=Re.moof([n]);return Yt(r,e)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),i}(),V_=function(){function i(){dt(this,i);var s=window.crypto||window.msCrypto;this.subtle=s&&(s.subtle||s.webkitSubtle),this.externalDecryptor=null}return vt(i,[{key:"destroy",value:function(){var n;(n=this.externalDecryptor)!==null&&n!==void 0&&n.destroy&&this.externalDecryptor.destroy()}},{key:"decrypt",value:function(n,t){if(!(!n&&!t)){var e=[];return n&&(e[0]=this._decryptSegment(n)),t&&(e[1]=this._decryptSegment(t)),Promise.all(e)}}},{key:"_decryptSegment",value:function(){var s=He(ce().mark(function t(e){var r;return ce().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r=e.data,!e.key){o.next=5;break}return o.next=4,this._decryptData(e.data,e.key,e.keyIv);case 4:r=o.sent;case 5:if(e.map){o.next=7;break}return o.abrupt("return",r);case 7:return o.abrupt("return",Us(e.map,r));case 8:case"end":return o.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"_decryptData",value:function(){var s=He(ce().mark(function t(e,r,a){var o;return ce().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.externalDecryptor){u.next=6;break}return u.next=3,this.externalDecryptor.decrypt(e,r,a);case 3:return u.abrupt("return",u.sent);case 6:if(this.subtle){u.next=8;break}throw new Error("crypto is not defined");case 8:return u.next=10,this.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt","decrypt"]);case 10:return o=u.sent,u.t0=Uint8Array,u.next=14,this.subtle.decrypt({name:"AES-CBC",iv:a},o,e);case 14:return u.t1=u.sent,u.abrupt("return",new u.t0(u.t1));case 16:case"end":return u.stop()}},t,this)}));function n(t,e,r){return s.apply(this,arguments)}return n}()}]),i}(),Ue=Ge(Ge({},_e),{},{STREAM_PARSED:"core.streamparsed",NO_AUDIO_TRACK:"core.noaudiotrack",SUBTITLE_SEGMENTS:"core.subtitlesegments",SUBTITLE_PLAYLIST:"core.subtitleplaylist",SEI_PAYLOAD_TIME:"core.seipayloadtime",APPEND_COST:"core.appendcost"}),_o=new In("Transmuxer"),Rc=function(){function i(s,n,t,e){dt(this,i),L(this,"_initSegmentId",""),this.hls=s,this._demuxer=n?new B_:new Nd(null,null,null,e),this._isMP4=n,t&&(this._remuxer=new U_(this._demuxer.videoTrack,this._demuxer.audioTrack))}return vt(i,[{key:"transmux",value:function(n,t,e,r,a,o){var l=this._demuxer;try{this._isMP4?l.demux(n,t):l.demuxAndFix(Us(n,t),e,r,a)}catch(N){throw new st(Me.DEMUX,Me.SUB_TYPES.HLS,N)}var u=l.videoTrack,c=l.audioTrack,f=l.metadataTrack,h={codec:u.codec,timescale:u.timescale,firstDts:u.firstDts/u.timescale,firstPts:u.firstPts/u.timescale,duration:u.samplesDuration/u.timescale},d={codec:c.codec,timescale:c.timescale,firstDts:c.firstDts/u.timescale,firstPts:c.firstPts/u.timescale,duration:c.samplesDuration/u.timescale,container:c.container},v="".concat(u.codec,"/").concat(u.width,"/").concat(u.height,"/").concat(c.codec,"/").concat(c.config);if(v!==this._initSegmentId&&(this._initSegmentId=v,o=!0),this._fireEvents(u,c,f,e||o),this.hls.emit(Ue.DEMUXED_TRACK,{videoTrack:u,audioTrack:c}),this._remuxer){o&&this.hls.isLive&&!this.hls.config.mseLowLatency&&(u.duration=this.hls.totalDuration*u.timescale,c.duration=this.hls.totalDuration*c.timescale);try{var m=this._remuxer.remux(o),p=m.videoInitSegment,S=m.videoSegment,C=m.audioInitSegment,_=m.audioSegment,E=Us(p,S),k=Us(C,_);return[E?Ge(Ge({},h),{},{data:E}):void 0,k?Ge(Ge({},d),{},{data:k}):void 0]}catch(N){throw new st(Me.REMUX,Me.SUB_TYPES.FMP4,N)}}else return[u,c]}},{key:"_fireEvents",value:function(n,t,e,r){var a=this,o=[n,t],l="discontinuity: ".concat(r);o.forEach(function(u){var c;(c=u.samples)!==null&&c!==void 0&&c.length&&(l+="; ".concat(u.samples.length," ").concat(u.type===hi.VIDEO?"video":"audio"," samples, firstDts/firstPts/duration: ").concat((u.firstDts/u.timescale).toFixed(3),"/").concat((u.firstPts/u.timescale).toFixed(3),"/").concat((u.samplesDuration/u.timescale).toFixed(3))),r&&u.exist()&&a.hls.emit(Ue.METADATA_PARSED,{type:u.type,track:u,meta:Ge({codec:u.codec,timescale:u.timescale,baseDts:u.baseDts},u.type===hi.VIDEO?{width:u.width,height:u.height,sarRatio:u.sarRatio}:{codec:u.codec,channelCount:u.channelCount,sampleRate:u.sampleRate})})}),_o.debug(l),n.warnings.forEach(function(u){var c;switch(u.type){case ln.LARGE_AV_SHIFT:c=Ue.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case ln.LARGE_VIDEO_GAP:c=Ue.LARGE_VIDEO_DTS_GAP_DETECT;break;case ln.LARGE_VIDEO_GAP_BETWEEN_CHUNK:c=Ue.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT;break}c&&a.hls.emit(Ue.STREAM_EXCEPTION,Ge(Ge({},u),{},{type:c})),_o.warn("video exception",u)}),t.warnings.forEach(function(u){var c;switch(u.type){case ln.LARGE_AUDIO_GAP:c=Ue.LARGE_AUDIO_DTS_GAP_DETECT;break;case ln.AUDIO_FILLED:c=Ue.AUDIO_GAP_DETECT;break;case ln.AUDIO_DROPPED:c=Ue.AUDIO_OVERLAP_DETECT;break}c&&a.hls.emit(Ue.STREAM_EXCEPTION,Ge(Ge({},u),{},{type:c})),_o.warn("audio exception",u)}),n.samples.forEach(function(u){u.keyframe&&a.hls.emit(Ue.KEYFRAME,{pts:u.pts})}),e.seiSamples.forEach(function(u){a.hls.emit(Ue.SEI,Ge(Ge({},u),{},{originPts:u.originPts/90,sei:{code:u.data.type,content:u.data.payload,dts:u.pts}}))})}}]),i}(),H_=["data"],$_=["data"],Mc=new In("BufferService"),G_=function(){function i(s){var n=this;dt(this,i),L(this,"_decryptor",new V_),L(this,"_transmuxer",null),L(this,"_mse",null),L(this,"_softVideo",null),L(this,"_sourceCreated",!1),L(this,"_needInitSegment",!0),L(this,"_directAppend",!1),this.hls=s,s.config.softDecode?this._softVideo=s.media:(this._mse=new Rt(null,{preferMMS:s.config.preferMMS}),s.config.url&&this._mse.bindMedia(s.media).then(function(t){n.hls.emit(_e.MEDIASOURCE_OPENED,t)})),s.config.decryptor&&(this._decryptor.externalDecryptor=s.config.decryptor)}return vt(i,[{key:"baseDts",get:function(){var n,t,e;return(n=this._transmuxer)===null||n===void 0||(t=n._demuxer)===null||t===void 0||(e=t._fixer)===null||e===void 0?void 0:e._baseDts}},{key:"nbSb",get:function(){var n;return(n=this._mse)!==null&&n!==void 0&&n._sourceBuffer?Object.keys(this._mse._sourceBuffer).length:0}},{key:"msIsOpened",get:function(){var n;return(n=this._mse)===null||n===void 0?void 0:n.isOpened}},{key:"msHasOpTasks",get:function(){var n;return(n=this._mse)===null||n===void 0?void 0:n.hasOpTasks}},{key:"msStreaming",get:function(){var n;return(n=this._mse)===null||n===void 0?void 0:n.streaming}},{key:"updateDuration",value:function(){var s=He(ce().mark(function t(e){return ce().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(Mc.debug("update duration",e),!this._mse){a.next=9;break}if(this._mse.isOpened){a.next=5;break}return a.next=5,this._mse.open();case 5:return a.next=7,this._mse.updateDuration(e);case 7:a.next=10;break;case 9:this._softVideo&&(this._softVideo.duration=e);case 10:case"end":return a.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"createSource",value:function(n,t,e,r){if(!this._sourceCreated){var a=n||t;if(a){if(Nd.probe(a))this._transmuxer||(this._transmuxer=new Rc(this.hls,!1,!this._softVideo,this.hls.config.fixerConfig));else if(et.probe(a))if(this._softVideo)this._transmuxer||(this._transmuxer=new Rc(this.hls,!0,null,this.hls.config.fixerConfig));else{this._directAppend=!0;var o=!1;n&&!e&&et.findBox(n,["moov","trak"]).forEach(function(l){var u=et.findBox(l.data,["trak","mdia","minf","stbl","stsd"])[0];if(u){var c=et.stsd(u).entries[0];if(c){if(c.hvcC)e=c.hvcC.codec||"hev1.1.6.L93.B0";else if(c.avcC)e=c.avcC.codec;else if(c.sampleRate||c.esds){var f;r=((f=c.esds)===null||f===void 0?void 0:f.codec)||"mp4a.40.2",o=!0}}}}),t&&!r&&et.findBox(t,["moov","trak","mdia","minf","stbl","stsd"]).forEach(function(l){var u=et.stsd(l).entries[0];u&&u.esds&&(r=u.esds.codec)}),n&&!e&&(e="avc1.42e01e"),t&&!r&&(r="mp4a.40.2"),o&&(e+=", ".concat(r),r=""),this._createMseSource(e,r)}else throw new st(Me.OTHER,null,null,null,"unsupported stream");this._softVideo&&(this._sourceCreated=!0)}}}},{key:"appendBuffer",value:function(){var s=He(ce().mark(function t(e,r,a,o,l,u,c){var f=this,h,d,v,m,p,S,C,_,E,k,N,I,U,D,O;return ce().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!(a!=null&&a.length)&&!(o!=null&&o.length))){y.next=2;break}return y.abrupt("return");case 2:if(h=function(){var w;if((w=f.hls)!==null&&w!==void 0&&w.emit){var R;(R=f.hls)===null||R===void 0||R.emit(_e.APPEND_BUFFER,{start:e.start,end:e.end})}},!this._directAppend){y.next=8;break}return d=[],a&&d.push(this._mse.append(Rt.VIDEO,a)),o&&d.push(this._mse.append(Rt.AUDIO,o)),y.abrupt("return",Promise.all(d).then(h));case 8:if(v=this._needInitSegment||l,m=this._transmuxer.transmux(a,o,v,u,c,this._needInitSegment||l),p=Kn(m,2),S=p[0],C=p[1],o&&r&&(r==null||r.setTrackExist(!1,!0)),o&&e&&(e==null||e.setTrackExist(!0,!1)),r||e==null||e.setTrackExist(!!S,!!C),S&&!C&&this.hls.emit(Ue.NO_AUDIO_TRACK),!this._softVideo){y.next=20;break}this._softVideo.appendBuffer(S,C),this._needInitSegment=!1,h(),y.next=32;break;case 20:if(!this._mse){y.next=32;break}return _=!this._sourceCreated,_&&this._createMseSource(S==null?void 0:S.codec,C==null?void 0:C.codec,C==null?void 0:C.container),this._needInitSegment=!1,E=this._mse,k=[],v&&!_&&this._handleCodecChange(S,C).forEach(function(b){return k.push(b)}),S&&(N=S.data,I=zo(S,H_),k.push(E.append(Rt.VIDEO,N,I))),C&&(U=C.data,D=zo(C,$_),k.push(E.append(Rt.AUDIO,U,D))),O=Promise.all(k),O.then(h),y.abrupt("return",O);case 32:case"end":return y.stop()}},t,this)}));function n(t,e,r,a,o,l,u){return s.apply(this,arguments)}return n}()},{key:"removeBuffer",value:function(){var s=He(ce().mark(function t(){var e=this,r,a,o,l=arguments;return ce().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=l.length>0&&l[0]!==void 0?l[0]:0,a=l.length>1&&l[1]!==void 0?l[1]:1/0,o=this.hls.media,!(!this._mse||!o||r<0||a<r||r>=this._mse.duration)){c.next=5;break}return c.abrupt("return");case 5:return c.abrupt("return",this._mse.clearBuffer(r,a).then(function(){return e.hls.emit(_e.REMOVE_BUFFER,{start:r,end:a,removeEnd:a})}));case 6:case"end":return c.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"evictBuffer",value:function(){var s=He(ce().mark(function t(e){var r,a,o,l;return ce().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=this.hls.media,!(!this._mse||!r||!e||e<0)){c.next=3;break}return c.abrupt("return");case 3:if(a=r.currentTime,o=a-e,!(o<=0)){c.next=7;break}return c.abrupt("return");case 7:if(l=$t.start($t.get(r)),!(l+1>=o)){c.next=10;break}return c.abrupt("return");case 10:return c.abrupt("return",this.removeBuffer(0,o));case 11:case"end":return c.stop()}},t,this)}));function n(t){return s.apply(this,arguments)}return n}()},{key:"clearAllBuffer",value:function(){var s=He(ce().mark(function t(){return ce().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._mse){r.next=2;break}return r.abrupt("return",this._mse.clearAllBuffer());case 2:case"end":return r.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"decryptBuffer",value:function(n,t){return this._decryptor.decrypt(n,t)}},{key:"reset",value:function(){var s=He(ce().mark(function t(){var e,r=arguments;return ce().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e=r.length>0&&r[0]!==void 0?r[0]:!1,!(this._mse&&!e)){o.next=8;break}return this._transmuxer=null,this._sourceCreated=!1,o.next=6,this._mse.unbindMedia();case 6:return o.next=8,this._mse.bindMedia(this.hls.media);case 8:this._needInitSegment=!0,this._directAppend=!1;case 10:case"end":return o.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"endOfStream",value:function(){var s=He(ce().mark(function t(){return ce().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._mse){r.next=5;break}if(!this._sourceCreated){r.next=5;break}return r.next=4,this._mse.endOfStream();case 4:this.hls.emit(_e.BUFFEREOS);case 5:this._softVideo&&this._softVideo.endOfStream();case 6:case"end":return r.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"setLiveSeekableRange",value:function(){var s=He(ce().mark(function t(e,r){return ce().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this._mse&&this._mse.setLiveSeekableRange(e,r);case 1:case"end":return o.stop()}},t,this)}));function n(t,e){return s.apply(this,arguments)}return n}()},{key:"detachMedia",value:function(){var s=He(ce().mark(function t(){return ce().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._mse){r.next=3;break}return r.next=3,this._mse.unbindMedia();case 3:case"end":return r.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"destroy",value:function(){var s=He(ce().mark(function t(){var e;return ce().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(e=this._decryptor)===null||e===void 0||e.destroy(),a.next=3,this.detachMedia();case 3:this._decryptor=null,this._mse=null,this._softVideo=null;case 6:case"end":return a.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()},{key:"_createMseSource",value:function(n,t,e){Mc.debug("create mse source, videoCodec=".concat(n,", audioCodec=").concat(t));var r=this._mse;r&&(n&&(r.createSource(Rt.VIDEO,"video/mp4;codecs=".concat(n)),this._sourceCreated=!0),t?(r.createSource(Rt.AUDIO,"audio/mp4;codecs=".concat(t)),this._sourceCreated=!0):e&&(r.createSource(Rt.AUDIO,"".concat(e,';codecs=""')),this._sourceCreated=!0),this.hls.emit(_e.SOURCEBUFFER_CREATED))}},{key:"_handleCodecChange",value:function(n,t){var e=[],r=this._mse,a=[{type:Rt.VIDEO,codecs:n==null?void 0:n.codec},{type:Rt.AUDIO,codecs:t==null?void 0:t.codec}];return a.filter(function(o){return!!o.codecs}).forEach(function(o){var l=o.type,u=o.codecs,c=r.getSourceBuffer(l);if(c){var f=u.split(",")[0];new RegExp(f,"ig").test(c.mimeType)||e.push(r.changeType(l,"".concat(l,"/mp4;codecs=").concat(u)))}}),e}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0}},{key:"isFull",value:function(){var n,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rt.VIDEO;return(n=this._mse)===null||n===void 0?void 0:n.isFull(t)}}]),i}();function j_(i){var s=(i==null?void 0:i.media)||document.createElement("video");return Ge(Ge({maxPlaylistSize:50,retryCount:3,retryDelay:1e3,pollRetryCount:2,loadTimeout:1e4,manifestLoadTimeout:1e4,preloadTime:30,softDecode:!1,bufferBehind:10,maxJumpDistance:3,startTime:0,useLowLatency:!0,targetLatency:10,maxLatency:20,allowedStreamTrackChange:!0,seiInTime:!1,manifestList:[],minSegmentsStartPlay:3,preferMMS:!1,preferMMSStreaming:!1,mseLowLatency:!0,fixerConfig:{forceFixLargeGap:!1,largeGapThreshold:5}},i),{},{media:s})}var z_=vt(function i(){dt(this,i),L(this,"version",0),L(this,"streams",[]),L(this,"isMaster",!0)}),Fd={Audio:"AUDIO",Video:"VIDEO",SubTitle:"SUBTITLE",ClosedCaptions:"CLOSED-CAPTIONS"},As={CLEAR_KEY:"org.w3.clearkey",FAIRPLAY:["urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2","com.apple.streamingkeydelivery"],WIDEVINE:["urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha","com.widevine"],PLAYREADY:["urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready"]};function Ud(i){for(var s=[],n=0;n<i.length;n++)Array.isArray(i[n])?s=s.concat(Ud(i[n])):s.push(i[n]);return s}var Vl=vt(function i(){dt(this,i),L(this,"id",0),L(this,"url",""),L(this,"default",!1),L(this,"autoSelect",!1),L(this,"forced",!1),L(this,"group",""),L(this,"name",""),L(this,"lang",""),L(this,"segments",[]),L(this,"endSN",0)}),W_=function(i){Da(n,i);var s=Oa(n);function n(){var t;dt(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),L(De(t),"mediaType",Fd.Audio),L(De(t),"channels",0),t}return vt(n)}(Vl),K_=function(i){Da(n,i);var s=Oa(n);function n(){var t;dt(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),L(De(t),"mediaType",Fd.SubTitle),t}return vt(n)}(Vl),Y_=vt(function i(){dt(this,i),L(this,"id",0),L(this,"bitrate",0),L(this,"width",0),L(this,"height",0),L(this,"name",""),L(this,"url",""),L(this,"audioCodec",""),L(this,"videoCodec",""),L(this,"textCodec",""),L(this,"audioGroup",""),L(this,"audioStreams",[]),L(this,"subtitleStreams",[]),L(this,"closedCaptionsStream",[])}),X_=vt(function i(){dt(this,i),L(this,"version",0),L(this,"url",""),L(this,"type",""),L(this,"startCC",0),L(this,"endCC",0),L(this,"startSN",0),L(this,"endSN",0),L(this,"totalDuration",0),L(this,"targetDuration",0),L(this,"partTargetDuration",0),L(this,"canSkipUntil",0),L(this,"canSkipDateRanges",!1),L(this,"skippedSegments",0),L(this,"canBlockReload",!1),L(this,"partHoldBack",0),L(this,"live",!0),L(this,"lowLatency",!1),L(this,"endPartIndex",0),L(this,"segments",[]),L(this,"dateRanges",{}),L(this,"skippedSegments",0)}),xs=function(){function i(s){dt(this,i),L(this,"sn",0),L(this,"cc",0),L(this,"url",""),L(this,"parentUrl",""),L(this,"title",""),L(this,"start",0),L(this,"duration",0),L(this,"dataTime",""),L(this,"key",null),L(this,"byteRange",null),L(this,"isInitSegment",!1),L(this,"initSegment",null),L(this,"isLast",!1),L(this,"hasAudio",!1),L(this,"hasVideo",!1),L(this,"independent",!1),L(this,"partIndex",0),this.parentUrl=s}return vt(i,[{key:"end",get:function(){return this.start+this.duration}},{key:"setTrackExist",value:function(n,t){this.hasVideo=n,this.hasAudio=t}},{key:"setByteRange",value:function(n,t){this.byteRange=[0];var e=n.split("@");e.length===1&&t&&t.byteRange?(this.byteRange[0]=t.byteRange[1]||0,this.byteRange[0]&&(this.byteRange[0]+=1)):this.byteRange[0]=parseInt(e[1]),this.byteRange[1]=this.byteRange[0]+parseInt(e[0])-1}}]),i}(),q_=function(){function i(s){dt(this,i),L(this,"method",""),L(this,"url",""),L(this,"iv",null),L(this,"keyFormat",""),L(this,"keyFormatVersions",""),s instanceof i&&(this.method=s.method,this.url=s.url,this.keyFormat=s.keyFormat,this.keyFormatVersions=s.keyFormatVersions,s.iv&&(this.iv=new Uint8Array(s.iv)))}return vt(i,[{key:"clone",value:function(n){var t=new i(this);return n!=null&&t.setIVFromSN(n),t}},{key:"setIVFromSN",value:function(n){if(!this.iv&&this.method==="AES-128"&&typeof n=="number"&&this.url){this.iv=new Uint8Array(16);for(var t=12;t<16;t++)this.iv[t]=n>>8*(15-t)&255}}},{key:"isSegmentEncrypted",value:function(){var n=this.method;return n==="AES-128"}},{key:"isValidKeySystem",value:function(){var n=Ud([As.CLEAR_KEY,As.FAIRPLAY,As.WIDEVINE,As.PLAYREADY]).indexOf(this.keyFormat)>-1;if(!n)return!1;var t=["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)>-1;return!!t}},{key:"isSupported",value:function(){return this.method?this.isSegmentEncrypted()?!0:!!this.isValidKeySystem():!1}}]),i}(),J_=function(){function i(s,n,t){dt(this,i),this.msn=s,this.part=n,this.skip=t}return vt(i,[{key:"addDirectives",value:function(n){var t=new self.URL(n);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}]),i}(),Q_=/^#(EXT[^:]*)(?::(.*))?$/,Nc=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,Z_=/^(?:[a-zA-Z0-9+\-.]+:)?\/\//,e1=/^((?:[a-zA-Z0-9+\-.]+:)?\/\/[^/?#]*)?([^?#]*\/)?/;function t1(i){return i.split(/[\r\n]/).map(function(s){return s.trim()}).filter(Boolean)}function Vd(i){var s=i.match(Q_);if(!(!s||!s[1]))return[s[1].replace("EXT-X-",""),s[2]]}function wn(i){for(var s={},n=Nc.exec(i);n;)s[n[1]]=n[2]||n[3],n=Nc.exec(i);return s}function rr(i,s){if(!s||!i||Z_.test(i))return i;var n=e1.exec(s);return n?i[0]==="/"?n[1]+i:n[1]+n[2]+i:i}var n1={audio:[/^mp4a/,/^vorbis$/,/^opus$/,/^flac$/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function bo(i,s){var n=n1[i];if(!(!n||!s||!s.length)){for(var t=0;t<n.length;t++)for(var e=0;e<s.length;e++)if(n[t].test(s[e]))return s[e]}}function i1(i,s){var n;if(s){for(var t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&i[t]!==s[t]){n=t;break}}var e=null;i.DURATION&&(e=parseFloat(i.DURATION),Number.isFinite(e)?i._endDate&&(e=(i._endDate.getTime()-i._startDate.getTime())/1e3):e=null);var r=r1(i.CUE||i["X-CUE"],{pre:!1,post:!1,once:!1});return!!i.ID&&!n&&Number.isFinite(i._startDate.getTime())&&(e===null||e>=0)&&(i.END_ON_NEXT!=="YES"||!!i.CLASS)&&(!i.CUE||!r.pre&&!r.post||r.pre!==r.post)&&(i.CLASS!=="com.apple.hls.interstitial"||"X-ASSET-URI"in i||"X-ASSET-LIST"in i)}function r1(i,s){return(i?i.split(/[ ,]+/):[]).reduce(function(n,t){return n[t.toLowerCase()]=!0,n},s)}function s1(i,s){for(var n=new z_,t=0,e,r=[],a=[];e=i[t++];){var o=Vd(e);if(o){var l=Kn(o,2),u=l[0],c=l[1];if(u==="VERSION")n.version=parseInt(c);else if(u==="MEDIA"&&c){var f=wn(c),h=void 0;switch(f.TYPE){case"AUDIO":h=new W_;break;case"SUBTITLES":h=new K_;break;default:h=new Vl}h.url=rr(f.URI,s),h.default=f.DEFAULT==="YES",h.autoSelect=f.AUTOSELECT==="YES",h.group=f["GROUP-ID"],h.name=f.NAME,h.lang=f.LANGUAGE,f.CHANNELS&&(h.channels=Number(f.CHANNELS.split("/")[0]),Number.isNaN(h.channels)&&(h.channels=0)),f.TYPE==="AUDIO"&&f.URI&&r.push(h),f.TYPE==="SUBTITLES"&&a.push(h)}else if(u==="STREAM-INF"&&c){var d=new Y_,v=wn(c);if(d.bitrate=parseInt(v["AVERAGE-BANDWIDTH"]||v.BANDWIDTH),d.name=v.NAME,d.url=rr(i[t++],s),v.RESOLUTION){var m=v.RESOLUTION.split("x"),p=Kn(m,2),S=p[0],C=p[1];d.width=parseInt(S),d.height=parseInt(C)}if(v.CODECS){var _=v.CODECS.split(/[ ,]+/).filter(Boolean);d.videoCodec=bo("video",_),d.audioCodec=bo("audio",_),d.textCodec=bo("text",_)}d.audioGroup=v.AUDIO,d.subtitleGroup=v.SUBTITLES,n.streams.push(d)}}}return n.streams.forEach(function(E,k){E.id=k}),r.length&&(r.forEach(function(E,k){E.id=k}),n.streams.forEach(function(E){E.audioGroup&&(E.audioStreams=r.filter(function(k){return k.group===E.audioGroup}))})),a.length&&(a.forEach(function(E,k){E.id=k}),n.streams.forEach(function(E){E.subtitleGroup&&(E.subtitleStreams=a.filter(function(k){return k.group===E.subtitleGroup}))})),n}function a1(i,s,n){var t=new X_;t.url=s;for(var e=new xs(s),r=null,a=null,o=0,l=0,u=0,c=0,f,h=!1,d=0;f=i[c++];){if(f[0]!=="#"){if(t.lowLatency){l++;continue}e.sn=l,e.cc=u,e.url=rr(f,s),a&&(e.key=a.clone(l)),r&&(e.initSegment=r),t.segments.push(e),e=new xs(s),l++;continue}var v=Vd(f);if(v){var m=Kn(v,2),p=m[0],S=m[1];switch(p){case"VERSION":t.version=parseInt(S);break;case"PLAYLIST-TYPE":t.type=S==null?void 0:S.toUpperCase();break;case"TARGETDURATION":t.targetDuration=parseFloat(S);break;case"PART-INF":{n&&(t.lowLatency=!0);var C=wn(S);C["PART-TARGET"]&&(t.partTargetDuration=parseFloat(C["PART-TARGET"]))}break;case"SERVER-CONTROL":{var _=wn(S);t.canBlockReload=_["CAN-BLOCK-RELOAD"]==="YES",t.partHoldBack=parseFloat(_["PART-HOLD-BACK"]||0),t.canSkipUntil=parseFloat(_["CAN-SKIP-UNTIL"]||0),t.canSkipDateRanges=t.canSkipUntil>0&&_["CAN-SKIP-DATERANGES"]==="YES"}break;case"ENDLIST":h=!0;break;case"MEDIA-SEQUENCE":l=t.startSN=parseInt(S);break;case"DISCONTINUITY-SEQUENCE":u=t.startCC=parseInt(S);break;case"DISCONTINUITY":u++;break;case"BYTERANGE":e.setByteRange(S,t.segments[t.segments.length-1]);break;case"PART":{if(!t.lowLatency)break;var E=wn(S);e.duration=parseFloat(E.DURATION),e.independent=E.INDEPENDENT==="YES",e.sn=l,e.cc=u,e.partIndex=d,e.start=o,e.duration=parseFloat(E.DURATION),o+=e.duration,e.url=rr(E.URI,s),a&&(e.key=a.clone(l)),r&&(e.initSegment=r),t.segments.push(e),e=new xs(s),d++}break;case"PRELOAD-HINT":{var k=wn(S);if(t.preloadHint=k,k.TYPE==="PART"&&k.URI){var N=k.URI.split(".ts")[0].split("-");t.nextSN=N[3],t.nextIndex=N[N.length-1]}}break;case"PROGRAM-DATE-TIME":e.dataTime=S;break;case"EXTINF":{if(t.lowLatency){d=0;break}var I=S.split(","),U=Kn(I,2),D=U[0],O=U[1];e.start=o,e.duration=parseFloat(D),o+=e.duration,e.title=O}break;case"KEY":{var K=wn(S);if(K.METHOD==="NONE"){a=null;break}if(a=new q_,a.method=K.METHOD,a.url=/^blob:/.test(K.URI)?K.URI:rr(K.URI,s),a.keyFormat=K.KEYFORMAT||"identity",a.keyFormatVersions=K.KEYFORMATVERSIONS,!a.isSupported())throw new Error("encrypt ".concat(K.METHOD,"/").concat(K.KEYFORMAT," is not supported"));if(K.IV){var y=K.IV.slice(2);y=(y.length&1?"0":"")+y,a.iv=new Uint8Array(y.length/2);for(var b=0,w=y.length/2;b<w;b++)a.iv[b]=parseInt(y.slice(b*2,b*2+2),16)}}break;case"MAP":{var R=wn(S);e.url=rr(R.URI,s),R.BYTERANGE&&e.setByteRange(R.BYTERANGE),e.isInitSegment=!0,e.sn=0,a&&(e.key=a.clone(0)),r=e,e=new xs(s)}break;case"SKIP":{var P=wn(S),H=parseInt(P["SKIPPED-SEGMENTS"],10);H<=Number.MAX_SAFE_INTEGER&&(t.skippedSegments+=H,l+=H)}break;case"DATERANGE":{var $=wn(S),ie=t.dateRanges[$.ID];$._startDate=ie?ie._startDate:new Date($["START-DATE"]);var Ee=(ie==null?void 0:ie._endDate)||new Date($.END_DATE);Number.isFinite(Ee)&&($._endDate=Ee),(i1($,ie)||t.skippedSegments)&&(t.dateRanges[$.ID]=$)}break}}}t.segments=t.segments.filter(function(We){return We.duration!==0});var re=t.segments[t.segments.length-1];return re&&(h&&(re.isLast=!0),t.endSN=re.sn,t.endPartIndex=re.partIndex),h&&(t.live=!1),t.totalDuration=o,t.endCC=u,t}var Ls=function(){function i(){dt(this,i)}return vt(i,null,[{key:"parse",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0;if(!n.includes("#EXTM3U"))throw new Error("Invalid m3u8 file");var r=t1(n);return i.isMediaPlaylist(n)?a1(r,t,e):s1(r,t)}},{key:"isMediaPlaylist",value:function(n){return n.includes("#EXTINF:")||n.includes("#EXT-X-TARGETDURATION:")}}]),i}(),o1=function(){function i(s){var n=this;dt(this,i),L(this,"_emitOnLoaded",function(l,u){var c=l.response,f=l.options,h=f||{},d=h.firstByteTime,v=h.startTime,m=h.endTime,p=h.contentLength,S=m-v;n.hls.emit(_e.SPEED,{time:S,byteLength:p,url:u}),n.hls.emit(_e.LOAD_COMPLETE,{url:u,elapsed:S||0}),n.hls.emit(_e.TTFB,{url:u,responseUrl:c.url,elapsed:d-v}),n.hls.emit(_e.LOAD_RESPONSE_HEADERS,{headers:c.headers,url:u})}),L(this,"_onLoaderRetry",function(l,u){n.hls.emit(Ue.LOAD_RETRY,{error:st.network(l),retryTime:u})}),this.hls=s,this._timer=null,this._useLowLatency=s.config.useLowLatency;var t=this.hls.config,e=t.retryCount,r=t.retryDelay,a=t.manifestLoadTimeout,o=t.fetchOptions;this._loader=new hr(Ge(Ge({},o),{},{responseType:"text",retry:e,retryDelay:r,timeout:a,onRetryError:this._onLoaderRetry})),this._audioLoader=new hr(Ge(Ge({},o),{},{responseType:"text",retry:e,retryDelay:r,timeout:a,onRetryError:this._onLoaderRetry})),this._subtitleLoader=new hr(Ge(Ge({},o),{},{responseType:"text",retry:e,retryDelay:r,timeout:a,onRetryError:this._onLoaderRetry}))}return vt(i,[{key:"load",value:function(){var s=He(ce().mark(function t(e,r,a){var o,l,u,c,f,h,d,v,m,p,S,C,_,E,k,N,I,U,D,O;return ce().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return o=[this._loader.load(e)],r&&o.push(this._audioLoader.load(r)),a&&o.push(this._subtitleLoader.load(a)),y.prev=3,y.next=6,Promise.all(o);case 6:if(v=y.sent,m=Kn(v,3),p=m[0],S=m[1],C=m[2],p){y.next=13;break}return y.abrupt("return",[]);case 13:this._emitOnLoaded(p,e),l=p.data,f=p.response.url||e,r?(u=S==null?void 0:S.data,c=C==null?void 0:C.data,h=(S==null||(_=S.response)===null||_===void 0?void 0:_.url)||r,d=(C==null||(E=C.response)===null||E===void 0?void 0:E.url)||a,u&&this._emitOnLoaded(S,r),c&&this._emitOnLoaded(C,a)):(c=S==null?void 0:S.data,d=(S==null||(k=S.response)===null||k===void 0?void 0:k.url)||a,c&&this._emitOnLoaded(S,a)),y.next=22;break;case 19:throw y.prev=19,y.t0=y.catch(3),st.network(y.t0);case 22:if(N=this.hls.config.onPreM3U8Parse,y.prev=23,N&&(l=N(l)||l,u&&(u=N(u,!0)||u),c&&(c=N(c,!0)||c)),I=Ls.parse(l,f,this._useLowLatency),!(((O=I)===null||O===void 0?void 0:O.live)===!1&&I.segments&&!I.segments.length)){y.next=28;break}throw new Error("empty segments list");case 28:u&&(U=Ls.parse(u,h,this._useLowLatency)),c&&(D=Ls.parse(c,d,this._useLowLatency)),y.next=35;break;case 32:throw y.prev=32,y.t1=y.catch(23),new st(Me.MANIFEST,Me.SUB_TYPES.HLS,y.t1);case 35:return I&&(I.isMaster?this.hls.emit(Ue.HLS_MANIFEST_LOADED,{playlist:I}):(this._useLowLatency&&(I.canBlockReload?this.deliveryDirectives=new J_(I.nextSN,I.nextIndex,""):this.deliveryDirectives=null),this.hls.emit(Ue.HLS_LEVEL_LOADED,{playlist:I}))),y.abrupt("return",[I,U,D]);case 37:case"end":return y.stop()}},t,this,[[3,19],[23,32]])}));function n(t,e,r){return s.apply(this,arguments)}return n}()},{key:"parseText",value:function(n,t){var e=this.hls.config.onPreM3U8Parse,r;try{var a;if(e&&(n=e(n)||n),r=Ls.parse(n,t,this._useLowLatency),((a=r)===null||a===void 0?void 0:a.live)===!1&&r.segments&&!r.segments.length)throw new Error("empty segments list")}catch(o){throw new st(Me.MANIFEST,Me.SUB_TYPES.HLS,o)}return r&&(r.isMaster?this.hls.emit(Ue.HLS_MANIFEST_LOADED,{playlist:r}):this.hls.emit(Ue.HLS_LEVEL_LOADED,{playlist:r})),[r]}},{key:"poll",value:function(n,t,e,r,a,o){var l=this;clearTimeout(this._timer),o=o||3e3;var u=this.hls.config.pollRetryCount,c=function(){var f=He(ce().mark(function h(){var d,v;return ce().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return clearTimeout(l._timer),d=n,p.prev=2,l.deliveryDirectives&&(d=l.deliveryDirectives.addDirectives(n)),p.next=6,l.load(d,t,e);case 6:if(v=p.sent,v[0]){p.next=9;break}return p.abrupt("return");case 9:u=l.hls.config.pollRetryCount,r(v[0],v[1],v[2]),p.next=17;break;case 13:p.prev=13,p.t0=p.catch(2),u--,u<=0&&a(p.t0);case 17:l._timer=setTimeout(c,o);case 18:case"end":return p.stop()}},h,null,[[2,13]])}));return function(){return f.apply(this,arguments)}}();this._timer=setTimeout(c,o)}},{key:"stopPoll",value:function(){return clearTimeout(this._timer),this.cancel()}},{key:"cancel",value:function(){return Promise.all([this._loader.cancel(),this._audioLoader.cancel()])}}]),i}();function Hd(i,s,n){return s>n&&(n=s),Math.min(Math.max(i,s),n)}var So=new In("playlist"),Bc=function(){function i(s,n,t){dt(this,i),L(this,"live",void 0),L(this,"id",0),L(this,"bitrate",0),L(this,"width",0),L(this,"height",0),L(this,"name",""),L(this,"url",""),L(this,"audioCodec",""),L(this,"videoCodec",""),L(this,"textCodec",""),L(this,"startCC",0),L(this,"endCC",0),L(this,"startSN",0),L(this,"endSN",-1),L(this,"totalDuration",0),L(this,"targetDuration",0),L(this,"partTargetDuration",0),L(this,"canSkipUntil",0),L(this,"canSkipDateRanges",!1),L(this,"skippedSegments",0),L(this,"canBlockReload",!1),L(this,"partHoldBack",0),L(this,"lowLatency",!1),L(this,"endPartIndex",0),L(this,"snDiff",null),L(this,"segments",[]),L(this,"audioStreams",[]),L(this,"subtitleStreams",[]),L(this,"closedCaptions",[]),L(this,"currentAudioStream",null),L(this,"currentSubtitleStream",null),this.update(this._setLLPlaybackPoint(s),n,t)}return vt(i,[{key:"lastSegment",get:function(){return this.segments.length?this.segments[this.segments.length-1]:null}},{key:"segmentDuration",get:function(){var n;return this.targetDuration||((n=this.segments[0])===null||n===void 0?void 0:n.duration)||0}},{key:"liveEdge",get:function(){return this.endTime},set:function(n){this.endTime=n}},{key:"endTime",get:function(){var n;return((n=this.lastSegment)===null||n===void 0?void 0:n.end)||0},set:function(n){var t=this.lastSegment;t&&(t.duration=n-t.start)}},{key:"currentSubtitleEndSn",get:function(){var n;return((n=this.currentSubtitleStream)===null||n===void 0?void 0:n.endSN)||0}},{key:"clearOldSegment",value:function(n,t){return this.currentAudioStream&&this._clearSegments(n,t),this._clearSegments(n,t)}},{key:"getAudioSegment",value:function(n){if(!(!n||!this.currentAudioStream)){var t=n.sn-this.snDiff;return this.currentAudioStream.segments.find(function(e){return e.sn===t})}}},{key:"update",value:function(n,t){this.url=n.url,Array.isArray(n.segments)?((this.live===null||this.live===void 0)&&(this.live=n.live),this._updateSegments(n,this),this.startCC=n.startCC,this.endCC=n.endCC,this.startSN=n.startSN,this.endSN=n.endSN||-1,this.totalDuration=n.totalDuration,this.targetDuration=n.targetDuration,this.live=n.live,this.lowLatency=n.lowLatency,this.canBlockReload=n.canBlockReload,this.canSkipDateRanges=n.canSkipDateRanges,this.canSkipUntil=n.canSkipUntil,this.partHoldBack=n.partHoldBack,this.partTargetDuration=n.partTargetDuration,this.skippedSegments=n.skippedSegments,this.endPartIndex=n.endPartIndex,t&&this.currentAudioStream&&Array.isArray(t.segments)&&(this._updateSegments(t,this.currentAudioStream),(this.snDiff===null||this.snDiff===void 0)&&n.segments.length&&t.segments.length&&(this.snDiff=n.segments[0].sn-t.segments[0].sn))):(this.id=n.id,this.bitrate=n.bitrate,this.width=n.width,this.height=n.height,this.name=n.name,this.audioCodec=n.audioCodec,this.videoCodec=n.videoCodec,this.textCodec=n.textCodec,this.audioStreams=n.audioStreams,this.subtitleStreams=n.subtitleStreams,!this.currentAudioStream&&this.audioStreams.length&&(this.currentAudioStream=this.audioStreams.find(function(e){return e.default})||this.audioStreams[0]),!this.currentSubtitleStream&&this.subtitleStreams.length&&(this.currentSubtitleStream=this.subtitleStreams.find(function(e){return e.default})||this.subtitleStreams[0]))}},{key:"updateSubtitle",value:function(n){var t=this;if(n&&this.currentSubtitleStream&&Array.isArray(n.segments)){var e=this._updateSegments(n,this.currentSubtitleStream),r=this.currentSubtitleStream.segments;if(r.length>100&&(this.currentSubtitleStream.segments=r.slice(100)),!!e)return e.map(function(a){return{sn:a.sn,url:a.url,duration:a.duration,start:a.start,end:a.end,lang:t.currentSubtitleStream.lang}})}}},{key:"switchSubtitle",value:function(n){var t=this.subtitleStreams.find(function(r){return r.lang===n}),e=this.currentSubtitleStream;t&&(this.currentSubtitleStream=t,e.segments=[])}},{key:"_setLLPlaybackPoint",value:function(n){if(!n.lowLatency||!n.segments.length)return n;for(var t=n.totalDuration-n.partHoldBack,e=n.segments,r=0,a=0,o=e.length;a<o;a++)e[a].start<=t&&e[a].independent&&(r=a);var l=e.slice(r),u=0;return l.forEach(function(c){c.start=u,u=c.end}),n.segments=l,n.totalDuration=u,n.startSN=l[0].sn,n.startCC=l[0].cc,So.log("set ll-hls playback point: SN=".concat(n.startSN," partIndex=").concat(l[0].partIndex,", duration=").concat(u)),n}},{key:"_clearSegments",value:function(n,t){for(var e=0,r=this.segments,a=0,o=r.length;a<o;a++)if(r[a].end>=n){e=a;break}return e>t&&(e=t),e&&(this.segments=this.segments.slice(e),this.currentAudioStream&&(this.currentAudioStream.segments=this.currentAudioStream.segments.slice(e))),t-e}},{key:"_updateSegments",value:function(n,t){var e=t.segments;if(this.live){var r,a=n.lowLatency,o=e[e.length-1],l=(r=o==null?void 0:o.sn)!==null&&r!==void 0?r:-1,u=(o==null?void 0:o.partIndex)||0,c=l<n.endSN&&n.segments.length;if(a&&(c=c||u<n.endPartIndex),c){So.log("update segments: endSN:".concat(l,", partIndex:").concat(u," --> endSN:").concat(n.endSN,", partIndex:").concat(n.endPartIndex));var f=n.segments.findIndex(function(p){return p.sn===l&&p.partIndex===u}),h=f<0?n.segments:n.segments.slice(f+1);if(e.length&&h.length){var d=o.end,v=d;h.forEach(function(p){p.start=d,d=p.end}),So.log("liveEdge: ".concat(v," -> ").concat(d));var m=(o==null?void 0:o.cc)||-1;m>h[0].cc&&h.forEach(function(p){return p.cc+=m})}return t.endSN=n.endSN,t.segments=e.concat(h),h}}else t.segments=n.segments}}]),i}(),l1=function(){function i(s){dt(this,i),L(this,"streams",[]),L(this,"currentStream",null),L(this,"dvrWindow",0),L(this,"_segmentPointer",-1),this.hls=s}return vt(i,[{key:"lowLatency",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.lowLatency}},{key:"lastSegment",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.lastSegment}},{key:"currentSegment",get:function(){var n;return(n=this.currentSegments)===null||n===void 0?void 0:n[this._segmentPointer]}},{key:"nextSegment",get:function(){var n;return(n=this.currentSegments)===null||n===void 0?void 0:n[this._segmentPointer+1]}},{key:"currentSegments",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.segments}},{key:"currentSubtitleEndSn",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.currentSubtitleEndSn}},{key:"liveEdge",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.liveEdge},set:function(n){this.currentStream&&(this.currentStream.liveEdge=n)}},{key:"totalDuration",get:function(){var n;return((n=this.currentStream)===null||n===void 0?void 0:n.totalDuration)||0}},{key:"seekRange",get:function(){var n=this.currentSegments;if(!(!n||!n.length))return[n[0].start,n[n.length-1].end]}},{key:"nbSegments",get:function(){var n;return((n=this.currentSegments)===null||n===void 0?void 0:n.length)||0}},{key:"isEmpty",get:function(){var n;return!((n=this.currentSegments)!==null&&n!==void 0&&n.length)}},{key:"isLive",get:function(){var n;return(n=this.currentStream)===null||n===void 0?void 0:n.live}},{key:"hadSegmentLoaded",get:function(){return this._segmentPointer!==-1}},{key:"hasSubtitle",get:function(){var n;return!!((n=this.currentStream)!==null&&n!==void 0&&n.currentSubtitleStream)}},{key:"getAudioSegment",value:function(n){var t;return(t=this.currentStream)===null||t===void 0?void 0:t.getAudioSegment(n)}},{key:"moveSegmentPointer",value:function(n){var t;n==null&&(n=this._segmentPointer+1),this._segmentPointer=Hd(n,-1,(t=this.currentSegments)===null||t===void 0?void 0:t.length)}},{key:"reset",value:function(){this.streams=[],this.currentStream=null,this.dvrWindow=0,this._segmentPointer=-1}},{key:"getSegmentByIndex",value:function(n){var t;return(t=this.currentSegments)===null||t===void 0?void 0:t[n]}},{key:"setNextSegmentByIndex",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this._segmentPointer=n-1}},{key:"setNextSegmentBySN",value:function(){var n,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=(n=this.currentSegments)===null||n===void 0?void 0:n.findIndex(function(r){return r.sn===t});return e!==-1&&this.setNextSegmentByIndex(e+1),e}},{key:"findSegmentIndexByTime",value:function(n){var t=this.currentSegments;if(t){for(var e=0,r=t.length,a;e<r;e++)if(a=t[e],n>=a.start&&n<a.end)return e;var o=t[t.length-1];if(Math.abs(n-(o==null?void 0:o.end))<.2)return t.length-1}}},{key:"upsertPlaylist",value:function(n,t,e){var r=this;if(n){if(n.isMaster)this.streams.length=n.streams.length,n.streams.filter(function(u){return u.url}).forEach(function(u,c){r.streams[c]?r.streams[c].update(u):r.streams[c]=new Bc(u)}),this.currentStream=this.streams[0];else if(Array.isArray(n.segments)){var a=this.currentStream;if(a){a.update(n,t,e);var o=a.updateSubtitle(e);o&&this.hls.emit(Ue.SUBTITLE_SEGMENTS,{list:o})}else this.reset(),this.currentStream=this.streams[0]=new Bc(n,t,e)}var l=this.currentStream;l&&this.hls.isLive&&!this.dvrWindow&&(this.dvrWindow=this.currentSegments.reduce(function(u,c){return u+=c.duration,u},0))}}},{key:"updateSegmentsRanges",value:function(n,t){var e,r=(e=this.currentSegments)===null||e===void 0?void 0:e.filter(function(a){return a.sn>=n});r.forEach(function(a){a.start=t,t=a.end})}},{key:"switchSubtitle",value:function(n){var t;(t=this.currentStream)===null||t===void 0||t.switchSubtitle(n)}},{key:"clearOldSegment",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.hls.config.maxPlaylistSize||50,t=this.currentStream;if(!(!this.dvrWindow||!t)){var e=t.endTime-this.dvrWindow;if(!(e<=0)){var r=t.segments;r.length<=n||(this._segmentPointer=t.clearOldSegment(e,this._segmentPointer))}}}},{key:"checkSegmentTrackChange",value:function(n,t){var e=this.findSegmentIndexByTime(n),r=this.getSegmentByIndex(e);if(r&&!(!r.hasAudio&&!r.hasVideo)){if(t!==2&&r.hasAudio&&r.hasVideo)return r;if(!(r.end-n>.3)){var a=this.getSegmentByIndex(e+1);if(a&&!(!a.hasAudio&&!a.hasVideo)&&(a.hasAudio!==r.hasAudio||a.hasVideo!==r.hasVideo))return a}}}},{key:"feedbackLiveEdge",value:function(n,t){var e,r=this.currentSegments;if(r){var a=((e=this.lastSegment)===null||e===void 0?void 0:e.sn)===n.sn;if(a){this.liveEdge=t;return}this.updateSegmentsRanges(n.sn+1,t)}}}]),i}(),u1=function(){function i(s){var n=this;dt(this,i),L(this,"error",null),L(this,"_emitOnLoaded",function(l,u){var c=l.data,f=l.response,h=l.options,d=h||{},v=d.firstByteTime,m=d.startTime,p=d.endTime,S=d.contentLength,C=p-m;n._bandwidthService.addRecord(S||c.byteLength,C),n.hls.emit(_e.SPEED,{time:C,byteLength:S,url:u}),n.hls.emit(_e.LOAD_COMPLETE,{url:u,elapsed:C||0}),n.hls.emit(_e.TTFB,{url:u,responseUrl:f.url,elapsed:v-m}),n.hls.emit(_e.LOAD_RESPONSE_HEADERS,{headers:f.headers,url:u})}),L(this,"_onLoaderRetry",function(l,u){n.hls.emit(_e.LOAD_RETRY,{error:st.network(l),retryTime:u})}),this.hls=s,this._bandwidthService=new i_,this._mapCache={},this._keyCache={};var t=this.hls.config,e=t.retryCount,r=t.retryDelay,a=t.loadTimeout,o=t.fetchOptions;this._segmentLoader=new hr(Ge(Ge({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:r,timeout:a,onRetryError:this._onLoaderRetry})),this._audioSegmentLoader=new hr(Ge(Ge({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:r,timeout:a,onRetryError:this._onLoaderRetry})),this._keyLoader=new hr(Ge(Ge({},o),{},{responseType:"arraybuffer",retry:e,retryDelay:r,timeout:a,onRetryError:this._onLoaderRetry}))}return vt(i,[{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed()}}},{key:"load",value:function(n,t,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,a=[];return n&&(a[0]=this.loadVideoSegment(n,e)),t&&(a[1]=this.loadAudioSegment(t,r)),Promise.all(a)}},{key:"loadVideoSegment",value:function(n,t){return this._loadSegment(this._segmentLoader,n,t)}},{key:"loadAudioSegment",value:function(n,t){return this._loadSegment(this._audioSegmentLoader,n,t)}},{key:"_loadSegment",value:function(){var s=He(ce().mark(function t(e,r,a){var o=this,l,u,c,f,h,d,v,m,p,S,C,_,E,k,N;return ce().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return v=[],this.hls.emit(_e.LOAD_START,{url:r.url}),v[0]=e.load(r.url),a&&r.initSegment&&(p=r.initSegment.url,u=this._mapCache[p],u||(this.hls.emit(_e.LOAD_START,{url:p}),v[1]=e.load(p).then(function(D){if(D){var O=Object.keys(o._mapCache);O>30&&(o._mapCache={}),u=o._mapCache[p]=D.data,o._emitOnLoaded(D,p)}})),S=(m=r.initSegment.key)===null||m===void 0?void 0:m.url,S&&(d=r.initSegment.key.iv,h=this._keyCache[S],h||(this.hls.emit(_e.LOAD_START,{url:S}),v[2]=this._keyLoader.load(S).then(function(D){D&&(h=o._keyCache[S]=D.data,o._emitOnLoaded(D,S))})))),C=(l=r.key)===null||l===void 0?void 0:l.url,C&&r.key.isSegmentEncrypted()&&(f=r.key.iv,c=this._keyCache[C],c||(this.hls.emit(_e.LOAD_START,{url:C}),v[3]=this._keyLoader.load(C).then(function(D){D&&(c=o._keyCache[C]=D.data,o._emitOnLoaded(D,C))}))),U.next=8,Promise.all(v);case 8:if(_=U.sent,E=Kn(_,1),k=E[0],k){U.next=13;break}return U.abrupt("return");case 13:return N=k.data,this._emitOnLoaded(k,r.url),U.abrupt("return",{data:N,map:u,key:c,mapKey:h,keyIv:f,mapKeyIv:d});case 16:case"end":return U.stop()}},t,this)}));function n(t,e,r){return s.apply(this,arguments)}return n}()},{key:"reset",value:function(){this.error=null,this._mapCache={},this._keyCache={},this._bandwidthService.reset()}},{key:"cancel",value:function(){var s=He(ce().mark(function t(){return ce().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([this._keyLoader.cancel(),this._segmentLoader.cancel(),this._audioSegmentLoader.cancel()]);case 2:case"end":return r.stop()}},t,this)}));function n(){return s.apply(this,arguments)}return n}()}]),i}(),wt=new In("hls"),gr=function(i){Da(n,i);var s=Oa(n);function n(t){var e;return dt(this,n),e=s.call(this),L(De(e),"version",n.version),L(De(e),"media",null),L(De(e),"config",null),L(De(e),"_manifestLoader",null),L(De(e),"_segmentLoader",null),L(De(e),"_playlist",null),L(De(e),"_bufferService",null),L(De(e),"_gapService",null),L(De(e),"_seiService",null),L(De(e),"_stats",null),L(De(e),"_prevSegSn",null),L(De(e),"_prevSegCc",null),L(De(e),"_tickTimer",null),L(De(e),"_tickInterval",500),L(De(e),"_segmentProcessing",!1),L(De(e),"_reloadOnPlay",!1),L(De(e),"_switchUrlOpts",null),L(De(e),"_isProcessQuotaExceeded",!1),L(De(e),"_loadSegment",He(ce().mark(function r(){var a,o,l,u,c,f,h,d,v;return ce().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(e._segmentProcessing||!e.media)){p.next=2;break}return p.abrupt("return");case 2:if(a=e._playlist,o=a.nextSegment,l=a.lastSegment,u=De(e),c=u.config,f=.016,h=Math.min(Math.max((l==null?void 0:l.duration)-f/2||0,f),.1),o){p.next=8;break}return p.abrupt("return");case 8:if(e.isLive){p.next=18;break}if(d=e.bufferInfo(),e.media.paused&&!e.media.currentTime&&(d=e.bufferInfo(d.nextStart||.5)),v=Math.abs(d.end-e.media.duration)<h,!(d.remaining>=c.preloadTime||v)){p.next=15;break}return e._tryEos(),p.abrupt("return");case 15:if(!(c.preferMMSStreaming&&!e._bufferService.msStreaming)){p.next=17;break}return p.abrupt("return");case 17:!e._urlSwitching&&e._prevSegSn!==o.sn-1&&d.end&&Math.abs(o.start-d.end)>1&&e._playlist.setNextSegmentByIndex(e._playlist.findSegmentIndexByTime(d.end+.1));case 18:return p.abrupt("return",e._loadSegmentDirect());case 19:case"end":return p.stop()}},r)}))),L(De(e),"_onLoadeddata",function(){e.isLive&&!e.config.mseLowLatency&&e.media.duration!==1/0&&e._bufferService.updateDuration(1/0).catch(function(r){})}),L(De(e),"_onPlay",He(ce().mark(function r(){return ce().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(e.media.seeking&&e.media.currentTime===0)){o.next=3;break}return wt.debug("replay currentTime 0, return"),o.abrupt("return");case 3:if(clearTimeout(e._disconnectTimer),!e._reloadOnPlay){o.next=9;break}e._reloadOnPlay=!1,e.replay(!0),o.next=12;break;case 9:return o.next=11,e._loadSegment();case 11:e._startTick();case 12:case"end":return o.stop()}},r)}))),L(De(e),"_onPause",function(){if(e.isLive){if(!e._reloadOnPlay){var r=e.config.disconnectTime;if(r==null&&(r=e._playlist.dvrWindow),!Number.isFinite(r))return;clearTimeout(e._disconnectTimer),e._disconnectTimer=setTimeout(function(){e._reloadOnPlay=!0,e._clear()},r||0)}}else e._stopTick()}),L(De(e),"_onSeeking",He(ce().mark(function r(){var a,o,l,u,c,f,h;return ce().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(e.media){v.next=2;break}return v.abrupt("return");case 2:if(e._onCheckQuotaExceeded(),a=e.media.currentTime,o=e._playlist.seekRange,!o){v.next=10;break}if(l=Hd(a,o[0],e.isLive?o[1]:e.media.duration),!(l>=0&&Math.abs(a-l)>=.1)){v.next=10;break}return e.media.currentTime=l,v.abrupt("return");case 10:if(u=e._playlist.currentSegment,c=$t.info($t.get(e.media),a,.1),!u){v.next=17;break}if(!(c.end&&Math.abs(c.end-u.end)<.2)){v.next=15;break}return v.abrupt("return");case 15:if(!(e.isLive&&c.end)){v.next=17;break}return v.abrupt("return");case 17:if(f=e._playlist.findSegmentIndexByTime(a),h=e._playlist.getSegmentByIndex(f),!(f==null||!h||e._segmentProcessing&&h===e._playlist.nextSegment)){v.next=21;break}return v.abrupt("return");case 21:return wt.debug("seek to",a,h),e._playlist.setNextSegmentByIndex(f),e._stopTick(),v.next=26,e._segmentLoader.cancel();case 26:if(e._segmentProcessing=!1,!(!c.end||e.isLive)){v.next=30;break}return v.next=30,e._loadSegmentDirect(!0);case 30:e._startTick();case 31:case"end":return v.stop()}},r)}))),L(De(e),"_onTimeupdate",function(){if(e.media){var r=e.config;if(r.isLive&&r.maxLatency&&r.targetLatency){var a=e._playlist.liveEdge;if(!a)return;var o=a-e.media.currentTime;o>=r.maxLatency&&(wt.debug("latency jump, currentTime:".concat(e.media.currentTime,", liveEdge:").concat(a,",  latency=").concat(o)),e.media.currentTime=a-r.targetLatency)}if(r.seiInTime){var l;(l=e._seiService)===null||l===void 0||l.throw(e.media.currentTime)}r.allowedStreamTrackChange&&!r.softDecode&&e.media.readyState&&e._checkStreamTrackChange(e.media.currentTime)}}),L(De(e),"_tick",function(){if(e.media){e._startTick();var r=e.media,a=e._segmentLoader.error;if(e._onCheckQuotaExceeded(),e._isProcessQuotaExceeded&&(e._bufferService.isFull()||(e._isProcessQuotaExceeded=!1,e._segmentProcessing=!1)),a){var o=.5;(!r.readyState||e.bufferInfo(o).remaining<1)&&(a.fatal=!0,e._emitError(st.network(a)));return}r.readyState&&(Yy(r)?(e._loadSegment(),e._gapService&&e._gapService.do(r,e.config.maxJumpDistance,e.isLive)):r.readyState<2&&e._gapService&&e._gapService.do(r,e.config.maxJumpDistance,r.currentTime?e.isLive:!0)),e.isLive||e._tryEos()}}),e.config=t=j_(t),e.media=e.config.media,e._manifestLoader=new o1(De(e)),e._segmentLoader=new u1(De(e)),e._playlist=new l1(De(e)),e._bufferService=new G_(De(e)),t.seiInTime&&(e._seiService=new Qy(De(e))),t.softDecode||(e._gapService=new Jy),e._stats=new r_(De(e),9e4),e.media.addEventListener("loadeddata",e._onLoadeddata),e.media.addEventListener("play",e._onPlay),e.media.addEventListener("pause",e._onPause),e.media.addEventListener("seeking",e._onSeeking),e.media.addEventListener("timeupdate",e._onTimeupdate),e}return vt(n,[{key:"isLive",get:function(){return this._playlist.isLive}},{key:"streams",get:function(){return this._playlist.streams}},{key:"currentStream",get:function(){return this._playlist.currentStream}},{key:"hasSubtitle",get:function(){return this._playlist.hasSubtitle}},{key:"totalDuration",get:function(){return this._playlist.totalDuration}},{key:"baseDts",get:function(){var e;return(e=this._bufferService)===null||e===void 0?void 0:e.baseDts}},{key:"abrSwitchPoint",get:function(){var e=this._urlSwitching?this._playlist.currentSegment:this._playlist.nextSegment;return e?e.start+e.duration/2:null}},{key:"speedInfo",value:function(){return this._segmentLoader.speedInfo()}},{key:"bufferInfo",value:function(){var e,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.1;return $t.info($t.get(this.media),(e=this.media)===null||e===void 0?void 0:e.currentTime,r)}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"playbackQuality",value:function(){return Xy(this.media)}},{key:"load",value:function(){var t=He(ce().mark(function r(){var a,o,l,u=arguments;return ce().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return a=u.length>0&&u[0]!==void 0?u[0]:"",o=u.length>1&&u[1]!==void 0?u[1]:{},l=typeof o=="boolean"?o:!!(o!=null&&o.reuseMse),Xr(o)==="object"&&o!==null&&o!==void 0&&o.clearSwitchStatus&&(this._urlSwitching=!1,this._switchUrlOpts=null,this.config.startTime=void 0),a&&(this.config.url=a),a=this.config.url,f.next=8,this._reset(l);case 8:return f.next=10,this._loadData(a);case 10:this._startTick();case 11:case"end":return f.stop()}},r,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadData",value:function(){var t=He(ce().mark(function r(a){var o,l,u,c,f,h,d,v,m,p,S,C,_;return ce().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:try{a&&(a=a.trim())}catch{}if(a){k.next=3;break}throw this._emitError(new st(Me.OTHER,Me.SUB_TYPES.OPTION,null,null,"m3u8 url is missing"));case 3:return k.next=5,this._loadM3U8(a);case 5:if(o=k.sent,l=this._playlist.currentStream,!this._urlSwitching){k.next=23;break}if(!this.isLive){k.next=14;break}u=this._playlist.setNextSegmentBySN(this._prevSegSn),wt.log("segment nb=".concat(this._prevSegSn," index of ").concat(u," in the new playlist")),u===-1&&(this._prevSegCc=null,this._prevSegSn=null),k.next=23;break;case 14:if(l.bitrate===0&&(c=this._switchUrlOpts)!==null&&c!==void 0&&c.bitrate&&(l.bitrate=(d=this._switchUrlOpts)===null||d===void 0?void 0:d.bitrate),v=typeof((f=this._switchUrlOpts)===null||f===void 0?void 0:f.startTime)=="number"?(h=this._switchUrlOpts)===null||h===void 0?void 0:h.startTime:this._getSeamlessSwitchPoint(),this.config.startTime=v,m=this._playlist.findSegmentIndexByTime(v),p=this._playlist.getSegmentByIndex(m+1),!p){k.next=23;break}return S=p.start,k.next=23,this._bufferService.removeBuffer(S);case 23:if(o){k.next=25;break}return k.abrupt("return");case 25:if(!this.isLive){k.next=36;break}if(this._bufferService.setLiveSeekableRange(0,4294967295),wt.log("totalDuration first time got:",this._playlist.totalDuration),wt.log("nb segments got:",this._playlist.nbSegments),this.config.targetLatency<this._playlist.totalDuration&&(this.config.targetLatency=this._playlist.totalDuration,this.config.maxLatency=1.5*this.config.targetLatency),o.isMaster||this._pollM3U8(a),!(this._playlist.nbSegments<this.config.minSegmentsStartPlay)){k.next=33;break}return k.abrupt("return");case 33:return k.next=35,this._loadSegment();case 35:return k.abrupt("return");case 36:return k.next=38,this._bufferService.updateDuration(l.totalDuration);case 38:return C=this.config.startTime,C&&((_=this._switchUrlOpts)!==null&&_!==void 0&&_.seamless||(this.media.currentTime=C),this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(C)||0)),k.next=42,this._loadSegment();case 42:case"end":return k.stop()}},r,this)}));function e(r){return t.apply(this,arguments)}return e}()},{key:"replay",value:function(){var t=He(ce().mark(function r(a){return ce().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.config.startTime=0,this._urlSwitching=!1,this._switchUrlOpts=null,l.next=5,this.load();case 5:return this._reloadOnPlay=!1,l.abrupt("return",this.media.play(!a));case 7:case"end":return l.stop()}},r,this)}));function e(r){return t.apply(this,arguments)}return e}()},{key:"switchURL",value:function(){var t=He(ce().mark(function r(a){var o,l,u,c,f,h,d,v=arguments;return ce().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:o=v.length>1&&v[1]!==void 0?v[1]:{},l={seamless:!1,startTime:0,bitrate:0},p.t0=Xr(o),p.next=p.t0==="number"?5:p.t0==="boolean"?7:p.t0==="object"?9:11;break;case 5:return o={startTime:o},p.abrupt("break",12);case 7:return o={seamless:o},p.abrupt("break",12);case 9:for(u in o)(o[u]===void 0||o[u]===null)&&delete o[u];return p.abrupt("break",12);case 11:throw"unsupported switchURL args: ".concat(o);case 12:if(o=Object.assign({},l,o),c=o,f=c.seamless,h=c.startTime,this.config.url=a,this.config.startTime=h,this._switchUrlOpts=o,f){p.next=38;break}if(p.prev=18,!this.config.softDecode){p.next=23;break}p.t1=this.load(a),p.next=26;break;case 23:return p.next=25,this.load(a);case 25:p.t1=p.sent;case 26:d=p.t1,p.next=33;break;case 29:throw p.prev=29,p.t2=p.catch(18),this.emit(Ue.SWITCH_URL_FAILED,p.t2),p.t2;case 33:return this._reloadOnPlay=!1,d&&this.emit(Ue.SWITCH_URL_SUCCESS,{url:a}),p.abrupt("return",this.media.play(!0));case 38:return this._urlSwitching=!0,this.isLive||(this._prevSegSn=null,this._prevSegCc=null),this._playlist.reset(),this._bufferService.seamlessSwitch(),p.next=44,this._clear();case 44:return p.next=46,this._loadData(a);case 46:this._startTick();case 47:this._switchUrlOpts=null;case 48:case"end":return p.stop()}},r,this,[[18,29]])}));function e(r){return t.apply(this,arguments)}return e}()},{key:"switchStream",value:function(){var t=He(ce().mark(function r(a){var o,l,u,c,f,h=arguments;return ce().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o=h.length>1&&h[1]!==void 0?h[1]:!0,l=this.currentStream,u=this.streams,!(!l||l.id===a||!u||u.length<2)){v.next=5;break}return v.abrupt("return");case 5:if(c=u.find(function(m){return m.id===a}),c){v.next=8;break}return v.abrupt("return");case 8:return v.prev=8,v.next=11,this._clear();case 11:if(!o){v.next=14;break}return v.next=14,this._bufferService.clearAllBuffer();case 14:v.next=19;break;case 16:throw v.prev=16,v.t0=v.catch(8),this._emitError(st.create(v.t0));case 19:if(l.currentAudioStream&&c.audioStreams.length>2&&(f=l.currentAudioStream.id,c.currentAudioStream=c.audioStreams.find(function(m){return m.id===f})||c.currentAudioStream),this._playlist.currentStream=c,v.prev=21,!(this.isLive||!c.segments.length)){v.next=25;break}return v.next=25,this._refreshM3U8();case 25:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,v.next=29,this._loadSegmentDirect();case 29:v.next=35;break;case 31:throw v.prev=31,v.t1=v.catch(21),this._playlist.currentStream=l,v.t1;case 35:return this._startTick(),v.abrupt("return",c);case 37:case"end":return v.stop()}},r,this,[[8,16],[21,31]])}));function e(r){return t.apply(this,arguments)}return e}()},{key:"switchAudioStream",value:function(){var t=He(ce().mark(function r(a){var o,l,u,c,f=arguments;return ce().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(o=f.length>1&&f[1]!==void 0?f[1]:!0,l=this.currentStream,l){d.next=4;break}return d.abrupt("return");case 4:if(u=l.currentAudioStream,!(!u||u.id===a||l.audioStreams.length<2)){d.next=7;break}return d.abrupt("return");case 7:if(c=l.audioStreams.find(function(v){return v.id===a}),c){d.next=10;break}return d.abrupt("return");case 10:return d.prev=10,d.next=13,this._clear();case 13:if(!o){d.next=16;break}return d.next=16,this._bufferService.clearAllBuffer();case 16:d.next=21;break;case 18:throw d.prev=18,d.t0=d.catch(10),this._emitError(st.create(d.t0));case 21:if(l.currentAudioStream=c,d.prev=22,!(this.isLive||!c.segments.length)){d.next=26;break}return d.next=26,this._refreshM3U8();case 26:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,d.next=30,this._loadSegmentDirect();case 30:d.next=36;break;case 32:throw d.prev=32,d.t1=d.catch(22),l.currentAudioStream=u,d.t1;case 36:return this._startTick(),d.abrupt("return",c);case 38:case"end":return d.stop()}},r,this,[[10,18],[22,32]])}));function e(r){return t.apply(this,arguments)}return e}()},{key:"switchSubtitleStream",value:function(){var t=He(ce().mark(function r(a){return ce().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._playlist.switchSubtitle(a),l.next=3,this._manifestLoader.stopPoll();case 3:return l.next=5,this._refreshM3U8();case 5:case"end":return l.stop()}},r,this)}));function e(r){return t.apply(this,arguments)}return e}()},{key:"detachMedia",value:function(){var t=He(ce().mark(function r(){return ce().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this._bufferService){o.next=3;break}return o.next=3,this._bufferService.detachMedia();case 3:case"end":return o.stop()}},r,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){var t=He(ce().mark(function r(){var a;return ce().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.media){l.next=2;break}return l.abrupt("return");case 2:return this.removeAllListeners(),this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this.media.removeEventListener("loadeddata",this._onLoadeddata),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("pause",this._onPause),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),l.next=13,Promise.all([this._clear(),this._bufferService.destroy()]);case 13:this.media=null;case 14:case"end":return l.stop()}},r,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_loadM3U8",value:function(){var t=He(ce().mark(function r(a){var o,l,u,c,f,h,d;return ce().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(m.prev=0,c=(l=this.config.manifestList)===null||l===void 0||(u=l.filter(function(p){return p.url===a})[0])===null||u===void 0?void 0:u.manifest,!c){m.next=6;break}m.t0=this._manifestLoader.parseText(c,a),m.next=9;break;case 6:return m.next=8,this._manifestLoader.load(a);case 8:m.t0=m.sent;case 9:f=m.t0,h=Kn(f,1),o=h[0],m.next=17;break;case 14:throw m.prev=14,m.t1=m.catch(0),this._emitError(st.create(m.t1));case 17:if(o){m.next=19;break}return m.abrupt("return");case 19:if(this._playlist.upsertPlaylist(o),!o.isMaster){m.next=24;break}return(d=this._playlist.currentStream.subtitleStreams)!==null&&d!==void 0&&d.length&&this.emit(Ue.SUBTITLE_PLAYLIST,{list:this._playlist.currentStream.subtitleStreams}),m.next=24,this._refreshM3U8();case 24:return this.emit(Ue.STREAM_PARSED),m.abrupt("return",o);case 26:case"end":return m.stop()}},r,this,[[0,14]])}));function e(r){return t.apply(this,arguments)}return e}()},{key:"_refreshM3U8",value:function(){var e,r,a=this,o=this._playlist.currentStream;if(!o||!o.url)throw this._emitError(st.create(null,null,new Error("m3u8 url is not defined")));var l=o.url,u=(e=o.currentAudioStream)===null||e===void 0?void 0:e.url,c=(r=o.currentSubtitleStream)===null||r===void 0?void 0:r.url;return this._manifestLoader.load(l,u,c).then(function(f){var h=Kn(f,3),d=h[0],v=h[1],m=h[2];d&&(a._playlist.upsertPlaylist(d,v,m),a.isLive&&a._pollM3U8(l,u,c))}).catch(function(f){throw a._emitError(st.create(f))})}},{key:"_pollM3U8",value:function(e,r,a){var o=this,l=this._playlist.isEmpty,u;if(this._playlist.lowLatency)u=(this._playlist.currentStream.partTargetDuration||0)*1e3;else{var c;u=(((c=this._playlist.lastSegment)===null||c===void 0?void 0:c.duration)||0)*1e3}this._manifestLoader.poll(e,r,a,function(f,h,d){o._playlist.upsertPlaylist(f,h,d),o._playlist.clearOldSegment();var v=f&&l&&!o._playlist.isEmpty;(v||!o._playlist.hadSegmentLoaded&&o._playlist.nbSegments>=o.config.minSegmentsStartPlay)&&o._loadSegment(),l&&(l=o._playlist.isEmpty)},function(f){o._emitError(st.create(f))},u)}},{key:"_loadSegmentDirect",value:function(){var t=He(ce().mark(function r(a){var o,l,u,c,f,h;return ce().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o=this._playlist.nextSegment,o){v.next=3;break}return v.abrupt("return");case 3:return l=!1,u=null,v.prev=5,this._segmentProcessing=!0,wt.log("load segment, sn:".concat(o.sn,", [").concat(o.start,", ").concat(o.end,"], partIndex:").concat(o.partIndex)),v.next=10,this._reqAndBufferSegment(o,this._playlist.getAudioSegment(o));case 10:l=v.sent,v.next=16;break;case 13:v.prev=13,v.t0=v.catch(5),u=v.t0;case 16:return v.prev=16,this._segmentProcessing=!1,v.finish(16);case 19:if(!u){v.next=26;break}if(!this._bufferService.isFull()){v.next=25;break}return wt.log("load segment, sn:".concat(o.sn,", partIndex:").concat(o.partIndex)),this._segmentProcessing=!0,this._isProcessQuotaExceeded=!0,v.abrupt("return",!1);case 25:return v.abrupt("return",this._emitError(st.create(u)));case 26:return l&&(f=this.bufferInfo().end,this.isLive&&!this.media.seeking&&f&&Math.abs(o.end-f)>1&&(wt.warn("segment: ".concat(o.sn," expected end=").concat(o.end,", real end=").concat(f)),this._playlist.feedbackLiveEdge(o,f)),h=((c=this._playlist.currentStream)===null||c===void 0?void 0:c.url)===o.parentUrl,this._urlSwitching&&!h&&(wt.warn("pre playlist segment appended!"),this._bufferService.seamlessSwitch()),this.isLive&&this._urlSwitching&&h&&(this._urlSwitching=!1,this.emit(Ue.SWITCH_URL_SUCCESS,{url:this.config.url})),this._playlist.moveSegmentPointer(),o.isLast?this._end():a||this._loadSegment()),v.abrupt("return",l);case 28:case"end":return v.stop()}},r,this,[[5,13,16,19]])}));function e(r){return t.apply(this,arguments)}return e}()},{key:"_reqAndBufferSegment",value:function(){var t=He(ce().mark(function r(a,o){var l,u,c,f,h,d,v,m,p,S,C;return ce().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return u=a?a.cc:o.cc,c=this._prevSegCc!==u,f=[],E.prev=3,E.next=6,this._segmentLoader.load(a,o,c);case 6:f=E.sent,E.next=14;break;case 9:throw E.prev=9,E.t0=E.catch(3),E.t0.fatal=!1,this._segmentLoader.error=E.t0,E.t0;case 14:if(f[0]){E.next=16;break}return E.abrupt("return");case 16:return E.next=18,(l=this._bufferService).decryptBuffer.apply(l,Sy(f));case 18:if(h=E.sent,h){E.next=21;break}return E.abrupt("return");case 21:return d=a?a.sn:o.sn,v=a?a.start:o.start,m=this._playlist.currentStream,this._bufferService.createSource(h[0],h[1],m==null?void 0:m.videoCodec,m==null?void 0:m.audioCodec),p=Date.now(),S=this._prevSegSn===d-1,this.isLive&&this._urlSwitching&&(C=this.bufferInfo().end,this._playlist.updateSegmentsRanges(d,C),wt.warn("update the new playlist liveEdge, segment id=".concat(d,", buffer start=").concat(C,", liveEdge=").concat(this._playlist.liveEdge)),v=C),E.next=30,this._bufferService.appendBuffer(a,o,h[0],h[1],c,S,v);case 30:return this.emit(Ue.APPEND_COST,{elapsed:Date.now()-p,url:a.url}),E.next=33,this._bufferService.evictBuffer(this.config.bufferBehind);case 33:return this._prevSegCc=u,this._prevSegSn=d,E.abrupt("return",!0);case 36:case"end":return E.stop()}},r,this,[[3,9]])}));function e(r,a){return t.apply(this,arguments)}return e}()},{key:"_onCheckQuotaExceeded",value:function(){var t=He(ce().mark(function r(){var a,o,l,u,c,f;return ce().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:a=this.media.currentTime,o=this.media.buffered,l=!1,u=0;case 4:if(!(u<o.length)){d.next=11;break}if(!(o.start(0)>=a&&a<o.end(u))){d.next=8;break}return l=!0,d.abrupt("break",11);case 8:u++,d.next=4;break;case 11:if(!this._bufferService.isFull()){d.next=17;break}if(c=l?this.config.bufferBehind:5,f=this.media.currentTime,!(f-c>0)){d.next=17;break}return d.next=17,this._bufferService.removeBuffer(0,f-c);case 17:case"end":return d.stop()}},r,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_checkStreamTrackChange",value:function(e){var r=this._playlist.checkSegmentTrackChange(e,this._bufferService.nbSb);r&&this.switchURL(this.config.url,r.start+.2)}},{key:"_clear",value:function(){var t=He(ce().mark(function r(){return ce().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return clearTimeout(this._disconnectTimer),this._stopTick(),o.next=4,Promise.all([this._segmentLoader.cancel(),this._manifestLoader.stopPoll()]);case 4:this._segmentProcessing=!1;case 5:case"end":return o.stop()}},r,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_reset",value:function(){var t=He(ce().mark(function r(){var a,o,l=arguments;return ce().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=l.length>0&&l[0]!==void 0?l[0]:!1,this._reloadOnPlay=!1,this._prevSegSn=null,this._prevSegCc=null,this._switchUrlOpts=null,this._playlist.reset(),this._segmentLoader.reset(),(a=this._seiService)===null||a===void 0||a.reset(),this._stats.reset(),c.next=11,this._clear();case 11:return c.abrupt("return",this._bufferService.reset(o));case 12:case"end":return c.stop()}},r,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"_end",value:function(){this._clear(),this._bufferService.endOfStream(),(this.media.readyState<=2||this.media.buffered.length>1)&&this._startTick()}},{key:"_stopTick",value:function(){this._tickTimer&&clearTimeout(this._tickTimer),this._tickTimer=null}},{key:"_startTick",value:function(){this._stopTick(),this._tickTimer=setTimeout(this._tick,this._tickInterval)}},{key:"_emitError",value:function(e){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(((r=e.originError)===null||r===void 0?void 0:r.fatal)===!1)wt.warn(e);else{var o,l,u;wt.table(e),wt.error(e),wt.error((o=this.media)===null||o===void 0?void 0:o.error),(l=this.media)!==null&&l!==void 0&&l.readyState&&this.media.pause(),this._stopTick(),this._urlSwitching&&(this._urlSwitching=!1,this.emit(Ue.SWITCH_URL_FAILED,e)),this.emit(Ue.ERROR,e),a&&this._end(),(u=this._seiService)===null||u===void 0||u.reset()}return e}},{key:"_getSeamlessSwitchPoint",value:function(){var e=this.media,r=e.currentTime;if(!e.paused){var a,o=this._playlist.findSegmentIndexByTime(e.currentTime),l=this._playlist.getSegmentByIndex(o),u=(a=this._stats)===null||a===void 0?void 0:a.getStats().downloadSpeed;if(u&&l){var c=l.duration*this._playlist.currentStream.bitrate/u+1;r+=c}else r+=5}return r}},{key:"_tryEos",value:function(){var e,r,a=this.media,o=this._playlist,l=o.nextSegment,u=o.lastSegment,c=(!l||u&&$t.isBuffered(a,u.start+u.duration/2))&&a.readyState&&a.duration>0&&((e=this._bufferService)===null||e===void 0?void 0:e.msIsOpened)&&!((r=this._bufferService)!==null&&r!==void 0&&r.msHasOpTasks);if(c){var f=this.bufferInfo();a.paused&&!a.currentTime&&(f=this.bufferInfo(f.nextStart||.5));var h=Math.abs(f.end-a.duration)<.1||!this.isLive&&u&&f.end>=u.start+u.duration;h&&this._bufferService.endOfStream()}}}],[{key:"isSupported",value:function(e){return!e||e==="video"||e==="audio"?Rt.isSupported():typeof WebAssembly<"u"}},{key:"enableLogger",value:function(){In.enable(),ca.enable()}},{key:"disableLogger",value:function(){In.disable(),ca.disable()}}]),n}(yr);L(gr,"version","3.0.23");try{localStorage.getItem("xgd")?gr.enableLogger():gr.disableLogger()}catch{}var c1=function(){function i(s,n){var t=this;dt(this,i),L(this,"_opts",null),L(this,"_plugin",null),L(this,"_onLowDecode",function(){var e,r,a,o,l=t._opts,u=l.media,c=l.innerDegrade;(e=t._plugin)===null||e===void 0||(r=e.player)===null||r===void 0||r.emit("lowdecode",u.degradeInfo),(a=t._plugin)===null||a===void 0||(o=a.player)===null||o===void 0||o.emit("core_event",Ge(Ge({},u.degradeInfo),{},{eventName:Ue.LOWDECODE})),c===1&&t._degrade(u.src)}),L(this,"_degrade",function(e){var r=t._plugin.player,a=r.video;if(!(a&&a.TAG!=="MVideo")){var o=r.video.degradeVideo;r.video=o,a.degrade(e),e&&(r.config.url=e);var l=r.root.firstChild;l.TAG==="MVideo"&&r.root.replaceChild(o,l);var u=t._plugin.constructor.pluginName.toLowerCase();r.unRegisterPlugin(u),r.once("canplay",function(){r.play()})}}),L(this,"forceDegradeToVideo",function(e){var r=t._opts.innerDegrade;r===1&&t._degrade(e)}),this._opts=s,this._plugin=n,this._init()}return vt(i,[{key:"_init",value:function(){var n=this._opts,t=n.media,e=n.preloadTime,r=n.innerDegrade,a=n.isLive;if(t){if(!a&&t.setPlayMode){t.setPlayMode("VOD");return}r&&t.setAttribute("innerdegrade",r),e&&t.setAttribute("preloadtime",e),this._bindEvents()}}},{key:"_bindEvents",value:function(){var n=this._opts.media;n.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var n,t;(n=this._opts)===null||n===void 0||(t=n.media)===null||t===void 0||t.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),i}(),f1=["currentTime"];function h1(i,s){var n=s.player,t=n.currentTime,e={startTime:t};switch(Xr(i)){case"boolean":e.seamless=i;break;case"object":{var r=i.currentTime,a=zo(i,f1);Object.assign(e,a),typeof r=="number"&&(e.startTime=r);break}}return e}var Hl=function(i){Da(n,i);var s=Oa(n);function n(){var t;dt(this,n);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=s.call.apply(s,[this].concat(r)),L(De(t),"logger",wt),L(De(t),"hls",null),L(De(t),"pluginExtension",null),L(De(t),"getStats",function(){var o;return(o=t.hls)===null||o===void 0?void 0:o.getStats()}),L(De(t),"_onSwitchSubtitle",function(o){var l,u=o.lang;(l=t.hls)===null||l===void 0||l.switchSubtitleStream(u)}),L(De(t),"_keepPauseStatus",function(){var o=t.player.paused;o&&t.player.once("canplay",function(){t.player.pause()})}),t}return vt(n,[{key:"core",get:function(){return this.hls}},{key:"version",get:function(){var e;return(e=this.hls)===null||e===void 0?void 0:e.version}},{key:"softDecode",get:function(){var e,r,a=(e=this.player)===null||e===void 0||(r=e.config)===null||r===void 0?void 0:r.mediaType;return!!a&&a!=="video"&&a!=="audio"&&a!=="offscreen-video"}},{key:"beforePlayerInit",value:function(){var e=this,r=this.player.config,a=this.player.media||this.player.video,o=r.hls||{};if(!(!r.url&&!r.__allowHlsEmptyUrl__||!this.softDecode&&!o.preferMMS&&Rt.isMMSOnly())){this.hls&&this.hls.destroy();var l=Object.getOwnPropertyDescriptor(this.player,"switchURL");(!l||l.writable)&&(this.player.switchURL=function(f,h){return new Promise(function(d,v){var m=e.player,p=e.hls;if(p){var S,C,_=h1(h,e);m.config.url=f,p.switchURL(f,_).then(function(){return d(!0)}).catch(v),!_.seamless&&(S=e.player.config)!==null&&S!==void 0&&(C=S.hls)!==null&&C!==void 0&&C.keepStatusAfterSwitch&&e._keepPauseStatus()}else v()})});var u=this.player.switchURL;if(this.player.handleSource=!1,o.innerDegrade=o.innerDegrade||r.innerDegrade,(o.disconnectTime===null||o.disconnectTime===void 0)&&(o.disconnectTime=0),this.hls=new gr(Ge({softDecode:this.softDecode,isLive:r.isLive,media:a,startTime:r.startTime,url:r.url},o)),this.softDecode||Ln.defineGetterOrSetter(this.player,{url:{get:function(){var h,d;return(h=e.hls)===null||h===void 0||(d=h.media)===null||d===void 0?void 0:d.src},configurable:!0}}),this.softDecode&&(this.pluginExtension=new c1(Ge({isLive:r.isLive,media:a},o),this),this.player.forceDegradeToVideo=function(){for(var f,h=arguments.length,d=new Array(h),v=0;v<h;v++)d[v]=arguments[v];return(f=e.pluginExtension)===null||f===void 0?void 0:f.forceDegradeToVideo.apply(f,d)}),r.isLive){var c;(c=this.player)===null||c===void 0||c.useHooks("replay",function(){var f;return(f=e.hls)===null||f===void 0?void 0:f.replay()})}this.on(os,u),this.on(rd,this._onSwitchSubtitle),this.on(xa,this.destroy.bind(this)),this._transError(),this._transCoreEvent(_e.TTFB),this._transCoreEvent(_e.LOAD_START),this._transCoreEvent(_e.LOAD_RESPONSE_HEADERS),this._transCoreEvent(_e.LOAD_COMPLETE),this._transCoreEvent(_e.LOAD_RETRY),this._transCoreEvent(_e.SOURCEBUFFER_CREATED),this._transCoreEvent(_e.MEDIASOURCE_OPENED),this._transCoreEvent(_e.APPEND_BUFFER),this._transCoreEvent(_e.REMOVE_BUFFER),this._transCoreEvent(_e.BUFFEREOS),this._transCoreEvent(_e.KEYFRAME),this._transCoreEvent(_e.METADATA_PARSED),this._transCoreEvent(_e.DEMUXED_TRACK),this._transCoreEvent(_e.SEI),this._transCoreEvent(_e.SEI_IN_TIME),this._transCoreEvent(_e.SPEED),this._transCoreEvent(_e.HLS_MANIFEST_LOADED),this._transCoreEvent(_e.HLS_LEVEL_LOADED),this._transCoreEvent(_e.STREAM_EXCEPTION),this._transCoreEvent(_e.SWITCH_URL_SUCCESS),this._transCoreEvent(_e.SWITCH_URL_FAILED),this._transCoreEvent(Ue.NO_AUDIO_TRACK),this._transCoreEvent(Ue.STREAM_PARSED),this._transCoreEvent(Ue.SUBTITLE_SEGMENTS),this._transCoreEvent(Ue.SUBTITLE_PLAYLIST),this._transCoreEvent(Ue.APPEND_COST),r.url&&this.hls.load(r.url,{reuseMse:!0}).catch(function(f){})}}},{key:"destroy",value:function(){var e;this.hls&&(this.hls.destroy(),this.hls=null),(e=this.pluginExtension)===null||e===void 0||e.destroy(),this.pluginExtension=null}},{key:"_transError",value:function(){var e=this;this.hls.on(Ue.ERROR,function(r){e.player&&e.player.emit(Vi,new Kr(e.player,r))})}},{key:"_transCoreEvent",value:function(e){var r=this;this.hls.on(e,function(a){r.player&&(r.player.emit("core_event",Ge(Ge({},a),{},{eventName:e})),e===_e.SEI_IN_TIME&&r.hls.hasSubtitle&&r._emitSeiPaylodTime(a))})}},{key:"_emitSeiPaylodTime",value:function(e){try{var r=JSON.parse(Array.from(e.data.payload).map(function(a){return String.fromCharCode(a)}).join("").slice(0,-1));if(!r.rtmp_dts)return;this.player.emit("core_event",{eventName:Ue.SEI_PAYLOAD_TIME,time:r.rtmp_dts})}catch{}}}],[{key:"pluginName",get:function(){return"hls"}},{key:"isSupported",value:function(e,r){return gr.isSupported(e,r)}}]),n}(Ln);L(Hl,"Hls",gr);L(Hl,"EVENT",Ue);const d1={class:"player-container"},v1={class:"full-screen-box"},p1=fe({name:"CsVideoPlayer",__name:"video-player",props:{previewUrl:{}},setup(i){const s=i;let n=null;const t=Be(!0),e=()=>{if(!s.previewUrl){console.warn("CsVideoPlayer: ");return}t.value=!1,n=new _t({id:"xgplayer-container",url:s.previewUrl,width:"100%",height:"100%",autoplay:!0,plugins:[Hl],hls:{retryCount:3,retryDelay:1e3,loadTimeout:1e4}}),n.on(Vi,o=>{console.error("CsVideoPlayer: ",o)}),n.on("play",()=>{console.log("CsVideoPlayer: ",s.previewUrl)}),n.on("pause",()=>{console.log("CsVideoPlayer: ",s.previewUrl)})};function r(){n==null||n.pause(),n==null||n.destroy(),t.value=!0}const a=o=>{var l;((l=o.target)==null?void 0:l.id)==="xgplayer-container"&&console.error("CsVideoPlayer: ",o)};return Bt(()=>{window.addEventListener("error",a)}),_n(()=>{window.removeEventListener("error",a),n&&n.destroy()}),(o,l)=>(A(),F("div",d1,[M("div",{class:"played",onClick:e},[...l[0]||(l[0]=[M("div",{class:"play-icon"},null,-1)])]),(A(),ye(is,{to:"body"},[Of(M("div",v1,[M("i",{class:"close-icon",onClick:r}),l[1]||(l[1]=M("div",{id:"xgplayer-container",class:"result-video"},null,-1))],512),[[kh,!t.value]])]))]))}});const g1=de(p1,[["__scopeId","data-v-832a87c4"]]),$d=qn(g1),Fc=Object.freeze(Object.defineProperty({__proto__:null,Button:Ch,Dialog:Oh,Header:Ph,ImageViewer:Ah,Layout:Fh,Loading:Lh,LoadingService:Ih,Split:Uh,Toast:Nh,VideoPlayer:$d,hideLoading:wl,showDialog:Tl,showLoading:kl,showToast:Mh},Symbol.toStringTag,{value:"Module"})),m1={install:i=>{for(const s in Fc){const n=Fc[s];n&&(typeof n=="function"||typeof n=="object")&&"install"in n&&i.use(n)}}},Uc=Object.freeze(Object.defineProperty({__proto__:null,Button:Ch,Dialog:Oh,Header:Ph,ImageViewer:Ah,Layout:Fh,Loading:Lh,LoadingService:Ih,Split:Uh,Toast:Nh,VideoPlayer:$d,default:m1,hideLoading:wl,showDialog:Tl,showLoading:kl,showToast:Mh},Symbol.toStringTag,{value:"Module"})),y1="modulepreload",_1=function(i){return"/chenshi/"+i},Vc={},b1=function(s,n,t){if(!n||n.length===0)return s();const e=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=_1(r),r in Vc)return;Vc[r]=!0;const a=r.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!t)for(let c=e.length-1;c>=0;c--){const f=e[c];if(f.href===r&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${o}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":y1,a||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),a)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>s()).catch(r=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r})};const S1=fe({__name:"VPBadge",props:{text:{},type:{}},setup(i){return(s,n)=>(A(),F("span",{class:be(["VPBadge",i.type??"tip"])},[X(s.$slots,"default",{},()=>[ht(Ne(i.text),1)],!0)],2))}});const E1=de(S1,[["__scopeId","data-v-95101631"]]),k1=JSON.parse('{"lang":"en-US","dir":"ltr","title":"VitePress","description":"A VitePress site","base":"/chenshi/","head":[],"appearance":true,"themeConfig":{"siteTitle":"vitepress","nav":[{"text":"","link":"/guild/installation"},{"text":"","link":"/components/button/"}],"socialLinks":[{"icon":"github","link":"https://github.com/s1393106763/chenshi"}],"sidebar":{"/guild/":[{"text":"","items":[{"text":"","link":"/guild/installation"},{"text":"","link":"/guild/quickstart"}]},{"text":"","items":[{"text":"xx","link":"/xx"}]}],"/components/":[{"text":"","items":[{"text":"Button","link":"/components/button/"},{"text":"Header","link":"/components/header/"},{"text":"ImageViewer","link":"/components/image-viewer/"},{"text":"Loading","link":"/components/loading/"},{"text":"Layout","link":"/components/layout/"},{"text":"Split","link":"/components/split/"},{"text":"Dialog","link":"/components/dialog/"},{"text":"Toast","link":"/components/toast/"},{"text":"VideoPlayer","link":"/components/video-player/"}]}]}},"locales":{},"scrollOffset":90,"cleanUrls":false}'),Ma=/^[a-z]+:/i,w1=/^pathname:\/\//,Hc="vitepress-theme-appearance",Gd=/#.*$/,T1=/(index)?\.(md|html)$/,Pt=typeof document<"u",jd={relativePath:"",title:"404",description:"Not Found",headers:[],frontmatter:{sidebar:!1,layout:"page"},lastUpdated:0};function Gi(i,s,n=!1){if(s===void 0)return!1;if(i=$c(`/${i}`),n)return new RegExp(s).test(i);if($c(s)!==i)return!1;const t=s.match(Gd);return t?(Pt?location.hash:"")===t[0]:!0}function $c(i){return decodeURI(i).replace(Gd,"").replace(T1,"")}function zd(i){return Ma.test(i)}function C1(i,s){var t,e,r,a,o,l,u;const n=Object.keys(i.locales).find(c=>c!=="root"&&!zd(c)&&Gi(s,`/${c}/`,!0))||"root";return Object.assign({},i,{localeIndex:n,lang:((t=i.locales[n])==null?void 0:t.lang)??i.lang,dir:((e=i.locales[n])==null?void 0:e.dir)??i.dir,title:((r=i.locales[n])==null?void 0:r.title)??i.title,titleTemplate:((a=i.locales[n])==null?void 0:a.titleTemplate)??i.titleTemplate,description:((o=i.locales[n])==null?void 0:o.description)??i.description,head:Kd(i.head,((l=i.locales[n])==null?void 0:l.head)??[]),themeConfig:{...i.themeConfig,...(u=i.locales[n])==null?void 0:u.themeConfig}})}function Wd(i,s){const n=s.title||i.title,t=s.titleTemplate??i.titleTemplate;if(typeof t=="string"&&t.includes(":title"))return t.replace(/:title/g,n);const e=P1(i.title,t);return`${n}${e}`}function P1(i,s){return s===!1?"":s===!0||s===void 0?` | ${i}`:i===s?"":` | ${s}`}function A1(i,s){const[n,t]=s;if(n!=="meta")return!1;const e=Object.entries(t)[0];return e==null?!1:i.some(([r,a])=>r===n&&a[e[0]]===e[1])}function Kd(i,s){return[...i.filter(n=>!A1(s,n)),...s]}const x1=/[\u0000-\u001F"#$&*+,:;<=>?[\]^`{|}\u007F]/g,L1=/^[a-z]:/i;function Gc(i){const s=L1.exec(i),n=s?s[0]:"";return n+i.slice(n.length).replace(x1,"_").replace(/(^|\/)_+(?=[^/]*$)/,"$1")}const Yd=Symbol(),ui=Wv(k1);function I1(i){const s=he(()=>C1(ui.value,i.data.relativePath));return{site:s,theme:he(()=>s.value.themeConfig),page:he(()=>i.data),frontmatter:he(()=>i.data.frontmatter),lang:he(()=>s.value.lang),dir:he(()=>s.value.dir),localeIndex:he(()=>s.value.localeIndex||"root"),title:he(()=>Wd(s.value,i.data)),description:he(()=>i.data.description||s.value.description),isDark:Be(!1)}}function Xd(){const i=pn(Yd);if(!i)throw new Error("vitepress data not properly injected in app");return i}function D1(i,s){return`${i}${s}`.replace(/\/+/g,"/")}function Zr(i){return Ma.test(i)||i.startsWith(".")?i:D1(ui.value.base,i)}function qd(i){let s=i.replace(/\.html$/,"");if(s=decodeURIComponent(s),s=s.replace(/\/$/,"/index"),Pt){const n="/chenshi/";s=Gc(s.slice(n.length).replace(/\//g,"_")||"index")+".md";let t=__VP_HASH_MAP__[s.toLowerCase()];t||(s=s.endsWith("_index.md")?s.slice(0,-9)+".md":s.slice(0,-3)+"_index.md",t=__VP_HASH_MAP__[s.toLowerCase()]),s=`${n}assets/${s}.${t}.js`}else s=`./${Gc(s.slice(1).replace(/\//g,"_"))}.md.js`;return s}const Jd=Symbol(),jc="http://a.com",O1=()=>({path:"/",component:null,data:jd});function R1(i,s){const n=_a(O1()),t={route:n,go:e};async function e(o=Pt?location.href:"/"){var u,c;await((u=t.onBeforeRouteChange)==null?void 0:u.call(t,o));const l=new URL(o,jc);ui.value.cleanUrls||!l.pathname.endsWith("/")&&!l.pathname.endsWith(".html")&&(l.pathname+=".html",o=l.pathname+l.search+l.hash),Pt&&o!==location.href&&(history.replaceState({scrollPosition:window.scrollY},document.title),history.pushState(null,"",o)),await a(o),await((c=t.onAfterRouteChanged)==null?void 0:c.call(t,o))}let r=null;async function a(o,l=0,u=!1){const c=new URL(o,jc),f=r=c.pathname;try{let h=await i(f);if(r===f){r=null;const{default:d,__pageData:v}=h;if(!d)throw new Error(`Invalid route component: ${d}`);n.path=Pt?f:Zr(f),n.component=Ds(d),n.data=Ds(v),Pt&&Sa(()=>{let m=ui.value.base+v.relativePath.replace(/(?:(^|\/)index)?\.md$/,"$1");if(!ui.value.cleanUrls&&!m.endsWith("/")&&(m+=".html"),m!==c.pathname&&(c.pathname=m,o=m+c.search+c.hash,history.replaceState(null,"",o)),c.hash&&!l){let p=null;try{p=document.querySelector(decodeURIComponent(c.hash))}catch(S){console.warn(S)}if(p){zc(p,c.hash);return}}window.scrollTo(0,l)})}}catch(h){if(!/fetch/.test(h.message)&&!/^\/404(\.html|\/)?$/.test(o)&&console.error(h),!u)try{const d=await fetch(ui.value.base+"hashmap.json");window.__VP_HASH_MAP__=await d.json(),await a(o,l,!0);return}catch{}r===f&&(r=null,n.path=Pt?f:Zr(f),n.component=s?Ds(s):null,n.data=jd)}}return Pt&&(window.addEventListener("click",o=>{if(o.target.closest("button"))return;const u=o.target.closest("a");if(u&&!u.closest(".vp-raw")&&(u instanceof SVGElement||!u.download)){const{target:c}=u,{href:f,origin:h,pathname:d,hash:v,search:m}=new URL(u.href instanceof SVGAnimatedString?u.href.animVal:u.href,u.baseURI),p=window.location,S=d.match(/\.\w+$/);!o.ctrlKey&&!o.shiftKey&&!o.altKey&&!o.metaKey&&c!=="_blank"&&h===p.origin&&!(S&&S[0]!==".html")&&(o.preventDefault(),d===p.pathname&&m===p.search?v&&v!==p.hash&&(history.pushState(null,"",v),window.dispatchEvent(new Event("hashchange")),zc(u,v,u.classList.contains("header-anchor"))):e(f))}},{capture:!0}),window.addEventListener("popstate",o=>{a(location.href,o.state&&o.state.scrollPosition||0)}),window.addEventListener("hashchange",o=>{o.preventDefault()})),t}function M1(){const i=pn(Jd);if(!i)throw new Error("useRouter() is called without provider.");return i}function yi(){return M1().route}function zc(i,s,n=!1){let t=null;try{t=i.classList.contains("header-anchor")?i:document.querySelector(decodeURIComponent(s))}catch(e){console.warn(e)}if(t){let e=ui.value.scrollOffset;typeof e=="string"&&(e=document.querySelector(e).getBoundingClientRect().bottom+24);const r=parseInt(window.getComputedStyle(t).paddingTop,10),a=window.scrollY+t.getBoundingClientRect().top-e+r;!n||Math.abs(a-window.scrollY)>window.innerHeight?window.scrollTo(0,a):window.scrollTo({left:0,top:a,behavior:"smooth"})}}const N1=fe({name:"VitePressContent",props:{onContentUpdated:Function},setup(i){const s=yi();return pl(()=>{var n;(n=i.onContentUpdated)==null||n.call(i)}),()=>Xs("div",{style:{position:"relative"}},[s.component?Xs(s.component):null])}}),Xe=Xd;var Wc;const Qd=typeof window<"u",B1=i=>typeof i=="string",F1=()=>{};Qd&&((Wc=window==null?void 0:window.navigator)!=null&&Wc.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Zd(i){return typeof i=="function"?i():j(i)}function U1(i){return i}function ev(i){return ff()?(Cv(i),!0):!1}function V1(i){return typeof i=="function"?he(i):Be(i)}function H1(i,s=!0){rs()?Bt(i):s?i():Sa(i)}function $1(i){var s;const n=Zd(i);return(s=n==null?void 0:n.$el)!=null?s:n}const $l=Qd?window:void 0;function G1(...i){let s,n,t,e;if(B1(i[0])||Array.isArray(i[0])?([n,t,e]=i,s=$l):[s,n,t,e]=i,!s)return F1;Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);const r=[],a=()=>{r.forEach(c=>c()),r.length=0},o=(c,f,h,d)=>(c.addEventListener(f,h,d),()=>c.removeEventListener(f,h,d)),l=Qt(()=>[$1(s),Zd(e)],([c,f])=>{a(),c&&r.push(...n.flatMap(h=>t.map(d=>o(c,h,d,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return ev(u),u}function j1(i,s=!1){const n=Be(),t=()=>n.value=!!i();return t(),H1(t,s),n}function el(i,s={}){const{window:n=$l}=s,t=j1(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let e;const r=Be(!1),a=()=>{e&&("removeEventListener"in e?e.removeEventListener("change",o):e.removeListener(o))},o=()=>{t.value&&(a(),e=n.matchMedia(V1(i).value),r.value=e.matches,"addEventListener"in e?e.addEventListener("change",o):e.addListener(o))};return Mi(o),ev(()=>a()),r}const Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yc="__vueuse_ssr_handlers__";Kc[Yc]=Kc[Yc]||{};var Xc;(function(i){i.UP="UP",i.RIGHT="RIGHT",i.DOWN="DOWN",i.LEFT="LEFT",i.NONE="NONE"})(Xc||(Xc={}));var z1=Object.defineProperty,qc=Object.getOwnPropertySymbols,W1=Object.prototype.hasOwnProperty,K1=Object.prototype.propertyIsEnumerable,Jc=(i,s,n)=>s in i?z1(i,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[s]=n,Y1=(i,s)=>{for(var n in s||(s={}))W1.call(s,n)&&Jc(i,n,s[n]);if(qc)for(var n of qc(s))K1.call(s,n)&&Jc(i,n,s[n]);return i};const X1={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Y1({linear:U1},X1);function q1({window:i=$l}={}){if(!i)return{x:Be(0),y:Be(0)};const s=Be(i.scrollX),n=Be(i.scrollY);return G1(i,"scroll",()=>{s.value=i.scrollX,n.value=i.scrollY},{capture:!1,passive:!0}),{x:s,y:n}}function J1(i,s){let n,t=!1;return()=>{n&&clearTimeout(n),t?n=setTimeout(i,s):(i(),t=!0,setTimeout(()=>{t=!1},s))}}function tl(i){return/^\//.test(i)?i:`/${i}`}function es(i){if(zd(i))return i.replace(w1,"");const{site:s}=Xe(),{pathname:n,search:t,hash:e}=new URL(i,"http://example.com"),r=n.endsWith("/")||n.endsWith(".html")?i:i.replace(/(?:(^\.+)\/)?.*$/,`$1${n.replace(/(\.md)?$/,s.value.cleanUrls?"":".html")}${t}${e}`);return Zr(r)}function tv(i,s){if(Array.isArray(i))return i;if(i==null)return[];s=tl(s);const n=Object.keys(i).sort((t,e)=>e.split("/").length-t.split("/").length).find(t=>s.startsWith(tl(t)));return n?i[n]:[]}function Q1(i){const s=[];let n=0;for(const t in i){const e=i[t];if(e.items){n=s.push(e);continue}s[n]||s.push({items:[]}),s[n].items.push(e)}return s}function Z1(i){const s=[];function n(t){for(const e of t)e.text&&e.link&&s.push({text:e.text,link:e.link}),e.items&&n(e.items)}return n(i),s}function nl(i,s){return Array.isArray(s)?s.some(n=>nl(i,n)):Gi(i,s.link)?!0:s.items?nl(i,s.items):!1}function Qn(){const i=yi(),{theme:s,frontmatter:n}=Xe(),t=el("(min-width: 960px)"),e=Be(!1),r=he(()=>{const d=s.value.sidebar,v=i.data.relativePath;return d?tv(d,v):[]}),a=he(()=>n.value.sidebar!==!1&&r.value.length>0&&n.value.layout!=="home"),o=he(()=>n.value.layout==="home"?!1:n.value.aside!=null?!!n.value.aside:s.value.aside!==!1),l=he(()=>a.value&&t.value),u=he(()=>a.value?Q1(r.value):[]);function c(){e.value=!0}function f(){e.value=!1}function h(){e.value?f():c()}return{isOpen:e,sidebar:r,sidebarGroups:u,hasSidebar:a,hasAside:o,isSidebarEnabled:l,open:c,close:f,toggle:h}}function eb(i,s){let n;Mi(()=>{n=i.value?document.activeElement:void 0}),Bt(()=>{window.addEventListener("keyup",t)}),_n(()=>{window.removeEventListener("keyup",t)});function t(e){e.key==="Escape"&&i.value&&(s(),n==null||n.focus())}}function tb(i){const{page:s}=Xe(),n=Be(!1),t=he(()=>i.value.collapsed!=null),e=he(()=>!!i.value.link),r=he(()=>Gi(s.value.relativePath,i.value.link)),a=he(()=>r.value?!0:i.value.items?nl(s.value.relativePath,i.value.items):!1),o=he(()=>!!(i.value.items&&i.value.items.length));Mi(()=>{n.value=!!(t.value&&i.value.collapsed)}),Mi(()=>{(r.value||a.value)&&(n.value=!1)});function l(){t.value&&(n.value=!n.value)}return{collapsed:n,collapsible:t,isLink:e,isActiveLink:r,hasActiveLink:a,hasChildren:o,toggle:l}}const nb=fe({__name:"VPSkipLink",setup(i){const s=yi(),n=Be();Qt(()=>s.path,()=>n.value.focus());function t({target:e}){const r=document.querySelector(e.hash);if(r){const a=()=>{r.removeAttribute("tabindex"),r.removeEventListener("blur",a)};r.setAttribute("tabindex","-1"),r.addEventListener("blur",a),r.focus(),window.scrollTo(0,0)}}return(e,r)=>(A(),F(ke,null,[M("span",{ref_key:"backToTop",ref:n,tabindex:"-1"},null,512),M("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:t}," Skip to content ")],64))}});const ib=de(nb,[["__scopeId","data-v-5fc99bae"]]),rb={key:0,class:"VPBackdrop"},sb=fe({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(i){return(s,n)=>(A(),ye(mr,{name:"fade"},{default:ae(()=>[i.show?(A(),F("div",rb)):le("",!0)]),_:1}))}});const ab=de(sb,[["__scopeId","data-v-5a9e97a7"]]);function ob(){const i=Be(!1);function s(){i.value=!0,window.addEventListener("resize",e)}function n(){i.value=!1,window.removeEventListener("resize",e)}function t(){i.value?n():s()}function e(){window.outerWidth>=768&&n()}const r=yi();return Qt(()=>r.path,n),{isScreenOpen:i,openScreen:s,closeScreen:n,toggleScreen:t}}function cs({removeCurrent:i=!0,correspondingLink:s=!1}={}){const{site:n,localeIndex:t,page:e,theme:r}=Xe(),a=he(()=>{var l,u;return{label:(l=n.value.locales[t.value])==null?void 0:l.label,link:((u=n.value.locales[t.value])==null?void 0:u.link)||(t.value==="root"?"/":`/${t.value}/`)}});return{localeLinks:he(()=>Object.entries(n.value.locales).flatMap(([l,u])=>i&&a.value.label===u.label?[]:{text:u.label,link:lb(u.link||(l==="root"?"/":`/${l}/`),r.value.i18nRouting!==!1&&s,e.value.relativePath.slice(a.value.link.length-1),!n.value.cleanUrls)})),currentLang:a}}function lb(i,s,n,t){return s?i.replace(/\/$/,"")+tl(n.replace(/(^|\/)?index.md$/,"$1").replace(/\.md$/,t?".html":"")):i}const ub=["src","alt"],cb={inheritAttrs:!1},fb=fe({...cb,__name:"VPImage",props:{image:{},alt:{}},setup(i){return(s,n)=>{const t=gi("VPImage",!0);return i.image?(A(),F(ke,{key:0},[typeof i.image=="string"||"src"in i.image?(A(),F("img",Ms({key:0,class:"VPImage"},typeof i.image=="string"?s.$attrs:{...i.image,...s.$attrs},{src:j(Zr)(typeof i.image=="string"?i.image:i.image.src),alt:i.alt??(typeof i.image=="string"?"":i.image.alt||"")}),null,16,ub)):(A(),F(ke,{key:1},[ee(t,Ms({class:"dark",image:i.image.dark,alt:i.image.alt},s.$attrs),null,16,["image","alt"]),ee(t,Ms({class:"light",image:i.image.light,alt:i.image.alt},s.$attrs),null,16,["image","alt"])],64))],64)):le("",!0)}}});const Gl=de(fb,[["__scopeId","data-v-0c0a8a4e"]]),hb=["href"],db=fe({__name:"VPNavBarTitle",setup(i){const{site:s,theme:n}=Xe(),{hasSidebar:t}=Qn(),{currentLang:e}=cs();return(r,a)=>(A(),F("div",{class:be(["VPNavBarTitle",{"has-sidebar":j(t)}])},[M("a",{class:"title",href:j(es)(j(e).link)},[X(r.$slots,"nav-bar-title-before",{},void 0,!0),j(n).logo?(A(),ye(Gl,{key:0,class:"logo",image:j(n).logo},null,8,["image"])):le("",!0),j(n).siteTitle?(A(),F(ke,{key:1},[ht(Ne(j(n).siteTitle),1)],64)):j(n).siteTitle===void 0?(A(),F(ke,{key:2},[ht(Ne(j(s).title),1)],64)):le("",!0),X(r.$slots,"nav-bar-title-after",{},void 0,!0)],8,hb)],2))}});const vb=de(db,[["__scopeId","data-v-6e92418f"]]);const pb={key:0,class:"VPNavBarSearch"},gb={type:"button",class:"DocSearch DocSearch-Button","aria-label":"Search"},mb={class:"DocSearch-Button-Container"},yb={class:"DocSearch-Button-Placeholder"},_b=fe({__name:"VPNavBarSearch",setup(i){pg(c=>({v9a0d60b0:r.value}));const s=()=>null,{theme:n,localeIndex:t}=Xe(),e=Be(!1),r=Be("'Meta'"),a=he(()=>{var c,f,h,d,v,m,p,S;return((v=(d=(h=(f=(c=n.value.algolia)==null?void 0:c.locales)==null?void 0:f[t.value])==null?void 0:h.translations)==null?void 0:d.button)==null?void 0:v.buttonText)||((S=(p=(m=n.value.algolia)==null?void 0:m.translations)==null?void 0:p.button)==null?void 0:S.buttonText)||"Search"}),o=()=>{const c="VPAlgoliaPreconnect";(window.requestIdleCallback||setTimeout)(()=>{const h=document.createElement("link");h.id=c,h.rel="preconnect",h.href=`https://${n.value.algolia.appId}-dsn.algolia.net`,h.crossOrigin="",document.head.appendChild(h)})};Bt(()=>{if(!n.value.algolia)return;o(),r.value=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?"''":"'Ctrl'";const c=h=>{h.key==="k"&&(h.ctrlKey||h.metaKey)&&(h.preventDefault(),l(),f())},f=()=>{window.removeEventListener("keydown",c)};window.addEventListener("keydown",c),_n(f)});function l(){e.value||(e.value=!0,setTimeout(u,16))}function u(){const c=new Event("keydown");c.key="k",c.metaKey=!0,window.dispatchEvent(c),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||u()},16)}return(c,f)=>j(n).algolia?(A(),F("div",pb,[e.value?(A(),ye(j(s),{key:0,algolia:j(n).algolia},null,8,["algolia"])):(A(),F("div",{key:1,id:"docsearch",onClick:l},[M("button",gb,[M("span",mb,[f[0]||(f[0]=M("svg",{class:"DocSearch-Search-Icon",width:"20",height:"20",viewBox:"0 0 20 20"},[M("path",{d:"M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z",stroke:"currentColor",fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),M("span",yb,Ne(a.value),1)]),f[1]||(f[1]=M("span",{class:"DocSearch-Button-Keys"},[M("kbd",{class:"DocSearch-Button-Key"}),M("kbd",{class:"DocSearch-Button-Key"},"K")],-1))])]))])):le("",!0)}});const bb={},Sb={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",height:"24px",viewBox:"0 0 24 24",width:"24px"};function Eb(i,s){return A(),F("svg",Sb,[...s[0]||(s[0]=[M("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),M("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"},null,-1)])])}const kb=de(bb,[["render",Eb]]),wb=fe({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean}},setup(i){const s=i,n=he(()=>s.tag??s.href?"a":"span"),t=he(()=>s.href&&Ma.test(s.href));return(e,r)=>(A(),ye($r(n.value),{class:be(["VPLink",{link:i.href}]),href:i.href?j(es)(i.href):void 0,target:t.value?"_blank":void 0,rel:t.value?"noreferrer":void 0},{default:ae(()=>[X(e.$slots,"default",{},void 0,!0),t.value&&!i.noIcon?(A(),ye(kb,{key:0,class:"icon"})):le("",!0)]),_:3},8,["class","href","target","rel"]))}});const _i=de(wb,[["__scopeId","data-v-3ce0c030"]]),Tb=fe({__name:"VPNavBarMenuLink",props:{item:{}},setup(i){const{page:s}=Xe();return(n,t)=>(A(),ye(_i,{class:be({VPNavBarMenuLink:!0,active:j(Gi)(j(s).relativePath,i.item.activeMatch||i.item.link,!!i.item.activeMatch)}),href:i.item.link,noIcon:!0},{default:ae(()=>[ht(Ne(i.item.text),1)]),_:1},8,["class","href"]))}});const Cb=de(Tb,[["__scopeId","data-v-cc13ba24"]]),jl=Be();let nv=!1,Eo=0;function Pb(i){const s=Be(!1);if(Pt){!nv&&Ab(),Eo++;const n=Qt(jl,t=>{var e,r,a;t===i.el.value||(e=i.el.value)!=null&&e.contains(t)?(s.value=!0,(r=i.onFocus)==null||r.call(i)):(s.value=!1,(a=i.onBlur)==null||a.call(i))});_n(()=>{n(),Eo--,Eo||xb()})}return Vs(s)}function Ab(){document.addEventListener("focusin",iv),nv=!0,jl.value=document.activeElement}function xb(){document.removeEventListener("focusin",iv)}function iv(){jl.value=document.activeElement}const Lb={},Ib={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"};function Db(i,s){return A(),F("svg",Ib,[...s[0]||(s[0]=[M("path",{d:"M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"},null,-1)])])}const rv=de(Lb,[["render",Db]]),Ob={},Rb={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"};function Mb(i,s){return A(),F("svg",Rb,[...s[0]||(s[0]=[M("circle",{cx:"12",cy:"12",r:"2"},null,-1),M("circle",{cx:"19",cy:"12",r:"2"},null,-1),M("circle",{cx:"5",cy:"12",r:"2"},null,-1)])])}const Nb=de(Ob,[["render",Mb]]),Bb={class:"VPMenuLink"},Fb=fe({__name:"VPMenuLink",props:{item:{}},setup(i){const{page:s}=Xe();return(n,t)=>(A(),F("div",Bb,[ee(_i,{class:be({active:j(Gi)(j(s).relativePath,i.item.activeMatch||i.item.link,!!i.item.activeMatch)}),href:i.item.link},{default:ae(()=>[ht(Ne(i.item.text),1)]),_:1},8,["class","href"])]))}});const Na=de(Fb,[["__scopeId","data-v-d2b50ab1"]]),Ub={class:"VPMenuGroup"},Vb={key:0,class:"title"},Hb=fe({__name:"VPMenuGroup",props:{text:{},items:{}},setup(i){return(s,n)=>(A(),F("div",Ub,[i.text?(A(),F("p",Vb,Ne(i.text),1)):le("",!0),(A(!0),F(ke,null,Lt(i.items,t=>(A(),F(ke,null,["link"in t?(A(),ye(Na,{key:0,item:t},null,8,["item"])):le("",!0)],64))),256))]))}});const $b=de(Hb,[["__scopeId","data-v-89525ff5"]]),Gb={class:"VPMenu"},jb={key:0,class:"items"},zb=fe({__name:"VPMenu",props:{items:{}},setup(i){return(s,n)=>(A(),F("div",Gb,[i.items?(A(),F("div",jb,[(A(!0),F(ke,null,Lt(i.items,t=>(A(),F(ke,{key:t.text},["link"in t?(A(),ye(Na,{key:0,item:t},null,8,["item"])):(A(),ye($b,{key:1,text:t.text,items:t.items},null,8,["text","items"]))],64))),128))])):le("",!0),X(s.$slots,"default",{},void 0,!0)]))}});const Wb=de(zb,[["__scopeId","data-v-963a43f4"]]),Kb=["aria-expanded","aria-label"],Yb={key:0,class:"text"},Xb={class:"menu"},qb=fe({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(i){const s=Be(!1),n=Be();Pb({el:n,onBlur:t});function t(){s.value=!1}return(e,r)=>(A(),F("div",{class:"VPFlyout",ref_key:"el",ref:n,onMouseenter:r[1]||(r[1]=a=>s.value=!0),onMouseleave:r[2]||(r[2]=a=>s.value=!1)},[M("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":s.value,"aria-label":i.label,onClick:r[0]||(r[0]=a=>s.value=!s.value)},[i.button||i.icon?(A(),F("span",Yb,[i.icon?(A(),ye($r(i.icon),{key:0,class:"option-icon"})):le("",!0),ht(" "+Ne(i.button)+" ",1),ee(rv,{class:"text-icon"})])):(A(),ye(Nb,{key:1,class:"icon"}))],8,Kb),M("div",Xb,[ee(Wb,{items:i.items},{default:ae(()=>[X(e.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}});const zl=de(qb,[["__scopeId","data-v-69cd6d5c"]]),Jb=fe({__name:"VPNavBarMenuGroup",props:{item:{}},setup(i){const{page:s}=Xe();return(n,t)=>(A(),ye(zl,{class:be({VPNavBarMenuGroup:!0,active:j(Gi)(j(s).relativePath,i.item.activeMatch,!!i.item.activeMatch)}),button:i.item.text,items:i.item.items},null,8,["class","button","items"]))}}),Qb={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},Zb=fe({__name:"VPNavBarMenu",setup(i){const{theme:s}=Xe();return(n,t)=>j(s).nav?(A(),F("nav",Qb,[t[0]||(t[0]=M("span",{id:"main-nav-aria-label",class:"visually-hidden"},"Main Navigation",-1)),(A(!0),F(ke,null,Lt(j(s).nav,e=>(A(),F(ke,{key:e.text},["link"in e?(A(),ye(Cb,{key:0,item:e},null,8,["item"])):(A(),ye(Jb,{key:1,item:e},null,8,["item"]))],64))),128))])):le("",!0)}});const eS=de(Zb,[["__scopeId","data-v-a89abb93"]]),tS={},nS={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"};function iS(i,s){return A(),F("svg",nS,[...s[0]||(s[0]=[M("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),M("path",{d:" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z ",class:"css-c4d79v"},null,-1)])])}const sv=de(tS,[["render",iS]]),rS={class:"items"},sS={class:"title"},aS=fe({__name:"VPNavBarTranslations",setup(i){const{localeLinks:s,currentLang:n}=cs({correspondingLink:!0});return(t,e)=>j(s).length&&j(n).label?(A(),ye(zl,{key:0,class:"VPNavBarTranslations",icon:sv},{default:ae(()=>[M("div",rS,[M("p",sS,Ne(j(n).label),1),(A(!0),F(ke,null,Lt(j(s),r=>(A(),ye(Na,{key:r.link,item:r},null,8,["item"]))),128))])]),_:1})):le("",!0)}});const oS=de(aS,[["__scopeId","data-v-368e78a7"]]);const lS={},uS={class:"VPSwitch",type:"button",role:"switch"},cS={class:"check"},fS={key:0,class:"icon"};function hS(i,s){return A(),F("button",uS,[M("span",cS,[i.$slots.default?(A(),F("span",fS,[X(i.$slots,"default",{},void 0,!0)])):le("",!0)])])}const dS=de(lS,[["render",hS],["__scopeId","data-v-6a9f8225"]]),vS={},pS={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"};function gS(i,s){return A(),F("svg",pS,[...s[0]||(s[0]=[Xp('<path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path>',9)])])}const mS=de(vS,[["render",gS]]),yS={},_S={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"};function bS(i,s){return A(),F("svg",_S,[...s[0]||(s[0]=[M("path",{d:"M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"},null,-1)])])}const SS=de(yS,[["render",bS]]),ES=fe({__name:"VPSwitchAppearance",setup(i){const{site:s,isDark:n}=Xe(),t=Be(!1),e=typeof localStorage<"u"?r():()=>{};Bt(()=>{t.value=document.documentElement.classList.contains("dark")});function r(){const a=window.matchMedia("(prefers-color-scheme: dark)"),o=document.documentElement.classList;let l=localStorage.getItem(Hc),u=s.value.appearance==="dark"&&l==null||(l==="auto"||l==null?a.matches:l==="dark");a.onchange=h=>{l==="auto"&&f(u=h.matches)};function c(){f(u=!u),l=u?a.matches?"auto":"dark":a.matches?"light":"auto",localStorage.setItem(Hc,l)}function f(h){const d=document.createElement("style");d.type="text/css",d.appendChild(document.createTextNode(`:not(.VPSwitchAppearance):not(.VPSwitchAppearance *) {
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -o-transition: none !important;
  -ms-transition: none !important;
  transition: none !important;
}`)),document.head.appendChild(d),t.value=h,o[h?"add":"remove"]("dark"),window.getComputedStyle(d).opacity,document.head.removeChild(d)}return c}return Qt(t,a=>{n.value=a}),(a,o)=>(A(),ye(dS,{class:"VPSwitchAppearance","aria-label":"toggle dark mode","aria-checked":t.value,onClick:j(e)},{default:ae(()=>[ee(mS,{class:"sun"}),ee(SS,{class:"moon"})]),_:1},8,["aria-checked","onClick"]))}});const Wl=de(ES,[["__scopeId","data-v-50ad260b"]]),kS={key:0,class:"VPNavBarAppearance"},wS=fe({__name:"VPNavBarAppearance",setup(i){const{site:s}=Xe();return(n,t)=>j(s).appearance?(A(),F("div",kS,[ee(Wl)])):le("",!0)}});const TS=de(wS,[["__scopeId","data-v-1bac4905"]]),CS={discord:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg>',facebook:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Facebook</title><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',github:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>',instagram:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>',linkedin:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>',mastodon:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Mastodon</title><path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"/></svg>',slack:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Slack</title><path d="M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"/></svg>',twitter:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>',youtube:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>'},PS=["href","innerHTML"],AS=fe({__name:"VPSocialLink",props:{icon:{},link:{}},setup(i){const s=i,n=he(()=>typeof s.icon=="object"?s.icon.svg:CS[s.icon]);return(t,e)=>(A(),F("a",{class:"VPSocialLink",href:i.link,target:"_blank",rel:"noopener",innerHTML:n.value},null,8,PS))}});const xS=de(AS,[["__scopeId","data-v-7befd956"]]),LS={class:"VPSocialLinks"},IS=fe({__name:"VPSocialLinks",props:{links:{}},setup(i){return(s,n)=>(A(),F("div",LS,[(A(!0),F(ke,null,Lt(i.links,({link:t,icon:e})=>(A(),ye(xS,{key:t,icon:e,link:t},null,8,["icon","link"]))),128))]))}});const Kl=de(IS,[["__scopeId","data-v-2784261c"]]),DS=fe({__name:"VPNavBarSocialLinks",setup(i){const{theme:s}=Xe();return(n,t)=>j(s).socialLinks?(A(),ye(Kl,{key:0,class:"VPNavBarSocialLinks",links:j(s).socialLinks},null,8,["links"])):le("",!0)}});const OS=de(DS,[["__scopeId","data-v-6c760ff1"]]),RS={key:0,class:"group translations"},MS={class:"trans-title"},NS={key:1,class:"group"},BS={class:"item appearance"},FS={class:"label"},US={class:"appearance-action"},VS={key:2,class:"group"},HS={class:"item social-links"},$S=fe({__name:"VPNavBarExtra",setup(i){const{site:s,theme:n}=Xe(),{localeLinks:t,currentLang:e}=cs({correspondingLink:!0}),r=he(()=>t.value.length&&e.value.label||s.value.appearance||n.value.socialLinks);return(a,o)=>r.value?(A(),ye(zl,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:ae(()=>[j(t).length&&j(e).label?(A(),F("div",RS,[M("p",MS,Ne(j(e).label),1),(A(!0),F(ke,null,Lt(j(t),l=>(A(),ye(Na,{key:l.link,item:l},null,8,["item"]))),128))])):le("",!0),j(s).appearance?(A(),F("div",NS,[M("div",BS,[M("p",FS,Ne(j(n).darkModeSwitchLabel||"Appearance"),1),M("div",US,[ee(Wl)])])])):le("",!0),j(n).socialLinks?(A(),F("div",VS,[M("div",HS,[ee(Kl,{class:"social-links-list",links:j(n).socialLinks},null,8,["links"])])])):le("",!0)]),_:1})):le("",!0)}});const GS=de($S,[["__scopeId","data-v-74377c63"]]),jS=["aria-expanded"],zS=fe({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(i){return(s,n)=>(A(),F("button",{type:"button",class:be(["VPNavBarHamburger",{active:i.active}]),"aria-label":"mobile navigation","aria-expanded":i.active,"aria-controls":"VPNavScreen",onClick:n[0]||(n[0]=t=>s.$emit("click"))},[...n[1]||(n[1]=[M("span",{class:"container"},[M("span",{class:"top"}),M("span",{class:"middle"}),M("span",{class:"bottom"})],-1)])],10,jS))}});const WS=de(zS,[["__scopeId","data-v-12e1bfd8"]]),KS={class:"container"},YS={class:"title"},XS={class:"content"},qS={class:"content-body"},JS=fe({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(i){const{y:s}=q1(),{hasSidebar:n}=Qn(),t=he(()=>({"has-sidebar":n.value,fill:s.value>0}));return(e,r)=>(A(),F("div",{class:be(["VPNavBar",t.value])},[M("div",KS,[M("div",YS,[ee(vb,null,{"nav-bar-title-before":ae(()=>[X(e.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":ae(()=>[X(e.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),M("div",XS,[r[1]||(r[1]=M("div",{class:"curtain"},null,-1)),M("div",qS,[X(e.$slots,"nav-bar-content-before",{},void 0,!0),ee(_b,{class:"search"}),ee(eS,{class:"menu"}),ee(oS,{class:"translations"}),ee(TS,{class:"appearance"}),ee(OS,{class:"social-links"}),ee(GS,{class:"extra"}),X(e.$slots,"nav-bar-content-after",{},void 0,!0),ee(WS,{class:"hamburger",active:i.isScreenOpen,onClick:r[0]||(r[0]=a=>e.$emit("toggle-screen"))},null,8,["active"])])])])],2))}});const QS=de(JS,[["__scopeId","data-v-d6b32fbe"]]);function ZS(i){if(Array.isArray(i)){for(var s=0,n=Array(i.length);s<i.length;s++)n[s]=i[s];return n}else return Array.from(i)}var Yl=!1;if(typeof window<"u"){var Qc={get passive(){Yl=!0}};window.addEventListener("testPassive",null,Qc),window.removeEventListener("testPassive",null,Qc)}var fa=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),dr=[],ha=!1,Xl=-1,Nr=void 0,Pi=void 0,Br=void 0,av=function(s){return dr.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(s))})},da=function(s){var n=s||window.event;return av(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},e2=function(s){if(Br===void 0){var n=!!s&&s.reserveScrollBarGap===!0,t=window.innerWidth-document.documentElement.clientWidth;if(n&&t>0){var e=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);Br=document.body.style.paddingRight,document.body.style.paddingRight=e+t+"px"}}Nr===void 0&&(Nr=document.body.style.overflow,document.body.style.overflow="hidden")},t2=function(){Br!==void 0&&(document.body.style.paddingRight=Br,Br=void 0),Nr!==void 0&&(document.body.style.overflow=Nr,Nr=void 0)},n2=function(){return window.requestAnimationFrame(function(){if(Pi===void 0){Pi={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var s=window,n=s.scrollY,t=s.scrollX,e=s.innerHeight;document.body.style.position="fixed",document.body.style.top=-n,document.body.style.left=-t,setTimeout(function(){return window.requestAnimationFrame(function(){var r=e-window.innerHeight;r&&n>=e&&(document.body.style.top=-(n+r))})},300)}})},i2=function(){if(Pi!==void 0){var s=-parseInt(document.body.style.top,10),n=-parseInt(document.body.style.left,10);document.body.style.position=Pi.position,document.body.style.top=Pi.top,document.body.style.left=Pi.left,window.scrollTo(n,s),Pi=void 0}},r2=function(s){return s?s.scrollHeight-s.scrollTop<=s.clientHeight:!1},s2=function(s,n){var t=s.targetTouches[0].clientY-Xl;return av(s.target)?!1:n&&n.scrollTop===0&&t>0||r2(n)&&t<0?da(s):(s.stopPropagation(),!0)},ov=function(s,n){if(!s){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!dr.some(function(e){return e.targetElement===s})){var t={targetElement:s,options:n||{}};dr=[].concat(ZS(dr),[t]),fa?n2():e2(n),fa&&(s.ontouchstart=function(e){e.targetTouches.length===1&&(Xl=e.targetTouches[0].clientY)},s.ontouchmove=function(e){e.targetTouches.length===1&&s2(e,s)},ha||(document.addEventListener("touchmove",da,Yl?{passive:!1}:void 0),ha=!0))}},lv=function(){fa&&(dr.forEach(function(s){s.targetElement.ontouchstart=null,s.targetElement.ontouchmove=null}),ha&&(document.removeEventListener("touchmove",da,Yl?{passive:!1}:void 0),ha=!1),Xl=-1),fa?i2():t2(),dr=[]};const a2=fe({__name:"VPNavScreenMenuLink",props:{text:{},link:{}},setup(i){const s=pn("close-screen");return(n,t)=>(A(),ye(_i,{class:"VPNavScreenMenuLink",href:i.link,onClick:j(s)},{default:ae(()=>[ht(Ne(i.text),1)]),_:1},8,["href","onClick"]))}});const o2=de(a2,[["__scopeId","data-v-2193ac25"]]),l2={},u2={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"};function c2(i,s){return A(),F("svg",u2,[...s[0]||(s[0]=[M("path",{d:"M18.9,10.9h-6v-6c0-0.6-0.4-1-1-1s-1,0.4-1,1v6h-6c-0.6,0-1,0.4-1,1s0.4,1,1,1h6v6c0,0.6,0.4,1,1,1s1-0.4,1-1v-6h6c0.6,0,1-0.4,1-1S19.5,10.9,18.9,10.9z"},null,-1)])])}const f2=de(l2,[["render",c2]]),h2=fe({__name:"VPNavScreenMenuGroupLink",props:{text:{},link:{}},setup(i){const s=pn("close-screen");return(n,t)=>(A(),ye(_i,{class:"VPNavScreenMenuGroupLink",href:i.link,onClick:j(s)},{default:ae(()=>[ht(Ne(i.text),1)]),_:1},8,["href","onClick"]))}});const uv=de(h2,[["__scopeId","data-v-b01becfe"]]),d2={class:"VPNavScreenMenuGroupSection"},v2={key:0,class:"title"},p2=fe({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(i){return(s,n)=>(A(),F("div",d2,[i.text?(A(),F("p",v2,Ne(i.text),1)):le("",!0),(A(!0),F(ke,null,Lt(i.items,t=>(A(),ye(uv,{key:t.text,text:t.text,link:t.link},null,8,["text","link"]))),128))]))}});const g2=de(p2,[["__scopeId","data-v-8edaa98a"]]),m2=["aria-controls","aria-expanded"],y2={class:"button-text"},_2=["id"],b2={key:1,class:"group"},S2=fe({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(i){const s=i,n=Be(!1),t=he(()=>`NavScreenGroup-${s.text.replace(" ","-").toLowerCase()}`);function e(){n.value=!n.value}return(r,a)=>(A(),F("div",{class:be(["VPNavScreenMenuGroup",{open:n.value}])},[M("button",{class:"button","aria-controls":t.value,"aria-expanded":n.value,onClick:e},[M("span",y2,Ne(i.text),1),ee(f2,{class:"button-icon"})],8,m2),M("div",{id:t.value,class:"items"},[(A(!0),F(ke,null,Lt(i.items,o=>(A(),F(ke,{key:o.text},["link"in o?(A(),F("div",{key:o.text,class:"item"},[ee(uv,{text:o.text,link:o.link},null,8,["text","link"])])):(A(),F("div",b2,[ee(g2,{text:o.text,items:o.items},null,8,["text","items"])]))],64))),128))],8,_2)],2))}});const E2=de(S2,[["__scopeId","data-v-99bb554b"]]),k2={key:0,class:"VPNavScreenMenu"},w2=fe({__name:"VPNavScreenMenu",setup(i){const{theme:s}=Xe();return(n,t)=>j(s).nav?(A(),F("nav",k2,[(A(!0),F(ke,null,Lt(j(s).nav,e=>(A(),F(ke,{key:e.text},["link"in e?(A(),ye(o2,{key:0,text:e.text,link:e.link},null,8,["text","link"])):(A(),ye(E2,{key:1,text:e.text||"",items:e.items},null,8,["text","items"]))],64))),128))])):le("",!0)}}),T2={key:0,class:"VPNavScreenAppearance"},C2={class:"text"},P2=fe({__name:"VPNavScreenAppearance",setup(i){const{site:s,theme:n}=Xe();return(t,e)=>j(s).appearance?(A(),F("div",T2,[M("p",C2,Ne(j(n).darkModeSwitchLabel||"Appearance"),1),ee(Wl)])):le("",!0)}});const A2=de(P2,[["__scopeId","data-v-0d8b4bb3"]]),x2={class:"list"},L2=fe({__name:"VPNavScreenTranslations",setup(i){const{localeLinks:s,currentLang:n}=cs({correspondingLink:!0}),t=Be(!1);function e(){t.value=!t.value}return(r,a)=>j(s).length&&j(n).label?(A(),F("div",{key:0,class:be(["VPNavScreenTranslations",{open:t.value}])},[M("button",{class:"title",onClick:e},[ee(sv,{class:"icon lang"}),ht(" "+Ne(j(n).label)+" ",1),ee(rv,{class:"icon chevron"})]),M("ul",x2,[(A(!0),F(ke,null,Lt(j(s),o=>(A(),F("li",{key:o.link,class:"item"},[ee(_i,{class:"link",href:o.link},{default:ae(()=>[ht(Ne(o.text),1)]),_:2},1032,["href"])]))),128))])],2)):le("",!0)}});const I2=de(L2,[["__scopeId","data-v-e60577f0"]]),D2=fe({__name:"VPNavScreenSocialLinks",setup(i){const{theme:s}=Xe();return(n,t)=>j(s).socialLinks?(A(),ye(Kl,{key:0,class:"VPNavScreenSocialLinks",links:j(s).socialLinks},null,8,["links"])):le("",!0)}}),O2={class:"container"},R2=fe({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(i){const s=Be(null);function n(){ov(s.value,{reserveScrollBarGap:!0})}function t(){lv()}return(e,r)=>(A(),ye(mr,{name:"fade",onEnter:n,onAfterLeave:t},{default:ae(()=>[i.open?(A(),F("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:s},[M("div",O2,[X(e.$slots,"nav-screen-content-before",{},void 0,!0),ee(w2,{class:"menu"}),ee(I2,{class:"translations"}),ee(A2,{class:"appearance"}),ee(D2,{class:"social-links"}),X(e.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):le("",!0)]),_:3}))}});const M2=de(R2,[["__scopeId","data-v-3b4a9753"]]),N2={class:"VPNav"},B2=fe({__name:"VPNav",setup(i){const{isScreenOpen:s,closeScreen:n,toggleScreen:t}=ob();return lr("close-screen",n),(e,r)=>(A(),F("header",N2,[ee(QS,{"is-screen-open":j(s),onToggleScreen:j(t)},{"nav-bar-title-before":ae(()=>[X(e.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":ae(()=>[X(e.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":ae(()=>[X(e.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":ae(()=>[X(e.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),ee(M2,{open:j(s)},{"nav-screen-content-before":ae(()=>[X(e.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":ae(()=>[X(e.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])]))}});const F2=de(B2,[["__scopeId","data-v-d7606cdc"]]),U2={},V2={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"};function H2(i,s){return A(),F("svg",V2,[...s[0]||(s[0]=[M("path",{d:"M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"},null,-1),M("path",{d:"M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"},null,-1),M("path",{d:"M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"},null,-1),M("path",{d:"M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"},null,-1)])])}const $2=de(U2,[["render",H2]]),G2={key:0,class:"VPLocalNav"},j2=["aria-expanded"],z2={class:"menu-text"},W2=fe({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(i){const{theme:s}=Xe(),{hasSidebar:n}=Qn();function t(){window.scrollTo({top:0,left:0,behavior:"smooth"})}return(e,r)=>j(n)?(A(),F("div",G2,[M("button",{class:"menu","aria-expanded":i.open,"aria-controls":"VPSidebarNav",onClick:r[0]||(r[0]=a=>e.$emit("open-menu"))},[ee($2,{class:"menu-icon"}),M("span",z2,Ne(j(s).sidebarMenuLabel||"Menu"),1)],8,j2),M("a",{class:"top-link",href:"#",onClick:t},Ne(j(s).returnToTopLabel||"Return to top"),1)])):le("",!0)}});const K2=de(W2,[["__scopeId","data-v-fd7f70d3"]]),Y2={},X2={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"};function q2(i,s){return A(),F("svg",X2,[...s[0]||(s[0]=[M("path",{d:"M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"},null,-1)])])}const J2=de(Y2,[["render",q2]]),Q2=["role"],Z2={key:1,class:"items"},eE=fe({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(i){const s=i,{collapsed:n,collapsible:t,isLink:e,isActiveLink:r,hasActiveLink:a,hasChildren:o,toggle:l}=tb(he(()=>s.item)),u=he(()=>o.value?"section":"div"),c=he(()=>e.value?"a":"div"),f=he(()=>o.value?s.depth+2===7?"p":`h${s.depth+2}`:"p"),h=he(()=>e.value?void 0:"button"),d=he(()=>[[`level-${s.depth}`],{collapsible:t.value},{collapsed:n.value},{"is-link":e.value},{"is-active":r.value},{"has-active":a.value}]);function v(){!s.item.link&&l()}function m(){s.item.link&&l()}return(p,S)=>{const C=gi("VPSidebarItem",!0);return A(),ye($r(u.value),{class:be(["VPSidebarItem",d.value])},{default:ae(()=>[i.item.text?(A(),F("div",{key:0,class:"item",role:h.value,onClick:v},[S[0]||(S[0]=M("div",{class:"indicator"},null,-1)),ee(_i,{tag:c.value,class:"link",href:i.item.link},{default:ae(()=>[(A(),ye($r(f.value),{class:"text",innerHTML:i.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href"]),i.item.collapsed!=null?(A(),F("div",{key:0,class:"caret",role:"button",onClick:m},[ee(J2,{class:"caret-icon"})])):le("",!0)],8,Q2)):le("",!0),i.item.items&&i.item.items.length?(A(),F("div",Z2,[i.depth<5?(A(!0),F(ke,{key:0},Lt(i.item.items,_=>(A(),ye(C,{key:_.text,item:_,depth:i.depth+1},null,8,["item","depth"]))),128)):le("",!0)])):le("",!0)]),_:1},8,["class"])}}});const tE=de(eE,[["__scopeId","data-v-fc103e16"]]),nE={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},iE=fe({__name:"VPSidebar",props:{open:{type:Boolean}},setup(i){const{sidebarGroups:s,hasSidebar:n}=Qn(),t=i;let e=Be(null);function r(){ov(e.value,{reserveScrollBarGap:!0})}function a(){lv()}return ip(async()=>{var o;t.open?(r(),(o=e.value)==null||o.focus()):a()}),(o,l)=>j(n)?(A(),F("aside",{key:0,class:be(["VPSidebar",{open:i.open}]),ref_key:"navEl",ref:e,onClick:l[0]||(l[0]=El(()=>{},["stop"]))},[l[2]||(l[2]=M("div",{class:"curtain"},null,-1)),M("nav",nE,[l[1]||(l[1]=M("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),X(o.$slots,"sidebar-nav-before",{},void 0,!0),(A(!0),F(ke,null,Lt(j(s),u=>(A(),F("div",{key:u.text,class:"group"},[ee(tE,{item:u,depth:0},null,8,["item"])]))),128)),X(o.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):le("",!0)}});const rE=de(iE,[["__scopeId","data-v-7e01172f"]]),sE={},aE={class:"VPPage"};function oE(i,s){const n=gi("Content");return A(),F("div",aE,[ee(n)])}const lE=de(sE,[["render",oE]]),uE=fe({__name:"VPButton",props:{tag:{},size:{},theme:{},text:{},href:{}},setup(i){const s=i,n=he(()=>[s.size??"medium",s.theme??"brand"]),t=he(()=>s.href&&Ma.test(s.href)),e=he(()=>s.tag?s.tag:s.href?"a":"button");return(r,a)=>(A(),ye($r(e.value),{class:be(["VPButton",n.value]),href:i.href?j(es)(i.href):void 0,target:t.value?"_blank":void 0,rel:t.value?"noreferrer":void 0},{default:ae(()=>[ht(Ne(i.text),1)]),_:1},8,["class","href","target","rel"]))}});const cE=de(uE,[["__scopeId","data-v-1bb050ce"]]),fE={class:"container"},hE={class:"main"},dE={key:0,class:"name"},vE={class:"clip"},pE={key:1,class:"text"},gE={key:2,class:"tagline"},mE={key:3,class:"actions"},yE={key:0,class:"image"},_E={class:"image-container"},bE=fe({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(i){const s=pn("hero-image-slot-exists");return(n,t)=>(A(),F("div",{class:be(["VPHero",{"has-image":i.image||j(s)}])},[M("div",fE,[M("div",hE,[i.name?(A(),F("h1",dE,[M("span",vE,Ne(i.name),1)])):le("",!0),i.text?(A(),F("p",pE,Ne(i.text),1)):le("",!0),i.tagline?(A(),F("p",gE,Ne(i.tagline),1)):le("",!0),i.actions?(A(),F("div",mE,[(A(!0),F(ke,null,Lt(i.actions,e=>(A(),F("div",{key:e.link,class:"action"},[ee(cE,{tag:"a",size:"medium",theme:e.theme,text:e.text,href:e.link},null,8,["theme","text","href"])]))),128))])):le("",!0)]),i.image||j(s)?(A(),F("div",yE,[M("div",_E,[t[0]||(t[0]=M("div",{class:"image-bg"},null,-1)),X(n.$slots,"home-hero-image",{},()=>[i.image?(A(),ye(Gl,{key:0,class:"image-src",image:i.image},null,8,["image"])):le("",!0)],!0)])])):le("",!0)])],2))}});const SE=de(bE,[["__scopeId","data-v-64089f2c"]]),EE=fe({__name:"VPHomeHero",setup(i){const{frontmatter:s}=Xe();return(n,t)=>j(s).hero?(A(),ye(SE,{key:0,class:"VPHomeHero",name:j(s).hero.name,text:j(s).hero.text,tagline:j(s).hero.tagline,image:j(s).hero.image,actions:j(s).hero.actions},{"home-hero-image":ae(()=>[X(n.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):le("",!0)}}),kE={},wE={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function TE(i,s){return A(),F("svg",wE,[...s[0]||(s[0]=[M("path",{d:"M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"},null,-1)])])}const CE=de(kE,[["render",TE]]),PE={class:"box"},AE={key:1,class:"icon"},xE=["innerHTML"],LE=["innerHTML"],IE={key:2,class:"link-text"},DE={class:"link-text-value"},OE=fe({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{}},setup(i){return(s,n)=>(A(),ye(_i,{class:"VPFeature",href:i.link,"no-icon":!0},{default:ae(()=>[M("article",PE,[typeof i.icon=="object"?(A(),ye(Gl,{key:0,image:i.icon,alt:i.icon.alt,height:i.icon.height,width:i.icon.width},null,8,["image","alt","height","width"])):i.icon?(A(),F("div",AE,Ne(i.icon),1)):le("",!0),M("h2",{class:"title",innerHTML:i.title},null,8,xE),M("p",{class:"details",innerHTML:i.details},null,8,LE),i.linkText?(A(),F("div",IE,[M("p",DE,[ht(Ne(i.linkText)+" ",1),ee(CE,{class:"link-text-icon"})])])):le("",!0)])]),_:1},8,["href"]))}});const RE=de(OE,[["__scopeId","data-v-0c0f3b81"]]),ME={key:0,class:"VPFeatures"},NE={class:"container"},BE={class:"items"},FE=fe({__name:"VPFeatures",props:{features:{}},setup(i){const s=i,n=he(()=>{const t=s.features.length;if(t){if(t===2)return"grid-2";if(t===3)return"grid-3";if(t%3===0)return"grid-6";if(t%2===0)return"grid-4"}else return});return(t,e)=>i.features?(A(),F("div",ME,[M("div",NE,[M("div",BE,[(A(!0),F(ke,null,Lt(i.features,r=>(A(),F("div",{key:r.title,class:be(["item",[n.value]])},[ee(RE,{icon:r.icon,title:r.title,details:r.details,link:r.link,"link-text":r.linkText},null,8,["icon","title","details","link","link-text"])],2))),128))])])])):le("",!0)}});const UE=de(FE,[["__scopeId","data-v-7c0078b5"]]),VE=fe({__name:"VPHomeFeatures",setup(i){const{frontmatter:s}=Xe();return(n,t)=>j(s).features?(A(),ye(UE,{key:0,class:"VPHomeFeatures",features:j(s).features},null,8,["features"])):le("",!0)}}),HE={class:"VPHome"},$E=fe({__name:"VPHome",setup(i){return(s,n)=>{const t=gi("Content");return A(),F("div",HE,[X(s.$slots,"home-hero-before",{},void 0,!0),ee(EE,null,{"home-hero-image":ae(()=>[X(s.$slots,"home-hero-image",{},void 0,!0)]),_:3}),X(s.$slots,"home-hero-after",{},void 0,!0),X(s.$slots,"home-features-before",{},void 0,!0),ee(VE),X(s.$slots,"home-features-after",{},void 0,!0),ee(t)])}}});const GE=de($E,[["__scopeId","data-v-9961dc9b"]]);function jE(){const{hasSidebar:i}=Qn(),s=el("(min-width: 960px)"),n=el("(min-width: 1280px)");return{isAsideEnabled:he(()=>!n.value&&!s.value?!1:i.value?n.value:s.value)}}const zE=71;function WE(i,s){if(i===!1)return[];let n=[];return document.querySelectorAll("h2, h3, h4, h5, h6").forEach(t=>{if(t.textContent&&t.id){let e=t.textContent;if(s===!1){const r=t.cloneNode(!0);for(const a of r.querySelectorAll(".VPBadge"))a.remove();e=r.textContent||""}n.push({level:Number(t.tagName[1]),title:e.replace(/\s+#\s*$/,""),link:`#${t.id}`})}}),KE(n,i)}function KE(i,s){const n=(typeof s=="object"&&!Array.isArray(s)?s.level:s)||2;return YE(i,typeof n=="number"?[n,n]:n==="deep"?[2,6]:n)}function YE(i,s){const n=[];return i=i.map(t=>({...t})),i.forEach((t,e)=>{t.level>=s[0]&&t.level<=s[1]&&XE(e,i,s)&&n.push(t)}),n}function XE(i,s,n){if(i===0)return!0;const t=s[i];for(let e=i-1;e>=0;e--){const r=s[e];if(r.level<t.level&&r.level>=n[0]&&r.level<=n[1])return r.children==null&&(r.children=[]),r.children.push(t),!1}return!0}function qE(i,s){const{isAsideEnabled:n}=jE(),t=J1(r,100);let e=null;Bt(()=>{requestAnimationFrame(r),window.addEventListener("scroll",t)}),pl(()=>{a(location.hash)}),_n(()=>{window.removeEventListener("scroll",t)});function r(){if(!n.value)return;const o=[].slice.call(i.value.querySelectorAll(".outline-link")),l=[].slice.call(document.querySelectorAll(".content .header-anchor")).filter(d=>o.some(v=>v.hash===d.hash&&d.offsetParent!==null)),u=window.scrollY,c=window.innerHeight,f=document.body.offsetHeight,h=Math.abs(u+c-f)<1;if(l.length&&h){a(l[l.length-1].hash);return}for(let d=0;d<l.length;d++){const v=l[d],m=l[d+1],[p,S]=JE(d,v,m);if(p){a(S);return}}}function a(o){e&&e.classList.remove("active"),o!==null&&(e=i.value.querySelector(`a[href="${decodeURIComponent(o)}"]`));const l=e;l?(l.classList.add("active"),s.value.style.top=l.offsetTop+33+"px",s.value.style.opacity="1"):(s.value.style.top="33px",s.value.style.opacity="0")}}function Zc(i){return i.parentElement.offsetTop-zE}function JE(i,s,n){const t=window.scrollY;return i===0&&t===0?[!0,null]:t<Zc(s)?[!1,null]:!n||t<Zc(n)?[!0,s.hash]:[!1,null]}const QE=["href"],ZE=fe({__name:"VPDocAsideOutlineItem",props:{headers:{},onClick:{type:Function},root:{type:Boolean}},setup(i){return(s,n)=>{const t=gi("VPDocAsideOutlineItem",!0);return A(),F("ul",{class:be(i.root?"root":"nested")},[(A(!0),F(ke,null,Lt(i.headers,({children:e,link:r,title:a})=>(A(),F("li",null,[M("a",{class:"outline-link",href:r,onClick:n[0]||(n[0]=(...o)=>i.onClick&&i.onClick(...o))},Ne(a),9,QE),e!=null&&e.length?(A(),ye(t,{key:0,headers:e,onClick:i.onClick},null,8,["headers","onClick"])):le("",!0)]))),256))],2)}}});const ek=de(ZE,[["__scopeId","data-v-08402644"]]),tk={class:"content"},nk={class:"outline-title"},ik={"aria-labelledby":"doc-outline-aria-label"},rk=fe({__name:"VPDocAsideOutline",setup(i){const{frontmatter:s,theme:n}=Xe(),t=he(()=>s.value.outline??n.value.outline),e=pn("onContentUpdated");e.value=()=>{r.value=WE(t.value,n.value.outlineBadges)};const r=Be([]),a=he(()=>r.value.length>0),o=Be(),l=Be();qE(o,l);function u({target:c}){const f="#"+c.href.split("#")[1],h=document.querySelector(decodeURIComponent(f));h==null||h.focus()}return(c,f)=>(A(),F("div",{class:be(["VPDocAsideOutline",{"has-outline":a.value}]),ref_key:"container",ref:o},[M("div",tk,[M("div",{class:"outline-marker",ref_key:"marker",ref:l},null,512),M("div",nk,Ne(typeof j(n).outline=="object"&&!Array.isArray(j(n).outline)&&j(n).outline.label||j(n).outlineTitle||"On this page"),1),M("nav",ik,[f[0]||(f[0]=M("span",{class:"visually-hidden",id:"doc-outline-aria-label"}," Table of Contents for current page ",-1)),ee(ek,{headers:r.value,root:!0,onClick:u},null,8,["headers"])])])],2))}});const sk=de(rk,[["__scopeId","data-v-766cfb1f"]]),ak={class:"VPDocAsideCarbonAds"},ok=fe({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(i){const s=()=>null;return(n,t)=>(A(),F("div",ak,[ee(j(s),{"carbon-ads":i.carbonAds},null,8,["carbon-ads"])]))}}),lk={class:"VPDocAside"},uk=fe({__name:"VPDocAside",setup(i){const{theme:s}=Xe();return(n,t)=>(A(),F("div",lk,[X(n.$slots,"aside-top",{},void 0,!0),X(n.$slots,"aside-outline-before",{},void 0,!0),ee(sk),X(n.$slots,"aside-outline-after",{},void 0,!0),t[0]||(t[0]=M("div",{class:"spacer"},null,-1)),X(n.$slots,"aside-ads-before",{},void 0,!0),j(s).carbonAds?(A(),ye(ok,{key:0,"carbon-ads":j(s).carbonAds},null,8,["carbon-ads"])):le("",!0),X(n.$slots,"aside-ads-after",{},void 0,!0),X(n.$slots,"aside-bottom",{},void 0,!0)]))}});const ck=de(uk,[["__scopeId","data-v-fd0ea04b"]]);function fk(){const{theme:i,page:s}=Xe();return he(()=>{const{text:n="Edit this page",pattern:t=""}=i.value.editLink||{},{relativePath:e}=s.value;return{url:t.replace(/:path/g,e),text:n}})}function hk(){const{page:i,theme:s,frontmatter:n}=Xe();return he(()=>{const t=tv(s.value.sidebar,i.value.relativePath),e=Z1(t),r=e.findIndex(a=>Gi(i.value.relativePath,a.link));return{prev:n.value.prev?{...e[r-1],text:n.value.prev}:e[r-1],next:n.value.next?{...e[r+1],text:n.value.next}:e[r+1]}})}const dk={},vk={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function pk(i,s){return A(),F("svg",vk,[...s[0]||(s[0]=[M("path",{d:"M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"},null,-1),M("path",{d:"M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"},null,-1)])])}const gk=de(dk,[["render",pk]]),mk={class:"VPLastUpdated"},yk=["datetime"],_k=fe({__name:"VPDocFooterLastUpdated",setup(i){const{theme:s,page:n}=Xe(),t=he(()=>new Date(n.value.lastUpdated)),e=he(()=>t.value.toISOString()),r=Be("");return Bt(()=>{Mi(()=>{r.value=t.value.toLocaleString(window.navigator.language)})}),(a,o)=>(A(),F("p",mk,[ht(Ne(j(s).lastUpdatedText||"Last updated")+": ",1),M("time",{datetime:e.value},Ne(r.value),9,yk)]))}});const bk=de(_k,[["__scopeId","data-v-bd3048ab"]]),Sk={key:0,class:"VPDocFooter"},Ek={key:0,class:"edit-info"},kk={key:0,class:"edit-link"},wk={key:1,class:"last-updated"},Tk={key:1,class:"prev-next"},Ck={class:"pager"},Pk=["href"],Ak=["innerHTML"],xk=["innerHTML"],Lk=["href"],Ik=["innerHTML"],Dk=["innerHTML"],Ok=fe({__name:"VPDocFooter",setup(i){const{theme:s,page:n,frontmatter:t}=Xe(),e=fk(),r=hk(),a=he(()=>s.value.editLink&&t.value.editLink!==!1),o=he(()=>n.value.lastUpdated&&t.value.lastUpdated!==!1),l=he(()=>a.value||o.value||r.value.prev||r.value.next);return(u,c)=>{var f,h;return l.value?(A(),F("footer",Sk,[a.value||o.value?(A(),F("div",Ek,[a.value?(A(),F("div",kk,[ee(_i,{class:"edit-link-button",href:j(e).url,"no-icon":!0},{default:ae(()=>[ee(gk,{class:"edit-link-icon"}),ht(" "+Ne(j(e).text),1)]),_:1},8,["href"])])):le("",!0),o.value?(A(),F("div",wk,[ee(bk)])):le("",!0)])):le("",!0),j(r).prev||j(r).next?(A(),F("div",Tk,[M("div",Ck,[j(r).prev?(A(),F("a",{key:0,class:"pager-link prev",href:j(es)(j(r).prev.link)},[M("span",{class:"desc",innerHTML:((f=j(s).docFooter)==null?void 0:f.prev)||"Previous page"},null,8,Ak),M("span",{class:"title",innerHTML:j(r).prev.text},null,8,xk)],8,Pk)):le("",!0)]),M("div",{class:be(["pager",{"has-prev":j(r).prev}])},[j(r).next?(A(),F("a",{key:0,class:"pager-link next",href:j(es)(j(r).next.link)},[M("span",{class:"desc",innerHTML:((h=j(s).docFooter)==null?void 0:h.next)||"Next page"},null,8,Ik),M("span",{class:"title",innerHTML:j(r).next.text},null,8,Dk)],8,Lk)):le("",!0)],2)])):le("",!0)])):le("",!0)}}});const Rk=de(Ok,[["__scopeId","data-v-553dd534"]]),Mk={class:"container"},Nk={key:0,class:"aside"},Bk={class:"aside-container"},Fk={class:"aside-content"},Uk={class:"content"},Vk={class:"content-container"},Hk={class:"main"},$k=fe({__name:"VPDoc",setup(i){const s=yi(),{hasSidebar:n,hasAside:t}=Qn(),e=he(()=>s.path.replace(/[./]+/g,"_").replace(/_html$/,"")),r=Be();return lr("onContentUpdated",r),(a,o)=>{const l=gi("Content");return A(),F("div",{class:be(["VPDoc",{"has-sidebar":j(n),"has-aside":j(t)}])},[M("div",Mk,[j(t)?(A(),F("div",Nk,[o[0]||(o[0]=M("div",{class:"aside-curtain"},null,-1)),M("div",Bk,[M("div",Fk,[ee(ck,null,{"aside-top":ae(()=>[X(a.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":ae(()=>[X(a.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":ae(()=>[X(a.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":ae(()=>[X(a.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":ae(()=>[X(a.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":ae(()=>[X(a.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])])):le("",!0),M("div",Uk,[M("div",Vk,[X(a.$slots,"doc-before",{},void 0,!0),M("main",Hk,[ee(l,{class:be(["vp-doc",e.value]),onContentUpdated:r.value},null,8,["class","onContentUpdated"])]),X(a.$slots,"doc-footer-before",{},void 0,!0),ee(Rk),X(a.$slots,"doc-after",{},void 0,!0)])])])],2)}}});const Gk=de($k,[["__scopeId","data-v-a9d4a020"]]),jk=fe({__name:"VPContent",setup(i){const s=yi(),{frontmatter:n}=Xe(),{hasSidebar:t}=Qn(),e=pn("NotFound");return(r,a)=>(A(),F("div",{class:be(["VPContent",{"has-sidebar":j(t),"is-home":j(n).layout==="home"}]),id:"VPContent"},[j(s).component===j(e)?(A(),ye(j(e),{key:0})):j(n).layout==="page"?(A(),ye(lE,{key:1})):j(n).layout==="home"?(A(),ye(GE,{key:2},{"home-hero-before":ae(()=>[X(r.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-image":ae(()=>[X(r.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":ae(()=>[X(r.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":ae(()=>[X(r.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":ae(()=>[X(r.$slots,"home-features-after",{},void 0,!0)]),_:3})):(A(),ye(Gk,{key:3},{"doc-footer-before":ae(()=>[X(r.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":ae(()=>[X(r.$slots,"doc-before",{},void 0,!0)]),"doc-after":ae(()=>[X(r.$slots,"doc-after",{},void 0,!0)]),"aside-top":ae(()=>[X(r.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":ae(()=>[X(r.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":ae(()=>[X(r.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":ae(()=>[X(r.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":ae(()=>[X(r.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":ae(()=>[X(r.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}});const zk=de(jk,[["__scopeId","data-v-089c4240"]]),Wk={class:"container"},Kk=["innerHTML"],Yk=["innerHTML"],Xk=fe({__name:"VPFooter",setup(i){const{theme:s}=Xe(),{hasSidebar:n}=Qn();return(t,e)=>j(s).footer?(A(),F("footer",{key:0,class:be(["VPFooter",{"has-sidebar":j(n)}])},[M("div",Wk,[j(s).footer.message?(A(),F("p",{key:0,class:"message",innerHTML:j(s).footer.message},null,8,Kk)):le("",!0),j(s).footer.copyright?(A(),F("p",{key:1,class:"copyright",innerHTML:j(s).footer.copyright},null,8,Yk)):le("",!0)])],2)):le("",!0)}});const qk=de(Xk,[["__scopeId","data-v-72a69485"]]),Jk={key:0,class:"Layout"},Qk=fe({__name:"Layout",setup(i){const{isOpen:s,open:n,close:t}=Qn(),e=yi();Qt(()=>e.path,t),eb(s,t),lr("close-sidebar",t),lr("is-sidebar-open",s);const{frontmatter:r}=Xe(),a=Ep(),o=he(()=>!!a["home-hero-image"]);return lr("hero-image-slot-exists",o),(l,u)=>{const c=gi("Content");return j(r).layout!==!1?(A(),F("div",Jk,[X(l.$slots,"layout-top",{},void 0,!0),ee(ib),ee(ab,{class:"backdrop",show:j(s),onClick:j(t)},null,8,["show","onClick"]),ee(F2,null,{"nav-bar-title-before":ae(()=>[X(l.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":ae(()=>[X(l.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":ae(()=>[X(l.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":ae(()=>[X(l.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":ae(()=>[X(l.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":ae(()=>[X(l.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),ee(K2,{open:j(s),onOpenMenu:j(n)},null,8,["open","onOpenMenu"]),ee(rE,{open:j(s)},{"sidebar-nav-before":ae(()=>[X(l.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":ae(()=>[X(l.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),ee(zk,null,{"home-hero-before":ae(()=>[X(l.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-image":ae(()=>[X(l.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":ae(()=>[X(l.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":ae(()=>[X(l.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":ae(()=>[X(l.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":ae(()=>[X(l.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":ae(()=>[X(l.$slots,"doc-before",{},void 0,!0)]),"doc-after":ae(()=>[X(l.$slots,"doc-after",{},void 0,!0)]),"aside-top":ae(()=>[X(l.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":ae(()=>[X(l.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":ae(()=>[X(l.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":ae(()=>[X(l.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":ae(()=>[X(l.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":ae(()=>[X(l.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),ee(qk),X(l.$slots,"layout-bottom",{},void 0,!0)])):(A(),ye(c,{key:1}))}}});const Zk=de(Qk,[["__scopeId","data-v-98a165fd"]]),ew={class:"NotFound"},tw={class:"action"},nw=["href"],iw=fe({__name:"NotFound",setup(i){const{site:s}=Xe(),{localeLinks:n}=cs({removeCurrent:!1}),t=Be("/");return Bt(()=>{var r;const e=window.location.pathname.replace(s.value.base,"").replace(/(^.*?\/).*$/,"/$1");n.value.length&&(t.value=((r=n.value.find(({link:a})=>a.startsWith(e)))==null?void 0:r.link)||n.value[0].link)}),(e,r)=>(A(),F("div",ew,[r[0]||(r[0]=M("p",{class:"code"},"404",-1)),r[1]||(r[1]=M("h1",{class:"title"},"PAGE NOT FOUND",-1)),r[2]||(r[2]=M("div",{class:"divider"},null,-1)),r[3]||(r[3]=M("blockquote",{class:"quote"}," But if you don't change your direction, and if you keep looking, you may end up where you are heading. ",-1)),M("div",tw,[M("a",{class:"link",href:j(Zr)(t.value),"aria-label":"go to home"}," Take me home ",8,nw)])]))}});const rw=de(iw,[["__scopeId","data-v-81db79e9"]]);const sw={Layout:Zk,NotFound:rw,enhanceApp:({app:i})=>{i.component("Badge",E1)}};const vr={...sw,enhanceApp:async({app:i})=>{for(const s in Uc){const n=Uc[s];n&&n.install&&i.use(n)}}};function aw(i,s){let n=[],t=!0;const e=r=>{if(t){t=!1;return}n.forEach(a=>document.head.removeChild(a)),n=[],r.forEach(a=>{const o=ow(a);document.head.appendChild(o),n.push(o)})};Mi(()=>{const r=i.data,a=s.value,o=r&&r.description,l=r&&r.frontmatter.head||[];document.title=Wd(a,r),document.querySelector("meta[name=description]").setAttribute("content",o||a.description),e(Kd(a.head,uw(l)))})}function ow([i,s,n]){const t=document.createElement(i);for(const e in s)t.setAttribute(e,s[e]);return n&&(t.innerHTML=n),t}function lw(i){return i[0]==="meta"&&i[1]&&i[1].name==="description"}function uw(i){return i.filter(s=>!lw(s))}const ko=new Set,cv=()=>document.createElement("link"),cw=i=>{const s=cv();s.rel="prefetch",s.href=i,document.head.appendChild(s)},fw=i=>{const s=new XMLHttpRequest;s.open("GET",i,s.withCredentials=!0),s.send()};let Is;const hw=Pt&&(Is=cv())&&Is.relList&&Is.relList.supports&&Is.relList.supports("prefetch")?cw:fw;function dw(){if(!Pt||!window.IntersectionObserver)return;let i;if((i=navigator.connection)&&(i.saveData||/2g/.test(i.effectiveType)))return;const s=window.requestIdleCallback||setTimeout;let n=null;const t=()=>{n&&n.disconnect(),n=new IntersectionObserver(r=>{r.forEach(a=>{if(a.isIntersecting){const o=a.target;n.unobserve(o);const{pathname:l}=o;if(!ko.has(l)){ko.add(l);const u=qd(l);hw(u)}}})}),s(()=>{document.querySelectorAll("#app a").forEach(r=>{const{target:a}=r,{hostname:o,pathname:l}=new URL(r.href instanceof SVGAnimatedString?r.href.animVal:r.href,r.baseURI),u=l.match(/\.\w+$/);u&&u[0]!==".html"||a!=="_blank"&&o===location.hostname&&(l!==location.pathname?n.observe(r):ko.add(l))})})};Bt(t);const e=yi();Qt(()=>e.path,t),_n(()=>{n&&n.disconnect()})}const vw=fe({setup(i,{slots:s}){const n=Be(!1);return Bt(()=>{n.value=!0}),()=>n.value&&s.default?s.default():null}});function pw(){if(Pt){const i=new Map;window.addEventListener("click",s=>{var t;const n=s.target;if(n.matches('div[class*="language-"] > button.copy')){const e=n.parentElement,r=(t=n.nextElementSibling)==null?void 0:t.nextElementSibling;if(!e||!r)return;const a=/language-(shellscript|shell|bash|sh|zsh)/.test(e.className);let o="";r.querySelectorAll("span.line:not(.diff.remove)").forEach(l=>o+=(l.textContent||"")+`
`),o=o.slice(0,-1),a&&(o=o.replace(/^ *(\$|>) /gm,"").trim()),gw(o).then(()=>{n.classList.add("copied"),clearTimeout(i.get(n));const l=setTimeout(()=>{n.classList.remove("copied"),n.blur(),i.delete(n)},2e3);i.set(n,l)})}})}}async function gw(i){try{return navigator.clipboard.writeText(i)}catch{const s=document.createElement("textarea"),n=document.activeElement;s.value=i,s.setAttribute("readonly",""),s.style.contain="strict",s.style.position="absolute",s.style.left="-9999px",s.style.fontSize="12pt";const t=document.getSelection(),e=t?t.rangeCount>0&&t.getRangeAt(0):null;document.body.appendChild(s),s.select(),s.selectionStart=0,s.selectionEnd=i.length,document.execCommand("copy"),document.body.removeChild(s),e&&(t.removeAllRanges(),t.addRange(e)),n&&n.focus()}}function mw(){Pt&&window.addEventListener("click",i=>{var n,t;const s=i.target;if(s.matches(".vp-code-group input")){const e=(n=s.parentElement)==null?void 0:n.parentElement,r=Array.from((e==null?void 0:e.querySelectorAll("input"))||[]).indexOf(s),a=e==null?void 0:e.querySelector('div[class*="language-"].active'),o=(t=e==null?void 0:e.querySelectorAll('div[class*="language-"]'))==null?void 0:t[r];a&&o&&a!==o&&(a.classList.remove("active"),o.classList.add("active"))}})}const fv=vr.NotFound||(()=>"404 Not Found"),yw=fe({name:"VitePressApp",setup(){const{site:i}=Xd();return Bt(()=>{Mi(()=>{document.documentElement.lang=i.value.lang,document.documentElement.dir=i.value.dir})}),dw(),pw(),mw(),vr.setup&&vr.setup(),()=>Xs(vr.Layout)}});async function _w(){const i=Sw(),s=bw();s.provide(Jd,i);const n=I1(i.route);return s.provide(Yd,n),s.provide("NotFound",fv),s.component("Content",N1),s.component("ClientOnly",vw),Object.defineProperty(s.config.globalProperties,"$frontmatter",{get(){return n.frontmatter.value}}),vr.enhanceApp&&await vr.enhanceApp({app:s,router:i,siteData:ui}),{app:s,router:i,data:n}}function bw(){return Og(yw)}function Sw(){let i=Pt,s;return R1(n=>{let t=qd(n);return i&&(s=t),(i||s===t)&&(t=t.replace(/\.js$/,".lean.js")),Pt&&(i=!1),b1(()=>import(t),[])},fv)}Pt&&_w().then(({app:i,router:s,data:n})=>{s.go().then(()=>{aw(s.route,n.site),i.mount("#app")})});export{Ih as L,de as _,M as a,ht as b,F as c,_w as createApp,ee as d,Xp as e,Be as f,Tl as g,ye as h,le as i,A as o,gi as r,Mh as s,j as u,ae as w};
